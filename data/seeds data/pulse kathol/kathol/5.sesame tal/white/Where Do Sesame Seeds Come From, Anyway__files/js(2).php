/* From: production-mt-wfe-48-114-use1 : 8996 */
(function(a,k){a.huff=({init:function(){this.jquery=k?jQuery:jQuery.noConflict();this.jquery.ajaxSetup({cache:true});this.events={};this.versions=undefined;this.styles={};this.units={};this.unit("dom/ready",this.jquery);this.unit("jquery",this.jquery,true);var c=this;window.onerror=function(l,i,e){c.error(l?new Error(l,i,e):window.error)};this.beta=(location.host.toLowerCase().indexOf("beta")>0||location.host.toLowerCase().indexOf("amazon")>0);this.blogger=location.host.toLowerCase().indexOf("blogger")===0;this.editorial=location.host.toLowerCase().indexOf("editorial")===0;this.nonminified=location.search.indexOf("no-min=")>0?"no-min=1&":"";this.host=this.beta||this.editorial||this.blogger?location.host:"s.huffpost.com";this.path={js:location.protocol+"//"+this.host+"/assets/js.php?"+this.nonminified+"f=",css:location.protocol+"//"+this.host+"/assets/css.php?"+this.nonminified+"f="};this.env={async:document.createElement("script").async===true};(this.env.webkit=/AppleWebKit\//.test(navigator.userAgent))||(this.env.ie=/MSIE/.test(navigator.userAgent))||(this.env.opera=/Opera/.test(navigator.userAgent))||(this.env.gecko=/Gecko\//.test(navigator.userAgent))||(this.env.unknown=true);this.console=true;this.waiting={};return this},run:function(c){try{"function"===typeof c&&c.call(this)}catch(i){this.error(i)}},ready:function(e){this.run(function(){this.jquery(e)})},log:function(){this.pass("log",arguments)},debug:function(){this.pass("debug",arguments)},error:function(c){this.pass("error",arguments)},unit:function(c,m,l){var i=this,n=function(e){i.units[c]=e;i.fire("load/"+c+".js");i.emit("unit",c,e)};try{i.units[c]=false;if("function"===typeof m){l?n(m):new m(n)}else{l||"function"!==typeof m.init?n(m):m.init(n)}}catch(o){i.error(o);n()}},use:function(){var l=this,c=[],e=Array.prototype.slice.call(arguments,0),o="function"===typeof e[e.length-1]?e.pop():null,m=e.length,n=[],i=function(p,q){c[p]=q;if(--m===0){try{"function"===typeof o&&o.apply(l,c)}catch(s){l.error(s)}}};setTimeout(function(){for(var p=0;p<e.length;p++){(function(q,r){if(q in l.units){if(false===l.units[q]){l.waiting[q]=true;l.on("load/"+q+".js",function(){delete l.waiting[q];i(r,l.units[q])})}else{i(r,l.units[q])}}else{n.push("_"+q+".js");l.units[q]=false;l.waiting[q]=true;l.on("load/"+q+".js",function(){delete l.waiting[q];i(r,l.units[q])})}})(e[p],p)}if(n.length){l.vers(n,function(q){l.jquery.getScript(l.path.js+n.join(",")+q)})}},0)},js:function(){var i=this,e=Array.prototype.slice.call(arguments,0),l="function"===typeof e[e.length-1]&&e.pop();i.vers(e,function(c){"object"===typeof e&&(e=e.join(","));i.jquery.getScript(i.path.js+e+c,l)})},css:function(){arguments=Array.prototype.slice.call(arguments,0);var m=this,o=[],p="function"===typeof arguments[arguments.length-1]?arguments.pop():null,n=arguments.length,e=function(){if(--n===0){try{for(var q=0;q<o.length;q++){m.styles[o[q]]=true;m.fire("load/"+o[q]+".css")}"function"===typeof p&&p()}catch(r){m.error(r)}}};for(var l=0;l<arguments.length;l++){var c=arguments[l];switch(m.styles[c]){case true:e();break;case false:m.on("load/"+c+".css",e);break;default:o.push(c);m.styles[c]=false;m.on("load/"+c+".css",e)}}if(o.length===0){return}m.vers(o,".css",function(q){var s,i=0,r=m.path.css+o.join(".css,")+".css"+q;s=m.jquery("<link>").attr({href:r,rel:"stylesheet",charset:"utf-8"});if(m.env.webkit||m.env.gecko){(function(){for(var u=document.styleSheets,t=u.length;--t>=0;){if(u[t].href===r){return e()}}++i<200?setTimeout(arguments.callee,50):e()})()}else{s[0].onload=s[0].onerror=e}s.appendTo("head")})},on:function(c,e){this.events[c]=this.events[c]||(this.events[c]=[]);this.events[c].push(e);return this},off:function(c){delete this.events[c];return this},once:function(e,i){this.events[e]=this.events[e]||(this.events[e]=[]);var c=this.events.length;this.events[e].push(function(){i();this.events[e].splice(c,1);if(this.events[e].length===0){delete this.events[e]}})},emit:function(){arguments=Array.prototype.slice.call(arguments,0);var l=arguments.shift();if(undefined===this.events[l]){return}for(var c=0;c<this.events[l].length;c++){try{this.events[l][c].apply(this,arguments)}catch(m){this.error(m)}}},pass:function(e,c){c=Array.prototype.slice.call(c,0);c.unshift(e);this.emit.apply(this,c)},fire:function(){this.emit.apply(this,arguments);delete this.events[name]},v:function(c){if(undefined===c){this.versions=false;return}if("object"===typeof this.versions){for(var e in c){if(c.hasOwnProperty(e)){this.versions[e]=c[e]}}}else{this.versions=c;this.fire("load/deploy_config.json")}},vers:function(n,m,o){var l=this,e=arguments,c=+new Date();if(l.beta){return(o||m||function(p){return p})("&r"+c)}if(undefined===l.versions){l.versions=false;l.jquery.ajax({url:"/deploy_config.json?"+(l.vv?"v"+l.vv:"r"+c),success:function(p){l.v(p);e.callee.apply(l,e)}})}else{if(l.versions===false){l.on("load/deploy_config.json",function(){e.callee.apply(l,e)})}else{if(undefined===o){o=m,m=undefined}var i="&v="+l.versions.deploy_seq;return"function"===typeof o?o(i):i}}}}).init();if(!k){try{var j=a.console,g=function(){};if(a.console){a.console=undefined;g.prototype=j}var f=a.console=new g;var b=["assert","debug","error","info","log","warn"];for(var d=b.length;d--;){(function(c){a.console[c]=function(){try{a.console=j;a.huff.console&&j&&c in j&&j[c].apply(j,arguments);a.huff.pass(c,arguments);a.console=f}catch(i){}}})(b[d])}}catch(h){a.huff.error(h)}}})(window,window.IS_CHROMEAPP||window.IS_NEWSGLIDE||window.KEEP_$);
var _port=document.location.port;var HPConfig={current_vertical_name:"",current_web_domain:document.location.hostname+((!_port||_port==""||_port==80)?"":":"+_port),current_web_address:document.location.protocol+"//"+document.location.hostname+((!_port||_port==""||_port==80)?"":":"+_port),timestamp_for_clearing_js:0,slideshow_mode:0,blog_id:0,comments_update_interval:0,comments_update_for_all_users:false,wide_format:false,enable_fb_widgets:false,page_data:{},entry_design:"",ipad_application:false,entry_design:"",hp_static_domain:"",display_domain:"",load_big_slideshow_from:0,current_vertical_color:"#058B7B",current_vertical_color_light:"#005F4C",site:false,huffsite:"",terms_link:"",privacy_link:"",fb_page_id:"",fb_vertical_name:"",fb_vertical_handle:""};
/*
Copyright (c) 2008 Ryan Grove <ryan@wonko.com>. All rights reserved.
Licensed under the BSD License:
http://www.opensource.org/licenses/bsd-license.html
Version: 1.0.4
*/
var LazyLoad=function(){var E=document,D=null,A=[],C;function B(){if(C){return }var G=navigator.userAgent,F;C={gecko:0,ie:0,webkit:0};F=G.match(/AppleWebKit\/(\S*)/);if(F&&F[1]){C.webkit=parseFloat(F[1])}else{F=G.match(/MSIE\s([^;]*)/);if(F&&F[1]){C.ie=parseFloat(F[1])}else{if((/Gecko\/(\S*)/).test(G)){C.gecko=1;F=G.match(/rv:([^\s\)]*)/);if(F&&F[1]){C.gecko=parseFloat(F[1])}}}}}return{load:function(K,L,J,I){var H=E.getElementsByTagName("head")[0],G,F;if(K){K=K.constructor===Array?K:[K];for(G=0;G<K.length;++G){A.push({url:K[G],callback:G===K.length-1?L:null,obj:J,scope:I})}}if(D||!(D=A.shift())){return }B();F=E.createElement("script");F.src=D.url;if(C.ie){F.onreadystatechange=function(){if(this.readyState==="loaded"||this.readyState==="complete"){LazyLoad.requestComplete()}}}else{if(C.gecko||C.webkit>=420){F.onload=LazyLoad.requestComplete;F.onerror=LazyLoad.requestComplete}}H.appendChild(F);if(!C.ie&&!C.gecko&&!(C.webkit>=420)){F=E.createElement("script");F.appendChild(E.createTextNode("LazyLoad.requestComplete();"));H.appendChild(F)}},loadOnce:function(N,O,L,P,G){var H=[],I=E.getElementsByTagName("script"),M,J,K,F;N=N.constructor===Array?N:[N];for(M=0;M<N.length;++M){K=false;F=N[M];for(J=0;J<I.length;++J){if(F===I[J].src){K=true;break}}if(!K){H.push(F)}}if(H.length>0){LazyLoad.load(H,O,L,P)}else{if(G){if(L){if(P){O.call(L)}else{O.call(window,L)}}else{O.call()}}}},requestComplete:function(){if(D.callback){if(D.obj){if(D.scope){D.callback.call(D.obj)}else{D.callback.call(window,D.obj)}}else{D.callback.call()}}D=null;if(A.length){LazyLoad.load()}}}}();
var HuffPoUtil={entry_comments_for_ajax:[],commenter_name:"",images_preload:[],vote_results:{},vote_results_text:{},url_hashes:[],body_element:document.documentElement?document.documentElement:document.body,uniq_counter:0,init:function(){this.trackLinks();E.on("top_nav","click",function(g){var d=E.getTarget(g),e="Click";if(!(d&&d.tagName&&d.tagName=="A")){return}var c="Top Nav";if(d.className&&d.className.match(/subnav_link/)){if(HPConfig&&HPConfig.local_nav){c="Local Nav"}else{if(HPConfig&&HPConfig.vertical_nav){c="Vertical Nav"}}}else{if(!(d.parentNode.className&&d.parentNode.className.match(/(^n_| n_)/))){return}}E.preventDefault(g);if(HPConfig&&HPConfig.current_vertical_name){e+=" from "+HPConfig.current_vertical_name}var f=d.title||d.innerHTML;var b=HPTrack;b.trackEvent(c,e,f);b.navigateAfterTrack(g,d.href)});if(this.GetEntryID()){E.on("chicklets","click",function(f){var d=f.target||f.srcElement;if(!(d&&d.target&&d.target=="chicklet"&&d.title)){return true}E.preventDefault(f);var g="/"+__("Share on")+" (.*)/";var b=new RegExp(g);var c=b.test(d.title);if(c[1]){HPTrack.trackEvent("Chicklets","Click",c[1])}window.open(d.href,"chicklet","width=642,height=436,left=0,top=0,resizable,scrollbars=yes")})}if(window.SiteMode){SiteMode.init()}if("undefined"!==typeof HuffCookies&&HuffCookies.getUserName()&&jQuery("#header_connect_button").length){jQuery("#header_connect_button").css("display","none")}},trackLinks:function(){E.addListener(window.document,"click",function(l){var m=E.getTarget(l);if(!(m.tagName&&m.tagName.toUpperCase()=="A")){m=m.parentNode||m}if(!(m.tagName&&m.tagName.toUpperCase()=="A")){return}var f=m.href;if(m.rel=="popup"){E.stopEvent(l);var r=430;var c=450;if(m.className=="commentpop"){r=430}if(m.className=="biolink"){c=450}var o=Math.ceil(screen.height/2)-Math.ceil(r/2);var g=Math.ceil(screen.width/2)-Math.ceil(c/2);window.open(m.href,"bio","toolbar=0,scrollbars=1,location=0,statusbar=1,menubar=1,resizable=1,width="+c+",height="+r+",top="+o+",left="+g);return false}if(!f||(f.indexOf(window.location.href)==0)||(f.indexOf("javascript:")>-1)){return}if(f.indexOf("ffingtonpost.com")>-1&&typeof HPTrack!="undefined"){if(m.onclick){return}if(l.ctrlKey){return}var d=HPTrack._furthest_scrolled||0;var q=Dom.getDocumentHeight();var b=Dom.getViewportHeight();var n=d+b;var k=Math.round((n/q)*100);if(k>100){k=100}var j=125;var h="";if(!d){h="Left w/o scrolling"}else{if(n>q-j){h="Left after scrolling to bottom"}else{h="Left w/o scrolling to bottom"}}var p="non-b-page";if(HPUtil.GetEntryID()){p="b-page"}HPTrack.trackEvent("Scrolling",h,p,k);return}else{if(typeof HPTrack!="undefined"){HPTrack.trackPageview("/out/?u="+f)}}})},guid:function(){this.uniq_counter++;return"HP_uniq_"+this.uniq_counter},isArray:function(b){return Object.prototype.toString.call(b)==="[object Array]"},bind:function(f,e,d,b,c){if(!c&&b){c=b}var f=jQuery(f);f.bind(e,b,function(){d.apply(c,arguments)});return f},getTarget:function(b){var d=b.target||b.srcElement;try{if(d&&3==d.nodeType){return d.parentNode}}catch(c){}return d},getRegion:function(c){var b={top:0,left:0,bottom:0,right:0};c=jQuery(c);if(!c.length){return b}var d=c.offset();return{top:d.top,left:d.left,bottom:d.top+c.height(),right:d.left+c.width()}},onAvailable:function(e,h,b,f){this.__onAvailable_stack=this.__onAvailable_stack||{};var j=e+HuffPoUtil.guid();var g=this;var c=function(){if(jQuery(e).length>0||g.__onAvailable_stack[j].counter>40){g.__onAvailable_stack[j].cancel&&g.__onAvailable_stack[j].cancel();return true}g.__onAvailable_stack[j].counter++;return false};var d=function(){h.apply(b,[f])};this.__onAvailable_stack[j]={counter:0};var k=HuffPoUtil.WaitForCondition(d,500,c);this.__onAvailable_stack[j].cancel=function(){clearInterval(k)}},EvalScript:function(b){huff.use("util/util",function(c){c.evalScript(b)})},getNode:function(b){var c=[];jQuery(b).each(function(){c.push(this)});if(c.length>1){return c}if(c.length==1){return c[0]}return false},insertAfter:function(c,d,b){if(b.nextSibling){c.insertBefore(d,b.nextSibling)}else{c.appendChild(d)}},appendScript:function(c){var d=document.getElementsByTagName("head")[0];var b=document.createElement("script");b.type="text/javascript";b.src=c;d.appendChild(b)},getReadableTime:function(j,m){if(!m){m=2}var b=["1-second","60-minute","3600-hour","86400-day","604800-week","2592000-month","31536000-year"];var k=new Date;var l=k.getTime();var c=parseInt(l/1000);var g=c-j;var h=0;var e="";for(var f=7;f--;){data=b[f].split("-");key=data[0];value=data[1];if(g>=key&&value!="second"){var n="";e+=""+Math.floor(g/key).toString();if((Math.floor(g/key)!=1)){n="s"}e+=" "+value+n;h++;g=g%key;if(h>m-1||g==0){break}else{if(value!="minute"){e+=", "}}}}return e},AddStringToQueryString:function(c,b){var e=false,d=(new RegExp(/(#.*)/)).exec(c);c=d?c.replace(d[1],""):c;if(-1===c.indexOf("?")){e=true;c+="?"}c+=(e?"":"&")+b+(d?d[1]:"");return c},ShowNearElement:function(d,e,c,h,b,g){var f=undefined===g?Dom.getXY(e):g;h=h||[0,0];switch(d){case"right-middle":f[0]+=e.offsetWidth;f[1]+=e.offsetHeight/2;break;case"right-top":f[0]+=e.offsetWidth;break}if(b){b()}c.style.top=parseInt(parseInt(f[1])+h[1])+"px";c.style.left=parseInt(parseInt(f[0])+h[0])+"px";c.style.display="block"},getUrlVar:function(e){if(!this.url_hashes.length){var d;var b=window.location.href.slice(window.location.href.indexOf("?")+1).replace(/\#.*$/,"").split("&");for(var c=0;c<b.length;c++){d=b[c].split("=");this.url_hashes[d[0]]=d[1]}}if(typeof(this.url_hashes[e])=="undefined"){return null}else{return this.url_hashes[e]}},ScrollTo:function(b,d,c){b=typeof(b)=="string"?Dom.get(b):b;if(!b){return}if(typeof(c)=="undefined"||c==null){c=HuffPoUtil.body_element}if(typeof(d)=="undefined"){d=0.5}var e=jQuery("#"+b).offset();jQuery("#"+c).scrollTop(e.top)},CopyListeners:function(e,d){var c=E.getListeners(e);if(c){for(var b=0;b<c.length;++b){E.addListener(d,c[b].type,c[b].fn,c[b].obj)}}},AddSlashes:function(d){var f="",e="";for(var b=0;b<d.length;++b){switch(d.charAt(b)){case"<":f+="\\x3C";break;case">":f+="\\x3E";break;case"'":f+="\\'";break;case"\\":f+="\\\\";break;case'"':f+='\\"';break;case"\n":f+="\\n";break;case"\r":f+="\\r";break;default:f+=d.charAt(b);break}}return f},getHostName:function(){var b=document.location.port;if(!b||b==""||b==80){b=""}else{b=":"+b}return"http://"+document.location.hostname+b},GetAmazonS3Location:function(){return -1!==location.href.toLowerCase().indexOf("beta.huffingtonpost.com")?"dev.assets.huffingtonpost.com":"i.huffpost.com"},LinkifyTextLinks:function(b){return b.replace(/[a-z]+:\/\/[a-z0-9-_]+\.[a-z0-9-_:~%&\?\/.=]+[^:\.,\)\s*$]/ig,function(c){return'<a href="'+c+'">'+((c.length>25)?c.substr(0,24)+"...":c)+"</a>"})},GetEntryID:function(c){if("object"===typeof HPConfig&&HPConfig.entry_id){return HPConfig.entry_id}var b=null;if(!c){c=document.location.href}if((b=(new RegExp(/.*_(\d+)\.html/)).exec(c))){return b[1]}return false},isWWW:function(b){if(!b){b=window.location.href+""}if(b.indexOf("www")==7){return true}if(b.indexOf("p.")==7){return true}return false},hide:function(b){if(typeof(b)==="string"){b=document.getElementById(b)}if(!b){return}b.style.display="none"},show:function(c,b){if(typeof(c)==="string"){c=document.getElementById(c)}if(!c){return}c.style.display=b||"block"},show_inline:function(b){if(typeof(b)==="string"){var b=document.getElementById(b)}if(!b){return}b.style.display="inline"},trim:function(c,b){return this.ltrim(this.rtrim(c,b),b)},ltrim:function(c,b){b=b||"\\s";return c.replace(new RegExp("^["+b+"]+","g"),"")},rtrim:function(c,b){b=b||"\\s";return c.replace(new RegExp("["+b+"]+$","g"),"")},toggleVis:function(b){Dom.batch(b,function(c){if(c.style.display=="none"){c.style.display="block"}else{c.style.display="none"}})},toggleReply:function(b){Dom.batch("reply_"+b,function(c){if(c.style.display=="none"){c.style.display="block"}else{c.style.display="none"}})},toggleTopPosts:function(b){if(!Dom.hasClass(b,"active")){HuffPoUtil.toggleVis(["top_news_links","top_blog_links"]);HuffPoUtil.tradeClass("tab_top_news","tab_top_blogs","active")}},tradeClass:function(c,b,d){var c=jQuery("#"+c);var b=jQuery("#"+b);if(c.hasClass(d)){b.addClass(d);c.removeClass(d)}else{c.addClass(d);b.removeClass(d)}},WaitForCondition:function(c,b,e){if(!e.apply(this)){var d=this;return setTimeout(function(){HPUtil.WaitForCondition.apply(d,[c,b,e])},b)}else{c.apply(this)}},AnimRequestFinished:function(c,d,b){if(!c){return}d=d||"#F9E801";b=b||"#FFFFFF";for(i=0;i<c.length;i++){jQuery(c[i]).css("background-color",d);jQuery(c[i]).animate({backgroundColor:b},{duration:1000,complete:function(){jQuery(this).css("background-color","transparent")}})}},AnimPagination:function(c){if(undefined===c){c=[]}if(0==c.length){return}var d=[];for(var b=0;b<c.length;++b){d[d.length]=new YAHOO.util.Anim(c[b],{opacity:{from:0.2,to:1}});if(HPBrowser.isIEOld()){d[d.length-1].onComplete.subscribe(function(){Dom.setStyle(this.getEl(),"zoom","normal")})}d[d.length-1].animate()}},getCookie:function(d){var f=d+"=";var h=document.cookie;var b="";var e=h.indexOf(f);if(e==-1){return b}var g=h.indexOf(";",e+f.length);if(g==-1){g=h.length}return unescape(h.substring(e+f.length,g))},loadAndRun:function(c,e,d,b){LazyLoad.load(c,e,d,b);return false},trackerImg:function(c,d){c=c.replace(/%n/,ord);if(d){var b=new Image();b.src=c;b.width=b.height=1;b.style.display="none";try{d.appendChild(b)}catch(f){return}return}document.write('<img src="'+c+'" width="1" height="1" style="display:none"/>')},scriptTag:function(b,c){if(document.createElement&&((script=document.createElement("script")))){script.type="text/javascript";script.src=b;if(c){}else{var d=document.getElementsByTagName("head");if(d[0]){c=d[0]}}try{c.appendChild(script);return}catch(f){}}document.write('<script type="text/javascript" src="'+b+'"><\/script>')},checkEmail:function(b){if(b&&((b.indexOf("@")>0)&&(b.indexOf(".")>0))&&(b.indexOf(".")!=b.length-1)){return true}return false},getDisplayName:function(d){if("undefined"===typeof d||!d){d=HuffCookies.getUserName()||""}var b=d.replace(/[\+_]/g," ");var c=b.replace("hp blogger ","");return c},flash:function(c,b){var d=b||"#ff0000";jQuery(c).css("background-color",d).animate({opacity:"-=0.5"},300,function(){jQuery(this).css("background-color","#FFFFFF");jQuery(this).css("opacity","1")})},yellowFlash:function(b){this.flash(b,"#F9E801")},enforceTextAreaLimit:function(c,b){if(!b||!b.chars){b={chars:100}}if(this.value.length>b.chars){HuffPoUtil.flash(this);this.value=this.value.substring(0,b.chars);this.scrollTop=this.scrollHeight}},enforceTextAreaLimit_v2:function(c){var b=100;if(c.data&&c.data.chars){b=c.data.chars}if(jQuery(this).attr("value").length>b){HuffPoUtil.flash(this);this.value=this.value.substring(0,b);this.scrollTop=this.scrollHeight}return},initLogout:function(){if((typeof HuffCookies=="undefined")||!(HPUtil.isWWW()||HPConfig.site)){return}jQuery("#wendybird_user_name").html("");jQuery("#wendybird_user").hide();jQuery("#not_logged_user").show();return},initUserNavStatus:function(b){huff.use("util/user",function(c){c.updateAuthStatus()});return},reinit:function(){HPUtil.initUserNavStatus()},isIE6:function(){return HPBrowser.isIE6()},getCorrectVideoContentForIE6:function(b){return b},onPageReady:function(b){jQuery(window).ready(b)},getQueryVariables:function(){var d=window.location.search.substring(1);var e=d.split("&");var c=new Array();for(var b=0;b<e.length;b++){var f=e[b].split("=");c[f[0]]=f[1]}return c},region_contains:function(b,c){return(c.left>=b.left&&c.right<=b.right&&c.top>=b.top&&c.bottom<=b.bottom)},resize:function(){if(window.innerWidth<970){re=new RegExp(/.*?Netscape.(.*)/);matches=re.exec(navigator.userAgent);if(matches&&matches.length>=2&&matches[1]<7.2){document.body.style.margin="0"}}},showad:function(){this.show("rightad");this.show("frontmidad")},SharePollToFacebook:function(c,b){huff.use("util/util",function(d){d.sharePollOnFacebook(c,b)})},vote:function(b){huff.use("util/util",function(c){c.voteOnPoll(b)})},UpdateEntriesComments:function(){huff.use("util/util",function(b){b.updateEntriesComments()})},number_format:function(g,d,j,f){var c=!isFinite(+g)?0:+g,b=!isFinite(+d)?0:Math.abs(d),l=(typeof f==="undefined")?",":f,e=(typeof j==="undefined")?".":j,k="",h=function(p,o){var m=Math.pow(10,o);return""+Math.round(p*m)/m};k=(b?h(c,b):""+Math.round(c)).split(".");if(k[0].length>3){k[0]=k[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,l)}if((k[1]||"").length<b){k[1]=k[1]||"";k[1]+=new Array(b-k[1].length+1).join("0")}return k.join(e)},int2size:function(f,c){var e=1000;var b=e*1000;var d=b*1000;if(typeof c=="undefined"){c=1}if((f>=0)&&(f<e)){return f}else{if((f>=e)&&(f<b)){return(f/e).toFixed(c)+"K"}else{if((f>=b)&&(f<d)){return(f/b).toFixed(c)+"M"}else{return f}}}},updateContent:function(c,d,e,b){huff.use("util/util",function(f){f.fadeOutfadeInContent(c,d,e,b)})},addCSS:function(b){huff.use("util/util",function(c){c.addCSSFile(b)});return},render_video:function(b){huff.use("util/util",function(c){c.renderVideo(b)})},cleanup_cookies:function(){huff.use("util/util",function(b){b.cleanupCookies()})},migrate_cookies:function(){huff.use("util/util",function(b){b.migrateCookies()})},PeriodicalExecute:function(c,d,b,f){if(undefined===b||(undefined!==b&&b())){c.apply(this)}var e=this;if(undefined!==d&&(undefined===f||(undefined!==f&&!f()))){window.setTimeout(function(){HuffPoUtil.PeriodicalExecute.apply(e,[c,d,b,f])},d)}},Strip_Tags:function(h,j){var n="",l=false;var g=[];var b=[];var m="";var e=0;var d="";var f="";var c=function(o,k,p){return p.split(o).join(k)};if(j){b=j.match(/([a-zA-Z]+)/gi)}h+="";g=h.match(/(<\/?[\S][^>]*>)/gi);for(n in g){if(isNaN(n)){continue}f=g[n].toString();l=false;for(d in b){m=b[d];e=-1;if(e!=0){e=f.toLowerCase().indexOf("<"+m+">")}if(e!=0){e=f.toLowerCase().indexOf("<"+m+" ")}if(e!=0){e=f.toLowerCase().indexOf("</"+m)}if(e==0){l=true;break}}if(!l){h=c(f,"",h)}}return h},PreloadImages:function(b){if(Y.lang.isArray(b)){for(var c=0;c<b.length;++c){this.images_preload[this.images_preload.length]=new Image();this.images_preload[this.images_preload.length-1].src=b[c]}}else{for(var d in b){this.images_preload[this.images_preload.length]=new Image();if(b[d].callback){this.images_preload[this.images_preload.length-1].onload=b[d].callback}this.images_preload[this.images_preload.length-1].src=d}}},bitly_url:function(c,b){huff.use("util/util",function(d){d.bitlyUrl(c,b)})},checkUserInfluence:function(){huff.use("util/user",function(b){b.updateUserInfluence()})},setInfluenceCookie:function(b){huff.use("util/user",function(c){c.setInfluenceCookie(b)})},updateInfluenceCookie:function(c,b){huff.use("util/user",function(d){d.updateInfluenceCookie(c,b)})},removeEmptyInfluence:function(){if(HuffCookies.getCookie("huffpost_influence_null")){HuffCookies.destroyCookie("huffpost_influence_null")}},updateNavByReferrer:function(){huff.use("util/user",function(b){b.updateNavByReferrer()})},providerOverview:function(b){huff.use("util/user",function(c){c.providerOverview(b)})},utf8_decode:function(b){var d=[],f=0,h=0,g=0,e=0,c=0;b+="";while(f<b.length){g=b.charCodeAt(f);if(g<128){d[h++]=String.fromCharCode(g);f++}else{if(g>191&&g<224){e=b.charCodeAt(f+1);d[h++]=String.fromCharCode(((g&31)<<6)|(e&63));f+=2}else{e=b.charCodeAt(f+1);c=b.charCodeAt(f+2);d[h++]=String.fromCharCode(((g&15)<<12)|((e&63)<<6)|(c&63));f+=3}}}return d.join("")},frameAuthSuccess:function(b){return true},frameAuthFailure:function(b){return true},isDotComVersion:function(){var b=window.location.hostname;if(/huffingtonpost.com/.test(b)){return true}return false},isHPBetaLiveHost:function(){return(window.location.hostname==="beta.live.huffingtonpost.com")},isHPLiveHost:function(){return(window.location.hostname==="live.huffingtonpost.com")},isUSAVersion:function(){var b=window.location.hostname;if(!huff.beta&&/www.huffingtonpost.com/.test(b)){return true}else{if(huff.beta&&/www.beta(\d*).huffingtonpost.com/.test(b)){return true}}return false},isMobileweb:function(){return(window.HPConfig&&window.HPConfig.site==="mobileweb")},youMayLikeModule:function(){var g=["taboola","gravity"];var c=this.getUrlVar("you_may_like");var d=(c&&-1!==jQuery.inArray(c,g))?c:("undefined"!==typeof __taboola_params&&"undefined"!==typeof __gravity_params)?"taboola/gravity":("undefined"!==typeof __taboola_params)?"taboola":("undefined"!==typeof __gravity_params)?"gravity":"";function e(){if(typeof __taboola_params!=="undefined"){window._taboola=window._taboola||[];for(var l=0;l<__taboola_params.length-1;l++){jQuery("#hp-more-taboola").append("<div id="+__taboola_params[l].container+" ></div>");_taboola.push(__taboola_params[l])}window._taboola=window._taboola||[];_taboola.push({flush:true})}}function j(){if(typeof __gravity_params!=="undefined"){var p=__gravity_params.pl||19;var u="grv-personalization-"+p;if(!jQuery("#"+u).length){jQuery("#hp-more-gravity").append(jQuery("<div id='"+u+"'/>"))}delete (__gravity_params.percent);delete (__gravity_params.pl);window.gravityInsightsParams=__gravity_params;var x,r,A,C,q,l,w,v,y,B,t,o,n,m;q=function(F){var D;D=document.createElement("script");D.async=!0;D.src=F;F=document.getElementsByTagName("script")[0];return F.parentNode.insertBefore(D,F)};r="";y=(C=!0===gravityInsightsParams.useGravityUserGuid?1:0)?"":gravityInsightsParams.user_guid||(null!=(o=/grvinsights=([^;]+)/.exec(document.cookie))?o[1]:void 0)||"";t=(B="http://rma-api.gravity.com/v1/api/intelligence",l=(null!=(n=window.jQuery)?null!=(m=n.fn)?m.jquery:void 0:void 0)||"",v="iframe",x=gravityInsightsParams.ad||"",A=gravityInsightsParams.cburl||"",w=gravityInsightsParams.pfurl||"",""+B+"/wl?jq="+l+"&sg="+gravityInsightsParams.site_guid+"&ug="+y+"&ugug="+C+"&id="+u+"&pl="+p+("&type="+v+"&ad="+x+"&cburl=")+encodeURIComponent(A)+"&pfurl="+encodeURIComponent(w)+("&x="+(new Date).getTime())+("undefined"!==typeof forceArticleIds&&null!==forceArticleIds&&forceArticleIds.join?"&ai="+forceArticleIds.join(","):"")+("undefined"!==typeof apids&&null!==apids&&""!==apids?"&apids="+encodeURIComponent(apids):""));r&&q(r);t&&(window.gravityInsightsParams.sidebar&&(window.gravityInsightsParams.wlStartTime=(new Date).getTime()),q(t))}}switch(d){case"taboola/gravity":var b=("undefined"!==typeof __gravity_params.percent)?__gravity_params.percent:0.5;var k=10000;var h="huffPoGravityVsTaboolaBucketNum";var f=HuffCookies.getCookie(h);null==f&&(f=Math.floor(Math.random()*k),HuffCookies.setCookie(h,f,30));f<b*k?j():e();break;case"taboola":e();break;case"gravity":j();break}return},gravityMostPopularWidget:function(){var j=jQuery("#gravity_most_popular_widget");if("object"===typeof __gravity_params_most_popular&&j.length){var h=__gravity_params_most_popular.type||"content";var v=__gravity_params_most_popular.site_guid||"95ec266b244de718b80c652a08af06fa";var t=__gravity_params_most_popular.pl||20;var g=__gravity_params_most_popular.holder_id||"grv-personalization-"+t;var w=__gravity_params_most_popular.title||__("Most Popular");var n=__gravity_params_most_popular.header_classes||"uppercase most_popular margin_bottom_10 black";j.append('<h3 class="'+n+'">'+w+"</h3>").append(jQuery("<div>",{id:g}));window.gravityInsightsParams={type:h,action:"",site_guid:v};var r,e,u,q,l,p,m,h,o,d,b,k,f,c;l=function(y){var x;x=document.createElement("script");x.async=!0;x.src=y;y=document.getElementsByTagName("script")[0];return y.parentNode.insertBefore(x,y)};e="";o=(q=!0===gravityInsightsParams.useGravityUserGuid?1:0)?"":gravityInsightsParams.user_guid||(null!=(k=/grvinsights=([^;]+)/.exec(document.cookie))?k[1]:void 0)||"";b=(d="https:"===location.protocol?"https://secure-api.gravity.com/v1/api/intelligence":"http://rma-api.gravity.com/v1/api/intelligence",p=(null!=(f=window.jQuery)?null!=(c=f.fn)?c.jquery:void 0:void 0)||"",h="iframe",r=gravityInsightsParams.ad||"",u=gravityInsightsParams.cburl||"",m=gravityInsightsParams.pfurl||"",""+d+"/wl?jq="+p+"&sg="+gravityInsightsParams.site_guid+"&ug="+o+"&ugug="+q+"&id="+g+"&pl="+t+("&type="+h+"&ad="+r+"&cburl=")+encodeURIComponent(u)+"&pfurl="+encodeURIComponent(m)+("&x="+(new Date).getTime())+("undefined"!==typeof forceArticleIds&&null!==forceArticleIds&&forceArticleIds.join?"&ai="+forceArticleIds.join(","):"")+("undefined"!==typeof apids&&null!==apids&&""!==apids?"&apids="+encodeURIComponent(apids):""));e&&l(e);b&&(window.gravityInsightsParams.sidebar&&(window.gravityInsightsParams.wlStartTime=(new Date).getTime()),l(b));jQuery("#all_frontpage_widgets.most_popular_stories_module").remove()}}};var HPUtil=HuffPoUtil;HuffPoUtil.WEDGJE=function(){ad_store={};WEDGJE_ord=Math.random();WEDGJE_ord=WEDGJE_ord*10000000000000000000;isIE=(true||(navigator.userAgent&&navigator.userAgent.match(/MSIE/)));getIframe=function(b){innerH='<iframe width="'+b.width+'" height="'+b.height+'" ';innerH+='src="'+getSource(b)+'"';innerH+=' marginheight="0" marginwidth="0" frameborder="0" scrolling="no"></iframe>';if(this.isIE){return innerH}else{i=document.createElement("span");i.innerHTML=innerH;return i}};getScript=function(b){if(this.isIE){b.prefix="http://ad.doubleclick.net/adj/";innerH='<script type="text/javascript" src="'+getSource(b)+'"><\/script>';return innerH}else{b.prefix="http://ad.doubleclick.net/adj/";s=document.createElement("script");s.type="text/javascript";s.src=getSource(b);return s}};getQCSegs=function(){a=HuffPoUtil.getCookie("__qseg");return(a)?a.replace(/\|{0,1}Q_/gi,";qcs=").replace(/^;/,"")+";":""};getSource=function(b){if(b.prefix){adSource=b.prefix}else{adSource="http://ad.doubleclick.net/adi/"}adSource+=b.zone_info+";global=1;";adSource+=getQCSegs();if(b.interstitial&&(typeof ads_page_type!="undefined"&&ads_page_type!="big_news")&&!(document.referrer&&document.referrer.match(/.*(yahoo|aol)\.com.*/))){adSource+="dcopt=ist;"}adSource+=(test_kws=location.href.match(/dc_kw\=[^\&]*/gi))?"kw="+test_kws.toString().replace(/dc_kw\=/gi,"").replace(/\,/gi,";kw=")+";":"";adSource+=(location.href.match(/beta\./))?"kw=beta;":"";adSource+=(document.referrer.match("google.com/cse"))?"utm_hp_ref=hp_search;":"";adSource+=(document.referrer.match("google.com/search"))?"utm_hp_ref=google;":"";adSource+=(navigator.userAgent.toLowerCase().match("chrome/"))?"brsr=chrome;":"";adSource+=(typeof ads_page_type!="undefined")?"page_type="+ads_page_type+";":"";adSource+=(b.kv)?b.kv:"postload=0;";adSource+="tile="+b.tile+";";adSource+="sz="+(b.sizes||(b.width+"x"+b.height))+";";adSource+="ord="+WEDGJE_ord+"?";return adSource};getBareScript=function(b){if(this.isIE){innerH='<script type="text/javascript" src="'+b.src+'"><\/script>';return innerH}else{s=document.createElement("script");s.type="text/javascript";s.src=b.src;return s}};return{double_adsense:false,ads:function(b){return ad_store[b]},ord:function(b){return WEDGJE_ord},debug_ad_code:function(b){return(location.href.toLowerCase().match("debugadcode"))?'<div style="position:relative;z-index:1000"><div style="z-index:10000;position:absolute;top:0px;left:0px;padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px">'+getSource(b).replace(/\;/gi,";<br/>")+'<br/><a style="font-weight:bold;font-size:12px" target="_blank" href="/ads/test/ad_isolator.html?'+escape('<script type="text/javascript" src="'+getSource(b)+'"><\/script>')+'">See Ad In New Page</a></div></div>':""},inline_ad:function(b){b.prefix="http://ad.doubleclick.net/adj/";document.write('<script type="text/javascript" src="'+getSource(b)+'"><\/script>'+this.debug_ad_code(b))},postload_ad:function(b,d){var e="height: "+b.height+"px; ";var c="width: "+b.width+"px; ";if(b.no_container){e="";c=""}if(b.type=="iframe"){ad_store[b.el_id]=getIframe(b)}else{if(b.type=="script"){ad_store[b.el_id]=getScript(b)}else{if(b.type=="bare"){ad_store[b.el_id]=getBareScript(b)}}}if(isIE){if(typeof(d)=="undefined"){document.write('<div style="'+c+e+'" class="'+b.class_name+'" id="'+b.el_id+'">'+ad_store[b.el_id]+"</div>"+this.debug_ad_code(b))}else{document.getElementById(d).innerHTML='<div style="'+c+e+'" class="'+b.class_name+'" id="'+b.el_id+'">'+ad_store[b.el_id]+"</div>"+this.debug_ad_code(b)}}else{if(typeof(d)=="undefined"){document.write('<div style="'+c+e+'" class="'+b.class_name+'" id="'+b.el_id+'"></div>'+this.debug_ad_code(b))}else{document.getElementById(d).innerHTML='<div style="'+c+e+'" class="'+b.class_name+'" id="'+b.el_id+'"></div>'+this.debug_ad_code(b)}setTimeout("document.getElementById('"+b.el_id+"').appendChild(HuffPoUtil.WEDGJE.ads('"+b.el_id+"'));",(b.tile*200)+1)}},interstitial:true,tile:1,write:function(b,c){if(!HPBrowser.isIEOld()&&b.width!="234"&&c!="ad_advertisement"&&!(typeof ads_page_type!="undefined"&&ads_page_type=="front"&&(b.zone_info.match("comedy")||b.zone_info.match("world")))||location.href.match("postload_test")){b.interstitial=this.interstitial;this.interstitial=false;this.deferred_write(b,c);return}b.tile=this.tile++;if(location.href.match("no_ads")||location.href.match("nsup")){return}if(c){this.postload_ad(b,c)}else{b.interstitial=this.interstitial;this.interstitial=false;this.inline_ad(b)}},google_ads:{primed:false,counter:0,vars:{ad_client:"pub-3264687723376607",ad_output:"js",max_num_ads:"4",ad_type:"text",feedback:"on"},init:function(){if(!HuffPoUtil.WEDGJE.google_ads.primed){HuffPoUtil.WEDGJE.google_ads.primed=true}HuffPoUtil.WEDGJE.google_ads.executions=HuffPoUtil.WEDGJE.google_ads.executions||[];var c=HuffPoUtil.WEDGJE.google_ads.executions.length;HuffPoUtil.WEDGJE.google_ads.executions[c]=[];for(var b in HuffPoUtil.WEDGJE.google_ads.vars){HuffPoUtil.WEDGJE.google_ads.executions[c][b]=HuffPoUtil.WEDGJE.google_ads.vars[b]}for(var b in arguments[0]){HuffPoUtil.WEDGJE.google_ads.executions[c][b]=arguments[0][b]}},exec:function(){if(!HuffPoUtil.WEDGJE.google_ads.executions||!HuffPoUtil.WEDGJE.google_ads.executions[0]){return}var b=0;for(z=0;HuffPoUtil.WEDGJE.google_ads.executions[z];z++){var c="page_url---"+document.location.href+"*";for(_var in HuffPoUtil.WEDGJE.google_ads.executions[z]){if(typeof HuffPoUtil.WEDGJE.google_ads.executions[z][_var]=="string"){c+=_var+"---"+HuffPoUtil.WEDGJE.google_ads.executions[z][_var]+"*"}}c=c.replace(/\*$/gi,"");iframe=document.createElement("iframe");iframe.src="/ads/google_ads_iframe_loader.html#"+escape(escape(c));iframe.style.marginBottom="10px";iframe.frameBorder="0";iframe.id="iframe_"+HuffPoUtil.WEDGJE.google_ads.executions[z]["hp_dest_id"];iframe.height=1;iframe.scrolling="no";iframe.width="100%";iframe.name="adsense_iframe_"+Math.round(Math.random()*100000);adloc=document.getElementById(HuffPoUtil.WEDGJE.google_ads.executions[z]["hp_dest_id"].replace(/\"/gi,""));adloc.innerHTML="";adloc.appendChild(iframe)}},render:function(c){var e=document.getElementById(google_hp_dest_id);if(c.length==0||!e){return}var d='<div class="adsense_left">';d+='<div class="google_links_header"><a target="_blank" href="'+google_info.feedback_url+'" ><span>Ads by Google</span></a></div>';for(var b=0;b<c.length;++b){d+=HuffPoUtil.WEDGJE.google_ads.make_link(c[b])}d+="</div>";e.innerHTML=d;HuffPoUtil.WEDGJE.google_ads.contextual_ad_unit++;HuffPoUtil.WEDGJE.google_ads.counter+=c.length;HuffPoUtil.WEDGJE.google_ads.executions.splice(0,1);HuffPoUtil.WEDGJE.google_ads.exec()},make_link:function(e){var f=(arguments[1])?arguments[1]:["header","description","visible_url"];var c={header:'<div class="link_header"><a target="_blank" href="'+e.url+'" onmouseout="window.status=\'\'" onmouseover="window.status=\'go to '+e.visible_url+"';return true\">"+e.line1+"</a></div>",description:'<div class="link_description"><span class="line2">'+e.line2+'</span><span class="spacer">&nbsp;</span><span class="line3">'+e.line3+"</span></div>",visible_url:'<div class="link_visible_url"><a target="_blank" href="'+e.url+'" onmouseout="window.status=\'\'" onmouseover="window.status=\'go to '+e.visible_url+"';return true\"><span>"+e.visible_url+"</a></span></div>"};var b='<div class="adsense_block">';for(var d=0;d<f.length;d++){b+=c[f[d]]}b+="</div>";return b}}}}();HuffPoUtil.WEDGJE.deferred_write=function(b,d){b.tile=this.tile++;if(location.href.match("no_ads")||location.href.match("nsup")){return}var e="height: "+b.height+"px; ";var c="width: "+b.width+"px; ";if(b.no_container){e="";c=""}b.type="script";b.kv="postload=1;";isIE=true;if(b.type=="iframe"){ad_store[b.el_id]=getIframe(b)}else{if(b.type=="script"){ad_store[b.el_id]=getScript(b)}else{if(b.type=="bare"){ad_store[b.el_id]=getBareScript(b)}}}if(typeof(d)=="undefined"){document.write('<div style="'+c+e+'" class="'+b.class_name+'" id="'+b.el_id+'"></div>'+this.debug_ad_code(b))}else{document.getElementById(d).innerHTML='<div style="'+c+e+'" class="'+b.class_name+'" id="'+b.el_id+'"></div>'+this.debug_ad_code(b)}HuffPoUtil.WEDGJE.ad_renders.push(function(){document.write('<div id="defer-'+b.el_id+'">'+ad_store[b.el_id]+"</div>");(function(){var f=$("defer-"+b.el_id);if(!f){setTimeout(arguments.callee,100);return}f.parentNode.removeChild(f);$(b.el_id).appendChild(f)})()})};HuffPoUtil.WEDGJE.ad_renders=[];HuffPoUtil.ImageLoader={foldCheck:function(d,b,c,e){huff.beta&&console.error("HuffPoUtil.ImageLoader is DEPRECATED")}};HuffPoUtil.AvatarLoader={loadAvatar:function(b){huff.beta&&console.error("HuffPoUtil.AvatarLoader is DEPRECATED")},loadAvatarHomeStyle:function(b){huff.beta&&console.error("HuffPoUtil.AvatarLoader is DEPRECATED")},loadAvatarArticleStyle:function(){huff.beta&&console.error("HuffPoUtil.AvatarLoader is DEPRECATED")}};var HPConnect={current_hash:false,Login:function(){huff.use("user","connect/auth","connect/modal","connect/provider",function(b,d,c){if(b.logged){return}d.Login.init()})},Signup:function(){huff.use("user","connect/auth","connect/modal","connect/provider",function(b,d,c){if(b.logged){return}d.Signup.init()})},Verify:function(){huff.use("user","connect/auth","connect/modal","connect/provider",function(b,d,c){if(!b.logged){return}d.Verify.init()})},Forgot:function(){huff.use("user","connect/auth","connect/modal","connect/provider",function(b,d,c){if(b.logged){return}d.ResetPassword.init()})},showLoader:function(){huff.use("modal",function(b){var c={content:'<div style="width:32px; height:32px; background:url(http://s.huffpost.com/images/loader.gif); margin:33px auto;"></div>',width:350,position:"fixed",onshow:function(){jQuery(".qr_close").hide()}};b.show(c);return})},hideLoader:function(){huff.use("modal",function(b){b.hide();return})},isAuthHash:function(){if(this.current_hash){return this.current_hash}var b=window.location.hash;if(/login_success/.test(b)||/signup_success/.test(b)||/login_failure/.test(b)||/reset_success/.test(b)){this.current_hash=b.replace("#","");window.location.hash="";return this.current_hash}return false},updateXDAuthStatus:function(){var b=window.location.href;if((HPUtil.GetEntryID()||/\/users\//.test(b))&&-1===window.location.href.indexOf("just_reloaded")){window.location.href=HPUtil.AddStringToQueryString(window.location.href,"just_reloaded=1")}else{huff.use("util/user",function(c){c.updateAuthStatus(true)})}return},postAuthHashCallback:function(b){switch(b){case"login_success_rem":case"login_success":case"reset_success":HPConnect.hideLoader();if("login_success_rem"===b){var c=HuffCookies.getUserName()||false;HuffCookies.setCookie("last_login_username",c,(24*365))}if(!HPUtil.isDotComVersion()){HPConnect.updateXDAuthStatus()}break;case"signup_success":huff.use("connect/modal","connect/auth",function(e,d){ConnectModal=e;e.init(function(){HPConnect.hideLoader();d.Login.loginSuccess=HPConnect.updateXDAuthStatus;d.Signup.loadWelcomeBrief()})});break;case"login_failure":HPConnect.hideLoader();huff.use("modal",function(d){d.show({content:"<div class='bold arial_14' style='margin-top: 15px;'>"+__("Something's off. Please check the account info and password and try again.")+"</div>",width:300})});break}return},postAuthHash:function(){var b=this.isAuthHash();if(b&&HPUtil.isDotComVersion()){HPConnect.postAuthHashCallback(b)}return}};HPConnect.postAuthHash();var HPError={DEFAULT_ERROR:"Sorry, an error occurred.  Please check your internet connection",DEBUG:0,is_error:0,setDebug:function(b){if(b){HuffCookies.setCookie("debug_mode","1","1");HPError.DEBUG=1;window.onbeforeunload=function(d){var c="Your debug cookie is set, please confirm you want to leave the page";d=d||window.event;if(d){d.returnValue=c}return c}}else{HuffCookies.destroyCookie("debug_mode");HPError.DEBUG=0;window.onbeforeunload=function(){}}},throwError:function(b,c){c=c||false;if(b&&typeof b!=="object"){b={msg:b}}if(!b){b=new Array()}if(!(b.show===0)){b.show=1}if(!b.msg||b.msg==this.DEFAULT_ERROR){b.msg=this.DEFAULT_ERROR;b.show=0}this.is_error=1;if(this.DEBUG){try{throw ("Err")}catch(b){if(b.stack){console.log("Stack:",b.stack)}}console.log("Msg: ",b.msg);if(b.obj){console.log(b.obj)}}if(b.show){if(c){alert(b.msg)}}},debugMessage:function(c,b){if(!this.DEBUG){return false}if(!b){b={}}if(!c){c=""}HPError.e({show:0,msg:c,obj:b})}};if(typeof HuffCookies!="undefined"&&HuffCookies.getCookie("debug_mode")){HPError.setDebug(true)}HPError.e=HPError.throwError;HPError.d=HPError.debugMessage;String.prototype.format=function(){return String.format(this,arguments.length==1?arguments[0]:arguments)};String.format=function(b,d){var c=function(j,h){var g=function(k){if(typeof k=="number"){return Number}else{if(typeof k=="boolean"){return Boolean}else{if(typeof k=="string"){return String}else{return k.constructor}}}}(j);var f=g.prototype;var e=typeof j!="string"?f?f.format||f.toString:j.format||j.toString:j.toString;if(e){if(typeof h=="undefined"||h==""){return e.call(j)}else{return e.call(j,h)}}else{return""}};if(arguments.length==1){return function(){return String.format.apply(null,[b].concat(Array.prototype.slice.call(arguments,0)))}}if(arguments.length==2&&typeof d!="object"&&typeof d!="array"){d=[d]}if(arguments.length>2){d=Array.prototype.slice.call(arguments,1)}b=b.replace(/\{\{|\}\}|\{([^}: ]+?)(?::([^}]*?))?\}/g,function(f,e,g){if(f=="{{"){return"{"}if(f=="}}"){return"}"}if(typeof d[e]!="undefined"&&d[e]!==null){return c(d[e],g)}else{return""}});return b};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};(function(b){b.fn.disable_inputs=function(){return this.each(function(){jQuery(this).find("input,select,textarea").attr("disabled","disabled")})};b.fn.enable_inputs=function(){return this.each(function(){jQuery(this).find("input,select,textarea").removeAttr("disabled")})};b.fn.set_iframe_height=function(){return this.filter("iframe").each(function(){if(this.contentDocument){this.height=this.contentDocument.body.offsetHeight+35}else{this.height=this.contentWindow.document.body.scrollHeight+40}})}})(jQuery);
var HPTrack={async:false,gaUpgrade:false,gaDomain:"auto",pageTracker:null,prod_account:"UA-71081-1",dev_account:"UA-71081-7",trackedShares:[],trackedVideos:{},custom_vars:{vertical:{scope:3,slot:1,display:"Vertical"},blog:{scope:3,slot:2,display:"Blog"},news:{scope:3,slot:2,display:"News"},page:{scope:3,slot:2,display:"Page"},tpage:{scope:3,slot:2,display:"TPage"},user:{scope:1,slot:3,display:"User"},joined:{scope:1,slot:4,display:"JoinedOn"},special:{scope:1,slot:5,display:"Special"}},Nielsen:function(a){var c=new Image(1,1);c.onerror=c.onload=function(){c.onerror=c.onload=null};var b="ts=compact";if(a&&a=="ajax"){b="c0=usergen,1"}c.src=["//secure-us.imrworldwide.com/cgi-bin/m?ci=us-703240h&cg=0&cc=1&si=",escape(window.location.href),"&rp=",escape(document.referrer),"&",b,"&rnd=",(new Date()).getTime()].join("")},Services:{options:{},setOptions:function(a,b){if(!b){return}HPTrack.Services.options[a]=b},COMMON:["GA","Quantcast","Comscore","DataLayer","Omniture","Nielsen"],trackTo:function(b,c){if(!b){return false}var e={Quantcast:function(i){var h=HPTrack.Services;if(!h.qc_loaded){window._qevents=window._qevents||[];h.qc_loaded=true;(function(){var k=document.createElement("script");k.src=(document.location.protocol=="https:"?"https://secure":"http://edge")+".quantserve.com/quant.js";k.async=true;k.type="text/javascript";var j=document.getElementsByTagName("script")[0];j.parentNode.insertBefore(k,j)})()}var g=h.options.Quantcast||{};if(i.ajax){g.event="refresh"}_qevents.push(g)},Comscore:function(g){if(window.COMSCORE){COMSCORE.beacon(comscore_data);if(g.add_comscore_noop){jQuery.get("/images/comscore_track.html?"+comscore_data.options.url_append)}if(COMSCORE.newBeacon){COMSCORE.newBeacon()}}},Omniture:function(g){window.s_265&&s_265.t()},Nielsen:function(h){var g=h.ajax?"ajax":false;HPTrack.Nielsen(g)},GA:function(g){HPTrack.trackPageview()},DataLayer:function(g){if(window.bN&&window.bN_cfg){g.gallery&&bN.set("dL_sDpt","gallery");bN.view()}}};c=c||{};for(var d=0,a=b.length;d<a;d++){var f=b[d];if(e[f]){e[f](c)}}}},getTracker:function(d){var c=this.dev_account;!huff.beta&&(c=d||this.prod_account);if(this.async){if(this.gaUpgrade==true){__gaTracker("create",c,this.gaDomain);__gaTracker("require","displayfeatures")}else{_gaq.push(["_setAccount",c])}}else{if(typeof _gat!=="undefined"){this.pageTracker=_gat._getTracker(c)}}if(typeof(HuffPrefs)!=="undefined"&&HuffPrefs.to_string){var a="A";if(HuffCookies.getUserId()){var b=HuffPrefs.to_string(true);if(this.gaUpgrade==true){a=HuffCookies.getUserId()}else{a="H"+b}}else{if(this.gaUpgrade==true){__gaTracker("set","&uid",0)}else{this.setCustomVar("joined","0")}}if(this.gaUpgrade==true){__gaTracker("set","&uid",a)}else{this.setCustomVar("user",a)}}if(window.SiteMode){if(this.gaUpgrade==false){this.setCustomVar("special","sitemode")}}},setCustomVar:function(c,b){var a=this.custom_vars[c+""];if(!(a&&b)){return}if(b.length&&b.length>8){b=b.substr(0,8)}if(this.async){_gaq.push(["_setCustomVar",a.slot,a.display,b,a.scope])}else{if(this.pageTracker){this.pageTracker._setCustomVar(a.slot,a.display,b,a.scope)}}},trackPageview:function(b){if(this.async){var c=["_trackPageview"];var a=this.gaUpgrade;b&&c.push(b);_gaq.push(c);huff.use("cookies",function(f){var e=f.get("__utmc")||0;if(e){e=parseInt(e.substr(0,2))}var d=false;if(!b&&window.SiteMode){d="yes"}else{if(!b&&(e==22)){d="no"}}if(a==true){__gaTracker("send","pageview")}else{d&&_gaq.push(["_trackPageview","/t/i/sitemode/"+d])}})}else{!this.pageTracker&&this.getTracker();this.pageTracker._trackPageview(b||undefined)}},trackEvent:function(b,d,a,c){var g=/^Top Nav/;if(this.async&&!g.test(b)){if(this.gaUpgrade==true){__gaTracker("send","event",b,d,a,c,{nonInteraction:1})}else{_gaq.push(["_trackEvent",b,d,a,c])}}else{if(this.pageTracker!=null){this.pageTracker._trackEvent(b,d,a,c)}}try{if(-1===jQuery.inArray(a,Badges.trackedShares)&&("Reddit"===a||"Stumbleupon"===a)){if("Stumbleupon"===a){jQuery.post("/include/social_track.php",{t:"stumble",entry:HPUtil.GetEntryID(window.location.href),banners:HPAds.get_banners_str()})}HPTrack.trackedShares.push(a);bN.set("dL_shareType",a.toLowerCase(),1);bN.set("dL_shareURL",escape(window.location.href),1);bN.ping("aol-share")}}catch(f){}},trackSocial:function(d,a,b,c){if(this.gaUpgrade==true){this.async&&__gaTracker("send","social",d,a,b,{page:c})}else{this.async&&_gaq.push(["_trackSocial",d,a,b,c])}},navigateAfterTrack:function(f,b,a,d){var c=(typeof d=="undefined")?100:d;if(f.ctrlKey){window.open(b,"_blank")}else{if(a){window.open(b,a)}else{setTimeout(function(){document.location=b},c)}}}};HPTrack.Module=function(c,a){var b=HPTrack.Module,d;c=b.Impressions.clean(c);if(d=b.modules[c]){return d}b.modules[c]={huff_tracker:1,impression:function(e){if(e){e="-"+b.Impressions.clean(e)}else{e=""}b.Impressions.queue(c+e);return},click:function(e){return this.event("Click",e)},event:function(f,e){HPTrack.trackEvent(a,f,e);return},trackLink:function(h,f){var g=h.currentTarget;if(!(g&&g.tagName.toLowerCase()=="a")){return}h.preventDefault();this.click(f);HPTrack.navigateAfterTrack(h,g.href,g.target)}};return b.modules[c]};HPTrack.Module.modules={};HPTrack.Module.Impressions={to_track:[],to_track_separate:[],fired:false,MAX_LENGTH:712,PREFIX:"/t/m/",clean:function(a){return a.replace(/[ \-]/g,"_").toLowerCase()},queueSingle:function(a){this.queue(a,true)},queue:function(a,b){if(a.length>this.MAX_LENGTH/3){return}a=this.clean(a);if(b){this.to_track_separate.push(a)}else{this.to_track.push(a)}if(this.fired){this.fire()}},sendRequest:function(a){a=a.substr(0,a.length-1);HPTrack.trackPageview(a)},fire:function(){this.fired=true;var f=this.to_track;var c=this.to_track_separate;var g=this.PREFIX;if(!(f.length||c.length)){return}if(f.length){var b=g;for(var e=0,a=f.length;e<a;e++){var d=b+f[e]+",";if(d.length>this.MAX_LENGTH){this.sendRequest(b);this.to_track=f.slice(e);this.fire();return}else{b=d}}this.sendRequest(b);this.to_track=[]}var a=c.length;if(!a){return}for(var e=0;e<a;e++){this.sendRequest(g+c[e]+",")}this.to_track_separate=[]}};HPTrack.Module.getTrackingPrefix=function(a){var c="";var d=Dom.getAncestorByClassName(a,"module_section");if(d){var b=d.className.match(/track_childs_([^ ]+)/);if(b){c=b[1]+" - "}}return c};HPTrack.Module.DelegatedHandler=function(a,b){return function(h){var d=HPTrack;var i=E.getTarget(h);if(i&&(i.tagName=="IMG"||i.tagName=="SPAN")){i=i.parentNode||false}if(i&&i.tagName=="A"){var c="";var k="";if(i.className){var m=i.className;if(m.indexOf("TRACKED")>=0){return}var g=m.match(/track_([^_]+)_?([^ ]*)/);if(g){var c=g[1];if(g[2]){k=g[2]}}i.className+=" TRACKED";k=d.Module.getTrackingPrefix(i)+k}var f={page:"Clickthrough",lightbox:"Lightbox Open",action:"Action"};if(!f[c+""]){return}var j=false;if(c=="page"&&(!(i.target&&(!window.name||window.name!=i.target)))){j=true;E.preventDefault(h)}var l=f[c+""];if(a.huff_tracker){a.event(l,k)}else{a.call((b||this),l,k)}if(j){d.navigateAfterTrack(h,i.href)}}}};HPTrack.Vid={DL:function(b){if(typeof(bN)=="undefined"){return}var a={};a.d=b;a.t=(new Date()).getTime();a.q=-1;HPTrack.trackedVideos[b.videoId]=a;bN.set("vidId",a.d.videoId,1);bN.set("vidTime",a.t,1);bN.set("vidAdViewed",0,1);bN.ping("video5min")},TC:function(c){if(typeof(bN)=="undefined"){return}var b;if(typeof(b=HPTrack.trackedVideos[c.videoId])=="undefined"){return}if(typeof(c.playheadTime)=="undefined"||typeof(b.d)=="undefined"||b.d.duration<=0){return}var a=Math.floor(c.playheadTime/b.d.duration*4)*25;if(b.q<a){b.q=a;bN.set("vidId",c.videoId,1);bN.set("vidTime",b.t,1);bN.set("vidAdViewed",1,1);bN.set("vidState",a,1);bN.ping("video5min")}}};HPTrack.TwitterEvents={__initialized:false,__placement:document.title,__network:"twitter",track:function(){if(this.__initialized){return}var a=this;twttr.ready(function(b){b.events.bind("click",a.__trackEvent);b.events.bind("tweet",a.__trackEvent);b.events.bind("retweet",a.__trackEvent);b.events.bind("favorite",a.__trackEvent);b.events.bind("follow",a.__trackEvent)});this.__initialized=true},__trackEvent:function(d){if(!d){return}var f=HPTrack.TwitterEvents,b=f.__getGATarget(d),a=d.hasOwnProperty("region")?d.region:null,c=b;a&&(c="["+a+"] - "+b);HPTrack.trackSocial(f.__network,d.type,c)},__getGATarget:function(f){var d=HPTrack.TwitterEvents.__placement,c=jQuery(f.target),b=c.parent(),a=b.data("placement");return a?a:d}};
(function(a){var d=1,c=function(f){return jQuery("string"===typeof f?"#"+f:f)},b=function(e){huff.beta&&console.warn(e+" is deprecated")};a.YAHOO={util:{Event:{on:function(j,h,g,f,i){b("YAHOO.util.Event.on",arguments);c(j).bind(h,function(k){i===true?g.apply(f||this,arguments):g.call(i||this,k,f)})},onAvailable:function(h,g){b("YAHOO.util.Event.onAvailable",arguments);if(c(h).length){return"function"===typeof g&&g()}var e=0,f=setInterval(function(){if(c(h).length){"function"===typeof g&&g();clearInterval(f)}else{2000<++e&&clearInterval(f)}},100)},addListener:function(i,h,g,f){b("YAHOO.util.Event.addListener",arguments);c(i).bind(h,function(){g.apply(f,arguments)})},removeListener:function(g,f){b("YAHOO.util.Event.removeListener",arguments);c(g).unbind(f)},getTarget:function(f){b("YAHOO.util.Event.getTarget",arguments);return f.currentTarget},purgeElement:function(f){b("YAHOO.util.Event.purgeElement",arguments);c(f).unbind()}},Dom:{get:function(){b("YAHOO.util.Dom.get",arguments);return document.getElementById.apply(document,arguments)},setStyle:function(f,h,g){b("YAHOO.util.Dom.setStyle",arguments);c(f).css(h,g)},getStyle:function(f,g){b("YAHOO.util.Dom.getStyle",arguments);return c(f).css(g)},addClass:function(f,g){b("YAHOO.util.Dom.addClass",arguments);c(f).addClass(g)},removeClass:function(f,g){b("YAHOO.util.Dom.removeClass",arguments);c(f).removeClass(g)},hasClass:function(f,g){b("YAHOO.util.Dom.hasClass",arguments);return c(f).hasClass(g)},batch:function(h,g){b("YAHOO.util.Dom.batch",arguments);c(h).each(g)},getElementsByClassName:function(f,e){b("YAHOO.util.Dom.getElementsByClassName",arguments);return Array.prototype.slice.call(jQuery((e||"")+"."+f),0)},generateId:function(f){b("YAHOO.util.Dom.generateId",arguments);var g="yui-gen"+(d++);c(f).attr("id",g);return g},getXY:function(f){b("YAHOO.util.Dom.getXY",arguments);var g=c(f).offset();return g?[g.left,g.top]:false},getDocumentHeight:function(){return jQuery(document).height()},getViewportHeight:function(){return jQuery(window).height()},getAncestorByClassName:function(f,g){return c(f).parents("."+g)[0]||null}},Connect:{asyncRequest:function(j,h,i,e){b("YAHOO.util.Connect.asyncRequest",arguments);var f={};var g={url:h,type:j,success:function(k,l){f.done=true;"function"===typeof i.success&&i.success.call(i.scope||null,{responseText:k,status:l.status,argument:i.argument})},error:function(){f.done=true;"function"===typeof i.failure&&i.failure.call(i.scope||null)}};i.timeout&&(g.timeout=i.timeout);e&&(g.data=e);jQuery.ajax(g);return f},isCallInProgress:function(e){return !!e.done}},Anim:function(m,k,j,f){b("YAHOO.util.Anim",arguments);m=c(m);var h,n={},o={},g=[];for(var l in k){if(k.hasOwnProperty(l)){h=k[l];"from" in h&&(n[l]=h.from);"to" in h&&(o[l]=h.to)}}m.css(n);return{animate:function(){m.animate(o,j,function(){for(var p=0,e=g.length;p<e;p++){"function"===typeof g[p]&&g[p]()}g=[]})},stop:function(){m.stop()},onComplete:{subscribe:function(e){g.push(e)}}}},Easing:{}},namespace:function(e){b("YAHOO.namespace",arguments);return YAHOO[e]={}},extend:function(f,e,h){b("YAHOO.extend",arguments);var g=function(){};g.prototype=e.prototype;f.prototype=new g();f.prototype.constructor=f;f.superclass=e.prototype;h&&jQuery.extend(f.prototype,h)}}})(window);
(function(e,n){function a(){return Math.floor(+new Date/1000)}var k,f,g=1,s,i,p=false,l=null;var m=function(){e(function(){k=e("#liveblog_container");s=k.children().length;i=h();q.call(j);b();c();d();o();p=true})};var j;n.HPLiveBlog=j={init:function(w,v,u){if(typeof(w/1)!="number"){throw TypeError("liveblogId param suppose to be a number")}this["blog_id"]=w;this["title"]=v||"";f=u?Math.floor(u.getTime()/1000):a();e(function(){var x="liveblog_"+w;huff.use("ws/websocket","jquery",function(y,z){y.subscribe(x)});huff.on("websocket/"+x,function(z){if(z){z=JSON.parse(z);var A=z.entry.id;var y=e("#entry_"+A);if(y.length){y.replaceWith(z.entry.html)}else{if(j.order!=="older"){e(z.entry.html).hide().prependTo("#liveblog_container").fadeIn(500)}else{e(z.entry.html).hide().appendTo("#liveblog_container").fadeIn(500)}}b();f=z.ts}});huff.on("websocket/close",function(){j.periodicalUpdate()});huff.on("websocket/error",function(){j.periodicalUpdate()})})},periodicalUpdate:function(){j.update();var u=60;setTimeout(HPLiveBlog.periodicalUpdate,u*1000)},update:function(){var u="http://"+HPConfig.current_web_address+"/ajax/liveblog/index.php?last_updated="+f+"&id="+this["blog_id"],w,v;e.getJSON(u,function(z){if(typeof z!=="object"){return false}w=z.data||[];v=z.ts||a();if(!e.isArray(w)||!w.length){return false}for(var y=w.length,x;y--;){x=k.find("#entry_"+w[y][0]);if(x.length){t.replaceWith(x,w[y][1])}else{x=t[!j.order||j.order!=="older"?"prepend":"append"](k,w[y][1])}x.hide().fadeIn(500)}b(jQuery);j.scrollContainer.length&&j.scrollbar.update();i=h();f=v;if(l){l()}typeof twttr==="object"&&twttr.widgets.load()})},loadPoll:function(u){e(function(){var v=e("#sidebar_right"),x=e("<div>",{id:"poll"}).appendTo(v);pollInner=e("div",{id:"poll-inner"});var w="http://"+HPConfig.current_web_address+"/ajax/liveblog/get_poll.php?id="+u;pollInner.appendTo(x).load(w)})},setEntriesLoadedCallback:function(u){l=u}};function h(){if(!(k&&k.children()[0])){return}return +k.children()[0].id.split("_")[1]}function d(){var u=function(x){var w=this.id.split(/_/)[1],v="http://"+HPConfig.current_web_address+"/ajax/liveblog/get_entries.php?id="+j.blog_id+"&type="+w;e("#liveblog_heading .selected").removeClass("selected");e(this).addClass("selected");e.get(v,[],function(y){t.html(k,y);j.order=w;g=1;b();if(l){l()}});return false};e("#view_new, #view_older").click(u)}function q(){this.scrollContainer=e("#liveblog_splash_scrollbar");if(this.scrollContainer.length){this.scrollbar=new HPScrollbar(k[0],this.scrollContainer[0],240)}}var t=(function(){function u(x,w,v){v=v.replace(/(<script.*?type=['"])([^'"]+)?(['"][^>]+><\/script>)/g,function(y,B,A,z){return B.replace(/<script/,"<span")+"to_insert"+z.replace(/<\/script/,"</span")});e(w).each(function(z,A){var y=A=e(A);if(x=="append"){A.append(v)}else{if(x=="prepend"){A.prepend(v)}else{if(x=="html"){A.html(v)}else{if(x=="replaceWith"){y=A.parent().get(0);A.replaceWith(v)}}}}e(y).find("span[type='to_insert']").each(function(C,D){var B=document.createElement("script");B.type="text/javascript";B.src=e(D).attr("src");e(D).parent().get(0).insertBefore(B,D);e(D).remove()})});return e(w)}return{html:function(w,v){return u("html",w,v)},append:function(w,v){return u("append",w,v)},prepend:function(w,v){return u("prepend",w,v)},replaceWith:function(w,v){return u("replaceWith",w,v)}}})();var b=(function(){var u=new Date();u.setHours(0);u.setMinutes(0);u.setSeconds(0);u.setMilliseconds(0);return function(){huff.use("strftime",function(v){e(".liveblog_entry .lb_heading").each(function(){var z=e(this);if(z.find(".time").html()!=""){return}var y=+(z.find("input[type=hidden]").val()/1000);var w=" "+v(__("%l:%M %p"),y);var x=(y*1000>u)?__("Today"):v(__("%m/%e/%Y"),y);z.find(".time").html('<span class="hours">'+w+'</span>&nbsp;&ndash;&nbsp;<span class="day">'+x+"</span>")})})}})();var r=function(x,w){if(typeof x!=="function"){throw TypeError("first param should be a function")}var u="http://"+n.location.host+"/ajax/liveblog/get_entries.php",v={id:j.blog_id,type:HPLiveBlog.order||"new",page:w||g};e.get(u,v,function(z){try{z=e.parseJSON(z);typeof z==="object"&&z.error&&x.call(this,false)}catch(y){x.call(this,z);w&&(g=w)||g++}})};function o(){e("#more").click(function(){var v=e(this);if(typeof(s_265)!="undefined"){try{var w=s_265.prop1;s_265.prop1="read_more";if(window.HPTrack){HPTrack.Services.trackTo(["Omniture","Comscore","DataLayer"],{ajax:true,add_comscore_noop:true})}if(typeof(w)=="undefined"){delete s_265.prop1}else{s_265.prop1=w}}catch(u){}}r(function(x){!x&&v.hide()||t.append(k,x)&&b();e(".share_marker").each(function(){e(this).html(__("Share")+" +")});e(".liveblog_share .twitter_share").each(function(){e(this).html(__("Tweet"))});e(".liveblog_share .facebook_share").each(function(){e(this).html(__("Share"))});e(".liveblog_share .tumblr_share").each(function(){e(this).html(__("tumblr"))});if(l){l()}});return false})}var c=function(){var y="scrollbars=yes,resizable=yes,toolbar=no,location=yes",v=550,K=420,C=n.screen.height,A=n.screen.width,z=Math.round((A/2)-(v/2)),J=C>K?Math.round((C/2)-(K/2)):0;urlsCache={};function B(M,N){var M=M.replace(/\/mobileweb/,"");if(urlsCache[M]){N(urlsCache[M]);return}var L={login:HPConfig.bit_ly_key.user_name,apiKey:HPConfig.bit_ly_key.user_key,longUrl:M};e.getJSON("http://api.bit.ly/v3/shorten?callback=?",L,function(P){var O="";if(P&&P.status_code&&P.status_code==200){O=P.data.url}else{O=M}N(O);urlsCache[M]=O})}function x(L){n.open(L,"intent",y+",width="+v+",height="+K+",left="+z+",top="+J)}function G(){var M=this.alt;function L(O){var P=e(".liveblog_entry.liveblog_permalink .lb_heading .lb_title").html(),U=(M?M+"":"")+(P||""),N=HPConfig.twitter_signature||"@huffingtonpost",T=__("%1$s live updates on %2$s %3$s",U,N,O),S=new RegExp(N+"*","i");T.length>140&&(T=T.replace(S,""));var R=jQuery.I18N.getLocale().substr(0,2);var Q=(R=="en")?"com":R;x("http://twitter.com/intent/tweet/?lang="+R+"&text="+encodeURIComponent(T))}B(this.href,L);return false}function I(){var M=e(".liveblog_entry.liveblog_permalink .lb_heading .lb_title").html();var N="http://"+HPConfig.current_web_domain+"/hpfb/?r=false&link_to=permalink&object=article&id="+HPConfig.entry_id+"&t="+encodeURIComponent(M)+"&u="+encodeURIComponent(this.href);var L={method:"stream.share",u:this.href,name:M,display:"popup"};function O(P){location.href=location.href}FB.ui(L,O)}function E(){id=e(this).attr("entity_id");var P="quote",R=e(".liveblog_entry.liveblog_permalink"),S=this.href,Q=encodeURIComponent('<a href="'+S+'">'+e(".lb_heading .lb_title",R).html()+"</a>"),O=encodeURIComponent(e(".lb_body",R).html()),L=encodeURIComponent('<a href="'+S+'">'+e(".lb_heading .lb_title",R).html()+"</a>"),M=encodeURIComponent(e(".lb_body",R).html()),T=encodeURIComponent(e("#liveblog_container").data("tags"));tweet=encodeURIComponent(S);var N="http://www.tumblr.com/share?type="+(P?P:"")+"&source="+(L?L:"")+"&quote="+(M?M:"")+"&tags="+(T?T:"")+"&language="+jQuery.I18N.getLocale()+"&tweet="+(tweet?tweet:"");PopupManager.open(N,500,450);return}k.delegate(".twitter_share","click",G).delegate(".facebook_share","click",I).delegate(".tumblr_share","click",E);function H(M){var M=M||location.hash;M=M.replace(/[^a-zA-Z0-9=_-]/g,"");var L=e('a[name="'+M+'"]');L.attr("name",M+"-tmp");window.location.hash=M;L.attr("name",M)}var u="liveblog_permalink",w=(function(){var L=e("body"),Q=e(document),N,R,P,O;function M(){O.removeClass(u);e(".share_marker",O).removeClass("selected").show();R.remove();P.remove();N.fadeOut(700,function(){e(this).remove();e(".topnav_first_row > ul").css("position","relative")});return false}return function(U,T){U=e(U);T=typeof T==="undefined"?true:T;H(U.attr("name"));if((!U.length||isNaN(parseInt(U.attr("name"))))){return false}O=U.parents(".liveblog_entry").addClass(u).removeClass("selected");e(".share_marker",O).hide();N=e("<div>").addClass("liveblog_overlay").hide().appendTo("#liveblog_container").fadeIn(300).click(M);e(".topnav_first_row > ul").css("position","static");P=e("<a>").attr("href","#").appendTo(O).addClass("permalink_close").click(M);var V=e('<input type="text" class="liveblog_permalink" readonly id="permalink_'+U[0].name+'"/>'),S=e("<label>").attr("for","permalink_"+U[0].name).html("<span>"+jQuery.I18N.gettext("Link to this")+":</span>").append(V).appendTo(O);R=S.wrap('<div class="permalinks">');B(U[0].href,function(X){V.val(X).click(function(){this.select()})});L.one("keyup",function W(X){X.keyCode===27?M():L.one("keyup",W)});e(window).load(function(){setTimeout(function(){window.location.href.indexOf("#")&&(window.location.href=window.location.href)},5000)});return true}}());function F(M){matches=/^\d+/.exec(M);var L=matches!==null?matches[0]:-1;if(L<=1){return false}var N=Math.ceil((i-L)/s);N>1&&r(function(O){t.append(k,O);b();w(e("a[name = "+M+"]"));if(l){l()}},N-1)}var D=n.location.hash.substr(1).replace(/[^a-zA-Z0-9_-]/g,"");if(D.length&&D!=="liveblog"){if(!w("a[name="+D+"]")){F(D)}}k.delegate(".liveblog_entry","click",function(L){if(e.inArray(L.target.tagName.toLowerCase(),["a","object","embbed"])!==-1){return true}var M=e(this);M.hasClass(u)||w(M.find("a[name]")[0],false);return false});k.delegate(".liveblog_entry","mouseenter",function(){var L=e(this);L.hasClass(u)||e(".share_marker",L).addClass("selected")&&L.addClass("selected")});k.delegate(".liveblog_entry","mouseleave",function(){var L=e(this);L.hasClass(u)||e(".share_marker",L).removeClass("selected")&&L.removeClass("selected")});e(".share_marker").each(function(){e(this).html(__("Share")+" +")});e(".liveblog_share .twitter_share").each(function(){e(this).html(__("Tweet"))});e(".liveblog_share .facebook_share").each(function(){e(this).html(__("Share"))});e(".liveblog_share .tumblr_share").each(function(){e(this).html(__("tumblr"))})};!p&&m()})(jQuery,window);
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});(function(e){var c={};var d={ANYWHERE_URL:"/ajax/twitter/anywhere/anywhere.php",ANYWHERE_URL_V2:"/ajax/twitter/anywhere/anywhere_v2.php"};var b={};b.anywhereWnd={hideTimeout:undefined,version:1,config:{window_delay:250}};b.anywhere=function(g,h){if(!g){g=e("body")}var i=typeof(g)==="string"?e("#"+g):g;if(i.length==0){return}e.proxy(this.setConfig(h),this);if(e("#hp_anywhere_wnd").length==0){this.anywhereWnd.loadCSS();e("#hp_anywhere_wnd").mouseenter(e.proxy(this.anywhereWnd.onMouseOver,this.anywhereWnd));e("#hp_anywhere_wnd").mouseleave(e.proxy(this.anywhereWnd.onMouseOut,this.anywhereWnd))}this.anywhereWnd.wnd=e("#hp_anywhere_wnd");this.anywhereWnd.content=e("#aw_content");this.anywhereWnd.triangle=e("#aw_triangle");a();i.mouseover(e.proxy(this.anywhereWnd.show,this.anywhereWnd));i.mouseout(e.proxy(function(n){var o=n.target;var j=o.className;if(!j||typeof(j.indexOf)!="function"){return}var l=j.indexOf("twitter-anywhere-user")>-1;var m=j.indexOf("twitter-anywhere-user-v2")>-1;if(!l&&!m){return}var k=this;clearTimeout(this.mouseoverTimeout);b.anywhereWnd.timeoutHide()},this.anywhereWnd))};b.setConfig=function(g){if(g){if(g.hasOwnProperty("window_delay")){this.anywhereWnd.config.window_delay=g.window_delay}}};b.anywhereWnd.loadCSS=function(){var g=document.createElement("link");g.setAttribute("rel","stylesheet");g.setAttribute("href","http://s.huffpost.com/assets/css.php?f=hptwitter_anywhere.css&9");g.setAttribute("type","text/css");g.setAttribute("media","screen");e("head").append(g)};b.anywhereWnd.show=function(g){var l=g.target;var o=l.className;if(!o||typeof(o.indexOf)!="function"){return}var m=o.indexOf("twitter-anywhere-user")>-1;var k=o.indexOf("twitter-anywhere-user-v2")>-1;if(!m&&!k){return}if(k){this.version=2;this.wnd.addClass("v2")}else{this.version=1;this.wnd.removeClass("v2")}var h=l.nodeName==="IMG"?l.parentNode:l;var j=this.getUsernameFromTarget(h);var i=this.getTweetIdFromTarget(l);var n=this;this.mouseoverTimeout=window.setTimeout(function(){if(n.request&&f(n.request)){n.request.abort()}n.target=l;clearTimeout(n.hideTimeout);n.setContent(j,i,{author_nickname:n.target&&e(n.target).attr("author_nickname")?e(n.target).attr("author_nickname").toString():""});e.proxy(n.setPosition(),n)},this.config.window_delay)};b.anywhereWnd.hide=function(){this.request.abort();this.wnd.offset({top:-999})};b.anywhereWnd.timeoutHide=function(){var g=this;this.hideTimeout=setTimeout(function(){g.hide()},500)};b.anywhereWnd.cancelHiding=function(){if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0}};b.anywhereWnd.getUsernameFromTarget=function(g){if(g.href){return g.href.replace(/.+\//,"")}else{return e.trim(g.innerHTML).replace("@","")}};b.anywhereWnd.getTweetIdFromTarget=function(g){return e(g).attr("tid")};b.anywhereWnd.onMouseOver=function(h){var j={left:h.pageX,top:h.pageY};var g=e("#hp_anywhere_wnd");var i={top:g.offset().top,right:g.offset().left+g.width(),bottom:g.offset().top+g.height()+13,left:g.offset().left};this.cancelHiding()};b.anywhereWnd.onMouseOut=function(g){this.timeoutHide()};b.anywhereWnd.setPosition=function(){var h=e(this.target).offset();var g=h.left+(e(this.target).width()/2-(20+19/2));var i=h.top-e(this.wnd).height()+3;e(this.wnd).offset({left:g,top:i})};b.anywhereWnd.setContent=function(h,l,j){var k={author_nickname:""};extend(k,j);if(c.hasOwnProperty(h)){this.content.removeClass("smallwidth");this.content.html(c[h]);e.proxy(this.setMoreEvent(),this);return}else{a()}var g="";if(l>0){g="&tid="+l}var i;if(this.version==2){i=d.ANYWHERE_URL_V2+"?user="+h+g}else{i=d.ANYWHERE_URL+"?user="+h}i+="&author_nickname="+k.author_nickname;this.request=e.ajax({context:this,url:i,dataType:"json",success:function(m,n){if(m.status=="error"){this.showError(__("Sorry, this does not appear to be an active Twitter account"));e.proxy(this.setPosition(),this);return}this.content.removeClass("smallwidth");this.content.html(m.userinfo_html);this.setMoreEvent();c[h]=m.userinfo_html;e.proxy(this.setPosition(),this)}})};b.anywhereWnd.setMoreEvent=function(){e("#aw_more").click(e.proxy(function(g){e(g.target).remove();e("#aw_more_details").removeClass("force_hidden");e.proxy(this.setPosition(),this)},this))};b.anywhereWnd.showError=function(g){this.content.removeClass("smallwidth");this.content.html('<div style="padding:3px;">'+g+"</div>")};function a(){b.anywhereWnd.content.addClass("smallwidth");b.anywhereWnd.content.html('<div class="aw_loader">'+__("Loading...")+"</div>")}function f(g){if(g){return g.readyState!==4&&g.readyState!==0}else{return false}}window.TwitterAnywhere=b})(jQuery);
window.Modernizr=function(ah,ag,af){function F(b){Y.cssText=b}function E(d,c){return F(V.join(d+";")+(c||""))}function S(d,c){return typeof d===c}function Q(d,c){return !!~(""+d).indexOf(c)}function O(g,c,j){for(var i in g){var h=c[g[i]];if(h!==af){return j===!1?g[i]:S(h,"function")?h.bind(j||c):h}}return !1}var ae="2.6.2",ad={},ac=!0,ab=ag.documentElement,aa="modernizr",Z=ag.createElement(aa),Y=Z.style,X,W={}.toString,V=" -webkit- -moz- -o- -ms- ".split(" "),U={svg:"http://www.w3.org/2000/svg"},T={},R={},P={},N=[],M=N.slice,K,J=function(v,u,t,s){var r,q,p,o,h=ag.createElement("div"),g=ag.body,b=g||ag.createElement("body");if(parseInt(t,10)){while(t--){p=ag.createElement("div"),p.id=s?s[t]:aa+(t+1),h.appendChild(p)}}return r=["&#173;",'<style id="s',aa,'">',v,"</style>"].join(""),h.id=aa,(g?h:b).innerHTML+=r,b.appendChild(h),g||(b.style.background="",b.style.overflow="hidden",o=ab.style.overflow,ab.style.overflow="hidden",ab.appendChild(b)),q=u(h,v),g?h.parentNode.removeChild(h):(b.parentNode.removeChild(b),ab.style.overflow=o),!!q},I=function(a){var f=ah.matchMedia||ah.msMatchMedia;if(f){return f(a).matches}var e;return J("@media "+a+" { #"+aa+" { position: absolute; } }",function(c){e=(ah.getComputedStyle?getComputedStyle(c,null):c.currentStyle)["position"]=="absolute"}),e},H={}.hasOwnProperty,G;!S(H,"undefined")&&!S(H.call,"undefined")?G=function(d,c){return H.call(d,c)}:G=function(d,c){return c in d&&S(d.constructor.prototype[c],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(a){var h=this;if(typeof h!="function"){throw new TypeError}var g=M.call(arguments,1),f=function(){if(this instanceof f){var b=function(){};b.prototype=h.prototype;var d=new b,c=h.apply(d,g.concat(M.call(arguments)));return Object(c)===c?c:d}return h.apply(a,g.concat(M.call(arguments)))};return f}),T.touch=function(){var a;return"ontouchstart" in ah||ah.DocumentTouch&&ag instanceof DocumentTouch?a=!0:J(["@media (",V.join("touch-enabled),("),aa,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(b){a=b.offsetTop===9}),a},T.svg=function(){return !!ag.createElementNS&&!!ag.createElementNS(U.svg,"svg").createSVGRect},T.inlinesvg=function(){var b=ag.createElement("div");return b.innerHTML="<svg/>",(b.firstChild&&b.firstChild.namespaceURI)==U.svg},T.svgclippaths=function(){return !!ag.createElementNS&&/SVGClipPath/.test(W.call(ag.createElementNS(U.svg,"clipPath")))};for(var L in T){G(T,L)&&(K=L.toLowerCase(),ad[K]=T[L](),N.push((ad[K]?"":"no-")+K))}return ad.addTest=function(e,c){if(typeof e=="object"){for(var f in e){G(e,f)&&ad.addTest(f,e[f])}}else{e=e.toLowerCase();if(ad[e]!==af){return ad}c=typeof c=="function"?c():c,typeof ac!="undefined"&&ac&&(ab.className+=" "+(c?"":"no-")+e),ad[e]=c}return ad},F(""),Z=X=null,function(an,am){function z(f,e){var h=f.createElement("p"),g=f.getElementsByTagName("head")[0]||f.documentElement;return h.innerHTML="x<style>"+e+"</style>",g.insertBefore(h.lastChild,g.firstChild)}function y(){var b=s.elements;return typeof b=="string"?b.split(" "):b}function x(d){var c=B[d[D]];return c||(c={},C++,d[D]=C,B[C]=c),c}function w(b,h,e){h||(h=am);if(A){return h.createElement(b)}e||(e=x(h));var d;return e.cache[b]?d=e.cache[b].cloneNode():aj.test(b)?d=(e.cache[b]=e.createElem(b)).cloneNode():d=e.createElem(b),d.canHaveChildren&&!ak.test(b)?e.frag.appendChild(d):d}function v(b,l){b||(b=am);if(A){return b.createDocumentFragment()}l=l||x(b);var k=l.frag.cloneNode(),j=0,i=y(),h=i.length;for(;j<h;j++){k.createElement(i[j])}return k}function u(d,c){c.cache||(c.cache={},c.createElem=d.createElement,c.createFrag=d.createDocumentFragment,c.frag=c.createFrag()),d.createElement=function(a){return s.shivMethods?w(a,d,c):c.createElem(a)},d.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+y().join().replace(/\w+/g,function(b){return c.createElem(b),c.frag.createElement(b),'c("'+b+'")'})+");return n}")(s,c.frag)}function t(b){b||(b=am);var d=x(b);return s.shivCSS&&!ai&&!d.hasCSS&&(d.hasCSS=!!z(b,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),A||u(b,d),b}var al=an.html5||{},ak=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,aj=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,ai,D="_html5shiv",C=0,B={},A;(function(){try{var b=am.createElement("a");b.innerHTML="<xyz></xyz>",ai="hidden" in b,A=b.childNodes.length==1||function(){am.createElement("a");var c=am.createDocumentFragment();return typeof c.cloneNode=="undefined"||typeof c.createDocumentFragment=="undefined"||typeof c.createElement=="undefined"}()}catch(d){ai=!0,A=!0}})();var s={elements:al.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:al.shivCSS!==!1,supportsUnknownElements:A,shivMethods:al.shivMethods!==!1,type:"default",shivDocument:t,createElement:w,createDocumentFragment:v};an.html5=s,t(am)}(this,ag),ad._version=ae,ad._prefixes=V,ad.mq=I,ad.testStyles=J,ab.className=ab.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(ac?" js "+N.join(" "):""),ad}(this,this.document),function(ad,ac,ab){function aa(b){return"[object Function]"==P.call(b)}function Z(b){return"string"==typeof b}function Y(){}function X(b){return !b||"loaded"==b||"complete"==b||"uninitialized"==b}function W(){var b=O.shift();M=1,b?b.t?R(function(){("c"==b.t?L.injectCss:L.injectJs)(b.s,0,b.a,b.x,b.e,1)},0):(b(),W()):M=0}function V(w,v,t,s,q,p,n){function m(a){if(!g&&X(h.readyState)&&(x.r=g=1,!M&&W(),h.onload=h.onreadystatechange=null,a)){"img"!=w&&R(function(){I.removeChild(h)},50);for(var c in D[v]){D[v].hasOwnProperty(c)&&D[v][c].onload()}}}var n=n||L.errorTimeout,h=ac.createElement(w),g=0,b=0,x={t:t,s:v,e:q,a:p,x:n};1===D[v]&&(b=1,D[v]=[]),"object"==w?h.data=v:(h.src=v,h.type=w),h.width=h.height="0",h.onerror=h.onload=h.onreadystatechange=function(){m.call(this,b)},O.splice(s,0,x),"img"!=w&&(b||2===D[v]?(I.insertBefore(h,J?null:Q),R(m,n)):D[v].push(h))}function U(g,e,j,i,h){return M=0,e=e||"j",Z(g)?V("c"==e?G:H,g,e,this.i++,j,i,h):(O.splice(this.i++,0,g),1==O.length&&W()),this}function T(){var b=L;return b.loader={load:U,i:0},b}var S=ac.documentElement,R=ad.setTimeout,Q=ac.getElementsByTagName("script")[0],P={}.toString,O=[],M=0,K="MozAppearance" in S.style,J=K&&!!ac.createRange().compareNode,I=J?S:Q.parentNode,S=ad.opera&&"[object Opera]"==P.call(ad.opera),S=!!ac.attachEvent&&!S,H=K?"object":S?"script":"img",G=S?"script":H,F=Array.isArray||function(b){return"[object Array]"==P.call(b)},E=[],D={},C={timeout:function(d,c){return c.length&&(d.timeout=c[0]),d}},N,L;L=function(e){function c(i){var i=i.split("!"),h=E.length,q=i.pop(),p=i.length,q={url:q,origUrl:q,prefixes:i},o,l,j;for(l=0;l<p;l++){j=i[l].split("="),(o=C[j.shift()])&&(q=o(q,j))}for(l=0;l<h;l++){q=E[l](q)}return q}function n(b,s,r,q,p){var o=c(b),l=o.autoCallback;o.url.split(".").pop().split("?").shift(),o.bypass||(s&&(s=aa(s)?s:s[b]||s[q]||s[b.split("/").pop().split("?")[0]]),o.instead?o.instead(b,s,r,q,p):(D[o.url]?o.noexec=!0:D[o.url]=1,r.load(o.url,o.forceCSS||!o.forceJS&&"css"==o.url.split(".").pop().split("?").shift()?"c":ab,o.noexec,o.attrs,o.timeout),(aa(s)||aa(l))&&r.load(function(){T(),s&&s(o.origUrl,p,q),l&&l(o.origUrl,p,q),D[o.url]=2})))}function m(w,v){function u(b,h){if(b){if(Z(b)){h||(r=function(){var i=[].slice.call(arguments);q.apply(this,i),p()}),n(b,r,v,0,t)}else{if(Object(b)===b){for(g in o=function(){var a=0,i;for(i in b){b.hasOwnProperty(i)&&a++}return a}(),b){b.hasOwnProperty(g)&&(!h&&!--o&&(aa(r)?r=function(){var i=[].slice.call(arguments);q.apply(this,i),p()}:r[g]=function(i){return function(){var a=[].slice.call(arguments);i&&i.apply(this,a),p()}}(q[g])),n(b[g],r,v,g,t))}}}}else{!h&&p()}}var t=!!w.test,s=w.load||w.both,r=w.callback||Y,q=r,p=w.complete||Y,o,g;u(t?w.yep:w.nope,!!s),s&&u(s)}var k,f,d=this.yepnope.loader;if(Z(e)){n(e,0,d,0)}else{if(F(e)){for(k=0;k<e.length;k++){f=e[k],Z(f)?n(f,0,d,0):F(f)?L(f):Object(f)===f&&m(f,d)}}else{Object(e)===e&&m(e,d)}}},L.addPrefix=function(d,c){C[d]=c},L.addFilter=function(b){E.push(b)},L.errorTimeout=10000,null==ac.readyState&&ac.addEventListener&&(ac.readyState="loading",ac.addEventListener("DOMContentLoaded",N=function(){ac.removeEventListener("DOMContentLoaded",N,0),ac.readyState="complete"},0)),ad.yepnope=T(),ad.yepnope.executeStack=W,ad.yepnope.injectJs=function(r,q,p,n,m,h){var g=ac.createElement("script"),f,b,n=n||L.errorTimeout;g.src=r;for(b in p){g.setAttribute(b,p[b])}q=h?W:q||Y,g.onreadystatechange=g.onload=function(){!f&&X(g.readyState)&&(f=1,q(),g.onload=g.onreadystatechange=null)},R(function(){f||(f=1,q(1))},n),m?g.onload():Q.parentNode.insertBefore(g,Q)},ad.yepnope.injectCss=function(b,n,m,l,k,h){var l=ac.createElement("link"),f,n=h?W:n||Y;l.href=b,l.rel="stylesheet",l.type="text/css";for(f in m){l.setAttribute(f,m[f])}k||(Q.parentNode.insertBefore(l,Q),R(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Modernizr.addTest("ie8compat",function(){return !window.addEventListener&&document.documentMode&&document.documentMode===7});
/*
 * Foundation Responsive Library
 * http://foundation.zurb.com
 * Copyright 2013, ZURB
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
*/
/*jslint unparam: true, browser: true, indent: 2 */
// Accommodate running jQuery or Zepto in noConflict() mode by
// using an anonymous function to redefine the $ shorthand name.
// See http://docs.jquery.com/Using_jQuery_with_Other_Libraries
// and http://zeptojs.com/
var libFuncName=null;if(typeof jQuery=="undefined"&&typeof Zepto=="undefined"&&typeof $=="function")libFuncName=$;else if(typeof jQuery=="function")libFuncName=jQuery;else{if(typeof Zepto!="function")throw new TypeError;libFuncName=Zepto}(function(e,t,n,r){"use strict";t.matchMedia=t.matchMedia||function(e,t){var n,r=e.documentElement,i=r.firstElementChild||r.firstChild,s=e.createElement("body"),o=e.createElement("div");return o.id="mq-test-1",o.style.cssText="position:absolute;top:-100em",s.style.background="none",s.appendChild(o),function(e){return o.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',r.insertBefore(s,i),n=o.offsetWidth===42,r.removeChild(s),{matches:n,media:e}}}(n),Array.prototype.filter||(Array.prototype.filter=function(e){if(this==null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(typeof e!="function")return;var r=[],i=arguments[1];for(var s=0;s<n;s++)if(s in t){var o=t[s];e&&e.call(i,o,s,t)&&r.push(o)}return r}),Function.prototype.bind||(Function.prototype.bind=function(e){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(this==null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(n===0)return-1;var r=0;arguments.length>1&&(r=Number(arguments[1]),r!=r?r=0:r!=0&&r!=Infinity&&r!=-Infinity&&(r=(r>0||-1)*Math.floor(Math.abs(r))));if(r>=n)return-1;var i=r>=0?r:Math.max(n-Math.abs(r),0);for(;i<n;i++)if(i in t&&t[i]===e)return i;return-1}),e.fn.stop=e.fn.stop||function(){return this},t.Foundation={name:"Foundation",version:"4.3.1",cache:{},init:function(t,n,r,i,s,o){var u,a=[t,r,i,s],f=[],o=o||!1;o&&(this.nc=o),this.rtl=/rtl/i.test(e("html").attr("dir")),this.scope=t||this.scope;if(n&&typeof n=="string"&&!/reflow/i.test(n)){if(/off/i.test(n))return this.off();u=n.split(" ");if(u.length>0)for(var l=u.length-1;l>=0;l--)f.push(this.init_lib(u[l],a))}else{/reflow/i.test(n)&&(a[1]="reflow");for(var c in this.libs)f.push(this.init_lib(c,a))}return typeof n=="function"&&a.unshift(n),this.response_obj(f,a)},response_obj:function(e,t){for(var n=0,r=t.length;n<r;n++)if(typeof t[n]=="function")return t[n]({errors:e.filter(function(e){if(typeof e=="string")return e})});return e},init_lib:function(e,t){return this.trap(function(){return this.libs.hasOwnProperty(e)?(this.patch(this.libs[e]),this.libs[e].init.apply(this.libs[e],t)):function(){}}.bind(this),e)},trap:function(e,t){if(!this.nc)try{return e()}catch(n){return this.error({name:t,message:"could not be initialized",more:n.name+" "+n.message})}return e()},patch:function(e){this.fix_outer(e),e.scope=this.scope,e.rtl=this.rtl},inherit:function(e,t){var n=t.split(" ");for(var r=n.length-1;r>=0;r--)this.lib_methods.hasOwnProperty(n[r])&&(this.libs[e.name][n[r]]=this.lib_methods[n[r]])},random_str:function(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");e||(e=Math.floor(Math.random()*t.length));var n="";for(var r=0;r<e;r++)n+=t[Math.floor(Math.random()*t.length)];return n},libs:{},lib_methods:{set_data:function(e,t){var n=[this.name,+(new Date),Foundation.random_str(5)].join("-");return Foundation.cache[n]=t,e.attr("data-"+this.name+"-id",n),t},get_data:function(e){return Foundation.cache[e.attr("data-"+this.name+"-id")]},remove_data:function(t){t?(delete Foundation.cache[t.attr("data-"+this.name+"-id")],t.attr("data-"+this.name+"-id","")):e("[data-"+this.name+"-id]").each(function(){delete Foundation.cache[e(this).attr("data-"+this.name+"-id")],e(this).attr("data-"+this.name+"-id","")})},throttle:function(e,t){var n=null;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(r,i)},t)}},data_options:function(t){function u(e){return!isNaN(e-0)&&e!==null&&e!==""&&e!==!1&&e!==!0}function a(t){return typeof t=="string"?e.trim(t):t}var n={},r,i,s=(t.attr("data-options")||":").split(";"),o=s.length;for(r=o-1;r>=0;r--)i=s[r].split(":"),/true/i.test(i[1])&&(i[1]=!0),/false/i.test(i[1])&&(i[1]=!1),u(i[1])&&(i[1]=parseInt(i[1],10)),i.length===2&&i[0].length>0&&(n[a(i[0])]=a(i[1]));return n},delay:function(e,t){return setTimeout(e,t)},scrollTo:function(n,r,i){if(i<0)return;var s=r-e(t).scrollTop(),o=s/i*10;this.scrollToTimerCache=setTimeout(function(){isNaN(parseInt(o,10))||(t.scrollTo(0,e(t).scrollTop()+o),this.scrollTo(n,r,i-10))}.bind(this),10)},scrollLeft:function(e){if(!e.length)return;return"scrollLeft"in e[0]?e[0].scrollLeft:e[0].pageXOffset},empty:function(e){if(e.length&&e.length>0)return!1;if(e.length&&e.length===0)return!0;for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0}},fix_outer:function(e){e.outerHeight=function(e,t){return typeof Zepto=="function"?e.height():typeof t!="undefined"?e.outerHeight(t):e.outerHeight()},e.outerWidth=function(e,t){return typeof Zepto=="function"?e.width():typeof t!="undefined"?e.outerWidth(t):e.outerWidth()}},error:function(e){return e.name+" "+e.message+"; "+e.more},off:function(){return e(this.scope).off(".fndtn"),e(t).off(".fndtn"),!0},zj:e},e.fn.foundation=function(){var e=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(e)),this})}})(libFuncName,this,this.document),function(e,t,n,r){"use strict";Foundation.libs.alerts={name:"alerts",version:"4.2.2",settings:{speed:300,callback:function(){}},init:function(t,n,r){return this.scope=t||this.scope,typeof n=="object"&&e.extend(!0,this.settings,n),typeof n!="string"?(this.settings.init||this.events(),this.settings.init):this[n].call(this,r)},events:function(){var t=this;e(this.scope).on("click.fndtn.alerts","[data-alert] a.close",function(n){n.preventDefault(),e(this).closest("[data-alert]").fadeOut(t.speed,function(){e(this).remove(),t.settings.callback()})}),this.settings.init=!0},off:function(){e(this.scope).off(".fndtn.alerts")},reflow:function(){}}}(Foundation.zj,this,this.document),function(e,t,n,r){"use strict";Foundation.libs.clearing={name:"clearing",version:"4.3.1",settings:{templates:{viewing:'<a href="#" class="clearing-close">&times;</a><div class="visible-img" style="display: none"><img src="//:0"><p class="clearing-caption"></p><a href="#" class="clearing-main-prev"><span></span></a><a href="#" class="clearing-main-next"><span></span></a></div>'},close_selectors:".clearing-close",init:!1,locked:!1},init:function(t,n,r){var i=this;return Foundation.inherit(this,"set_data get_data remove_data throttle data_options"),typeof n=="object"&&(r=e.extend(!0,this.settings,n)),typeof n!="string"?(e(this.scope).find("ul[data-clearing]").each(function(){var t=e(this),n=n||{},r=t.find("li"),s=i.get_data(t);!s&&r.length>0&&(n.$parent=t.parent(),i.set_data(t,e.extend({},i.settings,n,i.data_options(t))),i.assemble(t.find("li")),i.settings.init||i.events().swipe_events())}),this.settings.init):this[n].call(this,r)},events:function(){var n=this;return e(this.scope).on("click.fndtn.clearing","ul[data-clearing] li",function(t,r,i){var r=r||e(this),i=i||r,s=r.next("li"),o=n.get_data(r.parent()),u=e(t.target);t.preventDefault(),o||n.init(),i.hasClass("visible")&&r[0]===i[0]&&s.length>0&&n.is_open(r)&&(i=s,u=i.find("img")),n.open(u,r,i),n.update_paddles(i)}).on("click.fndtn.clearing",".clearing-main-next",function(e){this.nav(e,"next")}.bind(this)).on("click.fndtn.clearing",".clearing-main-prev",function(e){this.nav(e,"prev")}.bind(this)).on("click.fndtn.clearing",this.settings.close_selectors,function(e){Foundation.libs.clearing.close(e,this)}).on("keydown.fndtn.clearing",function(e){this.keydown(e)}.bind(this)),e(t).on("resize.fndtn.clearing",function(){this.resize()}.bind(this)),this.settings.init=!0,this},swipe_events:function(){var t=this;e(this.scope).on("touchstart.fndtn.clearing",".visible-img",function(t){t.touches||(t=t.originalEvent);var n={start_page_x:t.touches[0].pageX,start_page_y:t.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:r};e(this).data("swipe-transition",n),t.stopPropagation()}).on("touchmove.fndtn.clearing",".visible-img",function(n){n.touches||(n=n.originalEvent);if(n.touches.length>1||n.scale&&n.scale!==1)return;var r=e(this).data("swipe-transition");typeof r=="undefined"&&(r={}),r.delta_x=n.touches[0].pageX-r.start_page_x,typeof r.is_scrolling=="undefined"&&(r.is_scrolling=!!(r.is_scrolling||Math.abs(r.delta_x)<Math.abs(n.touches[0].pageY-r.start_page_y)));if(!r.is_scrolling&&!r.active){n.preventDefault();var i=r.delta_x<0?"next":"prev";r.active=!0,t.nav(n,i)}}).on("touchend.fndtn.clearing",".visible-img",function(t){e(this).data("swipe-transition",{}),t.stopPropagation()})},assemble:function(t){var n=t.parent();n.after('<div id="foundationClearingHolder"></div>');var r=e("#foundationClearingHolder"),i=this.get_data(n),s=n.detach(),o={grid:'<div class="carousel">'+this.outerHTML(s[0])+"</div>",viewing:i.templates.viewing},u='<div class="clearing-assembled"><div>'+o.viewing+o.grid+"</div></div>";return r.after(u).remove()},open:function(e,t,n){var r=n.closest(".clearing-assembled"),i=r.find("div").first(),s=i.find(".visible-img"),o=s.find("img").not(e);this.locked()||(o.attr("src",this.load(e)).css("visibility","hidden"),this.loaded(o,function(){o.css("visibility","visible"),r.addClass("clearing-blackout"),i.addClass("clearing-container"),s.show(),this.fix_height(n).caption(s.find(".clearing-caption"),e).center(o).shift(t,n,function(){n.siblings().removeClass("visible"),n.addClass("visible")})}.bind(this)))},close:function(t,n){t.preventDefault();var r=function(e){return/blackout/.test(e.selector)?e:e.closest(".clearing-blackout")}(e(n)),i,s;return n===t.target&&r&&(i=r.find("div").first(),s=i.find(".visible-img"),this.settings.prev_index=0,r.find("ul[data-clearing]").attr("style","").closest(".clearing-blackout").removeClass("clearing-blackout"),i.removeClass("clearing-container"),s.hide()),!1},is_open:function(e){return e.parent().attr("style").length>0},keydown:function(t){var n=e(".clearing-blackout").find("ul[data-clearing]");t.which===39&&this.go(n,"next"),t.which===37&&this.go(n,"prev"),t.which===27&&e("a.clearing-close").trigger("click")},nav:function(t,n){var r=e(".clearing-blackout").find("ul[data-clearing]");t.preventDefault(),this.go(r,n)},resize:function(){var t=e(".clearing-blackout .visible-img").find("img");t.length&&this.center(t)},fix_height:function(t){var n=t.parent().children(),r=this;return n.each(function(){var t=e(this),n=t.find("img");t.height()>r.outerHeight(n)&&t.addClass("fix-height")}).closest("ul").width(n.length*100+"%"),this},update_paddles:function(e){var t=e.closest(".carousel").siblings(".visible-img");e.next().length>0?t.find(".clearing-main-next").removeClass("disabled"):t.find(".clearing-main-next").addClass("disabled"),e.prev().length>0?t.find(".clearing-main-prev").removeClass("disabled"):t.find(".clearing-main-prev").addClass("disabled")},center:function(e){return this.rtl?e.css({marginRight:-(this.outerWidth(e)/2),marginTop:-(this.outerHeight(e)/2)}):e.css({marginLeft:-(this.outerWidth(e)/2),marginTop:-(this.outerHeight(e)/2)}),this},load:function(e){if(e[0].nodeName==="A")var t=e.attr("href");else var t=e.parent().attr("href");return this.preload(e),t?t:e.attr("src")},preload:function(e){this.img(e.closest("li").next()).img(e.closest("li").prev())},loaded:function(e,t){function n(){t()}function r(){this.one("load",n);if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var e=this.attr("src"),t=e.match(/\?/)?"&":"?";t+="random="+(new Date).getTime(),this.attr("src",e+t)}}if(!e.attr("src")){n();return}e[0].complete||e[0].readyState===4?n():r.call(e)},img:function(e){if(e.length){var t=new Image,n=e.find("a");n.length?t.src=n.attr("href"):t.src=e.find("img").attr("src")}return this},caption:function(e,t){var n=t.data("caption");return n?e.html(n).show():e.text("").hide(),this},go:function(e,t){var n=e.find(".visible"),r=n[t]();r.length&&r.find("img").trigger("click",[n,r])},shift:function(e,t,n){var r=t.parent(),i=this.settings.prev_index||t.index(),s=this.direction(r,e,t),o=parseInt(r.css("left"),10),u=this.outerWidth(t),a;t.index()!==i&&!/skip/.test(s)?/left/.test(s)?(this.lock(),r.animate({left:o+u},300,this.unlock())):/right/.test(s)&&(this.lock(),r.animate({left:o-u},300,this.unlock())):/skip/.test(s)&&(a=t.index()-this.settings.up_count,this.lock(),a>0?r.animate({left:-(a*u)},300,this.unlock()):r.animate({left:0},300,this.unlock())),n()},direction:function(t,n,r){var i=t.find("li"),s=this.outerWidth(i)+this.outerWidth(i)/4,o=Math.floor(this.outerWidth(e(".clearing-container"))/s)-1,u=i.index(r),a;return this.settings.up_count=o,this.adjacent(this.settings.prev_index,u)?u>o&&u>this.settings.prev_index?a="right":u>o-1&&u<=this.settings.prev_index?a="left":a=!1:a="skip",this.settings.prev_index=u,a},adjacent:function(e,t){for(var n=t+1;n>=t-1;n--)if(n===e)return!0;return!1},lock:function(){this.settings.locked=!0},unlock:function(){this.settings.locked=!1},locked:function(){return this.settings.locked},outerHTML:function(e){return e.outerHTML||(new XMLSerializer).serializeToString(e)},off:function(){e(this.scope).off(".fndtn.clearing"),e(t).off(".fndtn.clearing"),this.remove_data(),this.settings.init=!1},reflow:function(){this.init()}}}(Foundation.zj,this,this.document),function(e,t,n){function i(e){return e}function s(e){return decodeURIComponent(e.replace(r," "))}var r=/\+/g,o=e.cookie=function(r,u,a){if(u!==n){a=e.extend({},o.defaults,a),u===null&&(a.expires=-1);if(typeof a.expires=="number"){var f=a.expires,l=a.expires=new Date;l.setDate(l.getDate()+f)}return u=o.json?JSON.stringify(u):String(u),t.cookie=[encodeURIComponent(r),"=",o.raw?u:encodeURIComponent(u),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}var c=o.raw?i:s,h=t.cookie.split("; ");for(var p=0,d=h.length;p<d;p++){var v=h[p].split("=");if(c(v.shift())===r){var m=c(v.join("="));return o.json?JSON.parse(m):m}}return null};o.defaults={},e.removeCookie=function(t,n){return e.cookie(t)!==null?(e.cookie(t,null,n),!0):!1}}(Foundation.zj,document),function(e,t,n,r){"use strict";Foundation.libs.dropdown={name:"dropdown",version:"4.3.0",settings:{activeClass:"open",is_hover:!1,opened:function(){},closed:function(){}},init:function(t,n,r){return this.scope=t||this.scope,Foundation.inherit(this,"throttle scrollLeft data_options"),typeof n=="object"&&e.extend(!0,this.settings,n),typeof n!="string"?(this.settings.init||this.events(),this.settings.init):this[n].call(this,r)},events:function(){var r=this;e(this.scope).on("click.fndtn.dropdown","[data-dropdown]",function(t){var n=e.extend({},r.settings,r.data_options(e(this)));t.preventDefault(),n.is_hover||r.toggle(e(this))}).on("mouseenter","[data-dropdown]",function(t){var n=e.extend({},r.settings,r.data_options(e(this)));n.is_hover&&r.toggle(e(this))}).on("mouseleave","[data-dropdown-content]",function(t){var n=e('[data-dropdown="'+e(this).attr("id")+'"]'),i=e.extend({},r.settings,r.data_options(n));i.is_hover&&r.close.call(r,e(this))}).on("opened.fndtn.dropdown","[data-dropdown-content]",this.settings.opened).on("closed.fndtn.dropdown","[data-dropdown-content]",this.settings.closed),e(n).on("click.fndtn.dropdown",function(t){var n=e(t.target).closest("[data-dropdown-content]");if(e(t.target).data("dropdown"))return;if(n.length>0&&(e(t.target).is("[data-dropdown-content]")||e.contains(n.first()[0],t.target))){t.stopPropagation();return}r.close.call(r,e("[data-dropdown-content]"))}),e(t).on("resize.fndtn.dropdown",r.throttle(function(){r.resize.call(r)},50)).trigger("resize"),this.settings.init=!0},close:function(t){var n=this;t.each(function(){e(this).hasClass(n.settings.activeClass)&&(e(this).css(Foundation.rtl?"right":"left","-99999px").removeClass(n.settings.activeClass),e(this).trigger("closed"))})},open:function(e,t){this.css(e.addClass(this.settings.activeClass),t),e.trigger("opened")},toggle:function(t){var n=e("#"+t.data("dropdown"));this.close.call(this,e("[data-dropdown-content]").not(n)),n.hasClass(this.settings.activeClass)?this.close.call(this,n):(this.close.call(this,e("[data-dropdown-content]")),this.open.call(this,n,t))},resize:function(){var t=e("[data-dropdown-content].open"),n=e("[data-dropdown='"+t.attr("id")+"']");t.length&&n.length&&this.css(t,n)},css:function(n,r){var i=n.offsetParent(),s=r.offset();s.top-=i.offset().top,s.left-=i.offset().left;if(this.small())n.css({position:"absolute",width:"95%",left:"2.5%","max-width":"none",top:s.top+this.outerHeight(r)});else{if(!Foundation.rtl&&e(t).width()>this.outerWidth(n)+r.offset().left){var o=s.left;n.hasClass("right")&&n.removeClass("right")}else{n.hasClass("right")||n.addClass("right");var o=s.left-(this.outerWidth(n)-this.outerWidth(r))}n.attr("style","").css({position:"absolute",top:s.top+this.outerHeight(r),left:o})}return n},small:function(){return e(t).width()<768||e("html").hasClass("lt-ie9")},off:function(){e(this.scope).off(".fndtn.dropdown"),e("html, body").off(".fndtn.dropdown"),e(t).off(".fndtn.dropdown"),e("[data-dropdown-content]").off(".fndtn.dropdown"),this.settings.init=!1},reflow:function(){}}}(Foundation.zj,this,this.document),function(e,t,n,r){"use strict";Foundation.libs.forms={name:"forms",version:"4.3.1",cache:{},settings:{disable_class:"no-custom",last_combo:null},init:function(t,n,r){return typeof n=="object"&&e.extend(!0,this.settings,n),typeof n!="string"?(this.settings.init||this.events(),this.assemble(),this.settings.init):this[n].call(this,r)},assemble:function(){e('form.custom input[type="radio"]',e(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).each(this.append_custom_markup),e('form.custom input[type="checkbox"]',e(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).each(this.append_custom_markup),e("form.custom select",e(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).not("[multiple=multiple]").each(this.append_custom_select)},events:function(){var r=this;e(this.scope).on("click.fndtn.forms","form.custom span.custom.checkbox",function(t){t.preventDefault(),t.stopPropagation(),r.toggle_checkbox(e(this))}).on("click.fndtn.forms","form.custom span.custom.radio",function(t){t.preventDefault(),t.stopPropagation(),r.toggle_radio(e(this))}).on("change.fndtn.forms","form.custom select",function(t,n){if(e(this).is('[data-customforms="disabled"]'))return;r.refresh_custom_select(e(this),n)}).on("click.fndtn.forms","form.custom label",function(t){if(e(t.target).is("label")){var n=e("#"+r.escape(e(this).attr("for"))).not('[data-customforms="disabled"]'),i,s;n.length!==0&&(n.attr("type")==="checkbox"?(t.preventDefault(),i=e(this).find("span.custom.checkbox"),i.length===0&&(i=n.add(this).siblings("span.custom.checkbox").first()),r.toggle_checkbox(i)):n.attr("type")==="radio"&&(t.preventDefault(),s=e(this).find("span.custom.radio"),s.length===0&&(s=n.add(this).siblings("span.custom.radio").first()),r.toggle_radio(s)))}}).on("mousedown.fndtn.forms","form.custom div.custom.dropdown",function(){return!1}).on("click.fndtn.forms","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(t){var n=e(this),s=n.closest("div.custom.dropdown"),o=i(s,"select");s.hasClass("open")||e(r.scope).trigger("click"),t.preventDefault();if(!1===o.is(":disabled"))return s.toggleClass("open"),s.hasClass("open")?e(r.scope).on("click.fndtn.forms.customdropdown",function(){s.removeClass("open"),e(r.scope).off(".fndtn.forms.customdropdown")}):e(r.scope).on(".fndtn.forms.customdropdown"),!1}).on("click.fndtn.forms touchend.fndtn.forms","form.custom div.custom.dropdown li",function(t){var r=e(this),s=r.closest("div.custom.dropdown"),o=i(s,"select"),u=0;t.preventDefault(),t.stopPropagation();if(!e(this).hasClass("disabled")){e("div.dropdown").not(s).removeClass("open");var a=r.closest("ul").find("li.selected");a.removeClass("selected"),r.addClass("selected"),s.removeClass("open").find("a.current").text(r.text()),r.closest("ul").find("li").each(function(e){r[0]===this&&(u=e)}),o[0].selectedIndex=u,o.data("prevalue",a.html());if(typeof n.createEvent!="undefined"){var f=n.createEvent("HTMLEvents");f.initEvent("change",!0,!0),o[0].dispatchEvent(f)}else o[0].fireEvent("onchange")}}),e(t).on("keydown",function(t){var r=n.activeElement,i=Foundation.libs.forms,s=e(".custom.dropdown.open");if(s.length>0){t.preventDefault(),t.which===13&&s.find("li.selected").trigger("click"),t.which===27&&s.removeClass("open");if(t.which>=65&&t.which<=90){var o=i.go_to(s,t.which),u=s.find("li.selected");o&&(u.removeClass("selected"),i.scrollTo(o.addClass("selected"),300))}if(t.which===38){var u=s.find("li.selected"),a=u.prev(":not(.disabled)");a.length>0&&(a.parent()[0].scrollTop=a.parent().scrollTop()-i.outerHeight(a),u.removeClass("selected"),a.addClass("selected"))}else if(t.which===40){var u=s.find("li.selected"),o=u.next(":not(.disabled)");o.length>0&&(o.parent()[0].scrollTop=o.parent().scrollTop()+i.outerHeight(o),u.removeClass("selected"),o.addClass("selected"))}}}),this.settings.init=!0},go_to:function(e,t){var n=e.find("li"),r=n.length;if(r>0)for(var i=0;i<r;i++){var s=n.eq(i).text().charAt(0).toLowerCase();if(s===String.fromCharCode(t).toLowerCase())return n.eq(i)}},scrollTo:function(e,t){if(t<0)return;var n=e.parent(),r=this.outerHeight(e),i=r*e.index()-n.scrollTop(),s=i/t*10;this.scrollToTimerCache=setTimeout(function(){isNaN(parseInt(s,10))||(n[0].scrollTop=n.scrollTop()+s,this.scrollTo(e,t-10))}.bind(this),10)},append_custom_markup:function(t,n){var r=e(n),i=r.attr("type"),s=r.next("span.custom."+i);r.parent().hasClass("switch")||r.addClass("hidden-field"),s.length===0&&(s=e('<span class="custom '+i+'"></span>').insertAfter(r)),s.toggleClass("checked",r.is(":checked")),s.toggleClass("disabled",r.is(":disabled"))},append_custom_select:function(t,n){var r=Foundation.libs.forms,i=e(n),s=i.next("div.custom.dropdown"),o=s.find("ul"),u=s.find(".current"),a=s.find(".selector"),f=i.find("option"),l=f.filter(":selected"),c=i.attr("class")?i.attr("class").split(" "):[],h=0,p="",d,v=!1;if(s.length===0){var m=i.hasClass("small")?"small":i.hasClass("medium")?"medium":i.hasClass("large")?"large":i.hasClass("expand")?"expand":"";s=e('<div class="'+["custom","dropdown",m].concat(c).filter(function(e,t,n){return e===""?!1:n.indexOf(e)===t}).join(" ")+'"><a href="#" class="selector"></a><ul /></div>'),a=s.find(".selector"),o=s.find("ul"),p=f.map(function(){var t=e(this).attr("class")?e(this).attr("class"):"";return"<li class='"+t+"'>"+e(this).html()+"</li>"}).get().join(""),o.append(p),v=s.prepend('<a href="#" class="current">'+l.html()+"</a>").find(".current"),i.after(s).addClass("hidden-field")}else p=f.map(function(){return"<li>"+e(this).html()+"</li>"}).get().join(""),o.html("").append(p);r.assign_id(i,s),s.toggleClass("disabled",i.is(":disabled")),d=o.find("li"),r.cache[s.data("id")]=d.length,f.each(function(t){this.selected&&(d.eq(t).addClass("selected"),v&&v.html(e(this).html())),e(this).is(":disabled")&&d.eq(t).addClass("disabled")});if(!s.is(".small, .medium, .large, .expand")){s.addClass("open");var r=Foundation.libs.forms;r.hidden_fix.adjust(o),h=r.outerWidth(d)>h?r.outerWidth(d):h,Foundation.libs.forms.hidden_fix.reset(),s.removeClass("open")}},assign_id:function(e,t){var n=[+(new Date),Foundation.random_str(5)].join("-");e.attr("data-id",n),t.attr("data-id",n)},refresh_custom_select:function(t,n){var r=this,i=0,s=t.next(),o=t.find("option"),u=s.find("li");if(u.length!==this.cache[s.data("id")]||n)s.find("ul").html(""),o.each(function(){var t=e("<li>"+e(this).html()+"</li>");s.find("ul").append(t)}),o.each(function(t){this.selected&&(s.find("li").eq(t).addClass("selected"),s.find(".current").html(e(this).html())),e(this).is(":disabled")&&s.find("li").eq(t).addClass("disabled")}),s.removeAttr("style").find("ul").removeAttr("style"),s.find("li").each(function(){s.addClass("open"),r.outerWidth(e(this))>i&&(i=r.outerWidth(e(this))),s.removeClass("open")}),u=s.find("li"),this.cache[s.data("id")]=u.length},toggle_checkbox:function(e){var t=e.prev(),n=t[0];!1===t.is(":disabled")&&(n.checked=n.checked?!1:!0,e.toggleClass("checked"),t.trigger("change"))},toggle_radio:function(e){var t=e.prev(),n=t.closest("form.custom"),r=t[0];!1===t.is(":disabled")&&(n.find('input[type="radio"][name="'+this.escape(t.attr("name"))+'"]').next().not(e).removeClass("checked"),e.hasClass("checked")||e.toggleClass("checked"),r.checked=e.hasClass("checked"),t.trigger("change"))},escape:function(e){return e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):""},hidden_fix:{tmp:[],hidden:null,adjust:function(t){var n=this;n.hidden=t.parents(),n.hidden=n.hidden.add(t).filter(":hidden"),n.hidden.each(function(){var t=e(this);n.tmp.push(t.attr("style")),t.css({visibility:"hidden",display:"block"})})},reset:function(){var t=this;t.hidden.each(function(n){var i=e(this),s=t.tmp[n];s===r?i.removeAttr("style"):i.attr("style",s)}),t.tmp=[],t.hidden=null}},off:function(){e(this.scope).off(".fndtn.forms")},reflow:function(){}};var i=function(t,n){var t=t.prev();while(t.length){if(t.is(n))return t;t=t.prev()}return e()}}(Foundation.zj,this,this.document),function(e,t,n,r){"use strict";Foundation.libs.joyride={name:"joyride",version:"4.2.2",defaults:{expose:!1,modal:!1,tipLocation:"bottom",nubPosition:"auto",scrollSpeed:300,timer:0,startTimerOnClick:!0,startOffset:0,nextButton:!0,tipAnimation:"fade",pauseAfter:[],exposed:[],tipAnimationFadeSpeed:300,cookieMonster:!1,cookieName:"joyride",cookieDomain:!1,cookieExpires:365,tipContainer:"body",postRideCallback:function(){},postStepCallback:function(){},preStepCallback:function(){},preRideCallback:function(){},postExposeCallback:function(){},template:{link:'<a href="#close" class="joyride-close-tip">&times;</a>',timer:'<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"></span></div>',tip:'<div class="joyride-tip-guide"><span class="joyride-nub"></span></div>',wrapper:'<div class="joyride-content-wrapper"></div>',button:'<a href="#" class="small button joyride-next-tip"></a>',modal:'<div class="joyride-modal-bg"></div>',expose:'<div class="joyride-expose-wrapper"></div>',exposeCover:'<div class="joyride-expose-cover"></div>'},exposeAddClass:""},settings:{},init:function(t,n,r){return this.scope=t||this.scope,Foundation.inherit(this,"throttle data_options scrollTo scrollLeft delay"),typeof n=="object"?e.extend(!0,this.settings,this.defaults,n):e.extend(!0,this.settings,this.defaults,r),typeof n!="string"?(this.settings.init||this.events(),this.settings.init):this[n].call(this,r)},events:function(){var n=this;e(this.scope).on("click.joyride",".joyride-next-tip, .joyride-modal-bg",function(e){e.preventDefault(),this.settings.$li.next().length<1?this.end():this.settings.timer>0?(clearTimeout(this.settings.automate),this.hide(),this.show(),this.startTimer()):(this.hide(),this.show())}.bind(this)).on("click.joyride",".joyride-close-tip",function(e){e.preventDefault(),this.end()}.bind(this)),e(t).on("resize.fndtn.joyride",n.throttle(function(){if(e("[data-joyride]").length>0&&n.settings.$next_tip){if(n.settings.exposed.length>0){var t=e(n.settings.exposed);t.each(function(){var t=e(this);n.un_expose(t),n.expose(t)})}n.is_phone()?n.pos_phone():n.pos_default(!1,!0)}},100)),this.settings.init=!0},start:function(){var t=this,n=e(this.scope).find("[data-joyride]"),r=["timer","scrollSpeed","startOffset","tipAnimationFadeSpeed","cookieExpires"],i=r.length;this.settings.init||this.init(),this.settings.$content_el=n,this.settings.$body=e(this.settings.tipContainer),this.settings.body_offset=e(this.settings.tipContainer).position(),this.settings.$tip_content=this.settings.$content_el.find("> li"),this.settings.paused=!1,this.settings.attempts=0,this.settings.tipLocationPatterns={top:["bottom"],bottom:[],left:["right","top","bottom"],right:["left","top","bottom"]},typeof e.cookie!="function"&&(this.settings.cookieMonster=!1);if(!this.settings.cookieMonster||this.settings.cookieMonster&&e.cookie(this.settings.cookieName)===null)this.settings.$tip_content.each(function(n){var s=e(this);e.extend(!0,t.settings,t.data_options(s));for(var o=i-1;o>=0;o--)t.settings[r[o]]=parseInt(t.settings[r[o]],10);t.create({$li:s,index:n})}),!this.settings.startTimerOnClick&&this.settings.timer>0?(this.show("init"),this.startTimer()):this.show("init")},resume:function(){this.set_li(),this.show()},tip_template:function(t){var n,r;return t.tip_class=t.tip_class||"",n=e(this.settings.template.tip).addClass(t.tip_class),r=e.trim(e(t.li).html())+this.button_text(t.button_text)+this.settings.template.link+this.timer_instance(t.index),n.append(e(this.settings.template.wrapper)),n.first().attr("data-index",t.index),e(".joyride-content-wrapper",n).append(r),n[0]},timer_instance:function(t){var n;return t===0&&this.settings.startTimerOnClick&&this.settings.timer>0||this.settings.timer===0?n="":n=this.outerHTML(e(this.settings.template.timer)[0]),n},button_text:function(t){return this.settings.nextButton?(t=e.trim(t)||"Next",t=this.outerHTML(e(this.settings.template.button).append(t)[0])):t="",t},create:function(t){var n=t.$li.attr("data-button")||t.$li.attr("data-text"),r=t.$li.attr("class"),i=e(this.tip_template({tip_class:r,index:t.index,button_text:n,li:t.$li}));e(this.settings.tipContainer).append(i)},show:function(t){var n=null;this.settings.$li===r||e.inArray(this.settings.$li.index(),this.settings.pauseAfter)===-1?(this.settings.paused?this.settings.paused=!1:this.set_li(t),this.settings.attempts=0,this.settings.$li.length&&this.settings.$target.length>0?(t&&(this.settings.preRideCallback(this.settings.$li.index(),this.settings.$next_tip),this.settings.modal&&this.show_modal()),this.settings.preStepCallback(this.settings.$li.index(),this.settings.$next_tip),this.settings.modal&&this.settings.expose&&this.expose(),this.settings.tipSettings=e.extend(this.settings,this.data_options(this.settings.$li)),this.settings.timer=parseInt(this.settings.timer,10),this.settings.tipSettings.tipLocationPattern=this.settings.tipLocationPatterns[this.settings.tipSettings.tipLocation],/body/i.test(this.settings.$target.selector)||this.scroll_to(),this.is_phone()?this.pos_phone(!0):this.pos_default(!0),n=this.settings.$next_tip.find(".joyride-timer-indicator"),/pop/i.test(this.settings.tipAnimation)?(n.width(0),this.settings.timer>0?(this.settings.$next_tip.show(),this.delay(function(){n.animate({width:n.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tipAnimationFadeSpeed)):this.settings.$next_tip.show()):/fade/i.test(this.settings.tipAnimation)&&(n.width(0),this.settings.timer>0?(this.settings.$next_tip.fadeIn(this.settings.tipAnimationFadeSpeed).show(),this.delay(function(){n.animate({width:n.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tipAnimationFadeSpeed)):this.settings.$next_tip.fadeIn(this.settings.tipAnimationFadeSpeed)),this.settings.$current_tip=this.settings.$next_tip):this.settings.$li&&this.settings.$target.length<1?this.show():this.end()):this.settings.paused=!0},is_phone:function(){return Modernizr?Modernizr.mq("only screen and (max-width: 767px)")||e(".lt-ie9").length>0:this.settings.$window.width()<767},hide:function(){this.settings.modal&&this.settings.expose&&this.un_expose(),this.settings.modal||e(".joyride-modal-bg").hide(),this.settings.$current_tip.css("visibility","hidden"),setTimeout(e.proxy(function(){this.hide(),this.css("visibility","visible")},this.settings.$current_tip),0),this.settings.postStepCallback(this.settings.$li.index(),this.settings.$current_tip)},set_li:function(e){e?(this.settings.$li=this.settings.$tip_content.eq(this.settings.startOffset),this.set_next_tip(),this.settings.$current_tip=this.settings.$next_tip):(this.settings.$li=this.settings.$li.next(),this.set_next_tip()),this.set_target()},set_next_tip:function(){this.settings.$next_tip=e(".joyride-tip-guide[data-index='"+this.settings.$li.index()+"']"),this.settings.$next_tip.data("closed","")},set_target:function(){var t=this
.settings.$li.attr("data-class"),r=this.settings.$li.attr("data-id"),i=function(){return r?e(n.getElementById(r)):t?e("."+t).first():e("body")};this.settings.$target=i()},scroll_to:function(){var n,r;n=e(t).height()/2,r=Math.ceil(this.settings.$target.offset().top-n+this.outerHeight(this.settings.$next_tip)),r>0&&this.scrollTo(e("html, body"),r,this.settings.scrollSpeed)},paused:function(){return e.inArray(this.settings.$li.index()+1,this.settings.pauseAfter)===-1},restart:function(){this.hide(),this.settings.$li=r,this.show("init")},pos_default:function(n,r){var i=Math.ceil(e(t).height()/2),s=this.settings.$next_tip.offset(),o=this.settings.$next_tip.find(".joyride-nub"),u=Math.ceil(this.outerWidth(o)/2),a=Math.ceil(this.outerHeight(o)/2),f=n||!1;f&&(this.settings.$next_tip.css("visibility","hidden"),this.settings.$next_tip.show()),typeof r=="undefined"&&(r=!1);if(!/body/i.test(this.settings.$target.selector)){if(this.bottom()){var l=this.settings.$target.offset().left;Foundation.rtl&&(l=this.settings.$target.offset().width-this.settings.$next_tip.width()+l),this.settings.$next_tip.css({top:this.settings.$target.offset().top+a+this.outerHeight(this.settings.$target),left:l}),this.nub_position(o,this.settings.tipSettings.nubPosition,"top")}else if(this.top()){var l=this.settings.$target.offset().left;Foundation.rtl&&(l=this.settings.$target.offset().width-this.settings.$next_tip.width()+l),this.settings.$next_tip.css({top:this.settings.$target.offset().top-this.outerHeight(this.settings.$next_tip)-a,left:l}),this.nub_position(o,this.settings.tipSettings.nubPosition,"bottom")}else this.right()?(this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:this.outerWidth(this.settings.$target)+this.settings.$target.offset().left+u}),this.nub_position(o,this.settings.tipSettings.nubPosition,"left")):this.left()&&(this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:this.settings.$target.offset().left-this.outerWidth(this.settings.$next_tip)-u}),this.nub_position(o,this.settings.tipSettings.nubPosition,"right"));!this.visible(this.corners(this.settings.$next_tip))&&this.settings.attempts<this.settings.tipSettings.tipLocationPattern.length&&(o.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),this.settings.tipSettings.tipLocation=this.settings.tipSettings.tipLocationPattern[this.settings.attempts],this.settings.attempts++,this.pos_default())}else this.settings.$li.length&&this.pos_modal(o);f&&(this.settings.$next_tip.hide(),this.settings.$next_tip.css("visibility","visible"))},pos_phone:function(t){var n=this.outerHeight(this.settings.$next_tip),r=this.settings.$next_tip.offset(),i=this.outerHeight(this.settings.$target),s=e(".joyride-nub",this.settings.$next_tip),o=Math.ceil(this.outerHeight(s)/2),u=t||!1;s.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),u&&(this.settings.$next_tip.css("visibility","hidden"),this.settings.$next_tip.show()),/body/i.test(this.settings.$target.selector)?this.settings.$li.length&&this.pos_modal(s):this.top()?(this.settings.$next_tip.offset({top:this.settings.$target.offset().top-n-o}),s.addClass("bottom")):(this.settings.$next_tip.offset({top:this.settings.$target.offset().top+i+o}),s.addClass("top")),u&&(this.settings.$next_tip.hide(),this.settings.$next_tip.css("visibility","visible"))},pos_modal:function(e){this.center(),e.hide(),this.show_modal()},show_modal:function(){if(!this.settings.$next_tip.data("closed")){var t=e(".joyride-modal-bg");t.length<1&&e("body").append(this.settings.template.modal).show(),/pop/i.test(this.settings.tipAnimation)?t.show():t.fadeIn(this.settings.tipAnimationFadeSpeed)}},expose:function(){var n,r,i,s,o,u="expose-"+Math.floor(Math.random()*1e4);if(arguments.length>0&&arguments[0]instanceof e)i=arguments[0];else{if(!this.settings.$target||!!/body/i.test(this.settings.$target.selector))return!1;i=this.settings.$target}if(i.length<1)return t.console&&console.error("element not valid",i),!1;n=e(this.settings.template.expose),this.settings.$body.append(n),n.css({top:i.offset().top,left:i.offset().left,width:this.outerWidth(i,!0),height:this.outerHeight(i,!0)}),r=e(this.settings.template.exposeCover),s={zIndex:i.css("z-index"),position:i.css("position")},o=i.attr("class")==null?"":i.attr("class"),i.css("z-index",parseInt(n.css("z-index"))+1),s.position=="static"&&i.css("position","relative"),i.data("expose-css",s),i.data("orig-class",o),i.attr("class",o+" "+this.settings.exposeAddClass),r.css({top:i.offset().top,left:i.offset().left,width:this.outerWidth(i,!0),height:this.outerHeight(i,!0)}),this.settings.$body.append(r),n.addClass(u),r.addClass(u),i.data("expose",u),this.settings.postExposeCallback(this.settings.$li.index(),this.settings.$next_tip,i),this.add_exposed(i)},un_expose:function(){var n,r,i,s,o,u=!1;if(arguments.length>0&&arguments[0]instanceof e)r=arguments[0];else{if(!this.settings.$target||!!/body/i.test(this.settings.$target.selector))return!1;r=this.settings.$target}if(r.length<1)return t.console&&console.error("element not valid",r),!1;n=r.data("expose"),i=e("."+n),arguments.length>1&&(u=arguments[1]),u===!0?e(".joyride-expose-wrapper,.joyride-expose-cover").remove():i.remove(),s=r.data("expose-css"),s.zIndex=="auto"?r.css("z-index",""):r.css("z-index",s.zIndex),s.position!=r.css("position")&&(s.position=="static"?r.css("position",""):r.css("position",s.position)),o=r.data("orig-class"),r.attr("class",o),r.removeData("orig-classes"),r.removeData("expose"),r.removeData("expose-z-index"),this.remove_exposed(r)},add_exposed:function(t){this.settings.exposed=this.settings.exposed||[],t instanceof e||typeof t=="object"?this.settings.exposed.push(t[0]):typeof t=="string"&&this.settings.exposed.push(t)},remove_exposed:function(t){var n,r;t instanceof e?n=t[0]:typeof t=="string"&&(n=t),this.settings.exposed=this.settings.exposed||[],r=this.settings.exposed.length;for(var i=0;i<r;i++)if(this.settings.exposed[i]==n){this.settings.exposed.splice(i,1);return}},center:function(){var n=e(t);return this.settings.$next_tip.css({top:(n.height()-this.outerHeight(this.settings.$next_tip))/2+n.scrollTop(),left:(n.width()-this.outerWidth(this.settings.$next_tip))/2+this.scrollLeft(n)}),!0},bottom:function(){return/bottom/i.test(this.settings.tipSettings.tipLocation)},top:function(){return/top/i.test(this.settings.tipSettings.tipLocation)},right:function(){return/right/i.test(this.settings.tipSettings.tipLocation)},left:function(){return/left/i.test(this.settings.tipSettings.tipLocation)},corners:function(n){var r=e(t),i=r.height()/2,s=Math.ceil(this.settings.$target.offset().top-i+this.settings.$next_tip.outerHeight()),o=r.width()+this.scrollLeft(r),u=r.height()+s,a=r.height()+r.scrollTop(),f=r.scrollTop();return s<f&&(s<0?f=0:f=s),u>a&&(a=u),[n.offset().top<f,o<n.offset().left+n.outerWidth(),a<n.offset().top+n.outerHeight(),this.scrollLeft(r)>n.offset().left]},visible:function(e){var t=e.length;while(t--)if(e[t])return!1;return!0},nub_position:function(e,t,n){t==="auto"?e.addClass(n):e.addClass(t)},startTimer:function(){this.settings.$li.length?this.settings.automate=setTimeout(function(){this.hide(),this.show(),this.startTimer()}.bind(this),this.settings.timer):clearTimeout(this.settings.automate)},end:function(){this.settings.cookieMonster&&e.cookie(this.settings.cookieName,"ridden",{expires:this.settings.cookieExpires,domain:this.settings.cookieDomain}),this.settings.timer>0&&clearTimeout(this.settings.automate),this.settings.modal&&this.settings.expose&&this.un_expose(),this.settings.$next_tip.data("closed",!0),e(".joyride-modal-bg").hide(),this.settings.$current_tip.hide(),this.settings.postStepCallback(this.settings.$li.index(),this.settings.$current_tip),this.settings.postRideCallback(this.settings.$li.index(),this.settings.$current_tip),e(".joyride-tip-guide").remove()},outerHTML:function(e){return e.outerHTML||(new XMLSerializer).serializeToString(e)},off:function(){e(this.scope).off(".joyride"),e(t).off(".joyride"),e(".joyride-close-tip, .joyride-next-tip, .joyride-modal-bg").off(".joyride"),e(".joyride-tip-guide, .joyride-modal-bg").remove(),clearTimeout(this.settings.automate),this.settings={}},reflow:function(){}}}(Foundation.zj,this,this.document),function(e,t,n,r){"use strict";Foundation.libs.magellan={name:"magellan",version:"4.2.2",settings:{activeClass:"active",threshold:0},init:function(t,n,r){return this.scope=t||this.scope,Foundation.inherit(this,"data_options"),typeof n=="object"&&e.extend(!0,this.settings,n),typeof n!="string"?(this.settings.init||(this.fixed_magellan=e("[data-magellan-expedition]"),this.set_threshold(),this.last_destination=e("[data-magellan-destination]").last(),this.events()),this.settings.init):this[n].call(this,r)},events:function(){var n=this;e(this.scope).on("arrival.fndtn.magellan","[data-magellan-arrival]",function(t){var r=e(this),i=r.closest("[data-magellan-expedition]"),s=i.attr("data-magellan-active-class")||n.settings.activeClass;r.closest("[data-magellan-expedition]").find("[data-magellan-arrival]").not(r).removeClass(s),r.addClass(s)}),this.fixed_magellan.on("update-position.fndtn.magellan",function(){var t=e(this)}).trigger("update-position"),e(t).on("resize.fndtn.magellan",function(){this.fixed_magellan.trigger("update-position")}.bind(this)).on("scroll.fndtn.magellan",function(){var r=e(t).scrollTop();n.fixed_magellan.each(function(){var t=e(this);typeof t.data("magellan-top-offset")=="undefined"&&t.data("magellan-top-offset",t.offset().top),typeof t.data("magellan-fixed-position")=="undefined"&&t.data("magellan-fixed-position",!1);var i=r+n.settings.threshold>t.data("magellan-top-offset"),s=t.attr("data-magellan-top-offset");t.data("magellan-fixed-position")!=i&&(t.data("magellan-fixed-position",i),i?(t.addClass("fixed"),t.css({position:"fixed",top:0})):(t.removeClass("fixed"),t.css({position:"",top:""})),i&&typeof s!="undefined"&&s!=0&&t.css({position:"fixed",top:s+"px"}))})}),this.last_destination.length>0&&e(t).on("scroll.fndtn.magellan",function(r){var i=e(t).scrollTop(),s=i+e(t).height(),o=Math.ceil(n.last_destination.offset().top);e("[data-magellan-destination]").each(function(){var t=e(this),r=t.attr("data-magellan-destination"),u=t.offset().top-i;u<=n.settings.threshold&&e("[data-magellan-arrival='"+r+"']").trigger("arrival"),s>=e(n.scope).height()&&o>i&&o<s&&e("[data-magellan-arrival]").last().trigger("arrival")})}),this.settings.init=!0},set_threshold:function(){this.settings.threshold||(this.settings.threshold=this.fixed_magellan.length>0?this.outerHeight(this.fixed_magellan,!0):0)},off:function(){e(this.scope).off(".fndtn.magellan")},reflow:function(){}}}(Foundation.zj,this,this.document),function(e,t,n,r){"use strict";var i=function(){},s=function(i,s){if(i.hasClass(s.slides_container_class))return this;var f=this,l,c=i,h,p,d,v=0,m,g,y=!1,b=!1;c.children().first().addClass(s.active_slide_class),f.update_slide_number=function(t){s.slide_number&&(h.find("span:first").text(parseInt(t)+1),h.find("span:last").text(c.children().length)),s.bullets&&(p.children().removeClass(s.bullets_active_class),e(p.children().get(t)).addClass(s.bullets_active_class))},f.build_markup=function(){c.wrap('<div class="'+s.container_class+'"></div>'),l=c.parent(),c.addClass(s.slides_container_class),s.navigation_arrows&&(l.append(e("<a>").addClass(s.prev_class).append("<span>")),l.append(e("<a>").addClass(s.next_class).append("<span>"))),s.timer&&(d=e("<div>").addClass(s.timer_container_class),d.append("<span>"),d.append(e("<div>").addClass(s.timer_progress_class)),d.addClass(s.timer_paused_class),l.append(d)),s.slide_number&&(h=e("<div>").addClass(s.slide_number_class),h.append("<span></span> of <span></span>"),l.append(h)),s.bullets&&(p=e("<ol>").addClass(s.bullets_container_class),l.append(p),c.children().each(function(t,n){var r=e("<li>").attr("data-orbit-slide",t);p.append(r)})),s.stack_on_small&&l.addClass(s.stack_on_small_class),f.update_slide_number(0)},f._goto=function(t,n){if(t===v)return!1;typeof g=="object"&&g.restart();var r=c.children(),i="next";y=!0,t<v&&(i="prev"),t>=r.length?t=0:t<0&&(t=r.length-1);var o=e(r.get(v)),u=e(r.get(t));o.css("zIndex",2),u.css("zIndex",4).addClass("active"),c.trigger("orbit:before-slide-change"),s.before_slide_change();var a=function(){var e=function(){v=t,y=!1,n===!0&&(g=f.create_timer(),g.start()),f.update_slide_number(v),c.trigger("orbit:after-slide-change",[{slide_number:v,total_slides:r.length}]),s.after_slide_change(v,r.length)};c.height()!=u.height()?c.animate({height:u.height()},250,"linear",e):e()};if(r.length===1)return a(),!1;var l=function(){i==="next"&&m.next(o,u,a),i==="prev"&&m.prev(o,u,a)};u.height()>c.height()?c.animate({height:u.height()},250,"linear",l):l()},f.next=function(e){e.stopImmediatePropagation(),e.preventDefault(),f._goto(v+1)},f.prev=function(e){e.stopImmediatePropagation(),e.preventDefault(),f._goto(v-1)},f.link_custom=function(t){t.preventDefault();var n=e(this).attr("data-orbit-link");if(typeof n=="string"&&(n=e.trim(n))!=""){var r=l.find("[data-orbit-slide="+n+"]");r.index()!=-1&&f._goto(r.index())}},f.link_bullet=function(t){var n=e(this).attr("data-orbit-slide");typeof n=="string"&&(n=e.trim(n))!=""&&f._goto(n)},f.timer_callback=function(){f._goto(v+1,!0)},f.compute_dimensions=function(){var t=e(c.children().get(v)),n=t.height();s.variable_height||c.children().each(function(){e(this).height()>n&&(n=e(this).height())}),c.height(n)},f.create_timer=function(){var e=new o(l.find("."+s.timer_container_class),s,f.timer_callback);return e},f.stop_timer=function(){typeof g=="object"&&g.stop()},f.toggle_timer=function(){var e=l.find("."+s.timer_container_class);e.hasClass(s.timer_paused_class)?(typeof g=="undefined"&&(g=f.create_timer()),g.start()):typeof g=="object"&&g.stop()},f.init=function(){f.build_markup(),s.timer&&(g=f.create_timer(),g.start()),m=new a(c),s.animation==="slide"&&(m=new u(c)),l.on("click","."+s.next_class,f.next),l.on("click","."+s.prev_class,f.prev),l.on("click","[data-orbit-slide]",f.link_bullet),l.on("click",f.toggle_timer),l.on("touchstart.fndtn.orbit",function(e){e.touches||(e=e.originalEvent);var t={start_page_x:e.touches[0].pageX,start_page_y:e.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:r};l.data("swipe-transition",t),e.stopPropagation()}).on("touchmove.fndtn.orbit",function(e){e.touches||(e=e.originalEvent);if(e.touches.length>1||e.scale&&e.scale!==1)return;var t=l.data("swipe-transition");typeof t=="undefined"&&(t={}),t.delta_x=e.touches[0].pageX-t.start_page_x,typeof t.is_scrolling=="undefined"&&(t.is_scrolling=!!(t.is_scrolling||Math.abs(t.delta_x)<Math.abs(e.touches[0].pageY-t.start_page_y)));if(!t.is_scrolling&&!t.active){e.preventDefault();var n=t.delta_x<0?v+1:v-1;t.active=!0,f._goto(n)}}).on("touchend.fndtn.orbit",function(e){l.data("swipe-transition",{}),e.stopPropagation()}).on("mouseenter.fndtn.orbit",function(e){s.timer&&s.pause_on_hover&&f.stop_timer()}).on("mouseleave.fndtn.orbit",function(e){s.timer&&s.resume_on_mouseout&&g.start()}),e(n).on("click","[data-orbit-link]",f.link_custom),e(t).on("resize",f.compute_dimensions),e(t).on("load",f.compute_dimensions),c.trigger("orbit:ready")},f.init()},o=function(e,t,n){var r=this,i=t.timer_speed,s=e.find("."+t.timer_progress_class),o,u,a=-1;this.update_progress=function(e){var t=s.clone();t.attr("style",""),t.css("width",e+"%"),s.replaceWith(t),s=t},this.restart=function(){clearTimeout(u),e.addClass(t.timer_paused_class),a=-1,r.update_progress(0)},this.start=function(){if(!e.hasClass(t.timer_paused_class))return!0;a=a===-1?i:a,e.removeClass(t.timer_paused_class),o=(new Date).getTime(),s.animate({width:"100%"},a,"linear"),u=setTimeout(function(){r.restart(),n()},a),e.trigger("orbit:timer-started")},this.stop=function(){if(e.hasClass(t.timer_paused_class))return!0;clearTimeout(u),e.addClass(t.timer_paused_class);var n=(new Date).getTime();a-=n-o;var s=100-a/i*100;r.update_progress(s),e.trigger("orbit:timer-stopped")}},u=function(t){var n=400,r=e("html[dir=rtl]").length===1,i=r?"marginRight":"marginLeft";this.next=function(e,t,r){t.animate({margin:"0%"},n,"linear",function(){e.css(i,"100%"),r()})},this.prev=function(e,t,r){t.css(i,"-100%"),t.animate({margin:"0%"},n,"linear",function(){e.css(i,"100%"),r()})}},a=function(e){var t=250;this.next=function(e,n,r){n.css({marginLeft:"0%",opacity:"0.01"}),n.animate({opacity:"1"},t,"linear",function(){e.css("marginLeft","100%"),r()})},this.prev=function(e,n,r){n.css({marginLeft:"0%",opacity:"0.01"}),n.animate({opacity:"1"},t,"linear",function(){e.css("marginLeft","100%"),r()})}};Foundation.libs=Foundation.libs||{},Foundation.libs.orbit={name:"orbit",version:"4.3.1",settings:{animation:"slide",timer_speed:1e4,pause_on_hover:!0,resume_on_mouseout:!1,animation_speed:500,stack_on_small:!1,navigation_arrows:!0,slide_number:!0,container_class:"orbit-container",stack_on_small_class:"orbit-stack-on-small",next_class:"orbit-next",prev_class:"orbit-prev",timer_container_class:"orbit-timer",timer_paused_class:"paused",timer_progress_class:"orbit-progress",slides_container_class:"orbit-slides-container",bullets_container_class:"orbit-bullets",bullets_active_class:"active",slide_number_class:"orbit-slide-number",caption_class:"orbit-caption",active_slide_class:"active",orbit_transition_class:"orbit-transitioning",bullets:!0,timer:!0,variable_height:!1,before_slide_change:i,after_slide_change:i},init:function(t,n,r){var i=this;Foundation.inherit(i,"data_options"),typeof n=="object"&&e.extend(!0,i.settings,n);if(e(t).is("[data-orbit]")){var o=e(t),u=i.data_options(o);new s(o,e.extend({},i.settings,u))}e("[data-orbit]",t).each(function(t,n){var r=e(n),o=i.data_options(r);new s(r,e.extend({},i.settings,o))})}}}(Foundation.zj,this,this.document),function(e,t,n,r){"use strict";Foundation.libs.reveal={name:"reveal",version:"4.2.2",locked:!1,settings:{animation:"fadeAndPop",animationSpeed:250,closeOnBackgroundClick:!0,closeOnEsc:!0,dismissModalClass:"close-reveal-modal",bgClass:"reveal-modal-bg",open:function(){},opened:function(){},close:function(){},closed:function(){},bg:e(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(t,n,r){return Foundation.inherit(this,"data_options delay"),typeof n=="object"?e.extend(!0,this.settings,n):typeof r!="undefined"&&e.extend(!0,this.settings,r),typeof n!="string"?(this.events(),this.settings.init):this[n].call(this,r)},events:function(){var t=this;return e(this.scope).off(".fndtn.reveal").on("click.fndtn.reveal","[data-reveal-id]",function(n){n.preventDefault();if(!t.locked){var r=e(this),i=r.data("reveal-ajax");t.locked=!0;if(typeof i=="undefined")t.open.call(t,r);else{var s=i===!0?r.attr("href"):i;t.open.call(t,r,{url:s})}}}).on("click.fndtn.reveal",this.close_targets(),function(n){n.preventDefault();if(!t.locked){var r=e.extend({},t.settings,t.data_options(e(".reveal-modal.open")));if(e(n.target)[0]===e("."+r.bgClass)[0]&&!r.closeOnBackgroundClick)return;t.locked=!0,t.close.call(t,e(this).closest(".reveal-modal"))}}).on("open.fndtn.reveal",".reveal-modal",this.settings.open).on("opened.fndtn.reveal",".reveal-modal",this.settings.opened).on("opened.fndtn.reveal",".reveal-modal",this.open_video).on("close.fndtn.reveal",".reveal-modal",this.settings.close).on("closed.fndtn.reveal",".reveal-modal",this.settings.closed).on("closed.fndtn.reveal",".reveal-modal",this.close_video),e("body").bind("keyup.reveal",function(n){var r=e(".reveal-modal.open"),i=e.extend({},t.settings,t.data_options(r));n.which===27&&i.closeOnEsc&&r.foundation("reveal","close")}),!0},open:function(t,n){if(t)if(typeof t.selector!="undefined")var r=e("#"+t.data("reveal-id"));else{var r=e(this.scope);n=t}else var r=e(this.scope);if(!r.hasClass("open")){var i=e(".reveal-modal.open");typeof r.data("css-top")=="undefined"&&r.data("css-top",parseInt(r.css("top"),10)).data("offset",this.cache_offset(r)),r.trigger("open"),i.length<1&&this.toggle_bg(r);if(typeof n=="undefined"||!n.url)this.hide(i,this.settings.css.close),this.show(r,this.settings.css.open);else{var s=this,o=typeof n.success!="undefined"?n.success:null;e.extend(n,{success:function(t,n,u){e.isFunction(o)&&o(t,n,u),r.html(t),e(r).foundation("section","reflow"),s.hide(i,s.settings.css.close),s.show(r,s.settings.css.open)}}),e.ajax(n)}}},close:function(t){var t=t&&t.length?t:e(this.scope),n=e(".reveal-modal.open");n.length>0&&(this.locked=!0,t.trigger("close"),this.toggle_bg(t),this.hide(n,this.settings.css.close))},close_targets:function(){var e="."+this.settings.dismissModalClass;return this.settings.closeOnBackgroundClick?e+", ."+this.settings.bgClass:e},toggle_bg:function(t){e(".reveal-modal-bg").length===0&&(this.settings.bg=e("<div />",{"class":this.settings.bgClass}).appendTo("body")),this.settings.bg.filter(":visible").length>0?this.hide(this.settings.bg):this.show(this.settings.bg)},show:function(n,r){if(r){if(/pop/i.test(this.settings.animation)){r.top=e(t).scrollTop()-n.data("offset")+"px";var i={top:e(t).scrollTop()+n.data("css-top")+"px",opacity:1};return this.delay(function(){return n.css(r).animate(i,this.settings.animationSpeed,"linear",function(){this.locked=!1,n.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animationSpeed/2)}if(/fade/i.test(this.settings.animation)){var i={opacity:1};return this.delay(function(){return n.css(r).animate(i,this.settings.animationSpeed,"linear",function(){this.locked=!1,n.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animationSpeed/2)}return n.css(r).show().css({opacity:1}).addClass("open").trigger("opened")}return/fade/i.test(this.settings.animation)?n.fadeIn(this.settings.animationSpeed/2):n.show()},hide:function(n,r){if(r){if(/pop/i.test(this.settings.animation)){var i={top:-e(t).scrollTop()-n.data("offset")+"px",opacity:0};return this.delay(function(){return n.animate(i,this.settings.animationSpeed,"linear",function(){this.locked=!1,n.css(r).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animationSpeed/2)}if(/fade/i.test(this.settings.animation)){var i={opacity:0};return this.delay(function(){return n.animate(i,this.settings.animationSpeed,"linear",function(){this.locked=!1,n.css(r).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animationSpeed/2)}return n.hide().css(r).removeClass("open").trigger("closed")}return/fade/i.test(this.settings.animation)?n.fadeOut(this.settings.animationSpeed/2):n.hide()},close_video:function(t){var n=e(this).find(".flex-video"),r=n.find("iframe");r.length>0&&(r.attr("data-src",r[0].src),r.attr("src","about:blank"),n.hide())},open_video:function(t){var n=e(this).find(".flex-video"),i=n.find("iframe");if(i.length>0){var s=i.attr("data-src");if(typeof s=="string")i[0].src=i.attr("data-src");else{var o=i[0].src;i[0].src=r,i[0].src=o}n.show()}},cache_offset:function(e){var t=e.show().height()+parseInt(e.css("top"),10);return e.hide(),t},off:function(){e(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(Foundation.zj,this,this.document),function(e,t,n){"use strict";Foundation.libs.section={name:"section",version:"4.3.1",settings:{deep_linking:!1,small_breakpoint:768,one_up:!0,section_selector:"[data-section]",region_selector:"section, .section, [data-section-region]",title_selector:".title, [data-section-title]",resized_data_attr:"data-section-resized",small_style_data_attr:"data-section-small-style",content_selector:".content, [data-section-content]",nav_selector:'[data-section="vertical-nav"], [data-section="horizontal-nav"]',active_class:"active",callback:function(){}},init:function(t,n,r){var i=this;return Foundation.inherit(this,"throttle data_options position_right offset_right"),typeof n=="object"&&e.extend(!0,i.settings,n),typeof n!="string"?(this.events(),!0):this[n].call(this,r)},events:function(){var r=this,i=[],s=r.settings.section_selector,o=r.settings.region_selector.split(","),u=r.settings.title_selector.split(",");for(var a=0,f=o.length;a<f;a++){var l=o[a];for(var c=0,h=u.length;c<h;c++){var p=s+">"+l+">"+u[c];i.push(p+" a"),i.push(p)}}e(r.scope).on("click.fndtn.section",i.join(","),function(t){var n=e(this).closest(r.settings.title_selector);r.close_navs(n),n.siblings(r.settings.content_selector).length>0&&r.toggle_active.call(n[0],t)}),e(t).on("resize.fndtn.section",r.throttle(function(){r.resize()},30)).on("hashchange.fndtn.section",r.set_active_from_hash),e(n).on("click.fndtn.section",function(t){if(t.isPropagationStopped&&t.isPropagationStopped())return;if(t.target===n)return;r.close_navs(e(t.target).closest(r.settings.title_selector))}),e(t).triggerHandler("resize.fndtn.section"),e(t).triggerHandler("hashchange.fndtn.section")},close_navs:function(t){var n=Foundation.libs.section,r=e(n.settings.nav_selector).filter(function(){return!e.extend({},n.settings,n.data_options(e(this))).one_up});if(t.length>0){var i=t.parent().parent();if(n.is_horizontal_nav(i)||n.is_vertical_nav(i))r=r.filter(function(){return this!==i[0]})}r.children(n.settings.region_selector).removeClass(n.settings.active_class)},toggle_active:function(t){var n=e(this),r=Foundation.libs.section,i=n.parent(),s=n.siblings(r.settings.content_selector),o=i.parent(),u=e.extend({},r.settings,r.data_options(o)),a=o.children(r.settings.region_selector).filter("."+r.settings.active_class);!u.deep_linking&&s.length>0&&t.preventDefault(),t.stopPropagation(),i.hasClass(r.settings.active_class)?!u.one_up&&(r.small(o)||r.is_vertical_nav(o)||r.is_horizontal_nav(o)||r.is_accordion(o))&&i.removeClass(r.settings.active_class):(a.removeClass(r.settings.active_class),i.addClass(r.settings.active_class),r.resize(i.find(r.settings.section_selector).not("["+r.settings.resized_data_attr+"]"),!0)),u.callback(o)},check_resize_timer:null,resize:function(t,r){var i=Foundation.libs.section,s=i.small(e(n)),o=function(e,t){return!i.is_accordion(e)&&!e.is("["+i.settings.resized_data_attr+"]")&&(!s||i.is_horizontal_tabs(e))&&t===(e.css("display")==="none"||!e.parent().is(":visible"))};t=t||e(i.settings.section_selector),clearTimeout(i.check_resize_timer),s||t.removeAttr(i.settings.small_style_data_attr),t.filter(function(){return o(e(this),!1)}).each(function(){var t=e(this),n=t.children(i.settings.region_selector),s=n.children(i.settings.title_selector),o=n.children(i.settings.content_selector),u=0;if(r&&t.children(i.settings.region_selector).filter("."+i.settings.active_class).length==0){var a=e.extend({},i.settings,i.data_options(t));!a.deep_linking&&(a.one_up||!i.is_horizontal_nav(t)&&!i.is_vertical_nav(t)&&!i.is_accordion(t))&&n.filter(":visible").first().addClass(i.settings.active_class)}if(i.is_horizontal_tabs(t)||i.is_auto(t)){var f=0;s.each(function(){var t=e(this);if(t.is(":visible")){t.css(i.rtl?"right":"left",f);var n=parseInt(t.css("border-"+(i.rtl?"left":"right")+"-width"),10);n.toString()==="Nan"&&(n=0),f+=i.outerWidth(t)-n,u=Math.max(u,i.outerHeight(t))}}),s.css("height",u),n.each(function(){var t=e(this),n=t.children(i.settings.content_selector),r=parseInt(n.css("border-top-width"),10);r.toString()==="Nan"&&(r=0),t.css("padding-top",u-r)}),t.css("min-height",u)}else if(i.is_horizontal_nav(t)){var l=!0;s.each(function(){u=Math.max(u,i.outerHeight(e(this)))}),n.each(function(){var n=e(this);n.css("margin-left","-"+(l?t:n.children(i.settings.title_selector)).css("border-left-width")),l=!1}),n.css("margin-top","-"+t.css("border-top-width")),s.css("height",u),o.css("top",u),t.css("min-height",u)}else if(i.is_vertical_tabs(t)){var c=0;s.each(function(){var t=e(this);if(t.is(":visible")){t.css("top",c);var n=parseInt(t.css("border-top-width"),10);n.toString()==="Nan"&&(n=0),c+=i.outerHeight(t)-n}}),o.css("min-height",c+1)}else if(i.is_vertical_nav(t)){var h=0,p=!0;s.each(function(){h=Math.max(h,i.outerWidth(e(this)))}),n.each(function(){var n=e(this);n.css("margin-top","-"+(p?t:n.children(i.settings.title_selector)).css("border-top-width")),p=!1}),s.css("width",h),o.css(i.rtl?"right":"left",h),t.css("width",h)}t.attr(i.settings.resized_data_attr,!0)}),e(i.settings.section_selector).filter(function(){return o(e(this),!0)}).length>0&&(i.check_resize_timer=setTimeout(function(){i.resize(t.filter(function(){return o(e(this),!1)}),!0)},700)),s&&t.attr(i.settings.small_style_data_attr,!0)},is_vertical_nav:function(e){return/vertical-nav/i.test(e.data("section"))},is_horizontal_nav:function(e){return/horizontal-nav/i.test(e.data("section"))},is_accordion:function(e){return/accordion/i.test(e.data("section"))},is_horizontal_tabs:function(e){return/^tabs$/i.test(e.data("section"))},is_vertical_tabs:function(e){return/vertical-tabs/i.test(e.data("section"))},is_auto:function(e){var t=e.data("section");return t===""||/auto/i.test(t)},set_active_from_hash:function(){var n=Foundation.libs.section,r=t.location.hash.substring(1),i=e(n.settings.section_selector);i.each(function(){var t=e(this),i=e.extend({},n.settings,n.data_options(t)),s=t.children(n.settings.region_selector),o=i.deep_linking&&r.length>0,u=!1;s.each(function(){var t=e(this);if(u)t.removeClass(n.settings.active_class);else if(o){var i=t.children(n.settings.content_selector).data("slug");i&&(new RegExp(i,"i")).test(r)?(t.hasClass(n.settings.active_class)||t.addClass(n.settings.active_class),u=!0):t.removeClass(n.settings.active_class)}else t.hasClass(n.settings.active_class)&&(u=!0)}),!u&&!i.deep_linking&&(i.one_up||!n.is_horizontal_nav(t)&&!n.is_vertical_nav(t)&&!n.is_accordion(t))&&s.filter(":visible").first().addClass(n.settings.active_class)})},reflow:function(){var t=Foundation.libs.section;e(t.settings.section_selector).removeAttr(t.settings.resized_data_attr),t.throttle(function(){t.resize()},30)()},small:function(t){var n=e.extend({},this.settings,this.data_options(t));return this.is_horizontal_tabs(t)?!1:t&&this.is_accordion(t)?!0:e("html").hasClass("lt-ie9")?!0:e("html").hasClass("ie8compat")?!0:e(this.scope).width()<n.small_breakpoint},off:function(){e(this.scope).off(".fndtn.section"),e(t).off(".fndtn.section"),e(n).off(".fndtn.section")}},e.fn.reflow_section=function(e){var t=this,n=Foundation.libs.section;return t.removeAttr(n.settings.resized_data_attr),n.throttle(function(){n.resize(t,e)},30)(),this}}(Foundation.zj,window,document),function(e,t,n,r){"use strict";Foundation.libs.tooltips={name:"tooltips",version:"4.2.2",settings:{selector:".has-tip",additionalInheritableClasses:[],tooltipClass:".tooltip",appendTo:"body","disable-for-touch":!1,tipTemplate:function(e,t){return'<span data-selector="'+e+'" class="'+Foundation.libs.tooltips.settings.tooltipClass.substring(1)+'">'+t+'<span class="nub"></span></span>'}},cache:{},init:function(t,n,r){Foundation.inherit(this,"data_options");var i=this;typeof n=="object"?e.extend(!0,this.settings,n):typeof r!="undefined"&&e.extend(!0,this.settings,r);if(typeof n=="string")return this[n].call(this,r);Modernizr.touch?e(this.scope).on("click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip","[data-tooltip]",function(t){var n=e.extend({},i.settings,i.data_options(e(this)));n["disable-for-touch"]||(t.preventDefault(),e(n.tooltipClass).hide(),i.showOrCreateTip(e(this)))}).on("click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip",this.settings.tooltipClass,function(t){t.preventDefault(),e(this).fadeOut(150)}):e(this.scope).on("mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip","[data-tooltip]",function(t){var n=e(this);/enter|over/i.test(t.type)?i.showOrCreateTip(n):(t.type==="mouseout"||t.type==="mouseleave")&&i.hide(n)})},showOrCreateTip:function(e){var t=this.getTip(e);return t&&t.length>0?this.show(e):this.create(e)},getTip:function(t){var n=this.selector(t),r=null;return n&&(r=e('span[data-selector="'+n+'"]'+this.settings.tooltipClass)),typeof r=="object"?r:!1},selector:function(e){var t=e.attr("id"),n=e.attr("data-tooltip")||e.attr("data-selector");return(t&&t.length<1||!t)&&typeof n!="string"&&(n="tooltip"+Math.random().toString(36).substring(7),e.attr("data-selector",n)),t&&t.length>0?t:n},create:function(t){var n=e(this.settings.tipTemplate(this.selector(t),e("<div></div>").html(t.attr("title")).html())),r=this.inheritable_classes(t);n.addClass(r).appendTo(this.settings.appendTo),Modernizr.touch&&n.append('<span class="tap-to-close">tap to close </span>'),t.removeAttr("title").attr("title",""),this.show(t)},reposition:function(n,r,i){var s,o,u,a,f,l;r.css("visibility","hidden").show(),s=n.data("width"),o=r.children(".nub"),u=this.outerHeight(o),a=this.outerHeight(o),l=function(e,t,n,r,i,s){return e.css({top:t?t:"auto",bottom:r?r:"auto",left:i?i:"auto",right:n?n:"auto",width:s?s:"auto"}).end()},l(r,n.offset().top+this.outerHeight(n)+10,"auto","auto",n.offset().left,s);if(e(t).width()<767)l(r,n
.offset().top+this.outerHeight(n)+10,"auto","auto",12.5,e(this.scope).width()),r.addClass("tip-override"),l(o,-u,"auto","auto",n.offset().left);else{var c=n.offset().left;Foundation.rtl&&(c=n.offset().left+n.offset().width-this.outerWidth(r)),l(r,n.offset().top+this.outerHeight(n)+10,"auto","auto",c,s),r.removeClass("tip-override"),i&&i.indexOf("tip-top")>-1?l(r,n.offset().top-this.outerHeight(r),"auto","auto",c,s).removeClass("tip-override"):i&&i.indexOf("tip-left")>-1?l(r,n.offset().top+this.outerHeight(n)/2-u*2.5,"auto","auto",n.offset().left-this.outerWidth(r)-u,s).removeClass("tip-override"):i&&i.indexOf("tip-right")>-1&&l(r,n.offset().top+this.outerHeight(n)/2-u*2.5,"auto","auto",n.offset().left+this.outerWidth(n)+u,s).removeClass("tip-override")}r.css("visibility","visible").hide()},inheritable_classes:function(t){var n=["tip-top","tip-left","tip-bottom","tip-right","noradius"].concat(this.settings.additionalInheritableClasses),r=t.attr("class"),i=r?e.map(r.split(" "),function(t,r){if(e.inArray(t,n)!==-1)return t}).join(" "):"";return e.trim(i)},show:function(e){var t=this.getTip(e);this.reposition(e,t,e.attr("class")),t.fadeIn(150)},hide:function(e){var t=this.getTip(e);t.fadeOut(150)},reload:function(){var t=e(this);return t.data("fndtn-tooltips")?t.foundationTooltips("destroy").foundationTooltips("init"):t.foundationTooltips("init")},off:function(){e(this.scope).off(".fndtn.tooltip"),e(this.settings.tooltipClass).each(function(t){e("[data-tooltip]").get(t).attr("title",e(this).text())}).remove()},reflow:function(){}}}(Foundation.zj,this,this.document),function(e,t,n,r){"use strict";Foundation.libs.topbar={name:"topbar",version:"4.3.1",settings:{index:0,stickyClass:"sticky",custom_back_text:!0,back_text:"Back",is_hover:!0,mobile_show_parent_link:!0,scrolltop:!0,init:!1},init:function(n,r,i){Foundation.inherit(this,"data_options");var s=this;return typeof r=="object"?e.extend(!0,this.settings,r):typeof i!="undefined"&&e.extend(!0,this.settings,i),typeof r!="string"?(e(".top-bar, [data-topbar]").each(function(){e.extend(!0,s.settings,s.data_options(e(this))),s.settings.$w=e(t),s.settings.$topbar=e(this),s.settings.$section=s.settings.$topbar.find("section"),s.settings.$titlebar=s.settings.$topbar.children("ul").first(),s.settings.$topbar.data("index",0);var n=e("<div class='top-bar-js-breakpoint'/>").insertAfter(s.settings.$topbar);s.settings.breakPoint=n.width(),n.remove(),s.assemble(),s.settings.is_hover&&s.settings.$topbar.find(".has-dropdown").addClass("not-click"),s.settings.$topbar.parent().hasClass("fixed")&&e("body").css("padding-top",s.outerHeight(s.settings.$topbar))}),s.settings.init||this.events(),this.settings.init):this[r].call(this,i)},timer:null,events:function(){var n=this,r=this.outerHeight(e(".top-bar, [data-topbar]"));e(this.scope).off(".fndtn.topbar").on("click.fndtn.topbar",".top-bar .toggle-topbar, [data-topbar] .toggle-topbar",function(i){var s=e(this).closest(".top-bar, [data-topbar]"),o=s.find("section, .section"),u=s.children("ul").first();i.preventDefault(),n.breakpoint()&&(n.rtl?(o.css({right:"0%"}),o.find(">.name").css({right:"100%"})):(o.css({left:"0%"}),o.find(">.name").css({left:"100%"})),o.find("li.moved").removeClass("moved"),s.data("index",0),s.toggleClass("expanded").css("height","")),s.hasClass("expanded")?s.parent().hasClass("fixed")&&(s.parent().removeClass("fixed"),s.addClass("fixed"),e("body").css("padding-top","0"),n.settings.scrolltop&&t.scrollTo(0,0)):s.hasClass("fixed")&&(s.parent().addClass("fixed"),s.removeClass("fixed"),e("body").css("padding-top",r))}).on("click.fndtn.topbar",".top-bar li.has-dropdown",function(t){if(n.breakpoint())return;var r=e(this),i=e(t.target),s=r.closest("[data-topbar], .top-bar"),o=s.data("topbar");if(n.settings.is_hover&&!Modernizr.touch)return;t.stopImmediatePropagation(),i[0].nodeName==="A"&&i.parent().hasClass("has-dropdown")&&t.preventDefault(),r.hasClass("hover")?r.removeClass("hover").find("li").removeClass("hover"):r.addClass("hover")}).on("click.fndtn.topbar",".top-bar .has-dropdown>a, [data-topbar] .has-dropdown>a",function(t){if(n.breakpoint()){t.preventDefault();var r=e(this),i=r.closest(".top-bar, [data-topbar]"),s=i.find("section, .section"),o=i.children("ul").first(),u=r.next(".dropdown").outerHeight(),a=r.closest("li");i.data("index",i.data("index")+1),a.addClass("moved"),n.rtl?(s.css({right:-(100*i.data("index"))+"%"}),s.find(">.name").css({right:100*i.data("index")+"%"})):(s.css({left:-(100*i.data("index"))+"%"}),s.find(">.name").css({left:100*i.data("index")+"%"})),i.css("height",n.outerHeight(r.siblings("ul"),!0)+n.height(o))}}),e(t).on("resize.fndtn.topbar",function(){n.breakpoint()||e(".top-bar, [data-topbar]").css("height","").removeClass("expanded").find("li").removeClass("hover")}.bind(this)),e("body").on("click.fndtn.topbar",function(t){var n=e(t.target).closest("[data-topbar], .top-bar");if(n.length>0)return;e(".top-bar li, [data-topbar] li").removeClass("hover")}),e(this.scope).on("click.fndtn",".top-bar .has-dropdown .back, [data-topbar] .has-dropdown .back",function(t){t.preventDefault();var r=e(this),i=r.closest(".top-bar, [data-topbar]"),s=i.children("ul").first(),o=i.find("section, .section"),u=r.closest("li.moved"),a=u.parent();i.data("index",i.data("index")-1),n.rtl?(o.css({right:-(100*i.data("index"))+"%"}),o.find(">.name").css({right:100*i.data("index")+"%"})):(o.css({left:-(100*i.data("index"))+"%"}),o.find(">.name").css({left:100*i.data("index")+"%"})),i.data("index")===0?i.css("height",""):i.css("height",n.outerHeight(a,!0)+n.height(s)),setTimeout(function(){u.removeClass("moved")},300)})},breakpoint:function(){return e(n).width()<=this.settings.breakPoint||e("html").hasClass("lt-ie9")},assemble:function(){var t=this;this.settings.$section.detach(),this.settings.$section.find(".has-dropdown>a").each(function(){var n=e(this),r=n.siblings(".dropdown"),i=n.attr("href");if(t.settings.mobile_show_parent_link&&i&&i.length>1)var s=e('<li class="title back js-generated"><h5><a href="#"></a></h5></li><li><a class="parent-link js-generated" href="'+i+'">'+n.text()+"</a></li>");else var s=e('<li class="title back js-generated"><h5><a href="#"></a></h5></li>');t.settings.custom_back_text==1?s.find("h5>a").html("&laquo; "+t.settings.back_text):s.find("h5>a").html("&laquo; "+n.html()),r.prepend(s)}),this.settings.$section.appendTo(this.settings.$topbar),this.sticky()},height:function(t){var n=0,r=this;return t.find("> li").each(function(){n+=r.outerHeight(e(this),!0)}),n},sticky:function(){var n="."+this.settings.stickyClass;if(e(n).length>0){var r=e(n).length?e(n).offset().top:0,i=e(t),s=this.outerHeight(e(".top-bar")),o;e(t).resize(function(){clearTimeout(o),o=setTimeout(function(){r=e(n).offset().top},105)}),i.scroll(function(){i.scrollTop()>r?(e(n).addClass("fixed"),e("body").css("padding-top",s)):i.scrollTop()<=r&&(e(n).removeClass("fixed"),e("body").css("padding-top","0"))})}},off:function(){e(this.scope).off(".fndtn.topbar"),e(t).off(".fndtn.topbar")},reflow:function(){}}}(Foundation.zj,this,this.document),function(e,t,n,r){"use strict";Foundation.libs.interchange={name:"interchange",version:"4.2.4",cache:{},images_loaded:!1,settings:{load_attr:"interchange",named_queries:{"default":"only screen and (min-width: 1px)",small:"only screen and (min-width: 768px)",medium:"only screen and (min-width: 1280px)",large:"only screen and (min-width: 1440px)",landscape:"only screen and (orientation: landscape)",portrait:"only screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (min-device-pixel-ratio: 2),only screen and (min-resolution: 192dpi),only screen and (min-resolution: 2dppx)"},directives:{replace:function(e,t){if(/IMG/.test(e[0].nodeName)){var n=e[0].src;if((new RegExp(t,"i")).test(n))return;return e[0].src=t,e.trigger("replace",[e[0].src,n])}}}},init:function(t,n,r){return Foundation.inherit(this,"throttle"),typeof n=="object"&&e.extend(!0,this.settings,n),this.events(),this.images(),typeof n!="string"?this.settings.init:this[n].call(this,r)},events:function(){var n=this;e(t).on("resize.fndtn.interchange",n.throttle(function(){n.resize.call(n)},50))},resize:function(){var t=this.cache;if(!this.images_loaded){setTimeout(e.proxy(this.resize,this),50);return}for(var n in t)if(t.hasOwnProperty(n)){var r=this.results(n,t[n]);r&&this.settings.directives[r.scenario[1]](r.el,r.scenario[0])}},results:function(t,n){var r=n.length;if(r>0){var i=e('[data-uuid="'+t+'"]');for(var s=r-1;s>=0;s--){var o,u=n[s][2];this.settings.named_queries.hasOwnProperty(u)?o=matchMedia(this.settings.named_queries[u]):o=matchMedia(u);if(o.matches)return{el:i,scenario:n[s]}}}return!1},images:function(e){return typeof this.cached_images=="undefined"||e?this.update_images():this.cached_images},update_images:function(){var t=n.getElementsByTagName("img"),r=t.length,i=0,s="data-"+this.settings.load_attr;this.cached_images=[],this.images_loaded=!1;for(var o=r-1;o>=0;o--)this.loaded(e(t[o]),function(e){i++;if(e){var t=e.getAttribute(s)||"";t.length>0&&this.cached_images.push(e)}i===r&&(this.images_loaded=!0,this.enhance())}.bind(this));return"deferred"},loaded:function(e,t){function n(){t(e[0])}function r(){this.one("load",n);if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var e=this.attr("src"),t=e.match(/\?/)?"&":"?";t+="random="+(new Date).getTime(),this.attr("src",e+t)}}if(!e.attr("src")){n();return}e[0].complete||e[0].readyState===4?n():r.call(e)},enhance:function(){var n=this.images().length;for(var r=n-1;r>=0;r--)this._object(e(this.images()[r]));return e(t).trigger("resize")},parse_params:function(e,t,n){return[this.trim(e),this.convert_directive(t),this.trim(n)]},convert_directive:function(e){var t=this.trim(e);return t.length>0?t:"replace"},_object:function(e){var t=this.parse_data_attr(e),n=[],r=t.length;if(r>0)for(var i=r-1;i>=0;i--){var s=t[i].split(/\((.*?)(\))$/);if(s.length>1){var o=s[0].split(","),u=this.parse_params(o[0],o[1],s[1]);n.push(u)}}return this.store(e,n)},uuid:function(e){function n(){return((1+Math.random())*65536|0).toString(16).substring(1)}var t=e||"-";return n()+n()+t+n()+t+n()+t+n()+t+n()+n()+n()},store:function(e,t){var n=this.uuid(),r=e.data("uuid");return r?this.cache[r]:(e.attr("data-uuid",n),this.cache[n]=t)},trim:function(t){return typeof t=="string"?e.trim(t):t},parse_data_attr:function(e){var t=e.data(this.settings.load_attr).split(/\[(.*?)\]/),n=t.length,r=[];for(var i=n-1;i>=0;i--)t[i].replace(/[\W\d]+/,"").length>4&&r.push(t[i]);return r},reflow:function(){this.images(!0)}}}(Foundation.zj,this,this.document),function(e,t,n){function f(e){var t={},r=/^jQuery\d+$/;return n.each(e.attributes,function(e,n){n.specified&&!r.test(n.name)&&(t[n.name]=n.value)}),t}function l(e,r){var i=this,s=n(i);if(i.value==s.attr("placeholder")&&s.hasClass("placeholder"))if(s.data("placeholder-password")){s=s.hide().next().show().attr("id",s.removeAttr("id").data("placeholder-id"));if(e===!0)return s[0].value=r;s.focus()}else i.value="",s.removeClass("placeholder"),i==t.activeElement&&i.select()}function c(){var e,t=this,r=n(t),i=r,s=this.id;if(t.value==""){if(t.type=="password"){if(!r.data("placeholder-textinput")){try{e=r.clone().attr({type:"text"})}catch(o){e=n("<input>").attr(n.extend(f(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":s}).bind("focus.placeholder",l),r.data({"placeholder-textinput":e,"placeholder-id":s}).before(e)}r=r.removeAttr("id").hide().prev().attr("id",s).show()}r.addClass("placeholder"),r[0].value=r.attr("placeholder")}else r.removeClass("placeholder")}var r="placeholder"in t.createElement("input"),i="placeholder"in t.createElement("textarea"),s=n.fn,o=n.valHooks,u,a;r&&i?(a=s.placeholder=function(){return this},a.input=a.textarea=!0):(a=s.placeholder=function(){var e=this;return e.filter((r?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":l,"blur.placeholder":c}).data("placeholder-enabled",!0).trigger("blur.placeholder"),e},a.input=r,a.textarea=i,u={get:function(e){var t=n(e);return t.data("placeholder-enabled")&&t.hasClass("placeholder")?"":e.value},set:function(e,r){var i=n(e);return i.data("placeholder-enabled")?(r==""?(e.value=r,e!=t.activeElement&&c.call(e)):i.hasClass("placeholder")?l.call(e,!0,r)||(e.value=r):e.value=r,i):e.value=r}},r||(o.input=u),i||(o.textarea=u),n(function(){n(t).delegate("form","submit.placeholder",function(){var e=n(".placeholder",this).each(l);setTimeout(function(){e.each(c)},10)})}),n(e).bind("beforeunload.placeholder",function(){n(".placeholder").each(function(){this.value=""})}))}(this,document,Foundation.zj),function(e,t,n,r){"use strict";Foundation.libs.placeholder={name:"placeholder",version:"4.2.2",init:function(n,r,i){this.scope=n||this.scope,typeof r!="string"&&(t.onload=function(){e("input, textarea").placeholder()})}}}(Foundation.zj,this,this.document),function(e,t,n,r){"use strict";Foundation.libs.abide={name:"abide",version:"4.3.0",settings:{live_validate:!0,focus_on_invalid:!0,timeout:1e3,patterns:{alpha:/[a-zA-Z]+/,alpha_numeric:/[a-zA-Z0-9]+/,integer:/-?\d+/,number:/-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?/,password:/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,url:/(https?|ftp|file|ssh):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$/,datetime:/([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))/,time:/(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}/,dateISO:/\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/,month_day_year:/(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.](19|20)\d\d/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/}},timer:null,init:function(t,n,r){typeof n=="object"&&e.extend(!0,this.settings,n);if(typeof n=="string")return this[n].call(this,r);this.settings.init||this.events()},events:function(){var t=this,n=e("form[data-abide]",this.scope).attr("novalidate","novalidate");n.on("submit validate",function(n){return t.validate(e(this).find("input, textarea, select").get(),n)}),this.settings.init=!0;if(!this.settings.live_validate)return;n.find("input, textarea, select").on("blur change",function(e){t.validate([this],e)}).on("keydown",function(e){clearTimeout(t.timer),t.timer=setTimeout(function(){t.validate([this],e)}.bind(this),t.settings.timeout)})},validate:function(t,n){var r=this.parse_patterns(t),i=r.length,s=e(t[0]).closest("form");while(i--)if(!r[i]&&/submit/.test(n.type))return this.settings.focus_on_invalid&&t[i].focus(),s.trigger("invalid"),e(t[i]).closest("form").attr("data-invalid",""),!1;return/submit/.test(n.type)&&s.trigger("valid"),s.removeAttr("data-invalid"),!0},parse_patterns:function(e){var t=e.length,n=[];for(var r=t-1;r>=0;r--)n.push(this.pattern(e[r]));return this.check_validation_and_apply_styles(n)},pattern:function(e){var t=e.getAttribute("type"),n=typeof e.getAttribute("required")=="string";if(this.settings.patterns.hasOwnProperty(t))return[e,this.settings.patterns[t],n];var r=e.getAttribute("pattern")||"";return this.settings.patterns.hasOwnProperty(r)&&r.length>0?[e,this.settings.patterns[r],n]:r.length>0?[e,new RegExp(r),n]:(r=/.*/,[e,r,n])},check_validation_and_apply_styles:function(t){var n=t.length,r=[];for(var i=n-1;i>=0;i--){var s=t[i][0],o=t[i][2],u=s.value,a=s.type==="radio",f=o?s.value.length>0:!0;a&&o?r.push(this.valid_radio(s,o)):t[i][1].test(u)&&f||!o&&s.value.length<1?(e(s).removeAttr("data-invalid").parent().removeClass("error"),r.push(!0)):(e(s).attr("data-invalid","").parent().addClass("error"),r.push(!1))}return r},valid_radio:function(t,r){var i=t.getAttribute("name"),s=n.getElementsByName(i),o=s.length,u=!1;for(var a=0;a<o;a++)s[a].checked&&(u=!0);for(var a=0;a<o;a++)u?e(s[a]).removeAttr("data-invalid").parent().removeClass("error"):e(s[a]).attr("data-invalid","").parent().addClass("error");return u}}}(Foundation.zj,this,this.document);

window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});var QuickFan={fan_timeout:null,pop_similar:function(a){HPTrack.trackPageview("/t/a/similar_bloggers");YAHOO.util.Connect.asyncRequest("GET","/users/favorite-bloggers/get_similar_bloggers.php?author="+a,{success:QuickFan.GetSimilarSuccess,failure:QuickFan.GetSimilarFail},{});return false},GetSimilarSuccess:function(a){HuffConnect.socialModal({inner_html:a.responseText,modal_subhead_image:"",modal_head_image:"",width:600})},GetSimilarFail:function(a){HPError.e();HuffConnect.hideModal()},pop:function(a){if(HuffCookies.getUserName()){QuickFan.becomeFan(a)}else{HPConnect.Login()}},become_fan_mouseover:function(){if(QuickFan.fan_timeout){clearTimeout(QuickFan.fan_timeout)}},become_fan_hovercard:function(c,e,b,g,a,d){a=a||27;g=g||[0,0];var c=c||window.event;var f=c.target||c.srcElement;var h=c.type.toLowerCase();d=d||e;if(f.getAttribute("floating_id")){return false}QuickFan.fan_timeout=setTimeout(function(){f.setAttribute("on_hover","yes");var i="";if(!HuffCookies.getUserName()){i='<div class="become_fan_tooltip"><div class="float_left bold"><img src="/contributors/'+b+'/headshot.jpg" class="float_left margin_right_5" /><div class="float_left become_fan_text">'+d.charAt(0).toUpperCase()+d.substr(1,d.length-1)+'<div class="margin_top_5"><img onclick="return QuickFan.hovercard_handle(this, \'hp_blogger_'+e.replace(/'/g,"\\'")+'\');" class="cursor_pointer social fan-bloger" src="/images/blank.gif"></div></div></div><div class="clear_first"></div><div class="become_fan_corner"><div class="first"></div><div class="second"></div></div></div>'}else{i='<div class="become_fan_tooltip"><div class="fp_loader">'+__("Loading...")+'</div><div class="become_fan_corner"><div class="first"></div><div class="second"></div></div></div>'}FloatingPrompt.embed(f,i,undefined,"top",{ignore_arrow:true,width:180,add_xy:[-72+g[0],g[1]+(HuffCookies.getUserName()?-50:-72)],class_name:"clear-overlay",fp_intersects:1});if(HuffCookies.getUserName()){var j="author_name=hp_blogger_"+encodeURIComponent(e);C.asyncRequest("POST","/web-services/author/friendship.php",{success:function(n){var k=JSON.parse(n.responseText);var l=k.friendship?"unfan-bloger":"fan-bloger";var m='<div class="become_fan_tooltip"><div class="float_left bold"><img src="/contributors/'+b+'/headshot.jpg" class="float_left margin_right_5" /><div class="float_left become_fan_text">'+d.charAt(0).toUpperCase()+d.substr(1,d.length-1)+'<div class="margin_top_5"><img onclick="return QuickFan.hovercard_handle(this, \'hp_blogger_'+e.replace(/'/g,"\\'")+'\');" class="cursor_pointer social '+l+'" src="/images/blank.gif"></div></div></div><div class="clear_first"></div><div class="become_fan_corner"><div class="first"></div><div class="second"></div></div></div>';FloatingPrompt.container.style.top=(parseInt(FloatingPrompt.container.style.top)-a).toString()+"px";FloatingPrompt.container.innerHTML=m},failure:function(){HPError.e()},timeout:10000},j)}},1000);return false},hovercard_handle:function(b,c){if(!HuffCookies.getUserName()){ConnectOverview.showBenefits({provider:"signup"});return false}var a=!jQuery(b).hasClass("fan-bloger");jQuery.ajax({url:"/users/favorite-bloggers/fan_action.php",data:"fan="+c+"&action="+(a?"delete":"add"),type:"POST",success:function(d){if(-1!==d.indexOf("::")){if(!a){jQuery(b).removeClass("fan-bloger").addClass("unfan-bloger")}else{jQuery(b).removeClass("unfan-bloger").addClass("fan-bloger")}}},error:function(){HPError.e()}});return false},becomeFan:function(a){jQuery.ajax({url:"/users/favorite-bloggers/fan_action.php",data:"fan="+a+"&action=add",type:"POST",success:QuickFan.Success,error:QuickFan.Fail});return},Success:function(e,d,c){if(c.status!=200){HuffConnect.hideModal();return}resp=e;action=resp.substring(0,3);if(action=="add"){var b=resp.split("::");SNProject.track(b[2],"user_follow");var f=b[3];var a=b[4];QuickFan.pop_email_alerts(b[1],f,a)}else{if(resp=="notification saved"){jQuery("#quick_alert_div").html("<div style='margin:30px 0;' class='arial_16 bold center color_444444'>"+__("Social preferences successfully saved")+"</div>")}else{if(action=="<if"){jQuery("#quick_alert_div").html("<div style='margin:30px 0;' class='arial_16 bold center color_444444'>"+resp+"</div>")}else{if(action!="mov"){return QuickFan.Fail()}}}}return false},Fail:function(){HPError.e();HuffConnect.hideModal();return},emailAlerts:function(b,c,d,a){d=d||false;a=a||false;QuickFan.pop_email_alerts(b,d,a,c);return},pop_email_alerts:function(c,e,a,d){e=e||false;a=a||false;d=d||c;if(HuffCookies.getUserName()){var b="/users/favorite-bloggers/qet_email_alerts.php?blogger="+c+"&blogger_name="+d;if(e){b+="&fan_success="+e}if(a){b+="&fan_reason="+a}HuffConnect.showLoader();jQuery.ajax({type:"GET",url:b,success:QuickFan.GetEmailAlertsSuccess,error:QuickFan.GetEmailAlertsFail})}else{ConnectOverview.showBenefits({provider:"signup",message:__("You must be logged in to subscribe."),onSuccess:function(){QuickFan.user_connected=true;QuickFan.pop_email_alerts(c,e,a)}})}},GetEmailAlertsSuccess:function(e,d,c){if(c.status!=200){HuffConnect.hideModal();return}var a={inner_html:e,width:670,modal_head_image:"",modal_subhead_image:""};if(QuickFan.user_connected){a.onclose=function(){HuffConnect.Login.onLoginSuccess()}}HuffConnect.socialModal(a);if(HPConfig.current_vertical_name&&!(/homepage/.test(HPConfig.current_vertical_name))){var b=HuffPoUtil.trim(HPConfig.current_vertical_name);b=b.replace("-"," ");b=b.toLowerCase().replace(/\w+/g,function(f){return f.charAt(0).toUpperCase()+f.substr(1)});jQuery("#quick_vertical_alert").html('<input type="checkbox" name="'+b+' Brief" value="1" checked /><span class="">&nbsp;'+__("Sign me up for the HuffPost %s Newsletter",b)+"</span>").removeClass("hidden")}return;if(typeof(QuickFan._HeaderText)!="undefined"){$("header_id").innerHTML=QuickFan._HeaderText;delete QuickFan._HeaderText}},GetEmailAlertsFail:function(){HPError.e();HuffConnect.hideModal();return},sendForm:function(b){var e=jQuery("#quick_email_alerts_form").get(0);var b=b||false;if(!b){if(!HPUtil.checkEmail(e.blogger_alert_email.value)){jQuery("#qa_error_notify").html(__("Please submit a valid email address"));jQuery("#qa_error_notify").removeClass("hidden");e.blogger_alert_email.value="";e.blogger_alert_email.focus();return false}}var d="";d+=jQuery("#save").attr("name")+"="+jQuery("#save").val()+"&";d+=e.blogger_alert_email.name+"="+e.blogger_alert_email.value+"&";d+=document.getElementById("notify[blogger]").name+"="+document.getElementById("notify[blogger]").value+"&";d+=document.getElementById("blogger_name").name+"="+document.getElementById("blogger_name").value+"&";for(var a=0;a<e.length;a++){if(e[a].type=="checkbox"){var c=(e[a].checked)?1:0;d+="&"+e[a].name+"="+c}}jQuery("#quick_alert_button").addClass("hidden");jQuery("#quick_alert_loader").removeClass("hidden");jQuery.ajax({url:e.action,type:"POST",data:d,success:QuickFan.Success,error:QuickFan.Fail});return false},focusOnBox:function(a){if(jQuery(a).val()==__("Type your email address here...")){jQuery(a).val("")}return},blurOnBox:function(a){if(jQuery(a).val()==""){jQuery(a).val(__("Type your email address here..."))}return}};huff.unit("tmp/quick_fan",function(a){a(QuickFan)});
var HPAds={ad_timezone_store:[],ad_store:[],iframe_ads_queue:[],iframe_ads_callback:[],iframe_ads_timeout:4000,iframe_ads_queue_running:false,ad_capchecked:false,ad_cap:"n",snpmodule_skin:false,dfp_tile_num:0,homepage_trailer:{},spot_rendered:{},page_spots:[],curr_page_config:false,full_page_config:false,current_platform:false,revsplit:{getAdId:function(c,b){if(typeof io_c3sd!="undefined"&&typeof io_c3sd.ads!="undefined"&&typeof io_c3sd.ads[c]!="undefined"){var d=io_c3sd.ads[c];return d.replace(/\s/g,"")}else{return b}}},hide_ugc_ads:function(){if(HPAds.ugc_ads_hidden){return}var b=jQuery('iframe[src*="adpage.html"]');for(x=0;b[x];x++){if(b[x].contentWindow.document.body.innerHTML.indexOf("ugc_flag")>1){jQuery(b[x]).closest(".ad_728_90b_fix,.ad_wrapper_top, .ad_wrapper_, .ad_wrapper").css("display","none");HPAds.ugc_ads_hidden=true}}},ugc_suppress_check:function(){if("undefined"!=typeof(twitter_suppress)&&twitter_suppress){jQuery("#twitter_block_holder").css("display","none");jQuery("#show_twitter_block").css("display","block");jQuery("#show_twitter_block").click(function(){jQuery("#twitter_block_holder").css("display","block");jQuery("#show_twitter_block").css("display","none");HPAds.hide_ugc_ads();return false})}else{jQuery("#show_twitter_block").css("display","none");jQuery("#twitter_block_holder").css("display","block")}if("undefined"!=typeof(comments_suppress)&&comments_suppress){if(typeof window.ConversationsLoader==="object"&&window.ConversationsLoader.hideConversations){window.ConversationsLoader.hideConversations()}else{jQuery(".comments_block_holder").css("display","none");jQuery("#show_comments_block").css("display","block");jQuery("#show_comments_block").click(function(){jQuery(".comments_block_holder").css("display","block");jQuery("#show_comments_block").css("display","none");HPAds.hide_ugc_ads();return false})}var b=jQuery("#huffpost-web-fb-comments");var c=jQuery("#huffpost-web-fb-comments-opener");if(b.length&&c.length){b.css("display","none");c.css("display","block").bind("click",function(){b.css("display","block");c.css("display","none");HPAds.hide_ugc_ads()})}}else{if(typeof window.ConversationsLoader==="object"&&window.ConversationsLoader.showConversations){window.ConversationsLoader.showConversations()}else{jQuery("#show_comments_block").css("display","none");jQuery(".comments_block_holder").css("display","block")}}},iframe_ads_queue_callback:function(c){if(c){this.iframe_ads_callback.push(c);if(this.iframe_ads_queue_running){return}}if((this.iframe_ads_queue.length==0)||(this.iframe_ads_timeout<=0)){this.iframe_ads_queue_running=false;if(this.iframe_ads_callback.length>0){for(var b=0;b<this.iframe_ads_callback.length;b++){this.iframe_ads_callback[b].call();this.iframe_ads_callback.slice(b,1)}}}else{this.iframe_ads_timeout=this.iframe_ads_timeout-200;this.iframe_ads_queue_running=true;setTimeout("HPAds.iframe_ads_queue_callback(null)",200)}},adSonar:function(c,d,b,e){document.write('<script type="text/javascript">adsonar_placementId='+c+";adsonar_pid="+d+";adsonar_ps=-1;adsonar_zw="+b+";adsonar_zh="+e+';adsonar_jv="ads.tw.adsonar.com";<\/script><script language="JavaScript" src="http://js.adsonar.com/js/tw_dfp_adsonar.js"><\/script>');if(location.href.match("debugadcode")){document.write('<div style="padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px">');document.write("<b>ADSONAR PLACEMENT</b>");document.write("<br />plid: "+c);document.write("<br />pid: "+d);document.write("<br />width: "+b);document.write("<br />height: "+e);document.write("</div>")}},iframe_ads_queue_remove:function(c){for(var b=0;b<this.iframe_ads_queue.length;b++){if(this.iframe_ads_queue[b]==c){this.iframe_ads_queue.splice(b,1);break}}},ad_check_savecookie:function(){var c="huffpost_adssale";if(this.ad_capchecked){return}var b=HuffCookies.getCookie(c);if(b=="y"){HuffCookies.setCookie(c,"n",12);this.ad_cap="y"}else{if(b=="n"){this.ad_cap="n"}else{HuffCookies.setCookie(c,"y",-1)}}this.ad_capchecked=true},ad_store_push:function(j,h,d,g,b,k,f,c){var e=c||false;HPAds.ad_store[j]={ad_type:h,ad_container_width:d,ad_content:g,defer:b,positioned_callback:k,slug:f,refresh_rate:e}},homepage_trailer_add:function(e,d,c,b){if(HPAds.homepage_trailer[e]){HPAds.homepage_trailer[e].video_params=d}if(b){QV.popHomepageTrailer(e,c)}},ads_ord:function(){return ord},ads_client_info:function(){var f="";var c="null";var d="null";if(HPBrowser.OS()=="Windows"){c="win"}else{if(HPBrowser.OS()=="Linux"){c="lin"}else{if(HPBrowser.OS()=="Mac"){c="mac"}}}var b=HPBrowser.nameBrowser();if(b=="Explorer"){d="ie"}else{if(b=="Firefox"){d="ff"}else{if(b=="Chrome"){d="ch"}else{if(b=="Opera"){d="op"}else{if(b=="Safari"){d="sa"}else{if(b=="Konqueror"){d="ko"}else{if(b=="Camino"){d="ca"}else{if(b=="OmniWeb"){d="om"}}}}}}}}var e=HPUtil.getQueryVariables();var g=new Array();if(typeof(e.no_keyvalue)!="undefined"){g=e.no_keyvalue.split(",")}if(g.inArray("plat")===false){f+="plat="+c+";"}if(g.inArray("br")===false){f+="br="+d+";"}if(g.inArray("bv")===false){f+="bv="+HPBrowser.major_version()+";"}if(g.inArray("subbv")===false){f+="subbv="+HPBrowser.minor_version()}return f},ads_u_value:function(){var d=HuffCookies.getSNPstatus()=="1"?"y|":"|";var f=document.cookie;var e="__qseg=";var b=f.indexOf(e);if(b!=-1){if((cei=f.indexOf(";",b+e.length))==-1){cei=f.length}a=unescape(f.substring(b+e.length,cei));d+=a.replace(/\|{0,1}Q_/gi,",").replace(/^,/,"")}return d},ads_inf_value:function(){var c=HuffCookies.getUserInfluence();var b=c.commented.value==1||c.shared.value==1||c.emailed.value==1||c.blogged.value==1||c.blogged.value==1?"y":"";return b},adtech_client_side_inf:function(){var c=HPUtil.getQueryVariables();var d=new Array();if(typeof(c.no_keyvalue)!="undefined"){d=c.no_keyvalue.split(",")}var b=HuffCookies.getUserInfluence();if((b.commented.value==1||b.shared.value==1||b.emailed.value==1||b.blogged.value==1||b.blogged.value==1)&&(d.inArray("inf")===false)){return"kvinf=y;"}return""},ads_client_side_qvs:function(){var g="";var l=false;var k="__qseg=";var h=document.cookie;var m=h.indexOf(k);var j=HPUtil.getQueryVariables();var e=new Array();if(typeof(j.no_keyvalue)!="undefined"){e=j.no_keyvalue.split(",")}if(m!=-1){if((cei=h.indexOf(";",m+k.length))==-1){cei=h.length}l=unescape(h.substring(m+k.length,cei))}if((HuffCookies.getSNPstatus()=="1")&&(e.inArray("snn")===false)){g+="snn=y;"}var b=HuffCookies.getUserInfluence();if((b.commented.value==1||b.shared.value==1||b.emailed.value==1||b.blogged.value==1||b.blogged.value==1)&&(e.inArray("inf")===false)){g+="inf=y;"}this.ad_check_savecookie();if(e.inArray("cap_12")===false){g+="cap_12="+this.ad_cap+";"}if(e.inArray("ref")===false){var f=/ref=([^&]+)/ig;var d;while((d=f.exec(location.search))!=null){g+="utm_hp_ref="+d[1]+";"}}if(e.inArray("qcs")===false){g+=(l?l.replace(/\|{0,1}Q_/gi,";qcs=").replace(/^;/,"")+";":"")}return g},timeout_store:{},ad_move_to_place:function(e,o){var k=HPAds.ad_store[e];var l=k.ad_type;var d=k.ad_container_width;if("by_request"==l&&!o&&!k.defer){setTimeout(function(){HPAds.ad_reload(e)},2000)}else{if("dom_move"==l&&!o&&!("pushdown"==e&&"Explorer"==HPBrowser.nameBrowser())){document.getElementById("ad_"+e).innerHTML="";document.getElementById("ad_"+e).appendChild(document.getElementById("ad_store_"+e));YAHOO.util.Dom.removeClass("ad_store_"+e,"ad_store")}else{if("css_positioned"==l){var h=document.getElementById("ad_store_"+e);if(h.clientHeight>59){var m=document.createElement("IMG");m.src="/images/spacer.gif";m.width=h.clientWidth;m.height=h.clientHeight;Dom.setStyle(m,"margin","0");Dom.setStyle(m,"padding","0");var c=document.getElementById("ad_"+e);if(c.hasChildNodes()){c.removeChild(c.firstChild)}document.getElementById("ad_"+e).appendChild(m);var g=YAHOO.util.Dom.getXY(m);var j=YAHOO.util.Dom.getXY(document.getElementById("wrapper"))[0];var b=YAHOO.util.Dom.getXY(document.getElementById("wrapper"))[1];h.style.top=parseInt(parseInt(g[1])-b)+"px";h.style.left=parseInt(parseInt(g[0]-j))+"px";YAHOO.util.Dom.removeClass(h,"ad_store");h.style.visibility="visible";h.style.position="absolute";if(HPAds.timeout_store[e]){clearInterval(HPAds.timeout_store[e].interval)}if(k.positioned_callback&&typeof(k.positioned_callback)=="function"){k.positioned_callback()}}else{if(!HPAds.timeout_store[e]){HPAds.timeout_store[e]={interval:setInterval(function(){HPAds.ad_move_to_place(e)},200),attempt:1}}else{if(HPAds.timeout_store[e].attempt<12){HPAds.timeout_store[e].attempt++}else{clearInterval(HPAds.timeout_store[e].interval);HPAds.timeout_store[e]=null;HPAds.ad_store[e]=null;var f=document.getElementById("ad_store_"+e);var n=f.parentNode;n.removeChild(f)}}}}}}},ad_store_move_to_place:function(c){var b=HPAds.ad_store;for(i in b){if(b[i]&&typeof(b[i])=="object"){HPAds.ad_move_to_place(i,c)}}if(location.href.match("debugadcode")){jQuery('script[src*="PlayerSeed.js"]').each(function(e){var h=jQuery(this).attr("src").match("&siteSection=");var g='<div style="padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px;clear:both">Player: 5min '+(h?"commercial":"classic");var d=commercial_video.site_and_category!==""?commercial_video.site_and_category:"N/A";if(h&&typeof(commercial_video)=="object"){g+="<br />Site Section: "+d}var f=commercial_video["package"]!==""?commercial_video["package"]:"N/A";if(h&&typeof(commercial_video)=="object"){g+="<br />Sponsorship: "+f}g+="</div>";jQuery(this).parent().append(g)});jQuery('script[src*="videoplayer/loader.js"]').each(function(d){var e='<div style="padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px;clear:both">Player: Brightcove<br />Sponsorship: '+AOLVP_cfg[d].sponsorship+"</div>";jQuery("#"+AOLVP_cfg[d].id).after(e)})}},ad_reload:function(p,q,d){if(!HPAds.ad_check_page_config(p)){return false}var u;if(!q||q==""){if("slideshow_300x250_req"===p){u=jQuery('.ad_wrapper[id^="ad_slideshow_"]:visible')}else{if("slideshow_728x90_req"===p){u=jQuery('.ad_wrapper[id^="ad_slideshow_"]:visible')}else{u=jQuery("#ad_"+p)}}}else{u=jQuery("#"+q)}u=u[0];if(u&&HPAds.ad_store[p]){if(HPAds.ad_store[p].reload_count&&HPAds.ad_store[p].refresh_rate&&(HPAds.ad_store[p].reload_count%Math.round(100/HPAds.ad_store[p].refresh_rate))){HPAds.ad_store[p].reload_count++;return false}var o=HPAds.ad_store[p].ad_content;try{var f=jQuery.parseJSON(o);if("undefined"!=typeof(f.adRealMediaPos)&&"korea"==HPConfig.site){var b=window.ord||Math.floor(Math.random()*10000000000000000);var c=realmedia_page_tag;var g="";if(p=="slideshow_300x250_req"||p=="slideshow_728x90_req"){var j=p.match(/([0-9]+)x([0-9]+)/);g='width="'+j[1]+'" height="'+j[2]+'"';if(korea_realmedia_page_tag_slideshow!=undefined){c=korea_realmedia_page_tag_slideshow}}var h="http://ad.hani.co.kr/RealMedia/ads/adstream_sx.ads/www.huffingtonpost.kr/"+c+"@"+f.adRealMediaPos+"?"+b+"?";u.innerHTML="<iframe "+g+' src="'+h+'" scrolling="no" frameborder="0" marginwidth="0" marginheight="0" noresize="" allowtransparency="true"></iframe>';if(location.href.match("debugadcode")){var s=jQuery('<div style="position:relative;z-index:800"><div style="z-index:800;position:absolute;top:0px;left:0px;padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px"><div style="width:250px;font-size:11px;font-weight:bold">RealMedia</div>Position: '+f.adRealMediaPos+"</div></div>");jQuery(u).after(s)}}else{if("undefined"!=typeof(f.adRealMediaPos)&&"brazil"!=HPConfig.site){realmedia_url="/ads/ads_realmedia.php?ad_pos="+f.adRealMediaPos+"&ad_name="+p+"&site="+HPConfig.site;if("italy"===HPConfig.site&&window.OAS_sitepage){realmedia_url+="&"+encodeURIComponent(OAS_sitepage)}var l=250;if("spain"===HPConfig.site&&"undefined"!==typeof PBS&&(p==="quickread"||p==="quickread_most_popular")){l=0}u.innerHTML='<iframe id="'+q+'_proxy" src="'+realmedia_url+'" scrolling="no" frameborder="no" border="0" width="300" height="'+l+'" style="width:300px;height:'+l+'px;"></iframe>';if(location.href.match("debugadcode")){var s=jQuery('<div style="position:relative;z-index:800"><div style="z-index:800;position:absolute;top:0px;left:0px;padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px"><div style="width:250px;font-size:11px;font-weight:bold">RealMedia</div>Position: '+f.adRealMediaPos+"</div></div>");jQuery(u).after(s)}}else{if("brazil"==HPConfig.site&&"undefined"!=typeof(f.adSpotSizeWidth)&&"undefined"!=typeof(f.adSpotSizeHeight)){var r=window.dfp_brazil_ord||Math.floor(Math.random()*10000000000000000);dfp_brazil_pos="";if("undefined"!=typeof(f.adRealMediaPos)&&1!=f.adRealMediaPos){dfp_brazil_pos=";pos="+f.adRealMediaPos}dfp_brazil_iframe_url="http://ad.doubleclick.net/N9287/adi/brasilpost;sz="+f.adSpotSizeWidth+"x"+f.adSpotSizeHeight+";ord="+r+dfp_brazil_pos;u.innerHTML='<iframe id="'+q+'_proxy" src="'+dfp_brazil_iframe_url+'" scrolling="no" frameborder="no" border="0" width="'+f.adSpotSizeWidth+'" height="'+f.adSpotSizeHeight+'" style="width:'+f.adSpotSizeWidth+"px;height:"+f.adSpotSizeHeight+'px;"></iframe>';if(location.href.match("debugadcode")){var s=jQuery('<div style="position:relative;z-index:800"><div style="z-index:800;position:absolute;top:0px;left:0px;padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px"><div style="width:250px;font-size:11px;font-weight:bold">RealMedia</div>Position: '+dfp_brazil_pos+"("+f.adSpotSize+")</div></div>");jQuery(u).after(s)}}else{if("undefined"!=typeof(f.AdEnginePlacement)){var k=ads_gettag(f.AdEnginePlacement);if("germany"===HPConfig.site&&this.is_slideshow_spot(p)){if(k&&/ord=.+/i.test(k)){var m="ord="+Math.floor(10000000000000*Math.random())+";?";k=k.replace(/ord=.+/i,m)}}u.innerHTML='<iframe id="'+q+'_proxy" src="'+k+'" scrolling="no" frameborder="no" border="0" width="300" height="250" style="width:300px;height:250px;"></iframe>';if(location.href.match("debugadcode")){var s=jQuery('<div style="position:relative;z-index:800"><div style="z-index:800;position:absolute;top:0px;left:0px;padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px;color:black"><div style="width:250px;font-size:11px;font-weight:bold">AdEngine</div>Position(s): '+f.AdEnginePlacement+"</div></div>");jQuery(u).after(s)}}else{if("undefined"!=typeof(f.SmartAdsFormatId)){if("undefined"!=typeof(get_sas_iframe)){u.innerHTML='<iframe id="'+q+'_proxy" src="'+get_sas_iframe(f.SmartAdsFormatId)+'" scrolling="no" frameborder="no" border="0" width="300" height="250" style="width:300px;height:250px;"></iframe>'}if(location.href.match("debugadcode")){var s=jQuery('<div style="position:relative;z-index:800"><div style="z-index:800;position:absolute;top:0px;left:0px;padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px;color:black"><div style="width:250px;font-size:11px;font-weight:bold">SmartAds</div>Position(s): '+f.SmartAdsFormatId+"</div></div>");jQuery(u).after(s)}}else{if("japan"===HPConfig.site&&"undefined"!==typeof f.CCIPlacementTag){var t="";var v=[];var n="<!-- IFRAMEtag start --><iframe id='"+q+"' src='http://web-jp.ad-v.jp/adam/detect?tag=htm&cat=huffpost_pc."+f.CCIPlacementTag+"&format="+f.CCIPlacementTag+"&huff_tag=__ENTRY_TAGS__&huff_eid=__ENTRY_ID__&robot=false' width='300' height='250' frameborder='no' border='0' marginwidth='0' marginheight='0' scrolling='no'></iframe><!-- IFRAMEtag end -->";huff.use("conf",function(B){if(p==="quickread"||p==="quickread_most_popular"){if(B.get("quickread_entry_id")){t=B.get("quickread_entry_id");var y=B.get("quickread_entry_normalized_tags");for(var e in y){var A=y[e].tag_name;if("string"===typeof A){v.push(A)}}}}else{if(p==="slideshow_300x250_req"){t=HPConfig.entry_id||"";v=HPConfig.entry_tags||[]}}n=n.replace("__ENTRY_TAGS__",v.join());n=n.replace("__ENTRY_ID__",t);u.innerHTML=n;if(location.href.match("debugadcode")){var z=jQuery('<div style="position:relative;z-index:800"><div style="z-index:800;position:absolute;top:0px;left:0px;padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px;color:black"><div style="width:250px;font-size:11px;font-weight:bold">CCI_Placements</div>Position(s): '+f.CCIPlacementTag+"</div></div>");jQuery(u).after(z)}})}else{f.magic_number=HPAds.revsplit.getAdId(p,f.magic_number);if(f.height=="RR"){htmlAdWHDyn(f.magic_number,f.sizes,f.call_type,u)}else{if(HPAds.is_slideshow_spot(p)&&HPAds.spot_reload_count(p)>0){adsReloadAd(q)}else{htmlAdWH(f.magic_number,f.width,f.height,f.call_type,u)}}if("undefined"!=typeof(f.debugadcode)&&f.debugadcode){var s=jQuery('<div style="position:relative;z-index:800"><div style="z-index:800;position:absolute;top:0px;left:0px;padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px"><div style="width:250px;font-size:11px;font-weight:bold">AdTech</div>'+f.debugadcode.replace("customAdId",f.magic_number)+"</div></div>");jQuery(u).after(s)}}}}}}}}catch(w){var b=parseInt(Math.random()*1000000000000000);if(/ajax_ord=/i.test(o)){o=o.replace(/ajax_ord=\d*;/ig,"ajax_ord="+b+";")}else{o=o.replace(/ord=/ig,"ajax_ord="+b+";ord=")}if(HPAds.ad_store[p].slug){u.className=u.className+" ad_wrapper_"+HPAds.ad_store[p].slug}if(typeof d!=="undefined"){jQuery(u).replaceWith(o)}else{u.innerHTML=o}}if(HPAds.ad_store[p].reload_count){HPAds.ad_store[p].reload_count++}else{HPAds.ad_store[p].reload_count=1}}},spot_reload_count:function(b){return("undefined"!==typeof HPAds.ad_store[b]&&HPAds.ad_store[b].reload_count)?HPAds.ad_store[b].reload_count:0},is_slideshow_spot:function(b){return("slideshow_300x250_req"===b||"slideshow_728x90_req"===b)},ad_html_wh:function(b,c){return},ad_check_handlers:{referer:function(b){return(document.referrer.search(b)>=0)}},ad_check_wrapper:function(b,c){if(typeof(this.ad_check_handlers[b])!="undefined"){return this.ad_check_handlers[b](c)}else{return true}},trackSponsorContent:function(c,b){if(b&&b.length){HPTrack.trackPageview(c.replace(/__SPONSOR__/g,b))}},ad_flight_to_store:function(e,b,d,c){if("undefined"==typeof(HPAds.ad_timezone_store[e])){HPAds.ad_timezone_store[e]=new Array()}HPAds.ad_timezone_store[e].push({content:b,date_start:d,date_end:c})},time_check:function(j){var h=new Date();var g="";g+=h.getFullYear();var f=h.getMonth()+1;f+="";if(1==f.length){g+="0"}g+=f;var c=h.getDate()+"";if(1==c.length){g+="0"}g+=c;var b=h.getHours()+"";if(1==b.length){g+="0"}g+=b;var e=h.getMinutes()+"";if(1==e.length){g+="0"}g+=e;g=parseInt(g);jQuery(HPAds.ad_timezone_store[j]).each(function(k,d){try{if(d.date_start>=g||d.date_end<=g){HPAds.ad_timezone_store[j].splice(k,1)}}catch(l){HPAds.ad_timezone_store[j].splice(k,1)}})},ad_flight_store_render:function(d,b){try{if(!b){HPAds.ad_timezone_store[d]=new Array(HPAds.ad_timezone_store[d].pop())}jQuery(HPAds.ad_timezone_store[d]).each(function(f,e){document.write(e.content)})}catch(c){}},page_config_set:function(b){if(typeof HPAds.full_page_config.flights!="undefined"){for(var c=0;c<HPAds.full_page_config.flights.length;c++){if(HPAds.full_page_config.flights[c].name==b){HPAds.curr_page_config=HPAds.full_page_config.flights[c];break}}}},ad_check_page_config:function(c){var b=(typeof ad_overrides=="undefined"||(ad_overrides.spots&&jQuery.inArray(c,ad_overrides.spots)>-1));if(!HPAds.curr_page_config&&(typeof aol_devil_flag!=="undefined")&&aol_devil_flag){HPAds.page_config_set("devil")}if(HPAds.curr_page_config){if(HPAds.curr_page_config.mode=="all_but"){b=(jQuery.inArray(c,HPAds.curr_page_config.spots)==-1)}else{b=(jQuery.inArray(c,HPAds.curr_page_config.spots)>-1)}}return b},ad_onload:function(e,fn){jQuery(e).bind("load",function(){eval(fn)})},ad_uac_onload_handler:function(f,g,e,c){var g="#"+jQuery(g).parent().parent().attr("id");var f=typeof f!=="undefined"?g+f:g;var h=c||3;var d=1;var b=setInterval(function(){if(jQuery(f).length){jQuery(g).addClass(e)}if(h==d){clearInterval(b)}d++},300)},get_banner_ids:function(){var b=new Array();try{jQuery('iframe[title="Ad"]').each(function(e,f){var d=jQuery(f).attr("banid").split("|");if("undefined"!=typeof(d[0])&&d[0].length){b.push(d[0])}})}catch(c){}return b},get_banners_str:function(){try{var c=HPAds.get_banner_ids();return c.join()}catch(b){return""}},lookbook:{click_track:function(b){if(typeof HPAds.lookbook.href!=="undefined"){jQuery(b).each(function(){this.href=HPAds.lookbook.href+this.href})}},imp_track:{init:function(b){if(typeof HPAds.lookbook.src!=="undefined"){this.setup(b)}},rand:function(){return Math.floor(Math.random()*10000000)},setup:function(b){if(jQuery("div.hp-lookbook-tracking").length==0){jQuery(b).append('<div class="hp-lookbook-tracking" style="display:none;"></div>')}this.exec()},exec:function(){jQuery("div.hp-lookbook-tracking").append('<img src="'+HPAds.lookbook.src+"?"+this.rand()+'" alt="" border="0" height="1" width="1"/>')}}},ad_sharebox_260x60_fix:function(){jQuery(document).ready(function(){setTimeout(function(){if(jQuery("#ad_sharebox_260x60 iframe").height()>10){jQuery("#ad_sharebox_260x60").parent().addClass("padding_bottom_5 margin_right_20").removeClass("hidden")}if(jQuery.browser.msie){jQuery(".ad_share_box").addClass("display_block").removeClass("hidden")}},2000)})},get_dfp_tile_num:function(){return ++HPAds.dfp_tile_num},get_polar_mn:function(b,c){for(var d=0;d<polar_config.length;d++){if(polar_config[d].label==c){return polar_config[d].id}}},get_platform:function(){return HPAds.current_platform},slideshow_tracking:function(){if(typeof SPR!="undefined"&&typeof __reach_config!="undefined"){if(__reach_config.ref_url==="www.facebook.com"){__reach_config.ref_url=__reach_config.url}SPR.Reach.collect(__reach_config)}}};huff.unit("tmp/hp_ads",function(b){b(HPAds);jQuery(document).ready(function(){var c=15;var d=setInterval(function(){HPAds.ugc_suppress_check();--c;if(!c||"undefined"!==typeof comments_suppress){clearInterval(d)}},5000)})});
var Y=YAHOO;var E=Y.util.Event;var R=Y.util.Region;var Dom=Y.util.Dom;var C=Y.util.Connect;var $=Dom.get;var addEvent=E.addListener;var addListener=E.addListener;var axel=Math.random()+"";var ord=axel*1000000000000000000;var HpSupport={script_eval:null};var TrackingData=new Object;if("undefined"===typeof Array.prototype.inArray){Array.prototype.inArray=function(b){var a;for(a=0;a<this.length;a++){if(this[a]===b){return true}}return false}}if("undefined"===typeof Array.prototype.arrayPos){Array.prototype.arrayPos=function(b){for(var a=0;a<this.length;a++){if(this[a]===b){return a}}return -1}}function extend(b,c){for(var a in c){if(!c.hasOwnProperty(a)){continue}b[a]=c[a]}}function form_to_iframe_callback(b){try{b()}catch(a){}}function isset(a){if(typeof(window[a])!="undefined"){return true}else{return false}}function simulateClick(a){jQuery("#"+a).click()}function createCookie(c,d,e){if(e){var b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));var a="; expires="+b.toGMTString()}else{var a=""}document.cookie=c+"="+d+a+"; path=/"}function readCookie(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)==0){return f.substring(e.length,f.length)}}return null}function showAdsPopup(d,b,a,e,c){var g=((jQuery(window).height()-jQuery("#"+d).height())/2)-a;var f=((jQuery(window).width()-jQuery("#"+d).width())/2)-e;var h=document.documentElement.clientHeight;jQuery("#"+d).css({left:f+"px",top:g+"px",display:"block"});if(c){jQuery("#"+d).attr("id",c)}jQuery("."+b).css({display:"block"})}function supress_keyvalues(a,b){jQuery.each(a,function(d,c){r=new RegExp(c+"=[^;]+;","g");b=b.replace(r,"")});return b}HPUtil.onPageReady(function(){HuffPoUtil.init();if("undefined"!==typeof window.Mobileweb){return}var f=(ClickTracker.sample==1)?1:(Math.round(Math.random()*(ClickTracker.sample-1))==1);ClickTracker.trackClicks=(f||ClickTracker.debug)&&(Dom.hasClass(document.body,"frontpage")||Dom.hasClass(document.body,"big_news_class")||document.getElementById("partner_box")||((typeof(bN_cfg)!="undefined")&&(typeof(bN_cfg.p)!="undefined")&&(bN_cfg.p.dL_dpt=="front")));if(ClickTracker.trackClicks){ClickTracker.init()}Dom.batch(document.getElementsByTagName("UL"),function(h){if(h&&h.getElementsByTagName){lis=h.getElementsByTagName("LI");if(lis[0]){Dom.addClass(lis[0],"first");Dom.addClass(lis[lis.length-1],"last")}}});lists=Dom.getElementsByClassName("widget_children","div");for(var e=0;e<lists.length;e++){els=lists[e].getElementsByTagName("div");wi_els=new Array();for(var c=0;c<els.length;c++){o=els[c];if(Dom.hasClass(o,"widget_item")){wi_els.push(o)}}for(var b=0;b<wi_els.length;b++){o=wi_els[b];if(b==0){Dom.addClass(o,"first_child")}if(b==wi_els.length-1){Dom.addClass(o,"last_child")}}}setInterval(HuffPoUtil.UpdateEntriesComments,1000*300);var g=document.getElementById("loggedin_user");if(g){if(HuffCookies.getUserName()){g.innerHTML='<a href="/users/logout/?referer='+encodeURIComponent(HPConfig.current_uri)+'" onclick="QuickLogin.SocialLogout(\'http://'+HPConfig.current_web_address+"/users/logout/?referer="+encodeURIComponent(HPConfig.current_uri)+"'); return false;\">"+_("Logout")+'</a> <span class="sign_bar">|</span> '}else{g.innerHTML='<a href="http://'+HPConfig.current_web_address+'/users/login/" onclick="HPConnect.Login(); return false;">'+_("Log In")+'</a> <span class="sign_bar">|</span> '}}if(HPBrowser.isIE8()){var d=Dom.getElementsByClassName("webslice_icons");for(var a=d.length;a--;){d[a].style.display="inline"}}});
var HPBrowser={};HPBrowser.isAppleFirefox=function(){if(navigator&&navigator.userAgent){return jQuery.browser&&jQuery.browser.mozilla&&(-1!==navigator.userAgent.toLowerCase().indexOf("macintosh"))}return false};HPBrowser.isFirefox=function(){if(navigator&&navigator.userAgent){return jQuery.browser&&jQuery.browser.mozilla&&(-1!==navigator.userAgent.toLowerCase().indexOf("mozilla"))}return false};HPBrowser.isAppleSafari=function(){if(navigator&&navigator.userAgent){return jQuery.browser&&jQuery.browser.webkit&&(-1!==navigator.userAgent.toLowerCase().indexOf("macintosh"))}return false};HPBrowser.isSafari=function(){var a=navigator.userAgent.toString().toLowerCase();if((a.indexOf("safari")!=-1)&&!(a.indexOf("chrome")!=-1)){return true}else{return false}};HPBrowser.isChrome=function(){if(navigator&&navigator.vendor){return -1!==navigator.vendor.toLowerCase().indexOf("google")}return false};HPBrowser.isIE6=function(){if(navigator&&navigator.userAgent){return jQuery.browser.msie&&/MSIE 6.0/i.test(navigator.userAgent)}return false};HPBrowser.isIE7=function(){if(navigator&&navigator.userAgent){return jQuery.browser.msie&&/MSIE 7./i.test(navigator.userAgent)}return false};HPBrowser.isIE8=function(){var c=-1;var a=navigator.userAgent;var b=new RegExp("Trident/([0-9]{1,}[.0-9]{0,})");if(b.exec(a)!=null){c=parseFloat(RegExp.$1)}return(c==4)};HPBrowser.isIEOld=function(){return HPBrowser.isIE6()||HPBrowser.isIE7()||HPBrowser.isIE8()};HPBrowser.isIE=HPBrowser.isIEOld;HPBrowser.isWebkit=function(){return HPBrowser.isChrome()||HPBrowser.isAppleFirefox()||HPBrowser.isAppleSafari()};HPBrowser.nameBrowser=function(){var a=jQuery.browser||false;if(HPBrowser.isChrome()){return"Chrome"}else{if(a&&a.msie){return"Explorer"}else{if(HPBrowser.isFirefox()||HPBrowser.isAppleFirefox()){return"Firefox"}else{if(HPBrowser.isAppleSafari()){return"Safari"}else{if(HPBrowser.isWebkit()){return"Webkit"}else{if(a&&a.opera){return"Opera"}else{if(a&&a.camino){return"Camino"}else{if(a&&a.konqueror){return"Konqueror"}else{if(a&&a.omniweb){return"OmniWeb"}else{if(/netscape/.test(navigator.userAgent)){return"Netscape"}else{return"An unknown browser"}}}}}}}}}}};HPBrowser.browser_class=function(){var a=HPBrowser.nameBrowser();return a.replace(" ","_")};HPBrowser.version=function(){var a=HPBrowser.nameBrowser();if(a=="Explorer"){a="MSIE"}if(a=="OmniWeb"){a="OmniWeb/"}if(a=="Netscape"){a="Mozilla"}var b=navigator.userAgent.indexOf(a);if(b==-1){b=navigator.appVersion.indexOf(a);if(b==-1){return"an unknown version"}else{return parseFloat(navigator.appVersion.substring(b+a.length+1))}}else{return parseFloat(navigator.userAgent.substring(b+a.length+1))}};HPBrowser.major_version=function(){return parseInt(HPBrowser.version())};HPBrowser.minor_version=function(){var b=HPBrowser.version();var a=HPBrowser.major_version();return(b+"").substring((a+"").length+1)||0};HPBrowser.version_class=function(){var a=HPBrowser.version();return(""+a).replace(" ","_").replace(".","_")};HPBrowser.OS=function(){var a={name:(/(win|mac|linux|sunos|solaris|iphone|ipad)/.exec(navigator.platform.toLowerCase())||["unknown"])[0].replace("sunos","solaris")};if(a.name=="win"){return"Windows"}if(a.name=="mac"){return"Mac"}if(a.name=="linux"){return"Linux"}return a.name};HPBrowser.OS_class=function(){var a=HPBrowser.OS();return a.replace(" ","_")};
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});var Submissions={init_time:0,saved_data:{},init:function(){var a=new Date();Submissions.init_time=a.getTime();jQuery("#submissions_shortcuts .sbm_send").unbind("click").bind("click",function(){var b=this.id.match(/submissions_send_(.+)/);if(b){Submissions.Form.init(b[1])}});jQuery.getScript("/include/lib/pop-contact.js",function(){var b=jQuery("#submission_contact_us");if(b.length==0){return}if(typeof(b.pop_contact)!=="undefined"){b.pop_contact()}})},toggleForm:function(){var d=document.getElementById("submission_anonymous").checked?"hide":"show";var c=["fname","lname","email","phone","author"];for(var a=0;a<c.length;a++){var b=jQuery("#submission_"+c[a]);if(!b){continue}if(d=="hide"){this.saved_data[c[a]]=b.val();b.attr("disabled","disabled").val("")}else{b.attr("disabled","").val(this.saved_data[c[a]])}}},radioButtonClick:function(){var a=jQuery(this);if(a.hasClass("sbm_video")){jQuery("#submission_upload").hide();jQuery("#submission_web_source").hide();jQuery("#submission_video_code").show();jQuery("#submission_rights_block").hide()}else{jQuery("#submission_upload").show();jQuery("#submission_web_source").show();jQuery("#submission_video_code").hide();jQuery("#submission_rights_block").show()}},Form:{init:function(a){this.type=a;this.prep_message_holder_init=false;jQuery.ajax({cache:false,url:"/submissions/get_form_content.php?type="+this.type,context:this,success:this.display})},check_completeness:function(){var f;this.req_reason=false;if(jQuery("#submission_name").val()==""||jQuery("#submission_name").val()==_("Name")){this.req_reason=_("Please, enter your name");return false}var d=jQuery("#submission_email").val();if(d==""||d==_("Email address")){this.req_reason=_("Please, enter your email");return false}if(d!=_("Email address")){if(!(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,4}$/.test(d))){this.req_reason=_("Wrong email address");return false}}if(this.type=="tip"){if(jQuery("#submission_title").val()==""){this.req_reason=_("Please, enter the Subject Line");return false}if(jQuery("#submission_body").val()==""||jQuery("#submission_body").val()==_("Enter Message here (1,000 character limit)")){this.req_reason=_("Please, enter the Message Content");return false}}else{if(this.type=="correction"){if(jQuery("#submission_error_kind").val()==""){this.req_reason=_("Please, select the kind of error");return false}if(jQuery("#submission_body").val()==""||jQuery("#submission_body").val()==_("Describe the error here (1,000 character limit)")){this.req_reason=_("Please, enter the Correction");return false}}else{if(this.type=="link"){var b=jQuery("#submission_url").val();if(b==""){this.req_reason=_("Please, enter the URL");return false}var g=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;if(!g.test(b)){this.req_reason=_("Please, enter a valid URL");return false}if(jQuery("#submission_body").val()==""||jQuery("#submission_body").val()==_("(1,000 character limit)")){this.req_reason=_("Please, enter a correction");return false}}else{if(this.type=="media"){if(jQuery("#submission_radio_group input:checked").hasClass("sbm_video")){if(jQuery("#submission_embed").val()==""||jQuery("#submission_embed").val()==_("Enter embed code")){this.req_reason=_("Please, enter a link");return false}if(jQuery("#submission_title").val()==""){this.req_reason=_("Please, enter a title");return false}if(jQuery("#submission_caption").val()==""){this.req_reason=_("Please, enter a caption");return false}}else{if((jQuery("#submission_url").val()==""||jQuery("#submission_url").val()==_("Enter link"))&&jQuery("#submission_file_to_upload").val()==""){this.req_reason=_("Please, enter a link or choose a photo");return false}if(jQuery("#submission_file_to_upload").val()!=""){var e=["png","jpg","jpeg","gif","bmp"];var a=jQuery("#submission_file_to_upload").val();var c=a.split(".").pop();if("function"!==typeof(e.inArray)){e.inArray=function(j){var h;for(h=0;h<this.length;h++){if(this[h]===j){return true}}return false}}if("function"===typeof(e.inArray)&&!e.inArray(c)){this.req_reason=_("Please, choose a valid photo");return false}}if(jQuery("#submission_title").val()==""){this.req_reason=_("Please, enter a title");return false}if(jQuery("#submission_caption").val()==""){this.req_reason=_("Please, enter a caption");return false}if(jQuery("#submission_file_to_upload").val()!=""&&!jQuery("#submission_rights:checked").val()){this.req_reason=_("Please verify that you have the rights to use this photo");return false}}}}}}return true},display:function(a){var b=this;HuffConnect.socialModal({onclose:function(){b.UploadButton.stop()},inner_html:a,width:650,onshow:function(){b.onshow()}})},onshow:function(){if(HPAds.page_spots.submissions_captcha){jQuery.ajax({url:"http://"+HPConfig.current_web_domain+"/ads/adyoulike/adyoulike.php",dataType:"html"}).done(function(b){jQuery("#submissions_form").append(b)})}else{jQuery.getScript("http://www.google.com/recaptcha/api/js/recaptcha_ajax.js",function(){Recaptcha.create(HPConfig.recaptcha_key,"submission_recaptcha",{theme:"red",callback:Recaptcha.focus_response_field})})}jQuery("#submission_title, #submission_embed, #submission_body").each(function(){jQuery(this).focus(function(){jQuery(this).unbind("focus").addClass("black").val("")})});jQuery("#submission_name, #submission_email, #submission_url").bind("focus blur",function(d){var b=jQuery(this);var h=b.attr("id");var f=jQuery.trim(b.val());var g=d.type;var c="";switch(h){case"submission_name":c=_("Name");break;case"submission_email":c=_("Email address");break;case"submission_url":c=_("Enter link");break;default:return}if("focus"==g&&c==f){b.val("").addClass("black")}else{if("blur"==g&&""==f){b.val(c).removeClass("black")}}return});jQuery("#submission_url, #submission_file_to_upload").bind("change keyup",function(){var b=jQuery("#submission_url");var d=jQuery("#submission_file_to_upload");var c=jQuery("#submission_rights_block");if(""!==d.val()){c.show();return}if(""===b.val()||_("Enter link")==b.val()){c.show()}else{c.hide()}return});var a=this;this.counter=jQuery("#sbm_counter");this.message_body=jQuery("#submission_body");this.message_body_content="";this.message_body.keyup(function(){var b=1000;var c=a.message_body.val().length;if(c>b){a.counter.html(sprintf(_("%s count"),b));a.message_body.val(a.message_body_content)}else{a.counter.html(sprintf(_("%s count"),c));a.message_body_content=a.message_body.val()}if(c>=b){a.counter.addClass("red")}else{a.counter.removeClass("red")}});if(this.type==="media"){this.UploadButton.init()}jQuery("#submission_submit").click(function(){var b="/submissions/post.php?type="+a.type+"&entry_id="+HPConfig.entry_id;var f=jQuery("#submission_radio_group input:checked");if(f.val()=="Photo"){var c=(jQuery("#submission_file_to_upload").val()!=="")?true:false;if(c){var e=document.createElement("input");e.setAttribute("type","hidden");e.setAttribute("name","APC_UPLOAD_PROGRESS");e.setAttribute("value",Submissions.ProgressBar.get_salt());jQuery("#submissions_form").prepend(e)}}a.clear_failure();if(!a.check_completeness()){a.show_requirement();return false}var d;d=jQuery("#submission_name");if(d.val()==_("Name")){d.val("")}d=jQuery("#submission_email");if(d.val()==_("Email address")){d.val("")}d=jQuery("#submission_url");if(d.length!==0){if(d.val()==_("Enter link")){d.val("")}}if(c){Submissions.ProgressBar.init(f.val())}if(f.val()=="Photo"){if(c){jQuery.ajax({type:"POST",url:"/upload_progress.php?progress_key=init_key"})}else{jQuery("#submission_ajax_loader").show();jQuery("#submissions_bottom_area").hide()}jQuery.getScript("/include/lib/jquery/jquery.form.js",function(){jQuery("#submissions_form").ajaxSubmit({type:"post",url:b,success:function(i){if(c){Submissions.ProgressBar.finish()}try{var g=JSON.parse(i)}catch(j){var g={status:false,reason:"Some error occurred"};return}if(g.status){if(c){HuffConnect.hideModal();var h=HpImageCrop;HpImageCrop.init(g.image_id_crypted,"submission");h.Load(this.show,a.onImageCropper,this)}else{a.show_success()}}else{a.show_requirement(g.reason);if(g.sub_reason&&/incorrect-captcha-sol/.test(g.sub_reason)){if(HPAds.page_spots.submissions_captcha&&typeof(Adyoulike)!=="undefined"){jQuery("#submission_recaptcha").empty();Adyoulike.create(adyoulike_options)}else{Recaptcha.create(HPConfig.recaptcha_key,"submission_recaptcha",{theme:"red",callback:Recaptcha.focus_response_field})}}jQuery("#submission_ajax_loader, #submission_progress_bar").hide();jQuery("#submissions_bottom_area").show()}return}})});return false}jQuery("#submission_ajax_loader").show();jQuery("#submissions_bottom_area").hide();b+="&"+jQuery("#submissions_form").serialize();jQuery.ajax({type:"POST",url:b,context:a,success:a.read_response});return false});jQuery("#submission_anonymous").change(function(){Submissions.toggleForm()});if(this.type==="media"){jQuery("#submission_radio_group input").change(Submissions.radioButtonClick)}},onImageCropper:function(a){HuffConnect.hideModal();if(!a.error){var c="<div class='sm_submission_msg'>Thank you for your contribution</div>"}else{var b=(sprintf(_("Error crop image in reason : %s"),a.reason));var c="<div class='sm_submission_msg'>"+b+"</div>"}HuffConnect.socialModal({inner_html:c,width:450,modal_head_image:"",modal_subhead_image:"",position:"fixed"});setTimeout(function(){HuffConnect.hideModal()},3000);return},read_response:function(d,c,b){Submissions.ProgressBar.finish();var a=JSON.parse(d);if(!a){this.show_failure();return}if(a.status===true){this.show_success()}else{this.show_failure(a.reason,a)}},prep_message_holder_init:false,prep_message_holder:function(){if(this.prep_message_holder_init==false){jQuery("#submission_header").hide();jQuery("#submission_notify").css("visibility","hidden").show()}this.prep_message_holder_init=true},show_requirement:function(a){this.prep_message_holder();var b=a||(this.req_reason||_("Please, fill the form!"));jQuery("#submission_notify").html(b).css("visibility","visible").show();setTimeout("Submissions.Form.hide_requirement();",5000)},hide_requirement:function(){jQuery("#submission_notify").css("visibility","hidden")},show_failure:function(b,a){this.prep_message_holder();if(typeof(a.capthca_failed)!=="undefined"){jQuery("#submission_recaptcha").empty();if(HPAds.page_spots.submissions_captcha&&typeof(Adyoulike)!=="undefined"){Adyoulike.create(adyoulike_options)}else{Recaptcha.create(HPConfig.recaptcha_key,"submission_recaptcha",{theme:"red",callback:Recaptcha.focus_response_field})}}jQuery("#submission_ajax_loader").hide();jQuery("#submission_progress_bar").hide();jQuery("#submissions_bottom_area").show();b=(b?sprintf(_("Failed to submit: %s"),b):_("Failed to submit"));jQuery("#submission_notify").html(b).css("visibility","visible")},clear_failure:function(a){jQuery("#submission_notify").css("visibility","hidden")},show_success:function(){jQuery("#submission_submit").remove();jQuery("#submission_progress_bar").remove();jQuery("#submission_ajax_loader").remove();jQuery("#submission_thanks").show();setTimeout(function(){HuffConnect.hideModal()},3000)},UploadButton:{state:false,box:false,justClicked:false,getMouseCoords:function(d){if(!d.pageX&&d.clientX){var c=1;var a=document.body;if(a.getBoundingClientRect){var b=a.getBoundingClientRect();c=(b.right-b.left)/a.clientWidth}return{x:d.clientX/c+document.body.scrollLeft+document.documentElement.scrollLeft,y:d.clientY/c+document.body.scrollTop+document.documentElement.scrollTop}}return{x:d.pageX,y:d.pageY}},getBox:function(c){var e,b,d,a;var f=jQuery(c).offset();e=f.left;d=f.top;b=e+c.offsetWidth;a=d+c.offsetHeight;return{left:e,right:b,top:d,bottom:a}},init:function(){var a=this;jQuery(document).ready(function(){var b=jQuery("#submission_file_to_upload"),c=false;a.box=a.getBox(document.getElementById("submission_upload_button"));a.box_interval=setInterval(function(){a.box=a.getBox(document.getElementById("submission_upload_button"))},100);a.mouse_handler_event=function(g){var h=a.getMouseCoords(g);if((h.x>=a.box.left)&&(h.x<=a.box.right)&&(h.y>=a.box.top)&&(h.y<=a.box.bottom)){c=true;var f=b.offset();b.show();b.offset({top:h.y-5,left:h.x-185})}else{c=false;var d=setInterval(function(){if(a.justClicked){return}if(!c){b.hide()}clearInterval(d)},25)}};jQuery(document).mousemove(a.mouse_handler_event);b.change(function(){jQuery("#submission_upload_button").html(_("Selected!")).css("color","#2f7e03")});b.click(function(){a.justClicked=true;setTimeout(function(){a.justClicked=false},2500)})});this.state=true},stop:function(){if(!this.state){return}clearInterval(this.box_interval);this.box_interval=false;jQuery(document).unbind("mousemove",self.mouse_handler_event);this.state=false}}},ProgressBar:{enabled:true,salt:false,stop_flag:false,init:function(a){if(!this.enabled||a!=="Photo"){jQuery("#submissions_bottom_area").hide();jQuery("#submission_ajax_loader").show();return}jQuery("#submissions_bottom_area").hide();jQuery("#submission_progress_bar").show();this.set_progress(0);this.stop_flag=false;setTimeout("Submissions.ProgressBar.get_progress()",500)},get_salt:function(){if(!this.salt){var a=new Date();this.salt=Submissions.init_time+"|"+a.getTime()}return this.salt},get_progress:function(){jQuery.ajax({type:"POST",url:"/upload_progress.php?progress_key="+this.get_salt(),context:this,success:this.display_progress})},display_progress:function(a){if(!this.stop_flag){setTimeout("Submissions.ProgressBar.get_progress()",500)}if(!a){return}a=JSON.parse(a);if(!a){return}this.set_progress(parseInt(a.current/a.total*100))},set_progress:function(a){a=parseInt(a);if(a>100){a=100}jQuery("#submission_progress_bar_number").html(a+"%");jQuery("#submission_progress_bar_line").css("width",parseInt(a*220/100))},cancel:function(){this.stop_flag=true;this.set_progress(0)},stop:function(){this.stop_flag=true},finish:function(){this.stop_flag=true;this.set_progress(100)}},Box:{current_sid_num:false,display_sid:function(g){var h=this;if(this.current_sid_num!==false){jQuery("#submission_box_content_"+this.sids[this.current_sid_num]).hide()}if(typeof(this.sids[g])==="undefined"){return}var b=this.sids[g];if(typeof(this.data[b])==="undefined"){return}var a=this.data[b];jQuery("#submission_box_title").html(a.title);jQuery("#submission_box_title2").html(a.title2);jQuery("#submission_box_message").html(a.message);jQuery("#submission_box_content_"+b).show().css("marginTop",(a.type==1?45:0)+"px").css("marginBottom",(a.type==1?5:0)+"px");if(typeof(a.no_user)!=="undefined"){jQuery("#submission_box_user_info").hide()}else{jQuery("#submission_box_user_info").show();jQuery("#submission_box_user_photo").attr("src",a.userPic);jQuery("#submission_box_username").html("<a href='/social/"+a.userName+"'>"+a.userDisplayName+"</a>");jQuery("#submission_box_user_badge").html(a.user_badge_title);if(a.user_facebook_id){jQuery("#submission_box_facebook").html(sprintf(_("%s on Facebook"),("<a href='http://www.facebook.com/profile.php?id="+a.user_facebook_id+"' target='_blank'>"+a.userDisplayName+"</a>")))}else{jQuery("#submission_box_facebook").html("")}if(a.user_twitter){jQuery("#submission_box_twitter").html(sprintf(_("%s on Twitter"),("@<a class='twitter-anywhere-user' href='http://twitter.com/"+a.user_twitter+"' target='_hplink'>"+a.user_twitter+"</a>")))}else{jQuery("#submission_box_twitter").html("")}}var c="",k;for(k in a.user_badges){if(!a.user_badges.hasOwnProperty(k)){continue}k=a.user_badges[k];c+="<div class='user-level-icon "+k.user_type+" level-"+k.user_subtype_index+"'></div>"}jQuery("#submission_box_user_badges").html(c);this.current_sid_num=g;var d=jQuery("#submission_box_prev");if(g>0){d.show()}else{d.hide()}var f=jQuery("#submission_box_next");if(g<(this.sids.length-1)){f.show()}else{f.hide()}TwitterAnywhere.anywhere("submission_box_twitter");try{var j=this.current_sid_num;FB.api("/"+a.user_facebook_id,function(e){if(h.current_sid_num!==j){return}if(e&&!e.error&&e.id){jQuery("#submission_box_facebook").html(sprintf(_("%s on Facebook"),("<a href='http://www.facebook.com/"+e.id+"' target='_blank'>"+e.name+"</a>")))}})}catch(i){}},show_prev:function(){this.display_sid(this.current_sid_num-1)},show_next:function(){this.display_sid(this.current_sid_num+1)},start:function(a){this.data=a.data;this.amount_of_subs=0;this.sids=[];for(var c in a.data){if(a.data.hasOwnProperty(c)){this.amount_of_subs++;this.sids.push(c)}}var b=this;jQuery("#submission_box_prev").click(function(){b.show_prev()});jQuery("#submission_box_next").click(function(){b.show_next()});jQuery("#submission_box").show();this.display_sid(0)}}};
(function(){var w=this;var k=w._;var D={};var C=Array.prototype,f=Object.prototype,r=Function.prototype;var H=C.push,o=C.slice,y=C.concat,d=f.toString,j=f.hasOwnProperty;var L=C.forEach,q=C.map,E=C.reduce,c=C.reduceRight,b=C.filter,B=C.every,p=C.some,n=C.indexOf,l=C.lastIndexOf,u=Array.isArray,e=Object.keys,F=r.bind;var M=function(N){if(N instanceof M){return N}if(!(this instanceof M)){return new M(N)}this._wrapped=N};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=M}exports._=M}else{w._=M}M.VERSION="1.5.2";var I=M.each=M.forEach=function(S,P,O){if(S==null){return}if(L&&S.forEach===L){S.forEach(P,O)}else{if(S.length===+S.length){for(var N=0,R=S.length;N<R;N++){if(P.call(O,S[N],N,S)===D){return}}}else{var Q=M.keys(S);for(var N=0,R=Q.length;N<R;N++){if(P.call(O,S[Q[N]],Q[N],S)===D){return}}}}};M.map=M.collect=function(Q,P,O){var N=[];if(Q==null){return N}if(q&&Q.map===q){return Q.map(P,O)}I(Q,function(T,R,S){N.push(P.call(O,T,R,S))});return N};var g="Reduce of empty array with no initial value";M.reduce=M.foldl=M.inject=function(R,Q,N,P){var O=arguments.length>2;if(R==null){R=[]}if(E&&R.reduce===E){if(P){Q=M.bind(Q,P)}return O?R.reduce(Q,N):R.reduce(Q)}I(R,function(U,S,T){if(!O){N=U;O=true}else{N=Q.call(P,N,U,S,T)}});if(!O){throw new TypeError(g)}return N};M.reduceRight=M.foldr=function(T,Q,N,P){var O=arguments.length>2;if(T==null){T=[]}if(c&&T.reduceRight===c){if(P){Q=M.bind(Q,P)}return O?T.reduceRight(Q,N):T.reduceRight(Q)}var S=T.length;if(S!==+S){var R=M.keys(T);S=R.length}I(T,function(W,U,V){U=R?R[--S]:--S;if(!O){N=T[U];O=true}else{N=Q.call(P,N,T[U],U,V)}});if(!O){throw new TypeError(g)}return N};M.find=M.detect=function(Q,P,O){var N;A(Q,function(T,R,S){if(P.call(O,T,R,S)){N=T;return true}});return N};M.filter=M.select=function(Q,P,O){var N=[];if(Q==null){return N}if(b&&Q.filter===b){return Q.filter(P,O)}I(Q,function(T,R,S){if(P.call(O,T,R,S)){N.push(T)}});return N};M.reject=function(P,O,N){return M.filter(P,function(S,Q,R){return !O.call(N,S,Q,R)},N)};M.every=M.all=function(Q,P,O){P||(P=M.identity);var N=true;if(Q==null){return N}if(B&&Q.every===B){return Q.every(P,O)}I(Q,function(T,R,S){if(!(N=N&&P.call(O,T,R,S))){return D}});return !!N};var A=M.some=M.any=function(Q,P,O){P||(P=M.identity);var N=false;if(Q==null){return N}if(p&&Q.some===p){return Q.some(P,O)}I(Q,function(T,R,S){if(N||(N=P.call(O,T,R,S))){return D}});return !!N};M.contains=M.include=function(O,N){if(O==null){return false}if(n&&O.indexOf===n){return O.indexOf(N)!=-1}return A(O,function(P){return P===N})};M.invoke=function(P,Q){var N=o.call(arguments,2);var O=M.isFunction(Q);return M.map(P,function(R){return(O?Q:R[Q]).apply(R,N)})};M.pluck=function(O,N){return M.map(O,function(P){return P[N]})};M.where=function(O,N,P){if(M.isEmpty(N)){return P?void 0:[]}return M[P?"find":"filter"](O,function(R){for(var Q in N){if(N[Q]!==R[Q]){return false}}return true})};M.findWhere=function(O,N){return M.where(O,N,true)};M.max=function(Q,P,O){if(!P&&M.isArray(Q)&&Q[0]===+Q[0]&&Q.length<65535){return Math.max.apply(Math,Q)}if(!P&&M.isEmpty(Q)){return -Infinity}var N={computed:-Infinity,value:-Infinity};I(Q,function(U,R,T){var S=P?P.call(O,U,R,T):U;S>N.computed&&(N={value:U,computed:S})});return N.value};M.min=function(Q,P,O){if(!P&&M.isArray(Q)&&Q[0]===+Q[0]&&Q.length<65535){return Math.min.apply(Math,Q)}if(!P&&M.isEmpty(Q)){return Infinity}var N={computed:Infinity,value:Infinity};I(Q,function(U,R,T){var S=P?P.call(O,U,R,T):U;S<N.computed&&(N={value:U,computed:S})});return N.value};M.shuffle=function(Q){var P;var O=0;var N=[];I(Q,function(R){P=M.random(O++);N[O-1]=N[P];N[P]=R});return N};M.sample=function(O,P,N){if(arguments.length<2||N){return O[M.random(O.length-1)]}return M.shuffle(O).slice(0,Math.max(0,P))};var a=function(N){return M.isFunction(N)?N:function(O){return O[N]}};M.sortBy=function(Q,P,N){var O=a(P);return M.pluck(M.map(Q,function(T,R,S){return{value:T,index:R,criteria:O.call(N,T,R,S)}}).sort(function(U,T){var S=U.criteria;var R=T.criteria;if(S!==R){if(S>R||S===void 0){return 1}if(S<R||R===void 0){return -1}}return U.index-T.index}),"value")};var t=function(N){return function(S,R,P){var O={};var Q=R==null?M.identity:a(R);I(S,function(V,T){var U=Q.call(P,V,T,S);N(O,U,V)});return O}};M.groupBy=t(function(N,O,P){(M.has(N,O)?N[O]:(N[O]=[])).push(P)});M.indexBy=t(function(N,O,P){N[O]=P});M.countBy=t(function(N,O){M.has(N,O)?N[O]++:N[O]=1});M.sortedIndex=function(U,T,Q,P){Q=Q==null?M.identity:a(Q);var S=Q.call(P,T);var N=0,R=U.length;while(N<R){var O=(N+R)>>>1;Q.call(P,U[O])<S?N=O+1:R=O}return N};M.toArray=function(N){if(!N){return[]}if(M.isArray(N)){return o.call(N)}if(N.length===+N.length){return M.map(N,M.identity)}return M.values(N)};M.size=function(N){if(N==null){return 0}return(N.length===+N.length)?N.length:M.keys(N).length};M.first=M.head=M.take=function(P,O,N){if(P==null){return void 0}return(O==null)||N?P[0]:o.call(P,0,O)};M.initial=function(P,O,N){return o.call(P,0,P.length-((O==null)||N?1:O))};M.last=function(P,O,N){if(P==null){return void 0}if((O==null)||N){return P[P.length-1]}else{return o.call(P,Math.max(P.length-O,0))}};M.rest=M.tail=M.drop=function(P,O,N){return o.call(P,(O==null)||N?1:O)};M.compact=function(N){return M.filter(N,M.identity)};var x=function(O,P,N){if(P&&M.every(O,M.isArray)){return y.apply(N,O)}I(O,function(Q){if(M.isArray(Q)||M.isArguments(Q)){P?H.apply(N,Q):x(Q,P,N)}else{N.push(Q)}});return N};M.flatten=function(O,N){return x(O,N,[])};M.without=function(N){return M.difference(N,o.call(arguments,1))};M.uniq=M.unique=function(T,S,R,Q){if(M.isFunction(S)){Q=R;R=S;S=false}var O=R?M.map(T,R,Q):T;var P=[];var N=[];I(O,function(V,U){if(S?(!U||N[N.length-1]!==V):!M.contains(N,V)){N.push(V);P.push(T[U])}});return P};M.union=function(){return M.uniq(M.flatten(arguments,true))};M.intersection=function(O){var N=o.call(arguments,1);return M.filter(M.uniq(O),function(P){return M.every(N,function(Q){return M.indexOf(Q,P)>=0})})};M.difference=function(O){var N=y.apply(C,o.call(arguments,1));return M.filter(O,function(P){return !M.contains(N,P)})};M.zip=function(){var P=M.max(M.pluck(arguments,"length").concat(0));var O=new Array(P);for(var N=0;N<P;N++){O[N]=M.pluck(arguments,""+N)}return O};M.object=function(R,O){if(R==null){return{}}var N={};for(var P=0,Q=R.length;P<Q;P++){if(O){N[R[P]]=O[P]}else{N[R[P][0]]=R[P][1]}}return N};M.indexOf=function(R,P,Q){if(R==null){return -1}var N=0,O=R.length;if(Q){if(typeof Q=="number"){N=(Q<0?Math.max(0,O+Q):Q)}else{N=M.sortedIndex(R,P);return R[N]===P?N:-1}}if(n&&R.indexOf===n){return R.indexOf(P,Q)}for(;N<O;N++){if(R[N]===P){return N}}return -1};M.lastIndexOf=function(R,P,Q){if(R==null){return -1}var N=Q!=null;if(l&&R.lastIndexOf===l){return N?R.lastIndexOf(P,Q):R.lastIndexOf(P)}var O=(N?Q:R.length);while(O--){if(R[O]===P){return O}}return -1};M.range=function(S,P,R){if(arguments.length<=1){P=S||0;S=0}R=arguments[2]||1;var Q=Math.max(Math.ceil((P-S)/R),0);var N=0;var O=new Array(Q);while(N<Q){O[N++]=S;S+=R}return O};var G=function(){};M.bind=function(Q,O){var N,P;if(F&&Q.bind===F){return F.apply(Q,o.call(arguments,1))}if(!M.isFunction(Q)){throw new TypeError}N=o.call(arguments,2);return P=function(){if(!(this instanceof P)){return Q.apply(O,N.concat(o.call(arguments)))}G.prototype=Q.prototype;var S=new G;G.prototype=null;var R=Q.apply(S,N.concat(o.call(arguments)));if(Object(R)===R){return R}return S}};M.partial=function(O){var N=o.call(arguments,1);return function(){return O.apply(this,N.concat(o.call(arguments)))}};M.bindAll=function(O){var N=o.call(arguments,1);if(N.length===0){throw new Error("bindAll must be passed function names")}I(N,function(P){O[P]=M.bind(O[P],O)});return O};M.memoize=function(P,O){var N={};O||(O=M.identity);return function(){var Q=O.apply(this,arguments);return M.has(N,Q)?N[Q]:(N[Q]=P.apply(this,arguments))}};M.delay=function(O,P){var N=o.call(arguments,2);return setTimeout(function(){return O.apply(null,N)},P)};M.defer=function(N){return M.delay.apply(M,[N,1].concat(o.call(arguments,1)))};M.throttle=function(O,Q,U){var N,S,V;var T=null;var R=0;U||(U={});var P=function(){R=U.leading===false?0:new Date;T=null;V=O.apply(N,S)};return function(){var W=new Date;if(!R&&U.leading===false){R=W}var X=Q-(W-R);N=this;S=arguments;if(X<=0){clearTimeout(T);T=null;R=W;V=O.apply(N,S)}else{if(!T&&U.trailing!==false){T=setTimeout(P,X)}}return V}};M.debounce=function(R,U,O){var T,P,Q,S,N;return function(){Q=this;P=arguments;S=new Date();var W=function(){var X=(new Date())-S;if(X<U){T=setTimeout(W,U-X)}else{T=null;if(!O){N=R.apply(Q,P)}}};var V=O&&!T;if(!T){T=setTimeout(W,U)}if(V){N=R.apply(Q,P)}return N}};M.once=function(P){var N=false,O;return function(){if(N){return O}N=true;O=P.apply(this,arguments);P=null;return O}};M.wrap=function(N,O){return function(){var P=[N];H.apply(P,arguments);return O.apply(this,P)}};M.compose=function(){var N=arguments;return function(){var O=arguments;for(var P=N.length-1;P>=0;P--){O=[N[P].apply(this,O)]}return O[0]}};M.after=function(O,N){return function(){if(--O<1){return N.apply(this,arguments)}}};M.keys=e||function(P){if(P!==Object(P)){throw new TypeError("Invalid object")}var O=[];for(var N in P){if(M.has(P,N)){O.push(N)}}return O};M.values=function(R){var Q=M.keys(R);var P=Q.length;var N=new Array(P);for(var O=0;O<P;O++){N[O]=R[Q[O]]}return N};M.pairs=function(R){var P=M.keys(R);var O=P.length;var Q=new Array(O);for(var N=0;N<O;N++){Q[N]=[P[N],R[P[N]]]}return Q};M.invert=function(R){var N={};var Q=M.keys(R);for(var O=0,P=Q.length;O<P;O++){N[R[Q[O]]]=Q[O]}return N};M.functions=M.methods=function(P){var O=[];for(var N in P){if(M.isFunction(P[N])){O.push(N)}}return O.sort()};M.extend=function(N){I(o.call(arguments,1),function(O){if(O){for(var P in O){N[P]=O[P]}}});return N};M.pick=function(O){var P={};var N=y.apply(C,o.call(arguments,1));I(N,function(Q){if(Q in O){P[Q]=O[Q]}});return P};M.omit=function(P){var Q={};var O=y.apply(C,o.call(arguments,1));for(var N in P){if(!M.contains(O,N)){Q[N]=P[N]}}return Q};M.defaults=function(N){I(o.call(arguments,1),function(O){if(O){for(var P in O){if(N[P]===void 0){N[P]=O[P]}}}});return N};M.clone=function(N){if(!M.isObject(N)){return N}return M.isArray(N)?N.slice():M.extend({},N)};M.tap=function(O,N){N(O);return O};var J=function(U,T,O,P){if(U===T){return U!==0||1/U==1/T}if(U==null||T==null){return U===T}if(U instanceof M){U=U._wrapped}if(T instanceof M){T=T._wrapped}var R=d.call(U);if(R!=d.call(T)){return false}switch(R){case"[object String]":return U==String(T);case"[object Number]":return U!=+U?T!=+T:(U==0?1/U==1/T:U==+T);case"[object Date]":case"[object Boolean]":return +U==+T;case"[object RegExp]":return U.source==T.source&&U.global==T.global&&U.multiline==T.multiline&&U.ignoreCase==T.ignoreCase}if(typeof U!="object"||typeof T!="object"){return false}var N=O.length;while(N--){if(O[N]==U){return P[N]==T}}var S=U.constructor,Q=T.constructor;if(S!==Q&&!(M.isFunction(S)&&(S instanceof S)&&M.isFunction(Q)&&(Q instanceof Q))){return false}O.push(U);P.push(T);var X=0,W=true;if(R=="[object Array]"){X=U.length;W=X==T.length;if(W){while(X--){if(!(W=J(U[X],T[X],O,P))){break}}}}else{for(var V in U){if(M.has(U,V)){X++;if(!(W=M.has(T,V)&&J(U[V],T[V],O,P))){break}}}if(W){for(V in T){if(M.has(T,V)&&!(X--)){break}}W=!X}}O.pop();P.pop();return W};M.isEqual=function(O,N){return J(O,N,[],[])};M.isEmpty=function(O){if(O==null){return true}if(M.isArray(O)||M.isString(O)){return O.length===0}for(var N in O){if(M.has(O,N)){return false}}return true};M.isElement=function(N){return !!(N&&N.nodeType===1)};M.isArray=u||function(N){return d.call(N)=="[object Array]"};M.isObject=function(N){return N===Object(N)};I(["Arguments","Function","String","Number","Date","RegExp"],function(N){M["is"+N]=function(O){return d.call(O)=="[object "+N+"]"}});if(!M.isArguments(arguments)){M.isArguments=function(N){return !!(N&&M.has(N,"callee"))}}if(typeof(/./)!=="function"){M.isFunction=function(N){return typeof N==="function"}}M.isFinite=function(N){return isFinite(N)&&!isNaN(parseFloat(N))};M.isNaN=function(N){return M.isNumber(N)&&N!=+N};M.isBoolean=function(N){return N===true||N===false||d.call(N)=="[object Boolean]"};M.isNull=function(N){return N===null};M.isUndefined=function(N){return N===void 0};M.has=function(O,N){return j.call(O,N)};M.noConflict=function(){w._=k;return this};M.identity=function(N){return N};M.times=function(R,Q,P){var N=Array(Math.max(0,R));for(var O=0;O<R;O++){N[O]=Q.call(P,O)}return N};M.random=function(O,N){if(N==null){N=O;O=0}return O+Math.floor(Math.random()*(N-O+1))};var m={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};m.unescape=M.invert(m.escape);var K={escape:new RegExp("["+M.keys(m.escape).join("")+"]","g"),unescape:new RegExp("("+M.keys(m.unescape).join("|")+")","g")};M.each(["escape","unescape"],function(N){M[N]=function(O){if(O==null){return""}return(""+O).replace(K[N],function(P){return m[N][P]})}});M.result=function(N,P){if(N==null){return void 0}var O=N[P];return M.isFunction(O)?O.call(N):O};M.mixin=function(N){I(M.functions(N),function(O){var P=M[O]=N[O];M.prototype[O]=function(){var Q=[this._wrapped];H.apply(Q,arguments);return s.call(this,P.apply(M,Q))}})};var z=0;M.uniqueId=function(N){var O=++z+"";return N?N+O:O};M.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var v=/(.)^/;var h={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var i=/\\|'|\r|\n|\t|\u2028|\u2029/g;M.template=function(V,Q,P){var O;P=M.defaults({},P,M.templateSettings);var R=new RegExp([(P.escape||v).source,(P.interpolate||v).source,(P.evaluate||v).source].join("|")+"|$","g");var S=0;var N="__p+='";V.replace(R,function(X,Y,W,aa,Z){N+=V.slice(S,Z).replace(i,function(ab){return"\\"+h[ab]});if(Y){N+="'+\n((__t=("+Y+"))==null?'':_.escape(__t))+\n'"}if(W){N+="'+\n((__t=("+W+"))==null?'':__t)+\n'"}if(aa){N+="';\n"+aa+"\n__p+='"}S=Z+X.length;return X});N+="';\n";if(!P.variable){N="with(obj||{}){\n"+N+"}\n"}N="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+N+"return __p;\n";try{O=new Function(P.variable||"obj","_",N)}catch(T){T.source=N;throw T}if(Q){return O(Q,M)}var U=function(W){return O.call(this,W,M)};U.source="function("+(P.variable||"obj")+"){\n"+N+"}";return U};M.chain=function(N){return M(N).chain()};var s=function(N){return this._chain?M(N).chain():N};M.mixin(M);I(["pop","push","reverse","shift","sort","splice","unshift"],function(N){var O=C[N];M.prototype[N]=function(){var P=this._wrapped;O.apply(P,arguments);if((N=="shift"||N=="splice")&&P.length===0){delete P[0]}return s.call(this,P)}});I(["concat","join","slice"],function(N){var O=C[N];M.prototype[N]=function(){return s.call(this,O.apply(this._wrapped,arguments))}});M.extend(M.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);
(function(){var u=this;var B=u.Backbone;var g=[];var D=g.push;var n=g.slice;var t=g.splice;var z;if(typeof exports!=="undefined"){z=exports}else{z=u.Backbone={}}z.VERSION="1.0.0";var L=u._;if(!L&&(typeof require!=="undefined")){L=require("underscore")}z.$=u.jQuery||u.Zepto||u.ender||u.$;z.noConflict=function(){u.Backbone=B;return this};z.emulateHTTP=false;z.emulateJSON=false;var J=z.Events={on:function(M,P,O){if(!x(this,"on",M,[P,O])||!P){return this}this._events||(this._events={});var N=this._events[M]||(this._events[M]=[]);N.push({callback:P,context:O,ctx:O||this});return this},once:function(N,Q,O){if(!x(this,"once",N,[Q,O])||!Q){return this}var M=this;var P=L.once(function(){M.off(N,P);Q.apply(this,arguments)});P._callback=Q;return this.on(N,P,O)},off:function(M,V,N){var T,U,W,S,R,O,Q,P;if(!this._events||!x(this,"off",M,[V,N])){return this}if(!M&&!V&&!N){this._events={};return this}S=M?[M]:L.keys(this._events);for(R=0,O=S.length;R<O;R++){M=S[R];if(W=this._events[M]){this._events[M]=T=[];if(V||N){for(Q=0,P=W.length;Q<P;Q++){U=W[Q];if((V&&V!==U.callback&&V!==U.callback._callback)||(N&&N!==U.context)){T.push(U)}}}if(!T.length){delete this._events[M]}}}return this},trigger:function(O){if(!this._events){return this}var N=n.call(arguments,1);if(!x(this,"trigger",O,N)){return this}var P=this._events[O];var M=this._events.all;if(P){b(P,N)}if(M){b(M,arguments)}return this},stopListening:function(P,M,R){var N=this._listeners;if(!N){return this}var O=!M&&!R;if(typeof M==="object"){R=this}if(P){(N={})[P._listenerId]=P}for(var Q in N){N[Q].off(M,R,this);if(O){delete this._listeners[Q]}}return this}};var w=/\s+/;var x=function(T,R,N,Q){if(!N){return true}if(typeof N==="object"){for(var P in N){T[R].apply(T,[P,N[P]].concat(Q))}return false}if(w.test(N)){var S=N.split(w);for(var O=0,M=S.length;O<M;O++){T[R].apply(T,[S[O]].concat(Q))}return false}return true};var b=function(R,P){var S,Q=-1,O=R.length,N=P[0],M=P[1],T=P[2];switch(P.length){case 0:while(++Q<O){(S=R[Q]).callback.call(S.ctx)}return;case 1:while(++Q<O){(S=R[Q]).callback.call(S.ctx,N)}return;case 2:while(++Q<O){(S=R[Q]).callback.call(S.ctx,N,M)}return;case 3:while(++Q<O){(S=R[Q]).callback.call(S.ctx,N,M,T)}return;default:while(++Q<O){(S=R[Q]).callback.apply(S.ctx,P)}}};var C={listenTo:"on",listenToOnce:"once"};L.each(C,function(M,N){J[N]=function(Q,O,S){var P=this._listeners||(this._listeners={});var R=Q._listenerId||(Q._listenerId=L.uniqueId("l"));P[R]=Q;if(typeof O==="object"){S=this}Q[M](O,S,this);return this}});J.bind=J.on;J.unbind=J.off;L.extend(z,J);var E=z.Model=function(M,O){var P;var N=M||{};O||(O={});this.cid=L.uniqueId("c");this.attributes={};L.extend(this,L.pick(O,F));if(O.parse){N=this.parse(N,O)||{}}if(P=L.result(this,"defaults")){N=L.defaults({},N,P)}this.set(N,O);this.changed={};this.initialize.apply(this,arguments)};var F=["url","urlRoot","collection"];L.extend(E.prototype,J,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(M){return L.clone(this.attributes)},sync:function(){return z.sync.apply(this,arguments)},get:function(M){return this.attributes[M]},escape:function(M){return L.escape(this.get(M))},has:function(M){return this.get(M)!=null},set:function(U,M,Y){var S,V,W,T,R,X,O,Q;if(U==null){return this}if(typeof U==="object"){V=U;Y=M}else{(V={})[U]=M}Y||(Y={});if(!this._validate(V,Y)){return false}W=Y.unset;R=Y.silent;T=[];X=this._changing;this._changing=true;if(!X){this._previousAttributes=L.clone(this.attributes);this.changed={}}Q=this.attributes,O=this._previousAttributes;if(this.idAttribute in V){this.id=V[this.idAttribute]}for(S in V){M=V[S];if(!L.isEqual(Q[S],M)){T.push(S)}if(!L.isEqual(O[S],M)){this.changed[S]=M}else{delete this.changed[S]}W?delete Q[S]:Q[S]=M}if(!R){if(T.length){this._pending=true}for(var P=0,N=T.length;P<N;P++){this.trigger("change:"+T[P],this,Q[T[P]],Y)}}if(X){return this}if(!R){while(this._pending){this._pending=false;this.trigger("change",this,Y)}}this._pending=false;this._changing=false;return this},unset:function(M,N){return this.set(M,void 0,L.extend({},N,{unset:true}))},clear:function(N){var M={};for(var O in this.attributes){M[O]=void 0}return this.set(M,L.extend({},N,{unset:true}))},hasChanged:function(M){if(M==null){return !L.isEmpty(this.changed)}return L.has(this.changed,M)},changedAttributes:function(O){if(!O){return this.hasChanged()?L.clone(this.changed):false}var Q,P=false;var N=this._changing?this._previousAttributes:this.attributes;for(var M in O){if(L.isEqual(N[M],(Q=O[M]))){continue}(P||(P={}))[M]=Q}return P},previous:function(M){if(M==null||!this._previousAttributes){return null}return this._previousAttributes[M]},previousAttributes:function(){return L.clone(this._previousAttributes)},fetch:function(N){N=N?L.clone(N):{};if(N.parse===void 0){N.parse=true}var M=this;var O=N.success;N.success=function(P){if(!M.set(M.parse(P,N),N)){return false}if(O){O(M,P,N)}M.trigger("sync",M,P,N)};H(this,N);return this.sync("read",this,N)},save:function(Q,N,U){var R,M,T,O=this.attributes;if(Q==null||typeof Q==="object"){R=Q;U=N}else{(R={})[Q]=N}if(R&&(!U||!U.wait)&&!this.set(R,U)){return false}U=L.extend({validate:true},U);if(!this._validate(R,U)){return false}if(R&&U.wait){this.attributes=L.extend({},O,R)}if(U.parse===void 0){U.parse=true}var P=this;var S=U.success;U.success=function(W){P.attributes=O;var V=P.parse(W,U);if(U.wait){V=L.extend(R||{},V)}if(L.isObject(V)&&!P.set(V,U)){return false}if(S){S(P,W,U)}P.trigger("sync",P,W,U)};H(this,U);M=this.isNew()?"create":(U.patch?"patch":"update");if(M==="patch"){U.attrs=R}T=this.sync(M,this,U);if(R&&U.wait){this.attributes=O}return T},destroy:function(N){N=N?L.clone(N):{};var M=this;var Q=N.success;var O=function(){M.trigger("destroy",M,M.collection,N)};N.success=function(R){if(N.wait||M.isNew()){O()}if(Q){Q(M,R,N)}if(!M.isNew()){M.trigger("sync",M,R,N)}};if(this.isNew()){N.success();return false}H(this,N);var P=this.sync("delete",this,N);if(!N.wait){O()}return P},url:function(){var M=L.result(this,"urlRoot")||L.result(this.collection,"url")||r();if(this.isNew()){return M}return M+(M.charAt(M.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(N,M){return N},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(M){return this._validate({},L.extend(M||{},{validate:true}))},_validate:function(O,N){if(!N.validate||!this.validate){return true}O=L.extend({},this.attributes,O);var M=this.validationError=this.validate(O,N)||null;if(!M){return true}this.trigger("invalid",this,M,L.extend(N||{},{validationError:M}));return false}});var a=["keys","values","pairs","invert","pick","omit"];L.each(a,function(M){E.prototype[M]=function(){var N=n.call(arguments);N.unshift(this.attributes);return L[M].apply(L,N)}});var c=z.Collection=function(N,M){M||(M={});if(M.url){this.url=M.url}if(M.model){this.model=M.model}if(M.comparator!==void 0){this.comparator=M.comparator}this._reset();this.initialize.apply(this,arguments);if(N){this.reset(N,L.extend({silent:true},M))}};var o={add:true,remove:true,merge:true};var K={add:true,merge:false,remove:false};L.extend(c.prototype,J,{model:E,initialize:function(){},toJSON:function(M){return this.map(function(N){return N.toJSON(M)})},sync:function(){return z.sync.apply(this,arguments)},add:function(N,M){return this.set(N,L.defaults(M||{},K))},remove:function(R,P){R=L.isArray(R)?R.slice():[R];P||(P={});var Q,M,O,N;for(Q=0,M=R.length;Q<M;Q++){N=this.get(R[Q]);if(!N){continue}delete this._byId[N.id];delete this._byId[N.cid];O=this.indexOf(N);this.models.splice(O,1);this.length--;if(!P.silent){P.index=O;N.trigger("remove",N,this,P)}this._removeReference(N)}return this},set:function(N,Z){Z=L.defaults(Z||{},o);if(Z.parse){N=this.parse(N,Z)}if(!L.isArray(N)){N=N?[N]:[]}var U,Q,W,X,O,V;var P=Z.at;var T=this.comparator&&(P==null)&&Z.sort!==false;var R=L.isString(this.comparator)?this.comparator:null;var Y=[],M=[],S={};for(U=0,Q=N.length;U<Q;U++){if(!(W=this._prepareModel(N[U],Z))){continue}if(O=this.get(W)){if(Z.remove){S[O.cid]=true}if(Z.merge){O.set(W.attributes,Z);if(T&&!V&&O.hasChanged(R)){V=true}}}else{if(Z.add){Y.push(W);W.on("all",this._onModelEvent,this);this._byId[W.cid]=W;if(W.id!=null){this._byId[W.id]=W}}}}if(Z.remove){for(U=0,Q=this.length;U<Q;++U){if(!S[(W=this.models[U]).cid]){M.push(W)}}if(M.length){this.remove(M,Z)}}if(Y.length){if(T){V=true}this.length+=Y.length;if(P!=null){t.apply(this.models,[P,0].concat(Y))}else{D.apply(this.models,Y)}}if(V){this.sort({silent:true})}if(Z.silent){return this}for(U=0,Q=Y.length;U<Q;U++){(W=Y[U]).trigger("add",W,this,Z)}if(V){this.trigger("sort",this,Z)}return this},reset:function(P,N){N||(N={});for(var O=0,M=this.models.length;O<M;O++){this._removeReference(this.models[O])}N.previousModels=this.models;this._reset();this.add(P,L.extend({silent:true},N));if(!N.silent){this.trigger("reset",this,N)}return this},push:function(N,M){N=this._prepareModel(N,M);this.add(N,L.extend({at:this.length},M));return N},pop:function(N){var M=this.at(this.length-1);this.remove(M,N);return M},unshift:function(N,M){N=this._prepareModel(N,M);this.add(N,L.extend({at:0},M));return N},shift:function(N){var M=this.at(0);this.remove(M,N);return M},slice:function(N,M){return this.models.slice(N,M)},get:function(M){if(M==null){return void 0}return this._byId[M.id!=null?M.id:M.cid||M]},at:function(M){return this.models[M]},where:function(M,N){if(L.isEmpty(M)){return N?void 0:[]}return this[N?"find":"filter"](function(O){for(var P in M){if(M[P]!==O.get(P)){return false}}return true})},findWhere:function(M){return this.where(M,true)},sort:function(M){if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}M||(M={});if(L.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(L.bind(this.comparator,this))}if(!M.silent){this.trigger("sort",this,M)}return this},sortedIndex:function(M,P,N){P||(P=this.comparator);var O=L.isFunction(P)?P:function(Q){return Q.get(P)};return L.sortedIndex(this.models,M,O,N)},pluck:function(M){return L.invoke(this.models,"get",M)},fetch:function(M){M=M?L.clone(M):{};if(M.parse===void 0){M.parse=true}var O=M.success;var N=this;M.success=function(P){var Q=M.reset?"reset":"set";N[Q](P,M);if(O){O(N,P,M)}N.trigger("sync",N,P,M)};H(this,M);return this.sync("read",this,M)},create:function(N,M){M=M?L.clone(M):{};if(!(N=this._prepareModel(N,M))){return false}if(!M.wait){this.add(N,M)}var P=this;var O=M.success;M.success=function(Q){if(M.wait){P.add(N,M)}if(O){O(N,Q,M)}};N.save(null,M);return N},parse:function(N,M){return N},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(O,N){if(O instanceof E){if(!O.collection){O.collection=this}return O}N||(N={});N.collection=this;var M=new this.model(O,N);if(!M._validate(O,N)){this.trigger("invalid",this,O,N);return false}return M},_removeReference:function(M){if(this===M.collection){delete M.collection}M.off("all",this._onModelEvent,this)},_onModelEvent:function(O,N,P,M){if((O==="add"||O==="remove")&&P!==this){return}if(O==="destroy"){this.remove(N,M)}if(N&&O==="change:"+N.idAttribute){delete this._byId[N.previous(N.idAttribute)];if(N.id!=null){this._byId[N.id]=N}}this.trigger.apply(this,arguments)}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];L.each(y,function(M){c.prototype[M]=function(){var N=n.call(arguments);N.unshift(this.models);return L[M].apply(L,N)}});var k=["groupBy","countBy","sortBy"];L.each(k,function(M){c.prototype[M]=function(P,N){var O=L.isFunction(P)?P:function(Q){return Q.get(P)};return L[M](this.models,O,N)}});var G=z.View=function(M){this.cid=L.uniqueId("view");this._configure(M||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var v=/^(\S+)\s*(.*)$/;var e=["model","collection","el","id","attributes","className","tagName","events"];L.extend(G.prototype,J,{tagName:"div",$:function(M){return this.$el.find(M)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(M,N){if(this.$el){this.undelegateEvents()}this.$el=M instanceof z.$?M:z.$(M);this.el=this.$el[0];if(N!==false){this.delegateEvents()}return this},delegateEvents:function(Q){if(!(Q||(Q=L.result(this,"events")))){return this}this.undelegateEvents();for(var P in Q){var R=Q[P];if(!L.isFunction(R)){R=this[Q[P]]}if(!R){continue}var O=P.match(v);var N=O[1],M=O[2];R=L.bind(R,this);N+=".delegateEvents"+this.cid;if(M===""){this.$el.on(N,R)}else{this.$el.on(N,M,R)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_configure:function(M){if(this.options){M=L.extend({},L.result(this,"options"),M)}L.extend(this,L.pick(M,e));this.options=M},_ensureElement:function(){if(!this.el){var M=L.extend({},L.result(this,"attributes"));if(this.id){M.id=L.result(this,"id")}if(this.className){M["class"]=L.result(this,"className")}var N=z.$("<"+L.result(this,"tagName")+">").attr(M);this.setElement(N,false)}else{this.setElement(L.result(this,"el"),false)}}});z.sync=function(S,N,M){var P=j[S];L.defaults(M||(M={}),{emulateHTTP:z.emulateHTTP,emulateJSON:z.emulateJSON});var R={type:P,dataType:"json"};if(!M.url){R.url=L.result(N,"url")||r()}if(M.data==null&&N&&(S==="create"||S==="update"||S==="patch")){R.contentType="application/json";R.data=JSON.stringify(M.attrs||N.toJSON(M))}if(M.emulateJSON){R.contentType="application/x-www-form-urlencoded";R.data=R.data?{model:R.data}:{}}if(M.emulateHTTP&&(P==="PUT"||P==="DELETE"||P==="PATCH")){R.type="POST";if(M.emulateJSON){R.data._method=P}var O=M.beforeSend;M.beforeSend=function(T){T.setRequestHeader("X-HTTP-Method-Override",P);if(O){return O.apply(this,arguments)}}}if(R.type!=="GET"&&!M.emulateJSON){R.processData=false}if(R.type==="PATCH"&&window.ActiveXObject&&!(window.external&&window.external.msActiveXFilteringEnabled)){R.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var Q=M.xhr=z.ajax(L.extend(R,M));N.trigger("request",N,Q,M);return Q};var j={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};z.ajax=function(){return z.$.ajax.apply(z.$,arguments)};var p=z.Router=function(M){M||(M={});if(M.routes){this.routes=M.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var q=/\((.*?)\)/g;var s=/(\(\?)?:\w+/g;var d=/\*\w+/g;var h=/[\-{}\[\]+?.,\\\^$|#\s]/g;L.extend(p.prototype,J,{initialize:function(){},route:function(N,O,P){if(!L.isRegExp(N)){N=this._routeToRegExp(N)}if(L.isFunction(O)){P=O;O=""}if(!P){P=this[O]}var M=this;z.history.route(N,function(R){var Q=M._extractParameters(N,R);P&&P.apply(M,Q);M.trigger.apply(M,["route:"+O].concat(Q));M.trigger("route",O,Q);z.history.trigger("route",M,O,Q)});return this},navigate:function(N,M){z.history.navigate(N,M);return this},_bindRoutes:function(){if(!this.routes){return}this.routes=L.result(this,"routes");var N,M=L.keys(this.routes);while((N=M.pop())!=null){this.route(N,this.routes[N])}},_routeToRegExp:function(M){M=M.replace(h,"\\$&").replace(q,"(?:$1)?").replace(s,function(O,N){return N?O:"([^/]+)"}).replace(d,"(.*?)");return new RegExp("^"+M+"$")},_extractParameters:function(M,N){var O=M.exec(N).slice(1);return L.map(O,function(P){return P?decodeURIComponent(P):null})}});var i=z.History=function(){this.handlers=[];L.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var A=/^[#\/]|\s+$/g;var f=/^\/+|\/+$/g;var I=/msie [\w.]+/;var m=/\/$/;i.started=false;L.extend(i.prototype,J,{interval:50,getHash:function(N){var M=(N||this).location.href.match(/#(.*)$/);return M?M[1]:""},getFragment:function(O,N){if(O==null){if(this._hasPushState||!this._wantsHashChange||N){O=this.location.pathname;var M=this.root.replace(m,"");if(!O.indexOf(M)){O=O.substr(M.length)}}else{O=this.getHash()}}return O.replace(A,"")},start:function(O){if(i.started){throw new Error("Backbone.history has already been started")}i.started=true;this.options=L.extend({},{root:"/"},this.options,O);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var N=this.getFragment();var M=document.documentMode;var Q=(I.exec(navigator.userAgent.toLowerCase())&&(!M||M<=7));this.root=("/"+this.root+"/").replace(f,"/");if(Q&&this._wantsHashChange){this.iframe=z.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(N)}if(this._hasPushState){z.$(window).on("popstate",this.checkUrl)}else{if(this._wantsHashChange&&("onhashchange" in window)&&!Q){z.$(window).on("hashchange",this.checkUrl)}else{if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}}}this.fragment=N;var R=this.location;var P=R.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!P){this.fragment=this.getFragment(null,true);this.location.replace(this.root+this.location.search+"#"+this.fragment);return true}else{if(this._wantsPushState&&this._hasPushState&&P&&R.hash){this.fragment=this.getHash().replace(A,"");this.history.replaceState({},document.title,this.root+this.fragment+R.search)}}if(!this.options.silent){return this.loadUrl()}},stop:function(){z.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);i.started=false},route:function(M,N){this.handlers.unshift({route:M,callback:N})},checkUrl:function(N){var M=this.getFragment();if(M===this.fragment&&this.iframe){M=this.getFragment(this.getHash(this.iframe))}if(M===this.fragment){return false}if(this.iframe){this.navigate(M)}this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(O){var N=this.fragment=this.getFragment(O);var M=L.any(this.handlers,function(P){if(P.route.test(N)){P.callback(N);return true}});return M},navigate:function(O,N){if(!i.started){return false}if(!N||N===true){N={trigger:N}}O=this.getFragment(O||"");if(this.fragment===O){return}this.fragment=O;var M=this.root+O;if(this._hasPushState){this.history[N.replace?"replaceState":"pushState"]({},document.title,M)}else{if(this._wantsHashChange){this._updateHash(this.location,O,N.replace);if(this.iframe&&(O!==this.getFragment(this.getHash(this.iframe)))){if(!N.replace){this.iframe.document.open().close()}this._updateHash(this.iframe.location,O,N.replace)}}else{return this.location.assign(M)}}if(N.trigger){this.loadUrl(O)}},_updateHash:function(M,O,P){if(P){var N=M.href.replace(/(javascript:|#).*$/,"");M.replace(N+"#"+O)}else{M.hash="#"+O}}});z.history=new i;var l=function(M,O){var N=this;var Q;if(M&&L.has(M,"constructor")){Q=M.constructor}else{Q=function(){return N.apply(this,arguments)}}L.extend(Q,N,O);var P=function(){this.constructor=Q};P.prototype=N.prototype;Q.prototype=new P;if(M){L.extend(Q.prototype,M)}Q.__super__=N.prototype;return Q};E.extend=c.extend=p.extend=G.extend=i.extend=l;var r=function(){throw new Error('A "url" property or function must be specified')};var H=function(O,N){var M=N.error;N.error=function(P){if(M){M(O,P,N)}O.trigger("error",O,P,N)}}}).call(this);
(function(){var b=Backbone.View.extend({el:"#carousel",itemCount:3,currentPage:0,isAnimating:false,events:{"click button.previous":"previous","click button.next":"next"},initialize:function(a){this.previousBtn=this.$("button.previous");this.nextBtn=this.$("button.next");this.container=this.$(".three-up-container");this.list=this.$(".three-up-list");this.itemWidth=this.list.find(":first-child").outerWidth();this.fullPages=Math.floor(this.list.children().length/this.itemCount);this.displacement=this.itemCount*this.itemWidth},next:function(){if(this.isAnimating){return}if(this.currentPage+1>=this.fullPages){this.appendItems();this.moveRight("-="+this.displacement)}else{this.currentPage++;this.moveRight()}},previous:function(){if(this.isAnimating){return}if(this.currentPage-1<0){this.prependItems();this.moveLeft(0)}else{this.currentPage--;this.moveLeft()}},appendItems:function(){var a=this.list.children().slice(0,3);this.list.css("left","+="+this.displacement);this.list.append(a)},prependItems:function(){var a=this.list.children().slice(-4,-1);this.list.css("left","-="+this.displacement);this.list.prepend(a)},moveRight:function(e){var a=-this.currentPage*this.displacement,f=this;this.isAnimating=true;this.list.animate({left:e||a},1000,function(){f.isAnimating=false})},moveLeft:function(e){var a=-this.currentPage*this.displacement,f=this;this.isAnimating=true;this.list.animate({left:e||a},1000,function(){f.isAnimating=false})}});window.HPModules=window.HPModules||{};window.HPModules.Carousel=b})();

(function(j){var m="2.94";if(j.support==undefined){j.support={opacity:!(j.browser.msie)}}function a(t){if(j.fn.cycle.debug){f(t)}}function f(){if(window.console&&window.console.log){window.console.log("[cycle] "+Array.prototype.join.call(arguments," "))}}j.fn.splitUp=function(t,u){$all=j(this).find(">*");var s=Math.ceil($all.length/t);for(i=0;i<s;i++){$all.slice(t*i,t*(i+1)).wrapAll(u)}return j(this)};j.fn.cycle=function(t,s){var u={s:this.selector,c:this.context};if(this.length===0&&t!="stop"){if(!j.isReady&&u.s){f("DOM not ready, queuing slideshow");j(function(){j(u.s,u.c).cycle(t,s)});return this}f("terminating; zero elements found by selector"+(j.isReady?"":" (DOM not ready)"));return this}return this.each(function(){var y=n(this,t,s);if(y===false){return}y.updateActivePagerLink=y.updateActivePagerLink||j.fn.cycle.updateActivePagerLink;if(this.cycleTimeout){clearTimeout(this.cycleTimeout)}this.cycleTimeout=this.cyclePause=0;var z=j(this);var A=y.slideExpr?j(y.slideExpr,this):z.children();var w=A.get();var v=l(z,A,w,y,u);if(v===false){return}var x=v.continuous?10:h(w[v.currSlide],w[v.nextSlide],v,!v.backwards);if(x){x+=(v.delay||0);if(x<10){x=10}a("first timeout: "+x);this.cycleTimeout=setTimeout(function(){e(w,v,0,!y.backwards)},x)}})};function n(s,v,t){if(s.cycleStop==undefined){s.cycleStop=0}if(v===undefined||v===null){v={}}if(v.constructor==String){switch(v){case"destroy":case"stop":var x=j(s).data("cycle.opts");if(!x){return false}s.cycleStop++;if(s.cycleTimeout){clearTimeout(s.cycleTimeout)}s.cycleTimeout=0;j(s).removeData("cycle.opts");if(v=="destroy"){r(x)}return false;case"toggle":s.cyclePause=(s.cyclePause===1)?0:1;w(s.cyclePause,t,s);return false;case"pause":s.cyclePause=1;return false;case"resume":s.cyclePause=0;w(false,t,s);return false;case"prev":case"next":var x=j(s).data("cycle.opts");if(!x){f('options not found, "prev/next" ignored');return false}j.fn.cycle[v](x);return false;default:v={fx:v}}return v}else{if(v.constructor==Number){var u=v;v=j(s).data("cycle.opts");if(!v){f("options not found, can not advance slide");return false}if(u<0||u>=v.elements.length){f("invalid slide index: "+u);return false}v.nextSlide=u;if(s.cycleTimeout){clearTimeout(s.cycleTimeout);s.cycleTimeout=0}if(typeof t=="string"){v.oneTimeFx=t}e(v.elements,v,1,u>=v.currSlide);return false}}return v;function w(z,A,y){if(!z&&A===true){var B=j(y).data("cycle.opts");if(!B){f("options not found, can not resume");return false}if(y.cycleTimeout){clearTimeout(y.cycleTimeout);y.cycleTimeout=0}e(B.elements,B,1,!B.backwards)}}}function b(s,t){if(!j.support.opacity&&t.cleartype&&s.style.filter){try{s.style.removeAttribute("filter")}catch(u){}}}function r(s){if(s.next){j(s.next).unbind(s.prevNextEvent)}if(s.prev){j(s.prev).unbind(s.prevNextEvent)}if(s.pager||s.pagerAnchorBuilder){j.each(s.pagerAnchors||[],function(){this.unbind().remove()})}s.pagerAnchors=null;if(s.destroy){s.destroy(s)}}function l(A,M,x,v,G){var E=j.extend({},j.fn.cycle.defaults,v||{},j.metadata?A.metadata():j.meta?A.data():{});if(E.autostop){E.countdown=E.autostopCount||x.length}var t=A[0];A.data("cycle.opts",E);E.$cont=A;E.stopCount=t.cycleStop;E.elements=x;E.before=E.before?[E.before]:[];E.after=E.after?[E.after]:[];E.after.unshift(function(){E.busy=0});if(!j.support.opacity&&E.cleartype){E.after.push(function(){b(this,E)})}if(E.continuous){E.after.push(function(){e(x,E,0,!E.backwards)})}o(E);if(!j.support.opacity&&E.cleartype&&!E.cleartypeNoBg){g(M)}if(A.css("position")=="static"){A.css("position","relative")}if(E.width){A.width(E.width)}if(E.height&&E.height!="auto"){A.height(E.height)}if(E.startingSlide){E.startingSlide=parseInt(E.startingSlide)}else{if(E.backwards){E.startingSlide=x.length-1}}if(E.random){E.randomMap=[];for(var K=0;K<x.length;K++){E.randomMap.push(K)}E.randomMap.sort(function(O,w){return Math.random()-0.5});E.randomIndex=1;E.startingSlide=E.randomMap[1]}else{if(E.startingSlide>=x.length){E.startingSlide=0}}E.currSlide=E.startingSlide||0;var z=E.startingSlide;M.css({position:"absolute",top:0,left:0}).hide().each(function(w){var O;if(E.backwards){O=z?w<=z?x.length+(w-z):z-w:x.length-w}else{O=z?w>=z?x.length-(w-z):z-w:x.length-w}j(this).css("z-index",O)});j(x[z]).css("opacity",1).show();b(x[z],E);if(E.fit&&E.width){M.width(E.width)}if(E.fit&&E.height&&E.height!="auto"){M.height(E.height)}var F=E.containerResize&&!A.innerHeight();if(F){var y=0,D=0;for(var I=0;I<x.length;I++){var s=j(x[I]),N=s[0],C=s.outerWidth(),L=s.outerHeight();if(!C){C=N.offsetWidth||N.width||s.attr("width")}if(!L){L=N.offsetHeight||N.height||s.attr("height")}y=C>y?C:y;D=L>D?L:D}if(y>0&&D>0){A.css({width:y+"px",height:D+"px"})}}if(E.pause){A.hover(function(){this.cyclePause++},function(){this.cyclePause--})}if(c(E)===false){return false}var u=false;v.requeueAttempts=v.requeueAttempts||0;M.each(function(){var Q=j(this);this.cycleH=(E.fit&&E.height)?E.height:(Q.height()||this.offsetHeight||this.height||Q.attr("height")||0);this.cycleW=(E.fit&&E.width)?E.width:(Q.width()||this.offsetWidth||this.width||Q.attr("width")||0);if(Q.is("img")){var O=(j.browser.msie&&this.cycleW==28&&this.cycleH==30&&!this.complete);var R=(j.browser.mozilla&&this.cycleW==34&&this.cycleH==19&&!this.complete);var P=(j.browser.opera&&((this.cycleW==42&&this.cycleH==19)||(this.cycleW==37&&this.cycleH==17))&&!this.complete);var w=(this.cycleH==0&&this.cycleW==0&&!this.complete);if(O||R||P||w){if(G.s&&E.requeueOnImageNotLoaded&&++v.requeueAttempts<100){f(v.requeueAttempts," - img slide not loaded, requeuing slideshow: ",this.src,this.cycleW,this.cycleH);setTimeout(function(){j(G.s,G.c).cycle(v)},E.requeueTimeout);u=true;return false}else{f("could not determine size of image: "+this.src,this.cycleW,this.cycleH)}}}return true});if(u){return false}E.cssBefore=E.cssBefore||{};E.animIn=E.animIn||{};E.animOut=E.animOut||{};M.not(":eq("+z+")").css(E.cssBefore);if(E.cssFirst){j(M[z]).css(E.cssFirst)}if(E.timeout){E.timeout=parseInt(E.timeout);if(E.speed.constructor==String){E.speed=j.fx.speeds[E.speed]||parseInt(E.speed)}if(!E.sync){E.speed=E.speed/2}var H=E.fx=="shuffle"?500:250;while((E.timeout-E.speed)<H){E.timeout+=E.speed}}if(E.easing){E.easeIn=E.easeOut=E.easing}if(!E.speedIn){E.speedIn=E.speed}if(!E.speedOut){E.speedOut=E.speed}E.slideCount=x.length;E.currSlide=E.lastSlide=z;if(E.random){if(++E.randomIndex==x.length){E.randomIndex=0}E.nextSlide=E.randomMap[E.randomIndex]}else{if(E.backwards){E.nextSlide=E.startingSlide==0?(x.length-1):E.startingSlide-1}else{E.nextSlide=E.startingSlide>=(x.length-1)?0:E.startingSlide+1}}if(!E.multiFx){var J=j.fn.cycle.transitions[E.fx];if(j.isFunction(J)){J(A,M,E)}else{if(E.fx!="custom"&&!E.multiFx){f("unknown transition: "+E.fx,"; slideshow terminating");return false}}}var B=M[z];if(E.before.length){E.before[0].apply(B,[B,B,E,true])}if(E.after.length>1){E.after[1].apply(B,[B,B,E,true])}if(E.next){j(E.next).bind(E.prevNextEvent,function(){return q(E,1)})}if(E.prev){j(E.prev).bind(E.prevNextEvent,function(){return q(E,0)})}if(E.pager||E.pagerAnchorBuilder){d(x,E)}k(E,x);return E}function o(s){s.original={before:[],after:[]};s.original.cssBefore=j.extend({},s.cssBefore);s.original.cssAfter=j.extend({},s.cssAfter);s.original.animIn=j.extend({},s.animIn);s.original.animOut=j.extend({},s.animOut);j.each(s.before,function(){s.original.before.push(this)});j.each(s.after,function(){s.original.after.push(this)})}function c(y){var w,u,t=j.fn.cycle.transitions;if(y.fx.indexOf(",")>0){y.multiFx=true;y.fxs=y.fx.replace(/\s*/g,"").split(",");for(w=0;w<y.fxs.length;w++){var x=y.fxs[w];u=t[x];if(!u||!t.hasOwnProperty(x)||!j.isFunction(u)){f("discarding unknown transition: ",x);y.fxs.splice(w,1);w--}}if(!y.fxs.length){f("No valid transitions named; slideshow terminating.");return false}}else{if(y.fx=="all"){y.multiFx=true;y.fxs=[];for(p in t){u=t[p];if(t.hasOwnProperty(p)&&j.isFunction(u)){y.fxs.push(p)}}}}if(y.multiFx&&y.randomizeEffects){var v=Math.floor(Math.random()*20)+30;for(w=0;w<v;w++){var s=Math.floor(Math.random()*y.fxs.length);y.fxs.push(y.fxs.splice(s,1)[0])}a("randomized fx sequence: ",y.fxs)}return true}function k(t,s){t.addSlide=function(v,w){var u=j(v),x=u[0];if(!t.autostopCount){t.countdown++}s[w?"unshift":"push"](x);if(t.els){t.els[w?"unshift":"push"](x)}t.slideCount=s.length;u.css("position","absolute");u[w?"prependTo":"appendTo"](t.$cont);if(w){t.currSlide++;t.nextSlide++}if(!j.support.opacity&&t.cleartype&&!t.cleartypeNoBg){g(u)}if(t.fit&&t.width){u.width(t.width)}if(t.fit&&t.height&&t.height!="auto"){u.height(t.height)}x.cycleH=(t.fit&&t.height)?t.height:u.height();x.cycleW=(t.fit&&t.width)?t.width:u.width();u.css(t.cssBefore);if(t.pager||t.pagerAnchorBuilder){j.fn.cycle.createPagerAnchor(s.length-1,x,j(t.pager),s,t)}if(j.isFunction(t.onAddSlide)){t.onAddSlide(u)}else{u.hide()}}}j.fn.cycle.resetState=function(t,s){s=s||t.fx;t.before=[];t.after=[];t.cssBefore=j.extend({},t.original.cssBefore);t.cssAfter=j.extend({},t.original.cssAfter);t.animIn=j.extend({},t.original.animIn);t.animOut=j.extend({},t.original.animOut);t.fxFn=null;j.each(t.original.before,function(){t.before.push(this)});j.each(t.original.after,function(){t.after.push(this)});var u=j.fn.cycle.transitions[s];if(j.isFunction(u)){u(t.$cont,j(t.elements),t)}};function e(z,s,y,B){if(y&&s.busy&&s.manualTrump){a("manualTrump in go(), stopping active transition");j(z).stop(true,true);s.busy=false}if(s.busy){a("transition active, ignoring new tx request");return}var w=s.$cont[0],D=z[s.currSlide],C=z[s.nextSlide];if(w.cycleStop!=s.stopCount||w.cycleTimeout===0&&!y){return}if(!y&&!w.cyclePause&&!s.bounce&&((s.autostop&&(--s.countdown<=0))||(s.nowrap&&!s.random&&s.nextSlide<s.currSlide))){if(s.end){s.end(s)}return}var A=false;if((y||!w.cyclePause)&&(s.nextSlide!=s.currSlide)){A=true;var x=s.fx;D.cycleH=D.cycleH||j(D).height();D.cycleW=D.cycleW||j(D).width();C.cycleH=C.cycleH||j(C).height();C.cycleW=C.cycleW||j(C).width();if(s.multiFx){if(s.lastFx==undefined||++s.lastFx>=s.fxs.length){s.lastFx=0}x=s.fxs[s.lastFx];s.currFx=x}if(s.oneTimeFx){x=s.oneTimeFx;s.oneTimeFx=null}j.fn.cycle.resetState(s,x);if(s.before.length){j.each(s.before,function(E,F){if(w.cycleStop!=s.stopCount){return}F.apply(C,[D,C,s,B])})}var u=function(){j.each(s.after,function(E,F){if(w.cycleStop!=s.stopCount){return}F.apply(C,[D,C,s,B])})};a("tx firing; currSlide: "+s.currSlide+"; nextSlide: "+s.nextSlide);s.busy=1;if(s.fxFn){s.fxFn(D,C,s,u,B,y&&s.fastOnEvent)}else{if(j.isFunction(j.fn.cycle[s.fx])){j.fn.cycle[s.fx](D,C,s,u,B,y&&s.fastOnEvent)}else{j.fn.cycle.custom(D,C,s,u,B,y&&s.fastOnEvent)}}}if(A||s.nextSlide==s.currSlide){s.lastSlide=s.currSlide;if(s.random){s.currSlide=s.nextSlide;if(++s.randomIndex==z.length){s.randomIndex=0}s.nextSlide=s.randomMap[s.randomIndex];if(s.nextSlide==s.currSlide){s.nextSlide=(s.currSlide==s.slideCount-1)?0:s.currSlide+1}}else{if(s.backwards){var v=(s.nextSlide-1)<0;if(v&&s.bounce){s.backwards=!s.backwards;s.nextSlide=1;s.currSlide=0}else{s.nextSlide=v?(z.length-1):s.nextSlide-1;s.currSlide=v?0:s.nextSlide+1}}else{var v=(s.nextSlide+1)==z.length;if(v&&s.bounce){s.backwards=!s.backwards;s.nextSlide=z.length-2;s.currSlide=z.length-1}else{s.nextSlide=v?0:s.nextSlide+1;s.currSlide=v?z.length-1:s.nextSlide-1}}}}if(A&&s.pager){s.updateActivePagerLink(s.pager,s.currSlide,s.activePagerClass)}var t=0;if(s.timeout&&!s.continuous){t=h(z[s.currSlide],z[s.nextSlide],s,B)}else{if(s.continuous&&w.cyclePause){t=10}}if(t>0){w.cycleTimeout=setTimeout(function(){e(z,s,0,!s.backwards)},t)}}j.fn.cycle.updateActivePagerLink=function(s,u,t){j(s).each(function(){j(this).children().removeClass(t).eq(u).addClass(t)})};function h(x,v,w,u){if(w.timeoutFn){var s=w.timeoutFn.call(x,x,v,w,u);while((s-w.speed)<250){s+=w.speed}a("calculated timeout: "+s+"; speed: "+w.speed);if(s!==false){return s}}return w.timeout}j.fn.cycle.next=function(s){q(s,1)};j.fn.cycle.prev=function(s){q(s,0)};function q(v,u){var y=u?1:-1;var t=v.elements;var x=v.$cont[0],w=x.cycleTimeout;if(w){clearTimeout(w);x.cycleTimeout=0}if(v.random&&y<0){v.randomIndex--;if(--v.randomIndex==-2){v.randomIndex=t.length-2}else{if(v.randomIndex==-1){v.randomIndex=t.length-1}}v.nextSlide=v.randomMap[v.randomIndex]}else{if(v.random){v.nextSlide=v.randomMap[v.randomIndex]}else{v.nextSlide=v.currSlide+y;if(v.nextSlide<0){if(v.nowrap){return false}v.nextSlide=t.length-1}else{if(v.nextSlide>=t.length){if(v.nowrap){return false}v.nextSlide=0}}}}var s=v.onPrevNextEvent||v.prevNextClick;if(j.isFunction(s)){s(y>0,v.nextSlide,t[v.nextSlide])}e(t,v,1,u);return false}function d(t,u){var s=j(u.pager);j.each(t,function(v,w){j.fn.cycle.createPagerAnchor(v,w,s,t,u)});u.updateActivePagerLink(u.pager,u.startingSlide,u.activePagerClass)}j.fn.cycle.createPagerAnchor=function(w,x,u,v,y){var t;if(j.isFunction(y.pagerAnchorBuilder)){t=y.pagerAnchorBuilder(w,x);a("pagerAnchorBuilder("+w+", el) returned: "+t)}else{t='<a href="javascript: void(0);">'+(w+1)+"</a>"}if(!t){return}var z=j(t);if(z.parents("body").length===0){var s=[];if(u.length>1){u.each(function(){var A=z.clone(true);j(this).append(A);s.push(A[0])});z=j(s)}else{z.appendTo(u)}}y.pagerAnchors=y.pagerAnchors||[];y.pagerAnchors.push(z);z.bind(y.pagerEvent,function(D){D.preventDefault();y.nextSlide=w;var C=y.$cont[0],B=C.cycleTimeout;if(B){clearTimeout(B);C.cycleTimeout=0}var A=y.onPagerEvent||y.pagerClick;if(j.isFunction(A)){A(y.nextSlide,v[y.nextSlide])}e(v,y,1,y.currSlide<w)});if(!/^click/.test(y.pagerEvent)&&!y.allowPagerClickBubble){z.bind("click.cycle",function(){return false})}if(y.pauseOnPagerHover){z.hover(function(){y.$cont[0].cyclePause++},function(){y.$cont[0].cyclePause--})}};j.fn.cycle.hopsFromLast=function(v,u){var t,s=v.lastSlide,w=v.currSlide;if(u){t=w>s?w-s:v.slideCount-s}else{t=w<s?s-w:s+v.slideCount-w}return t};function g(u){a("applying clearType background-color hack");function t(v){v=parseInt(v).toString(16);return v.length<2?"0"+v:v}function s(y){for(;y&&y.nodeName.toLowerCase()!="html";y=y.parentNode){var w=j.css(y,"background-color");if(w.indexOf("rgb")>=0){var x=w.match(/\d+/g);return"#"+t(x[0])+t(x[1])+t(x[2])}if(w&&w!="transparent"){return w}}return"#ffffff"}u.each(function(){j(this).css("background-color",s(this))})}j.fn.cycle.commonReset=function(y,v,x,t,u,s){j(x.elements).not(y).hide();x.cssBefore.opacity=1;x.cssBefore.display="block";if(x.slideResize&&t!==false&&v.cycleW>0){x.cssBefore.width=v.cycleW}if(x.slideResize&&u!==false&&v.cycleH>0){x.cssBefore.height=v.cycleH}x.cssAfter=x.cssAfter||{};x.cssAfter.display="none";j(y).css("zIndex",x.slideCount+(s===true?1:0));j(v).css("zIndex",x.slideCount+(s===true?0:1))};j.fn.cycle.custom=function(E,y,s,v,x,t){var D=j(E),z=j(y);var u=s.speedIn,C=s.speedOut,w=s.easeIn,B=s.easeOut;z.css(s.cssBefore);if(t){if(typeof t=="number"){u=C=t}else{u=C=1}w=B=null}var A=function(){z.animate(s.animIn,u,w,v)};D.animate(s.animOut,C,B,function(){if(s.cssAfter){D.css(s.cssAfter)}if(!s.sync){A()}});if(s.sync){A()}};j.fn.cycle.transitions={fade:function(t,u,s){u.not(":eq("+s.currSlide+")").css("opacity",0);s.before.push(function(x,v,w){if((j(v).parent().height()-j(v).height()>20)||(j(v).parent().height()-j(v).height()<0)){j(v).parent().animate({height:j(v).height()},3*Math.abs(j(v).height()-j(x).height()))}j.fn.cycle.commonReset(x,v,w);w.cssBefore.opacity=0});s.animIn={opacity:1};s.animOut={opacity:0};s.cssBefore={top:0,left:0}}};j.fn.cycle.ver=function(){return m};j.fn.cycle.defaults={fx:"fade",timeout:4000,timeoutFn:null,continuous:0,speed:1000,speedIn:null,speedOut:null,next:null,prev:null,onPrevNextEvent:null,prevNextEvent:"click.cycle",pager:null,onPagerEvent:null,pagerEvent:"click.cycle",allowPagerClickBubble:false,pagerAnchorBuilder:null,before:null,after:null,end:null,easing:null,easeIn:null,easeOut:null,shuffle:null,animIn:null,animOut:null,cssBefore:null,cssAfter:null,fxFn:null,height:"auto",startingSlide:0,sync:1,random:0,fit:0,containerResize:1,slideResize:1,pause:0,pauseOnPagerHover:0,autostop:0,autostopCount:0,delay:0,slideExpr:null,cleartype:!j.support.opacity,cleartypeNoBg:false,nowrap:0,fastOnEvent:0,randomizeEffects:1,rev:0,manualTrump:true,requeueOnImageNotLoaded:true,requeueTimeout:250,activePagerClass:"activeSlide",updateActivePagerLink:null,backwards:false}})(jQuery);(function(a){a.fn.cycle.transitions.none=function(c,d,b){b.fxFn=function(g,e,f,h){a(e).show();a(g).hide();h()}};a.fn.cycle.transitions.fadeout=function(c,d,b){d.not(":eq("+b.currSlide+")").css({display:"block",opacity:1});b.before.push(function(l,j,k,f,g,e){a(l).css("zIndex",k.slideCount+(!e===true?1:0));a(j).css("zIndex",k.slideCount+(!e===true?0:1))});b.animIn={opacity:1};b.animOut={opacity:0};b.cssBefore={opacity:1,display:"block"};b.cssAfter={zIndex:0}};a.fn.cycle.transitions.scrollUp=function(d,e,c){d.css("overflow","hidden");c.before.push(a.fn.cycle.commonReset);var b=d.height();c.cssBefore={top:b,left:0};c.cssFirst={top:0};c.animIn={top:0};c.animOut={top:-b}};a.fn.cycle.transitions.scrollDown=function(d,e,c){d.css("overflow","hidden");c.before.push(a.fn.cycle.commonReset);var b=d.height();c.cssFirst={top:0};c.cssBefore={top:-b,left:0};c.animIn={top:0};c.animOut={top:b}};a.fn.cycle.transitions.scrollLeft=function(d,e,c){d.css("overflow","hidden");c.before.push(a.fn.cycle.commonReset);var b=d.width();c.cssFirst={left:0};c.cssBefore={left:b,top:0};c.animIn={left:0};c.animOut={left:0-b}};a.fn.cycle.transitions.scrollRight=function(d,e,c){d.css("overflow","hidden");c.before.push(a.fn.cycle.commonReset);var b=d.width();c.cssFirst={left:0};c.cssBefore={left:-b,top:0};c.animIn={left:0};c.animOut={left:b}};a.fn.cycle.transitions.scrollHorz=function(c,d,b){c.css("overflow","hidden").width();b.before.push(function(h,f,g,e){if(g.rev){e=!e}if((a(f).parent().height()-a(f).height()>20)||(a(f).parent().height()-a(f).height()<0)){a(f).parent().animate({height:a(f).height()},3*Math.abs(a(f).height()-a(h).height()))}a.fn.cycle.commonReset(h,f,g);g.cssBefore.left=e?(f.cycleW-1):(1-f.cycleW);g.animOut.left=e?-h.cycleW:h.cycleW});b.cssFirst={left:0};b.cssBefore={top:0};b.animIn={left:0};b.animOut={top:0}};a.fn.cycle.transitions.scrollVert=function(c,d,b){c.css("overflow","hidden");b.before.push(function(h,f,g,e){if(g.rev){e=!e}a.fn.cycle.commonReset(h,f,g);g.cssBefore.top=e?(1-f.cycleH):(f.cycleH-1);g.animOut.top=e?h.cycleH:-h.cycleH});b.cssFirst={top:0};b.cssBefore={left:0};b.animIn={top:0};b.animOut={left:0}};a.fn.cycle.transitions.slideX=function(c,d,b){b.before.push(function(g,e,f){a(f.elements).not(g).hide();a.fn.cycle.commonReset(g,e,f,false,true);f.animIn.width=e.cycleW});b.cssBefore={left:0,top:0,width:0};b.animIn={width:"show"};b.animOut={width:0}};a.fn.cycle.transitions.slideY=function(c,d,b){b.before.push(function(g,e,f){a(f.elements).not(g).hide();a.fn.cycle.commonReset(g,e,f,true,false);f.animIn.height=e.cycleH});b.cssBefore={left:0,top:0,height:0};b.animIn={height:"show"};b.animOut={height:0}};a.fn.cycle.transitions.shuffle=function(e,f,d){var c,b=e.css("overflow","visible").width();f.css({left:0,top:0});d.before.push(function(j,g,h){a.fn.cycle.commonReset(j,g,h,true,true,true)});if(!d.speedAdjusted){d.speed=d.speed/2;d.speedAdjusted=true}d.random=0;d.shuffle=d.shuffle||{left:-b,top:15};d.els=[];for(c=0;c<f.length;c++){d.els.push(f[c])}for(c=0;c<d.currSlide;c++){d.els.push(d.els.shift())}d.fxFn=function(n,k,m,g,j){if(m.rev){j=!j}var h=j?a(n):a(k);a(k).css(m.cssBefore);var l=m.slideCount;h.animate(m.shuffle,m.speedIn,m.easeIn,function(){var q=a.fn.cycle.hopsFromLast(m,j);for(var r=0;r<q;r++){j?m.els.push(m.els.shift()):m.els.unshift(m.els.pop())}if(j){for(var s=0,o=m.els.length;s<o;s++){a(m.els[s]).css("z-index",o-s+l)}}else{var t=a(n).css("z-index");h.css("z-index",parseInt(t)+1+l)}h.animate({left:0,top:0},m.speedOut,m.easeOut,function(){a(j?this:n).hide();if(g){g()}})})};d.cssBefore={display:"block",opacity:1,top:0,left:0}};a.fn.cycle.transitions.turnUp=function(c,d,b){b.before.push(function(g,e,f){a.fn.cycle.commonReset(g,e,f,true,false);f.cssBefore.top=e.cycleH;f.animIn.height=e.cycleH;f.animOut.width=e.cycleW});b.cssFirst={top:0};b.cssBefore={left:0,height:0};b.animIn={top:0};b.animOut={height:0}};a.fn.cycle.transitions.turnDown=function(c,d,b){b.before.push(function(g,e,f){a.fn.cycle.commonReset(g,e,f,true,false);f.animIn.height=e.cycleH;f.animOut.top=g.cycleH});b.cssFirst={top:0};b.cssBefore={left:0,top:0,height:0};b.animOut={height:0}};a.fn.cycle.transitions.turnLeft=function(c,d,b){b.before.push(function(g,e,f){a.fn.cycle.commonReset(g,e,f,false,true);f.cssBefore.left=e.cycleW;f.animIn.width=e.cycleW});b.cssBefore={top:0,width:0};b.animIn={left:0};b.animOut={width:0}};a.fn.cycle.transitions.turnRight=function(c,d,b){b.before.push(function(g,e,f){a.fn.cycle.commonReset(g,e,f,false,true);f.animIn.width=e.cycleW;f.animOut.left=g.cycleW});b.cssBefore={top:0,left:0,width:0};b.animIn={left:0};b.animOut={width:0}};a.fn.cycle.transitions.zoom=function(c,d,b){b.before.push(function(g,e,f){a.fn.cycle.commonReset(g,e,f,false,false,true);f.cssBefore.top=e.cycleH/2;f.cssBefore.left=e.cycleW/2;f.animIn={top:0,left:0,width:e.cycleW,height:e.cycleH};f.animOut={width:0,height:0,top:g.cycleH/2,left:g.cycleW/2}});b.cssFirst={top:0,left:0};b.cssBefore={width:0,height:0}};a.fn.cycle.transitions.fadeZoom=function(c,d,b){b.before.push(function(g,e,f){a.fn.cycle.commonReset(g,e,f,false,false);f.cssBefore.left=e.cycleW/2;f.cssBefore.top=e.cycleH/2;f.animIn={top:0,left:0,width:e.cycleW,height:e.cycleH}});b.cssBefore={width:0,height:0};b.animOut={opacity:0}};a.fn.cycle.transitions.blindX=function(d,e,c){var b=d.css("overflow","hidden").width();c.before.push(function(h,f,g){a.fn.cycle.commonReset(h,f,g);g.animIn.width=f.cycleW;g.animOut.left=h.cycleW});c.cssBefore={left:b,top:0};c.animIn={left:0};c.animOut={left:b}};a.fn.cycle.transitions.blindY=function(d,e,c){var b=d.css("overflow","hidden").height();c.before.push(function(h,f,g){a.fn.cycle.commonReset(h,f,g);g.animIn.height=f.cycleH;g.animOut.top=h.cycleH});c.cssBefore={top:b,left:0};c.animIn={top:0};c.animOut={top:b}};a.fn.cycle.transitions.blindZ=function(e,f,d){var c=e.css("overflow","hidden").height();var b=e.width();d.before.push(function(j,g,h){a.fn.cycle.commonReset(j,g,h);h.animIn.height=g.cycleH;h.animOut.top=j.cycleH});d.cssBefore={top:c,left:b};d.animIn={top:0,left:0};d.animOut={top:c,left:b}};a.fn.cycle.transitions.growX=function(c,d,b){b.before.push(function(g,e,f){a.fn.cycle.commonReset(g,e,f,false,true);f.cssBefore.left=this.cycleW/2;f.animIn={left:0,width:this.cycleW};f.animOut={left:0}});b.cssBefore={width:0,top:0}};a.fn.cycle.transitions.growY=function(c,d,b){b.before.push(function(g,e,f){a.fn.cycle.commonReset(g,e,f,true,false);f.cssBefore.top=this.cycleH/2;f.animIn={top:0,height:this.cycleH};f.animOut={top:0}});b.cssBefore={height:0,left:0}};a.fn.cycle.transitions.curtainX=function(c,d,b){b.before.push(function(g,e,f){a.fn.cycle.commonReset(g,e,f,false,true,true);f.cssBefore.left=e.cycleW/2;f.animIn={left:0,width:this.cycleW};f.animOut={left:g.cycleW/2,width:0}});b.cssBefore={top:0,width:0}};a.fn.cycle.transitions.curtainY=function(c,d,b){b.before.push(function(g,e,f){a.fn.cycle.commonReset(g,e,f,true,false,true);f.cssBefore.top=e.cycleH/2;f.animIn={top:0,height:e.cycleH};f.animOut={top:g.cycleH/2,height:0}});b.cssBefore={left:0,height:0}};a.fn.cycle.transitions.cover=function(f,g,e){var j=e.direction||"left";var b=f.css("overflow","hidden").width();var c=f.height();e.before.push(function(k,d,h){a.fn.cycle.commonReset(k,d,h);if(j=="right"){h.cssBefore.left=-b}else{if(j=="up"){h.cssBefore.top=c}else{if(j=="down"){h.cssBefore.top=-c}else{h.cssBefore.left=b}}}});e.animIn={left:0,top:0};e.animOut={opacity:1};e.cssBefore={top:0,left:0}};a.fn.cycle.transitions.uncover=function(f,g,e){var j=e.direction||"left";var b=f.css("overflow","hidden").width();var c=f.height();e.before.push(function(k,d,h){a.fn.cycle.commonReset(k,d,h,true,true,true);if(j=="right"){h.animOut.left=b}else{if(j=="up"){h.animOut.top=-c}else{if(j=="down"){h.animOut.top=c}else{h.animOut.left=-b}}}});e.animIn={left:0,top:0};e.animOut={opacity:1};e.cssBefore={top:0,left:0}};a.fn.cycle.transitions.toss=function(e,f,d){var b=e.css("overflow","visible").width();var c=e.height();d.before.push(function(j,g,h){a.fn.cycle.commonReset(j,g,h,true,true,true);if(!h.animOut.left&&!h.animOut.top){h.animOut={left:b*2,top:-c/2,opacity:0}}else{h.animOut.opacity=0}});d.cssBefore={left:0,top:0};d.animIn={left:0}};a.fn.cycle.transitions.wipe=function(u,n,e){var s=u.css("overflow","hidden").width();var k=u.height();e.cssBefore=e.cssBefore||{};var g;if(e.clip){if(/l2r/.test(e.clip)){g="rect(0px 0px "+k+"px 0px)"}else{if(/r2l/.test(e.clip)){g="rect(0px "+s+"px "+k+"px "+s+"px)"}else{if(/t2b/.test(e.clip)){g="rect(0px "+s+"px 0px 0px)"}else{if(/b2t/.test(e.clip)){g="rect("+k+"px "+s+"px "+k+"px 0px)"}else{if(/zoom/.test(e.clip)){var q=parseInt(k/2);var f=parseInt(s/2);g="rect("+q+"px "+f+"px "+q+"px "+f+"px)"}}}}}}e.cssBefore.clip=e.cssBefore.clip||g||"rect(0px 0px 0px 0px)";var m=e.cssBefore.clip.match(/(\d+)/g);var v=parseInt(m[0]),c=parseInt(m[1]),o=parseInt(m[2]),j=parseInt(m[3]);e.before.push(function(x,h,t){if(x==h){return}var d=a(x),b=a(h);a.fn.cycle.commonReset(x,h,t,true,true,false);t.cssAfter.display="block";var r=1,l=parseInt((t.speedIn/13))-1;(function w(){var z=v?v-parseInt(r*(v/l)):0;var A=j?j-parseInt(r*(j/l)):0;var B=o<k?o+parseInt(r*((k-o)/l||1)):k;var y=c<s?c+parseInt(r*((s-c)/l||1)):s;b.css({clip:"rect("+z+"px "+y+"px "+B+"px "+A+"px)"});(r++<=l)?setTimeout(w,13):d.css("display","none")})()});e.cssBefore={display:"block",opacity:1,top:0,left:0};e.animIn={left:0};e.animOut={left:0}}})(jQuery);
(function(d){var b={el:".follow-huffpost form.subscribe",init:function(){d(".follow-huffpost ul.group > li").on("click",function(){var e=d(this);d(".follow-huffpost .follow-links").removeClass("untouched");d(".follow-huffpost li").removeClass("selected");d(".follow-huffpost div.content").addClass("off");e.addClass("selected");e.find("div.content").removeClass("off");d(".follow-huffpost .follow-links").css("margin-bottom",e.find("div.content").outerHeight()-7);a(e);if(e.hasClass("facebook")){FB.XFBML.parse(this)}});this.$el=d(this.el);this.$el.submit(d.proxy(this.subscribe,this))},subscribe:function(e){e.preventDefault();if(this.$el.find('[name="email_subscribe_check"]').prop("checked")){return false}if(!this.validate()){return false}var f={email:this.$el.find('[name="email"]').val()};this.$el.find('input.list[type="checkbox"]').each(function(h,i){var g=d(i).attr("id");if(!g){g=d(i).attr("name")}if(g=="other_newsletter"){var j="";j=d(i).attr("data-vertical")+",";j+=d(i).is(":checked")?1:0;f[g]=j}else{f[g]=d(i).is(":checked")?1:0}});this.$el.find('input[type="hidden"]').each(function(h,i){var g=d(i).attr("id");if(!g){g=d(i).attr("name")}f[g]=d(i).val()});d.ajax({url:"/ajax/newsletter/rightrail/subscribe.php",type:"POST",data:f,dataType:"html",success:function(g){d(".subscribe").html(g)},failure:function(g){d(".subscribe").html("An error occurred, please try in few minutes.")}})},validate:function(){var e=this.$el.find('[name="email"]');var f=0;if(!e.val()||e.val()==e.attr("placeholder")){e.focus();return false}this.$el.find('input.list[type="checkbox"]').each(function(g,h){if((d(h).is(":checked"))&&(f==0)){f=1}});if(f==0){d(".signup_error").css("display","block");return false}else{d(".signup_error").css("display","none")}return true},success:function(e){if(e.error){return}this.$el.html(e.message)},failure:function(){this.$el.html(__("An error occurred, please try in few minutes")+".")}};d(function(){b.init();c()});function c(){var e=d("#ad_sharebox_260x60").height();if(e>0){d(".follow-huffpost").removeClass("no-ad");d(".follow-huffpost").addClass("ad")}else{d(".follow-huffpost").removeClass("ad");d(".follow-huffpost").addClass("no-ad")}}function a(e){if(e.hasClass("no-ad")){d("#ad_sharebox_260x60").addClass("off");d(".follow-huffpost").removeClass("no-ad");d(".follow-huffpost").addClass("ad")}else{d("#ad_sharebox_260x60").removeClass("off");c()}}})(jQuery);
(function(a){a.fn.anchorRail=function(c){c=a.extend({},a.fn.anchorRail.defaults,c);var b={isScrollingUp:function(d,e){if(d>e){return true}else{return false}}};return this.each(function(){var r=a(window),A=a(document),s=a(this),v=a(".column.entry"),t=a("section.footer"),g=t.outerHeight(true),n=r.height(),h=a("section.main"),l=a("article.entry"),q=l.find("footer"),m=119,p=38,z=0,e=true,y=true,j=s.offset().top,d=s.offset().left,x=d/r.width(),k=0,o=false,w=true,B=a.inArray(HPConfig.blog_id,[2,25,47])!==-1,f=a("#wrapper").hasClass("wide"),u=a("#ad_right_rail_300x250_lower");var i=function(){n=r.height();if(s.css("position")=="fixed"){if(f&&q.length){var C=jQuery.extend(s.offset(),{left:q.outerWidth()+q.offset().left})}else{if(HPConfig.current_vertical_name=="arabi"){var D=v.outerWidth()+v.offset().left;var C=jQuery.extend(s.offset(),{left:(D>=980)?D-980:D})}else{var C=jQuery.extend(s.offset(),{left:v.outerWidth()+v.offset().left-(f?s.outerWidth():0)})}}s.offset(C);d=s.offset().left;s.css({top:k})}else{d=s.offset().left}};r.resize(function(){i()});r.scroll(function(R){if(document._rail_left_position_reset===true){i();document._rail_left_position_reset=false}var K=0;var J=0;var H=false;if(u.length){K=u.height();if(K>0){if(n>K){J=n-K;if(J>10){J=J-10}}else{J=Math.floor(n/3)}H=true}}var Q,M=s.height()+J,P=r.scrollTop(),N=s.offset().top+M,I=P+n;if(!c.wideFormat&&(v.height()<M)){return}if(c.wideFormat&&(q.height()<M)){return}if(f&&q.length){j=q.offset().top}else{if(B){j=l.offset().top}else{j=h.length&&h.offset().top}}if(b.isScrollingUp(z,P)){y=true;if(P>j){var O=s.offset().top;if(H){O=O+g}if(P<O){s.css({top:0,bottom:0,left:d}).addClass("fix").removeClass("pin");k=s.css("top")}else{if(s.css("position")!="static"){if(e&&s.hasClass("fix")){var G=c.wideFormat?s.offset().top+p-j:(P+n)-(M+h.offset().top);if(G<0){return}if(H&&c.wideFormat){G=G-p}s.css({top:G,left:"auto"}).removeClass("fix").addClass("pin");e=false}}}}var L=P+n+g;if(L<A.height()){if(o){var E=c.wideFormat?s.offset().top+p-j:(P+n)-(M+h.offset().top);E=Math.floor(E);if(H){E=Math.abs(E+g)}s.css({top:E,left:"auto"}).removeClass("fix").addClass("pin");o=false;w=true}}}else{e=true;var S=P+n+g;if(S>=A.height()){if(w){var D=c.wideFormat?(t.offset().top-(M+j)):(t.offset().top-(M+h.offset().top));D=Math.floor(D);if(H&&K<=400){D=Math.abs(D+g)}s.css({top:D-120,left:"auto"}).removeClass("fix").addClass("pin");w=false;o=true}}else{w=true;if(N<=I){var F=J;s.css({top:"auto",bottom:F,left:d}).addClass("fix").removeClass("pin");k=s.css("top")}else{if(y){var C=parseInt(s.css("top"),10);if(C===0){C=c.wideFormat?s.offset().top-j:(P+n)-(M+h.offset().top+p)}C=Math.floor(C);s.css({top:C,left:"auto"}).removeClass("fix").addClass("pin");y=false}}}}if(P<j){s.removeClass("fix pin").css({top:"auto"})}z=r.scrollTop()})})};a.fn.anchorRail.defaults={wideFormat:false}})(jQuery);jQuery(function(b){if(!Modernizr.touch){var a=b("#wrapper").hasClass("wide");if(a){b(".rail").anchorRail({wideFormat:true})}else{b(window).bind("load",function(){b(".rail").anchorRail()})}}});
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});PlaceTools=function(a,c,b){ps=c.getElementsByTagName("P");id=a.id;if(ps.length>2){ps[2].parentNode.insertBefore(a,ps[2]);HuffPoUtil.show(a.id)}else{if(ps.length>1){ps[1].parentNode.insertBefore(a,ps[1]);HuffPoUtil.show(a.id)}else{if(ps.length==1&&ps[0].innerHTML.match(/(<br.?>\s*?<br.?>)/)){outerHTML='<div class="'+a.className+'" id="'+a.id+'">'+a.innerHTML+"</div>";a.parentNode.removeChild(a);ps[0].innerHTML=ps[0].innerHTML.replace(/(<br.?>\s*?<br.?>)/,"<br><br>"+outerHTML);HuffPoUtil.show(a.id)}}}y1=HuffPoUtil.getRegion(id).top;y2=HuffPoUtil.getRegion(b).top;if(y1&&y2&&(y1+150)>=y2){HuffPoUtil.hide(id)}};function addBookmark(a,b){b=b||__("HuffingtonPost");a=(!a)?location.href:a;b=(!b)?document.title:b;if((typeof window.sidebar=="object")&&(typeof window.sidebar.addPanel=="function")){}else{if(typeof window.external=="object"){window.external.AddFavorite(a,b)}else{if(window.opera&&document.createElement){return true}else{return false}}}return false}function addBookmark_mac(a,b){if(document.all){window.external.AddFavorite(a,b)}else{window.sidebar.addPanel(a,b)}}SharePost={share_form_ajax_response:false,cache:{},contacts:{yahoo:{},google:{},aol:{},winlive:{}},process_type:"regular",files_loaded:false,contacts_details:new Array(),pop:function(c,b,a){this.trackingPixelOnShareAction();this.emailForm(c,b,a);return},fill_me:function(f,d){var a=document.forms.email_share_form.your_name.value;var b=a.split(" ");var c="";var e=0;for(z=0;(z<b.length&&e++<3);z++){c=c+" "+b[z].replace(/[^a-zA-Z]/g,"")}a=c.replace(/^\s+|\s+$/g,"")},emailForm:function(c,b,a){this.trackingPixelOnShareAction();this.share_id=c;this.big_news_title=a;HPTrack.trackPageview("/t/a/initiate_share");if(typeof Badges!="undefined"){Badges.trackShare({eid:c,badge:"email"})}var d={share_id:c||"",vertical:b||"",title:this.big_news_title||""};this.loadModal(d);return},loadModal:function(b){this.config=b;if(this.cache[this.config.share_id]){var a={width:650,inner_html:this.cache[this.config.share_id].html,modal_head_image:"",modal_subhead_image:"",onshow:function(){HuffPoUtil.EvalScript(SharePost.cache[SharePost.config.share_id].html);FB.XFBML.parse(jQuery(".email_share_block").get(0),function(){})}};HuffConnect.socialModal(a)}else{HuffConnect.showLoader();this.loadForm()}this.process_type="regular";return},loadForm:function(){var a="/social/entry_share_v2.php";var b=this;jQuery.ajax({url:a,type:"GET",data:"share_id="+this.config.share_id,success:function(e,d,c){if(c.status!=200){HuffConnect.hideModal();return}b.loadFormSuccess(e)},error:function(){HuffConnect.hideModal();HPError.e();return}});return},loadFormSuccess:function(b){oResp=JSON.parse(b);if(oResp.status&&/success/.test(oResp.status)&&oResp.html){oResp.html="<div class='align_left'>"+oResp.html+"</div>";var a=function(){var c=jQuery("#email_share_title");var e=jQuery("#email_share_title_success");if(c.length){var d="";if(SharePost.config&&SharePost.config.title){d=SharePost.config.title}else{if(d==""&&jQuery("#title_permalink")){d=jQuery("#title_permalink").html()}else{if(jQuery("#title_permalink_bold")){d=jQuery("#title_permalink_bold").html()}}}c.html(d);e.html('"'+d+'"')}FB.XFBML.parse(jQuery(".email_share_block").get(0),function(){});HuffPoUtil.EvalScript(oResp.html);SharePost.cache[SharePost.config.share_id]={html:oResp.html};return};HuffConnect.socialModal({width:650,inner_html:oResp.html,modal_head_image:"",modal_subhead_image:"",onshow:a})}else{HuffConnect.hideModal()}return},selectOption:function(f){var h=["gmail","yahoo","aol","winlive"];var d=document.getElementById("email_share_radio_"+f);var j=jQuery("#single_box_"+f);var g=jQuery("#mailbox_arrow_"+f);HPTrack.trackEvent("Email Share","Select Import Provider",f);for(var e=0;e<h.length;e++){var c=jQuery("#single_box_"+h[e]);var b=jQuery("#mailbox_arrow_"+h[e]);var a=jQuery("#email_share_radio_"+h[e]);if(c){jQuery(c).removeClass("selected_box")}if(b){jQuery(b).addClass("hidden")}if(a){a.checked=false}}if(d){d.checked=true}if(j.length){j.addClass("selected_box")}if(g.length){g.removeClass("hidden")}if(f){this.importContacts(f)}this.hideMessage();return},send:function(){var c=this.validateForm();if(typeof c=="object"){jQuery("#es_send_button").addClass("hidden");jQuery("#es_send_status").removeClass("hidden");var b="/send/send.php",f=escape(c.id);var d="id="+f+"&your_name="+encodeURIComponent(c.your_name.substr(0,30))+"&your_email="+encodeURIComponent(c.your_email.substr(0,320))+"&email_list="+encodeURIComponent(c.email_list)+"&modulous_email_pre="+(HPConfig.modulous_email_pre||"")+"&modulous_email_linked="+(HPConfig.modulous_email_linked||"")+"&modulous_email_post="+(HPConfig.modulous_email_post||"");if(f==-1){d+="&url="+encodeURIComponent(window.location.href)+"&title="+encodeURIComponent(document.title)}if((typeof social_campaign!=="undefined")&&(typeof social_campaign_creative!=="undefined")&&(typeof social_campaign_creative.email!=="undefined")){var a="";if((typeof social_campaign_creative.email.link!=="undefined")&&(typeof social_campaign_creative.email.link!=="function")&&(social_campaign_creative.email.link!="")){a+=(typeof social_campaign_creative.email.pre_link!=="undefined")?encodeURIComponent(social_campaign_creative.email.pre_link.replace(/\\+"/g,'"')):"";a+='<a href="'+social_campaign_creative.email.link+'">'+((typeof social_campaign_creative.email.text!=="undefined")?encodeURIComponent(social_campaign_creative.email.text.replace(/\\+"/g,'"')):"")+"</a>";a+=(typeof social_campaign_creative.email.post_link!=="undefined")?encodeURIComponent(social_campaign_creative.email.post_link.replace(/\\+"/g,'"')):""}else{a+=encodeURIComponent(social_campaign_creative.email.replace(/\\+"/g,'"'))}d+="&share_ad_text="+a;d+="&share_link_ref="+encodeURIComponent(social_campaign)}else{if((typeof social_campaign!="undefined")&&HPAds.social_campaigns&&HPAds.social_campaigns[social_campaign]&&HPAds.social_campaigns[social_campaign].email_message){d+="&share_ad_text="+encodeURIComponent(HPAds.social_campaigns[social_campaign].email_message.replace(/\\+"/g,'"'));d+="&share_link_ref="+encodeURIComponent(social_campaign)}else{if(SharePost.share_email_comm_text){d+="&share_ad_text="+encodeURIComponent(SharePost.share_email_comm_text)}}}d+="&send_this=1";var e=jQuery(location).attr("search")||"";e=decodeURIComponent(e);e=e.replace(/\s/g,"");e=e.substr(0,255);if(e!==""){d+="&get="+encodeURIComponent(e)}d+="&banners="+HPAds.get_banners_str();jQuery.ajax({type:"POST",url:b,data:d,dataType:"json",error:function(){SharePost.sendFailure()},success:SharePost.sendSuccess})}return},sendSuccess:function(a){if(a&&a.status&&/success/.test(a.status)){jQuery("#es_share_started").addClass("hidden");jQuery("#es_share_ended").removeClass("hidden");jQuery("#es_send_status").addClass("hidden");jQuery("#es_send_button").removeClass("hidden");jQuery("#es_error_dialogue").addClass("hidden");var d=jQuery("#es_share_ended .title");if(d.html()=='""'){d.html('"'+document.title+'"')}var b=window.document.email_share_form;if(b.email_list){b.email_list.value=""}if(b.your_name){b.your_name.value=""}if(b.your_email){b.your_email.value=""}SharePost.selectAll(false);window.location.hash="#es_share_ended"}else{var c=a.message||false;SharePost.sendFailure(c)}return},sendFailure:function(a){jQuery("#es_send_status").addClass("hidden");jQuery("#es_send_button").removeClass("hidden");SharePost.displayMessage(a);return},validateForm:function(){var b=window.document.email_share_form;if(this.process_type=="regular"){if(b.email_list.value==""){SharePost.displayMessage(__("Send to email(s) box cannot be empty"));b.email_list.focus();return}else{if(b.your_name.value==""){SharePost.displayMessage(__("Please enter your name"));b.your_name.focus();return}else{if(b.your_email.value==""){SharePost.displayMessage(__("Please enter your email"));b.your_email.focus();return}}}var a={id:b.email_share_id.value,your_name:b.your_name.value,your_email:b.your_email.value,email_list:b.email_list.value}}else{if(this.process_type=="import"){if(b.email_list.value==""){var d=__("Please enter the email addresses");if(this.total_contacts_found==0){d=__("No contacts found")}SharePost.displayMessage(d);return}var c=(this.contacts[this.current_option]);var a={id:b.email_share_id.value,your_name:c.name,your_email:c.email,email_list:b.email_list.value}}}return a},displayMessage:function(b){if(b){var a=b}else{var a=__("Unable to process!")}jQuery("#es_error_dialogue").html(a);jQuery("#es_error_dialogue").removeClass("hidden");return},hideMessage:function(){jQuery("#es_error_dialogue").addClass("hidden");return},importContacts:function(d){if(d=="gmail"){d="google"}if(this.contacts[d].linked){this.importContactsSuccess(d)}else{if(HPConfig.site){domain="http://"+HPConfig.huffsite;multid="&multid="+HPConfig.site}else{domain=HuffPoUtil.getHostName();multid=""}var b=domain+"/users/contacts/index.php?provider="+d+"&nofilter=1"+multid;var a=500,c=500;if(d=="gmail"){a=860,c=550}PopupManager.open(b,a,c);PopupManager.onClose=function(){SharePost.importContactsSuccess(d);huff.use("provider/logout",function(e){e.OnAfterContactsImport(d)})}}return},importContactsSuccess:function(f){jQuery("#es_share_started").removeClass("hidden");jQuery("#es_share_ended").addClass("hidden");if(this.contacts[f].linked){var d=f;if(d=="google"){d="gmail"}var c=jQuery("#es_mailbox_rad_"+d);var g=jQuery("#email_form_left_section");var b=jQuery("#es_provider");var l=jQuery("#es_pic");var j=jQuery("#es_user_data");var k=(this.contacts[f]);c.html("").addClass("selected_mailbox email_share_pixie");b.html(f.charAt(0).toUpperCase()+f.substr(1));if(k.avatar){l.html('<div class="mailbox_avatar float_left" style="margin-right:2px;"><img width="27" height="27" src="'+k.avatar+'" /></div>')}else{l.html('<div class="email_share_pixie mailbox_avatar float_left avatar_pic_'+f+'"></div>')}j.html(k.name+" ("+k.email+")");if("string"===typeof k.contacts){k.contacts=JSON.parse(k.contacts)}if(k.contacts&&k.contacts.length){var h="";h+='<div class="es_margins">';h+='	<div class="es_form_label uppercase float_left">'+__("SEND TO EMAIL(S)")+"</div>";h+='	<div class="email_share_pixie es_required_ico float_left"></div>';h+='	<div class="clear"></div>';h+='	<div class="es_input_box"><input type="text" class="email_share_box email_listing_box" name="email_list" id="cbox_email_listing" /></div>';h+='<input type="hidden" id="project-id" />';h+='	<div class="es_form_small_text float_left es_helper_text">'+__("Separate multiple addresses with comma")+"</div>";h+='	<div class="clear"></div>';h+="</div>";h+="<div class='contact_list'>";this.contacts_details=new Array();for(var e=0;e<k.contacts.length;e++){var a=cropped_email="";if(k.contacts[e].name){a=k.contacts[e].name}if(a.length>12){a=a.substr(0,9)+"..."}if(k.contacts[e].email){cropped_email=k.contacts[e].email}if(cropped_email.length>22){cropped_email=cropped_email.substr(0,19)+"..."}this.contacts_details.push(k.contacts[e].email);h+="<div class='es_single_contact'>";h+="<div class='es_contact_names float_left'>";h+="<span class='es_username' title='"+k.contacts[e].name+"'>"+a+"</span>&nbsp;&nbsp;<span class='es_email' title='"+k.contacts[e].email+"'>"+cropped_email+"</span>";h+="</div>";h+="<div class='es_contact_cbox float_right'>";h+="<input type='checkbox' name='"+k.contacts[e].email+"' value='"+k.contacts[e].email+"' onclick='SharePost.selectOne(this)' />";h+="</div>";h+="</div>";h+="<div class='clear es_contacts_border'></div>"}h+="</div>";h+="<div class='es_selectall'><input type='checkbox' name='select_all_contacts' value='all' onclick='SharePost.selectAll(this.checked);' />&nbsp;"+__("Select All")+"</div>";g.html(h);this.total_contacts_found=k.contacts.length;this.loadFiles()}else{if(""!=typeof this.contacts[f].error&&""!==this.contacts[f].error){g.html("<div class='es_provider_err'>"+this.contacts[f].error+"</div>");this.total_contacts_found=0}else{g.html("<div class='es_list_empty'>"+__("No contacts found!")+"</div>");this.total_contacts_found=0}}this.process_type="import";this.current_option=f}else{this.selectOption()}return},loadFiles:function(){if(!this.files_loaded){var b=["/include/lib/jquery/jquery.ui.core.min.js","/include/lib/jquery/jquery.ui.widget.min.js","/include/lib/jquery/jquery.ui.position.min.js","/include/lib/jquery/jquery.ui.autocomplete.min.js"];var a=function(){SharePost.files_loaded=true;SharePost.showOptions()};if(HuffPoUtil&&typeof(HuffPoUtil.loadAndRun)=="function"){HuffPoUtil.loadAndRun(b,a)}}else{this.showOptions()}return},showOptions:function(){if(!this.files_loaded){return}jQuery.noConflict();(function(a){a(function(){var b=SharePost.contacts_details;function c(e){return e.split(/,\s*/)}function d(e){return c(e).pop()}a("#cbox_email_listing").bind("keydown",function(e){if(e.keyCode===a.ui.keyCode.TAB&&a(this).data("autocomplete").menu.active){e.preventDefault()}}).autocomplete({minLength:0,source:function(f,e){e(a.ui.autocomplete.filter(b,d(f.term)))},focus:function(){return false},select:function(f,g){var e=c(this.value);e.pop();e.push(g.item.value);SharePost.checkOption(g.item.value);e.push("");this.value=e.join(", ");return false},open:function(e,f){a(".ui-autocomplete").css("z-index",900);return}})})})(jQuery);return},checkOption:function(b){var a=window.document.email_share_form;if(a[b]&&a[b].type=="checkbox"){a[b].checked=true}return},selectOne:function(b){var d=jQuery("#cbox_email_listing");var c=b.value+", ";if(b.checked){var a=d.val();d.val(a+c)}else{d.val(d.val().replace(c,""))}d.focus();this.setCursorPostion();return},selectAll:function(e){var d=window.document.email_share_form;var f=jQuery("#cbox_email_listing");var b=new Array();for(var c=0;c<d.length;c++){if(d[c].type=="checkbox"&&d[c].value!="all"){d[c].checked=e;b.push(d[c].value)}}if(d.select_all_contacts){d.select_all_contacts.checked=e}if(e){var a=f.val();a+=b.join(", ")+", ";f.val(a)}else{f.val("")}f.focus();this.setCursorPostion();return},setCursorPostion:function(){return},trackingPixelOnShareAction:function(){if(typeof social_campaign_tracking!="undefined"&&social_campaign_tracking.email_share_action){if(typeof social_campaign_tracking.email_share_action=="object"){for(tracking_url in social_campaign_tracking.email_share_action){if((typeof social_campaign_tracking.email_share_action[tracking_url]=="string")&&(social_campaign_tracking.email_share_action[tracking_url]!="")){HPUtil.trackerImg(social_campaign_tracking.email_share_action[tracking_url],document.body)}}}else{HPUtil.trackerImg(social_campaign_tracking.email_share_action,document.body)}if(social_campaign&&HPAds.social_campaigns&&HPAds.social_campaigns[social_campaign]){HPUtil.trackerImg("http://pixel.quantserve.com/pixel/p-4azu6n0QT1rbs.gif?labels=social_action."+social_campaign+".email",document.body)}else{if(this.tracking_flight_name){HPUtil.trackerImg("http://pixel.quantserve.com/pixel/p-4azu6n0QT1rbs.gif?labels=social_action."+this.tracking_flight_name+".email",document.body)}}}HPUtil.updateInfluenceCookie("emailed",1)}};function prepare_and_show_blogs_table_new(m){if(blogs_amount==0){return}var s="";var o="";var r=0;var c=0;var h=0;m--;var d=rows_in_the_blogs_table*tds_in_the_blogs_table;var a=m*d+1;d=d+a-1;if(m>1&&null==document.getElementById("related_blogs_"+a)&&typeof prepare_and_show_blogs_table_new.pagination_requested=="undefined"){prepare_and_show_blogs_table_new.pagination_requested=true;var e=document.getElementById("related_blogs");e.innerHTML="";e.style.background="transparent url('http://s.huffpost.com/images/loader.gif') no-repeat center top";e.style.height="60px";var n="/entries/pagination_load.php?module=linked_entries&entry_id="+HPUtil.GetEntryID()+"&blog_id=3&load_from="+loaded_blogs_amount+"&showed_expanded_blogs_amount="+showed_expanded_blogs_amount;jQuery.ajax({type:"GET",url:n,dataType:"text",error:function(){},success:function(t){if(t){var j=document.getElementById("related_blogs");j.style.background="transparent";j.style.height="auto";document.getElementById("related_blogs_ajax_loaded").innerHTML=t;prepare_and_show_blogs_table_new(m+1)}}});return}for(i=a;i<=d;i++){var l=i>blogs_amount?"":document.getElementById("related_blogs_"+i).innerHTML;if("undefined"!==typeof html&&(html.search("div onclick=")>-1)&&(r==0)){r=1;o+='<div class="sponsored_preview"><div class="commercial_title commercial_title_'+HPConfig.current_vertical_name+'">SPONSORED FEATURE</div><div style="clear: both; line-height: 10px; height: 10px;"></div>'}if("undefined"!==typeof html&&(html.search("div onclick=")==-1)&&(r==1)&&(c==0)){c=1;o+="</div>"}o+=l;if((0==i%2)&&(i!=a)){o+='<div class="clear"></div>'}if(i>blogs_amount){break}}h=0;document.getElementById("related_blogs").innerHTML=o;o="";if(blogs_amount<=(rows_in_the_blogs_table*tds_in_the_blogs_table)){return}i--;var q="";if(m>0){q=q+'&nbsp;<a href="#" onclick="prepare_and_show_blogs_table_new('+1+'); return false;">&laquo;&nbsp;'+__("First")+"</a>&nbsp;";var f=m;q=q+'&nbsp;<a href="#" onclick="prepare_and_show_blogs_table_new('+f+'); return false;">&nbsp;'+__("Prev")+"</a>&nbsp;"}else{q=q+"&nbsp;&laquo;&nbsp;"+__("First")+"&nbsp;&nbsp;&nbsp;"+__("Prev")+"&nbsp;"}var b=m+1;var g;var p=show_pages_amount/2;a=b-p+1;if(a<1){a=1}d=a+p;if((d-a+1)<show_pages_amount){d=d+show_pages_amount-(d-a+1)}if(d>pages_amount){d=pages_amount}if((d-a+1)<show_pages_amount){a=a-(show_pages_amount-(d-a+1))}if(a<1){a=1}for(g=a;g<=d;g++){if(g>pages_amount){break}if(g==b){q=q+"&nbsp;"+g+"&nbsp;"}else{q=q+'&nbsp;<a href="#" onclick="prepare_and_show_blogs_table_new('+g+'); return false;">'+g+"</a>&nbsp;"}}if(i<blogs_amount){var k=m+2;q=q+'&nbsp;<a href="#" onclick="prepare_and_show_blogs_table_new('+k+'); return false;">'+__("Next")+"&nbsp;</a>&nbsp;";q=q+'&nbsp;<a href="#" onclick="prepare_and_show_blogs_table_new('+pages_amount+'); return false;">'+__("Last")+"&nbsp;&raquo;</a>&nbsp"}else{q=q+"&nbsp;"+__("Next")+"&nbsp;&nbsp;&nbsp;"+__("Last")+"&nbsp;&raquo;&nbsp"}document.getElementById("blogs_pages").innerHTML=__("More Blog Posts:")+"&nbsp;"+q+"<br />"}function prepare_and_show_news_table_original(m){if(news_amount==0){return}var s="";var o="";var h=0;var r=0;var c=0;m--;var d=rows_in_the_news_table*tds_in_the_news_table;var a=m*d+1;d=d+a-1;if(m>1&&null==document.getElementById("related_news_"+a)&&typeof prepare_and_show_news_table_original.pagination_requested=="undefined"){prepare_and_show_news_table_original.pagination_requested=true;var e=document.getElementById("related_news");e.innerHTML="";e.style.background="transparent url('http://s.huffpost.com/images/loader.gif') no-repeat center top";e.style.height="60px";var n="/entries/pagination_load.php?module=linked_entries&entry_id="+HPUtil.GetEntryID()+"&blog_id=2&load_from="+loaded_news_amount;jQuery.ajax({type:"GET",url:n,dataType:"text",error:function(){},success:function(t){if(t){var j=document.getElementById("related_news");j.style.background="transparent";j.style.height="auto";document.getElementById("related_news_ajax_loaded").innerHTML=t;prepare_and_show_news_table_original(m+1)}}});return}for(i=a;i<=d;i++){var k=i>news_amount?"":document.getElementById("related_news_"+i).innerHTML;k=k.split("height: 10px;").join("height: 0;");if((k.indexOf('onclick="HPAds')>-1)&&(r==0)){r=1;o+='<div class="sponsored_preview"><div class="commercial_title commercial_title_'+HPConfig.current_vertical_name+'">SPONSORED FEATURE</div><div style="clear: both; line-height: 10px; height: 10px;"></div>'}if((k.indexOf('onclick="HPAds')==-1)&&(r==1)&&(c==0)){c=1;o+="</div>"}o+=k;if(i>news_amount){break}}document.getElementById("related_news").innerHTML=o;o="";h=0;if(news_amount<=(rows_in_the_news_table*tds_in_the_news_table)){return}i--;var q="";if(m>0){q=q+'&nbsp;<a href="#" onclick="prepare_and_show_news_table_original('+1+'); return false;">&laquo;&nbsp;'+__("First")+"</a>&nbsp;";var f=m;q=q+'&nbsp;<a href="#" onclick="prepare_and_show_news_table_original('+f+'); return false;">&nbsp;'+__("Prev")+"</a>&nbsp;"}else{q=q+"&nbsp;&laquo;&nbsp;"+__("First")+"&nbsp;&nbsp;&nbsp;"+__("Prev")+"&nbsp;"}var b=m+1;var g;var p=show_pages_amount/2;a=b-p+1;if(a<1){a=1}d=a+p;if((d-a+1)<show_pages_amount){d=d+show_pages_amount-(d-a+1)}if(d>news_pages_amount){d=news_pages_amount}if((d-a+1)<show_pages_amount){a=a-(show_pages_amount-(d-a+1))}if(a<1){a=1}for(g=a;g<=d;g++){if(g>news_pages_amount){break}if(g==b){q=q+"&nbsp;"+g+"&nbsp;"}else{q=q+'&nbsp;<a href="#" onclick="prepare_and_show_news_table_original('+g+'); return false;">'+g+"</a>&nbsp;"}}if(i<news_amount){var l=m+2;q=q+'&nbsp;<a href="#" onclick="prepare_and_show_news_table_original('+l+'); return false;">'+__("Next")+"&nbsp;</a>&nbsp;";q=q+'&nbsp;<a href="#" onclick="prepare_and_show_news_table_original('+news_pages_amount+'); return false;">'+__("Last")+"&nbsp;&raquo;</a>&nbsp"}else{q=q+"&nbsp;"+__("Next")+"&nbsp;&nbsp;&nbsp;"+__("Last")+"&nbsp;&raquo;&nbsp"}document.getElementById("news_pages").innerHTML=__("More News Posts:")+"&nbsp;"+q+"<br />"};
/*!
 * numeral.js
 * version : 1.5.1
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */
(function(){var g,p="1.5.1",h={},f="en",k=null,q="0,0",e=(typeof module!=="undefined"&&module.exports);function l(r){this._value=r}function a(v,s,r){var u=Math.pow(10,s),w,t;t=(Math.round(v*u)/u).toFixed(s);if(r){w=new RegExp("0{1,"+r+"}$");t=t.replace(w,"")}return t}function c(t,s){var r;if(s.indexOf("$")>-1){r=j(t,s)}else{if(s.indexOf("%")>-1){r=i(t,s)}else{if(s.indexOf(":")>-1){r=o(t,s)}else{r=b(t._value,s)}}}return r}function d(s,x){var w=x,z,v,u,t,A=["KB","MB","GB","TB","PB","EB","ZB","YB"],y=false,r;if(x.indexOf(":")>-1){s._value=n(x)}else{if(x===k){s._value=0}else{if(h[f].delimiters.decimal!=="."){x=x.replace(/\./g,"").replace(h[f].delimiters.decimal,".")}z=new RegExp("[^a-zA-Z]"+h[f].abbreviations.thousand+"(?:\\)|(\\"+h[f].currency.symbol+")?(?:\\))?)?$");v=new RegExp("[^a-zA-Z]"+h[f].abbreviations.million+"(?:\\)|(\\"+h[f].currency.symbol+")?(?:\\))?)?$");u=new RegExp("[^a-zA-Z]"+h[f].abbreviations.billion+"(?:\\)|(\\"+h[f].currency.symbol+")?(?:\\))?)?$");t=new RegExp("[^a-zA-Z]"+h[f].abbreviations.trillion+"(?:\\)|(\\"+h[f].currency.symbol+")?(?:\\))?)?$");for(r=0;r<=A.length;r++){y=(x.indexOf(A[r])>-1)?Math.pow(1024,r+1):false;if(y){break}}s._value=((y)?y:1)*((w.match(z))?Math.pow(10,3):1)*((w.match(v))?Math.pow(10,6):1)*((w.match(u))?Math.pow(10,9):1)*((w.match(t))?Math.pow(10,12):1)*((x.indexOf("%")>-1)?0.01:1)*(((x.split("-").length+Math.min(x.split("(").length-1,x.split(")").length-1))%2)?1:-1)*Number(x.replace(/[^0-9\.]+/g,""));s._value=(y)?Math.ceil(s._value):s._value}}return s._value}function j(v,u){var s=u.indexOf("$")<=1?true:false,t="",r;if(u.indexOf(" $")>-1){t=" ";u=u.replace(" $","")}else{if(u.indexOf("$ ")>-1){t=" ";u=u.replace("$ ","")}else{u=u.replace("$","")}}r=b(v._value,u);if(s){if(r.indexOf("(")>-1||r.indexOf("-")>-1){r=r.split("");r.splice(1,0,h[f].currency.symbol+t);r=r.join("")}else{r=h[f].currency.symbol+t+r}}else{if(r.indexOf(")")>-1){r=r.split("");r.splice(-1,0,t+h[f].currency.symbol);r=r.join("")}else{r=r+t+h[f].currency.symbol}}return r}function i(v,u){var t="",r,s=v._value*100;if(u.indexOf(" %")>-1){t=" ";u=u.replace(" %","")}else{u=u.replace("%","")}r=b(s,u);if(r.indexOf(")")>-1){r=r.split("");r.splice(-1,0,t+"%");r=r.join("")}else{r=r+t+"%"}return r}function o(u){var r=Math.floor(u._value/60/60),s=Math.floor((u._value-(r*60*60))/60),t=Math.round(u._value-(r*60*60)-(s*60));return r+":"+((s<10)?"0"+s:s)+":"+((t<10)?"0"+t:t)}function n(r){var s=r.split(":"),t=0;if(s.length===3){t=t+(Number(s[0])*60*60);t=t+(Number(s[1])*60);t=t+Number(s[2])}else{if(s.length===2){t=t+(Number(s[0])*60);t=t+Number(s[1])}}return Number(t)}function b(C,G){var B=false,u=false,J=false,A="",z="",s="",y=Math.abs(C),E=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],D,F,v,x,H,t,I="",r=false;if(C===0&&k!==null){return k}else{if(G.indexOf("(")>-1){B=true;G=G.slice(1,-1)}else{if(G.indexOf("+")>-1){u=true;G=G.replace(/\+/g,"")}}if(G.indexOf("a")>-1){if(G.indexOf(" a")>-1){A=" ";G=G.replace(" a","")}else{G=G.replace("a","")}if(y>=Math.pow(10,12)){A=A+h[f].abbreviations.trillion;C=C/Math.pow(10,12)}else{if(y<Math.pow(10,12)&&y>=Math.pow(10,9)){A=A+h[f].abbreviations.billion;C=C/Math.pow(10,9)}else{if(y<Math.pow(10,9)&&y>=Math.pow(10,6)){A=A+h[f].abbreviations.million;C=C/Math.pow(10,6)}else{if(y<Math.pow(10,6)&&y>=Math.pow(10,3)){A=A+h[f].abbreviations.thousand;C=C/Math.pow(10,3)}}}}}if(G.indexOf("b")>-1){if(G.indexOf(" b")>-1){z=" ";G=G.replace(" b","")}else{G=G.replace("b","")}for(v=0;v<=E.length;v++){D=Math.pow(1024,v);F=Math.pow(1024,v+1);if(C>=D&&C<F){z=z+E[v];if(D>0){C=C/D}break}}}if(G.indexOf("o")>-1){if(G.indexOf(" o")>-1){s=" ";G=G.replace(" o","")}else{G=G.replace("o","")}s=s+h[f].ordinal(C)}if(G.indexOf("[.]")>-1){J=true;G=G.replace("[.]",".")}x=C.toString().split(".")[0];H=G.split(".")[1];t=G.indexOf(",");if(H){if(H.indexOf("[")>-1){H=H.replace("]","");H=H.split("[");I=a(C,(H[0].length+H[1].length),H[1].length)}else{I=a(C,H.length)}x=I.split(".")[0];if(I.split(".")[1].length){I=h[f].delimiters.decimal+I.split(".")[1]}else{I=""}if(J&&Number(I.slice(1))===0){I=""}}else{x=a(C,null)}if(x.indexOf("-")>-1){x=x.slice(1);r=true}if(t>-1){x=x.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+h[f].delimiters.thousands)}if(G.indexOf(".")===0){x=""}return((B&&r)?"(":"")+((!B&&r)?"-":"")+((!r&&u)?"+":"")+x+I+((s)?s:"")+((A)?A:"")+((z)?z:"")+((B&&r)?")":"")}}g=function(r){if(g.isNumeral(r)){r=r.value()}else{if(r===0||typeof r==="undefined"){r=0}else{if(!Number(r)){r=g.fn.unformat(r)}}}return new l(Number(r))};g.version=p;g.isNumeral=function(r){return r instanceof l};g.language=function(s,r){if(!s){return f}if(s&&!r){if(!h[s]){throw new Error("Unknown language : "+s)}f=s}if(r||!h[s]){m(s,r)}return g};g.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(s){var r=s%10;return(~~(s%100/10)===1)?"th":(r===1)?"st":(r===2)?"nd":(r===3)?"rd":"th"},currency:{symbol:"$"}});g.zeroFormat=function(r){k=typeof(r)==="string"?r:null};g.defaultFormat=function(r){q=typeof(r)==="string"?r:"0.0"};function m(s,r){h[s]=r}g.fn=l.prototype={clone:function(){return g(this)},format:function(r){return c(this,r?r:q)},unformat:function(r){return d(this,r?r:q)},value:function(){return this._value},valueOf:function(){return this._value},set:function(r){this._value=Number(r);return this},add:function(r){this._value=this._value+Number(r);return this},subtract:function(r){this._value=this._value-Number(r);return this},multiply:function(r){this._value=this._value*Number(r);return this},divide:function(r){this._value=this._value/Number(r);return this},difference:function(r){var s=this._value-Number(r);if(s<0){s=-s}return s}};if(e){module.exports=g}if(typeof ender==="undefined"){this["numeral"]=g}if(typeof define==="function"&&define.amd){define([],function(){return g})}}).call(this);
var social_campaign=false;var social_campaign_ref_param="comm_ref";var social_creative_ref_param="comm_crv";(function(e){var q=Backbone.Collection.extend({});var g=Backbone.View.extend({events:{"click a":"share"}});var m=function(v){if(typeof(numeral)=="function"){var u=null;if(typeof(Object.getPrototypeOf)=="function"){u=Object.getPrototypeOf(numeral(v))}else{u=new numeral(v)}u._value=v;u.socialFormat=function(w){if(typeof(this.value)!=="function"){if("_value" in this){this._value}else{return 0}}else{if(this.value()>=1000000){return this.format(w)}else{return this.value()}}}}return u};var b=Backbone.View.extend({trackedShares:[],events:{"click a":function(u){this.share(u);this.track(u);this.incrementCounter(u)}},initialize:function(u){this.eid=u.eid;this.banners=u.banners;this.count=this.$(".count")},render:function(v){var u=v.views_amount||0;this.count.text(m(+u).socialFormat("0.0a")).attr({"data-count":u})},incrementCounter:function(u){this.count.text(this.count.data("count")+1)},share:function(){},getURL:function(z,x,v){if(typeof v==="undefined"){v=true}var u=HuffCookies.getUserId();var w=z;var y=w.data("url");y=HuffPoUtil.AddStringToQueryString(y,x);if(typeof social_campaign!=="undefined"){y=HuffPoUtil.AddStringToQueryString(y,social_campaign_ref_param+"="+social_campaign);if((typeof social_campaign_creative!=="undefined")&&(typeof social_campaign_creative.facebook!=="undefined")){y=HuffPoUtil.AddStringToQueryString(y,social_creative_ref_param+"="+social_campaign_creative.facebook)}}if(u&&v){y+="#sb="+u+",b="+this.badge}return y},track:function(){if(e.inArray(this.badge,this.trackedShares)==-1){e.getJSON("/include/share_track.php?a=post&eid="+this.eid+"&b="+this.badge+"&banners="+this.banners);this.trackedShares.push(this.badge);try{var v="";switch(this.badge){case"facebook":v="fb_share";break;case"fblike":v="fb_like";break;case"email":case"hatena":case"meneame":case"stumble":case"stumbleupon":case"pinterest":case"linkedin":case"tumblr":case"reddit":case"twitter":v=this.badge;break}if(v){bN.set("dL_shareType",v,1);bN.set("dL_shareURL",escape(window.location.href),1);bN.ping("aol-share")}}catch(z){}}var y=typeof y!=="undefined"?y:1;var A=this.badge;var u={tracking:"",quant:"",doubleclick:""};switch(A){case"twitter":case"twitter_glamorous":u={tracking:"Twitter",quant:"twitter",doubleclick:"twitter"};break;case"facebook":case"facebook_glamorous":u={tracking:"",quant:"fb",doubleclick:"facebook"};break;case"pinterest":case"pinterest_glamorous":u={tracking:"Pinterest",quant:"pinterest",doubleclick:"pinterest"};break;case"meneame":case"meneame_glamorous":u={tracking:"Meneame",quant:"Meneame",doubleclick:"Meneame"};break;case"hatena_glamorous":u={tracking:"Hatena",quant:"Hatena",doubleclick:"Hatena"};break}if(A){var B="Badges"+(y==2)?" v2":"";var w=false;if(w){B+=" - Bottom"}HPTrack.trackEvent(B,"Click",u.tracking);if(u.doubleclick!=""&&(typeof social_campaign_tracking!=="undefined")){if(A=="twitter"&&social_campaign_tracking.twitter_share_action){if(typeof social_campaign_tracking.twitter_share_action=="object"){for(tracking_url in social_campaign_tracking.twitter_share_action){if((typeof social_campaign_tracking.twitter_share_action[tracking_url]=="string")&&(social_campaign_tracking.twitter_share_action[tracking_url]!="")){HPUtil.trackerImg(social_campaign_tracking.twitter_share_action[tracking_url],document.body)}}}else{if(social_campaign_tracking.twitter_share_action!=""){HPUtil.trackerImg(social_campaign_tracking.twitter_share_action,document.body)}}var x="http://pixel.quantserve.com/pixel/p-4azu6n0QT1rbs.gif?labels=social_action";if((typeof social_campaign!="undefined")&&HPAds.social_campaigns&&HPAds.social_campaigns[social_campaign]){HPUtil.trackerImg(x+"."+social_campaign+"."+u.quant,document.body)}else{if(this.tracking_flight_name){HPUtil.trackerImg(x+"."+this.tracking_flight_name+"."+u.quant,document.body)}}}else{if(A=="facebook"&&social_campaign_tracking.facebook_share_action){if(typeof social_campaign_tracking.facebook_share_action=="object"){for(tracking_url in social_campaign_tracking.facebook_share_action){if((typeof social_campaign_tracking.facebook_share_action[tracking_url]=="string")&&(social_campaign_tracking.facebook_share_action[tracking_url]!="")){HPUtil.trackerImg(social_campaign_tracking.facebook_share_action[tracking_url],document.body)}}}else{if(social_campaign_tracking.facebook_share_action!=""){HPUtil.trackerImg(social_campaign_tracking.facebook_share_action,document.body)}}}}}}HPUtil.updateInfluenceCookie("shared",1)},getUniqName:function(){if(typeof(this.last_uniq_id)==="undefined"){this.last_uniq_id=0}this.last_uniq_id++;var w=new Date();var v={};var u=Math.floor((w.getTime()/(6000*12*5)));v.unique_id=u+"_"+this.last_uniq_id;v.obj_name="Badges_"+v.unique_id;return v},getCommentLink:function(w,x){var v=this.comment_params.url;if(w){v=HuffPoUtil.AddStringToQueryString(v,w)}var u=HuffCookies.getUserId();if(u&&x){v+="#sb="+u+",b="+x}return escape(v)}});var p=b.extend({badge:"facebook",share:function(u){u.preventDefault();link=e(u.target).closest("a").attr("href");window.open(link,"","width=815,height=450,address=no,toolbar=no,menubar=no,scrollbars=no")},render:function(v){var u=v.share_amount||0;this.count.text(m(+u).socialFormat("0.0a")).attr({"data-count":u})}});var s=b.extend({badge:"twitter",share:function(w){var v="";if((typeof social_campaign!="undefined")&&(typeof social_campaign_creative=="object")&&(typeof social_campaign_creative.twitter!=="undefined")){v=social_campaign_creative.twitter}else{if(social_campaign&&HPAds.social_campaigns&&HPAds.social_campaigns[social_campaign]&&HPAds.social_campaigns[social_campaign].hashtag&&(this.tweet_descr.tweet_text.search(HPAds.social_campaigns[social_campaign].hashtag)==-1)){v=HPAds.social_campaigns[social_campaign].hashtag}}var z=e(".social-twitter-btn").data("is_modified");if(z==undefined){var u=e(".twitter-tweet-btn").attr("href");var x=e(".social-twitter-btn").data("size");var y=e(".social-twitter-btn").data("account");if(v!=""){u+=" "+encodeURIComponent(v);x+=v.length+2}if(u.indexOf(y)==-1){u+="&via="+y}e(".twitter-tweet-btn").attr("href",u);e(".social-twitter-btn").data("is_modified",true)}},render:function(u){this.count.text("").attr({"data-count":""})},events:{"click a":function(u){this.share(u);this.track(u)}}});var k=b.extend({badge:"email",initialize:function(u){b.prototype.initialize.apply(this,arguments);this.count=this.$(".count")},render:function(v){var u=v.emails_amount||0;this.count.text(m(+u).socialFormat("0.0a")).attr({"data-count":u})},share:function(u){var v=this.$("a");if(HPConfig.ipad_application===true){v.attr("href","mailto:?subject="+escape(window.currentTitle)+"&body="+window.currentUrl)}else{SharePost.emailForm(HPConfig.entry_id,"","")}return false}});var d=b.extend({badge:"google"});var h=b.extend({badge:"comments",events:{click:"goToConversations","click a":"badgeClick"},render:function(v){var u=v.comments_amount||0;this.count.text(m(+u).socialFormat("0.0a")).attr({"data-count":u})},goToConversations:function(u){e("html,body").animate({scrollTop:e("a[name=comments]").offset().top},1000)}});var c=b.extend({badge:"stumbleupon",render:function(v){var u=v.stumble_amount||0;this.count.text(m(+u).socialFormat("0.0a")).attr({"data-count":u})}});var a=b.extend({badge:"tumblr",initialize:function(u){this.url=this.$(".tumblr-share-btn").data("url");this.count=this.$(".count")},render:function(x){var u=this;var w=u.url;var v=x.length||0;this.count.text(m(+v).socialFormat("0.0a")).attr({"data-count":v});e.ajax({url:"http://api.tumblr.com/v2/share/stats?url="+w,dataType:"jsonp"}).done(function(z,y){u.count.text(m(+z.response.note_count).socialFormat("0.0a")).attr({"data-count":z.response.note_count})}).fail(function(){e.error("Tumblr request failed")})}});var t=g.extend({badge:"tumblr",initialize:function(u){this.count=this.$(".count")},render:function(v){var u=v.length||0;this.count.text(m(+u).socialFormat("0.0a")).attr({"data-count":u})},share:function(u){link=e(u.target).closest("a").attr("href");window.open(link,"","width=400,height=500,address=no,toolbar=no,menubar=no,scrollbars=no");return false}});var r=g.extend({share:function(u){link=e(u.target).attr("href");window.open(link,"","width=762,height=500,address=no,toolbar=no,menubar=no,scrollbars=no");return false}});var n=g.extend({share:function(u){link=e(u.target).attr("href");window.open(link,"","width=735,height=400,address=no,toolbar=no,menubar=no,scrollbars=no");return false}});var j=b.extend({badge:"pinterest",share:function(u){u.preventDefault();link=e(u.target).closest("a").attr("href");window.open(link,"","width=815,height=430,address=no,toolbar=no,menubar=no,scrollbars=no")},initialize:function(u){this.url=this.$(".pinterest-pinit-btn").data("url");this.count=this.$(".count");var w=this.$("a");var x=w.attr("href");this.shareUrl=escape(this.getURL(w,"utm_hp_ref=pt&src=sp",false));var v=decodeURIComponent(this.shareUrl);if(v.indexOf("?")>-1){x+=("&url="+escape(v.split("?")[0]))}else{x+=("&url="+this.shareUrl)}w.attr("href",x)},render:function(x){var u=this;var w=decodeURIComponent(u.shareUrl);var v=x.views_amount||0;if(w.indexOf("?")>-1){w=escape(w.split("?")[0])}this.count.text(m(+v).socialFormat("0.0a")).attr({"data-count":v});e.ajax({url:"http://api.pinterest.com/v1/urls/count.json?url="+w,dataType:"jsonp"}).done(function(z,y){u.count.text(m(+z.count).socialFormat("0.0a")).attr({"data-count":z.count})}).fail(function(){e.error("Pinterest request failed")})}});var o=b.extend({});var f=b.extend({badge:"redditshare"});var i=b.extend({badge:"linkedin"});var l=b.extend({badge:"hatena",initialize:function(w){var v=window.location.href;v=v.split("#",1)[0];var x=e(".social-hatena-share-btn").next("iframe").attr("title")||document.title;var u=e('<a href="http://b.hatena.ne.jp/entry/'+v+'" class="hatena-bookmark-button" data-hatena-bookmark-title="'+x+'" data-hatena-bookmark-layout="vertical-balloon" title="'+x+'"><img src="http://b.st-hatena.com/images/entry-button/button-only.gif" alt="'+x+'" width="20" height="20" style="border: none;" /></a>');var y=e(".social-hatena-share-btn");y.html(u);e.getScript("http://b.st-hatena.com/js/bookmark_button.js")}});window.HPSocialWidgets=window.HPSocialWidgets||{};window.HPSocialWidgets.ShareCollection=q;window.HPSocialWidgets.FacebookSocialWidgetView=p;window.HPSocialWidgets.TwitterSocialWidgetView=s;window.HPSocialWidgets.EmailSocialWidgetView=k;window.HPSocialWidgets.GooglePlusSocialWidgetView=d;window.HPSocialWidgets.CommentSocialWidgetView=h;window.HPSocialWidgets.TumblrSocialWidgetView=a;window.HPSocialWidgets.RedditSocialWidgetView=r;window.HPSocialWidgets.RedditShareSocialWidgetView=f;window.HPSocialWidgets.LinkedinSocialWidgetView=i;window.HPSocialWidgets.PinterestSocialWidgetView=j;window.HPSocialWidgets.MeneameSocialWidgetView=o;window.HPSocialWidgets.HatenaSocialWidgetView=l;window.HPSocialWidgets.StumbleUponBadgeSocialWidgetView=c;window.HPSocialWidgets.StumbleUponChickletSocialWidgetView=n})(jQuery);(function(b){var a={init:function(d){var e=this.data("entryId");var h=HPAds.get_banners_str();var f=this.data("url");var g=new window.HPSocialWidgets.ShareCollection(null,{url:f});d=b.extend({},b.fn.socialWidgets.defaults,d);this.each(function(){var i={};var j=b(this);var l=j.find(d.widgetListSelector);var k=l.find(d.widgetSelector);j.data("socialWidgetsData",{options:d});k.each(function(){var m=b(this);var n=m.data("type");switch(n){case"facebook":i.facebook=new window.HPSocialWidgets.FacebookSocialWidgetView({el:m,eid:e,banners:h});break;case"twitter":i.twitter=new window.HPSocialWidgets.TwitterSocialWidgetView({el:m,eid:e,banners:h});break;case"email":i.email=new window.HPSocialWidgets.EmailSocialWidgetView({el:m,eid:e,banners:h});break;case"googleplusone":i.googleplusone=new window.HPSocialWidgets.GooglePlusSocialWidgetView({el:m,eid:e,banners:h});break;case"comments":i.comments=new window.HPSocialWidgets.CommentSocialWidgetView({el:m,eid:e,banners:h});break;case"tumblr":i.tumblr=new window.HPSocialWidgets.TumblrSocialWidgetView({el:m,eid:e,banners:h});break;case"linkedin":i.linkedin=new window.HPSocialWidgets.LinkedinSocialWidgetView({el:m,eid:e,banners:h});break;case"reddit":i.reddit=new window.HPSocialWidgets.RedditSocialWidgetView({el:m,eid:e,banners:h});break;case"redditshare":i.redditshare=new window.HPSocialWidgets.RedditShareSocialWidgetView({el:m,eid:e,banners:h});break;case"pinterest":i.pinterest=new window.HPSocialWidgets.PinterestSocialWidgetView({url:f,el:m,eid:e,banners:h});break;case"stumble":i.stumble=new window.HPSocialWidgets.StumbleUponChickletSocialWidgetView({el:m,eid:e,banners:h});break;case"stumbleupon":i.stumbleupon=new window.HPSocialWidgets.StumbleUponBadgeSocialWidgetView({el:m,eid:e,banners:h});break;case"hatena":i.hatena_content=new window.HPSocialWidgets.HatenaSocialWidgetView({el:m,eid:e,banners:h});break;default:break}});g.fetch().done(function(m){_(m.slice_params).each(function(n,o){if(i.hasOwnProperty(o)){i[o].render(n)}})}).fail(function(){b.error("Failed to get badge count data")})});return this}};var c={};b.fn.socialWidgets=function(d){if(a[d]){return a[d].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof d==="object"||!d){return a.init.apply(this,arguments)}else{b.error("Method "+d+" does not exist")}}};b.fn.socialWidgets.defaults={widgetList:null,widgetSelector:null}})(jQuery);(function(){jQuery(function(a){a(".social-badge, .chicklets").socialWidgets({widgetListSelector:"ul",widgetSelector:"li"})})})();
(function(a){var b=function(){var f=window.top.location.hostname,d={".de":"de_DE",".co.uk":"en_GB",".es":"es_ES",voces:"es_US",quebec:"fr_CA",".fr":"fr_FR",maghreb:"fr_MB",".it":"it_IT",".jp":"ja_JP",brasilpost:"pt_BR",".kr":"ko_KR"},c="en_US";for(var e in d){if(f.indexOf(e)!==-1){c=d[e]}}return c};a.ConversationsLoader={defaultLocale:b,loading:false,config:{mode:"orphan",base_url:window.top.location.protocol+"//"+window.top.location.host+"/conversations",use_verified:true,locale:b(),entity:null},custom_methods:{short_url:function(c,d){if(!window.HPUtil||!window.HPUtil.bitly_url){window.Conversations.app.log("HPUtil.bitly_url was undefined, triggering callback...",5);d(c);return}window.Conversations.app.log("Calling HPUtil.bitly_url...",5);window.HPUtil.bitly_url(c,d)},get_facebook_info:function(){return window.HPFB||undefined},beacon_click:function(c){if(window.bN){window.bN.click((c instanceof window.Conversations.jQuery)?c[0]:c)}},track_omniture:function(){if(typeof(window.s_265)!=="undefined"){try{var e=window.s_265.prop1;var d=window.s_265.prop2;window.Conversations.app.log("Tracking omniture",5);window.s_265.prop1="comments_conversation";window.s_265.prop2="";window.s_265.t();if(typeof(e)=="undefined"){delete window.s_265.prop1}else{window.s_265.prop1=e}if(typeof(d)=="undefined"){delete window.s_265.prop2}else{window.s_265.prop2=d}return true}catch(c){window.Conversations.app.log("Omniture track error: "+c,5)}}window.Conversations.app.log("Omniture error: s_265 undefined",5);return false},track_comscore:function(){if(window.HPTrack&&window.HPTrack.Services&&window.HPTrack.Services.trackTo){window.HPTrack.Services.trackTo(["Comscore"],{add_comscore_noop:true});window.Conversations.app.log("Comscore track",5);return true}window.Conversations.app.log("Comscore error: HPTrack was not a function",5);return false},track_google:function(){if(window.HPTrack&&typeof window.HPTrack.trackEvent==="function"){window.Conversations.app.log("GA Track: "+arguments[0].toString(),5);window.HPTrack.trackEvent("Conversations",arguments[0].toString());return true}window.Conversations.app.log("GA Track error: HPTrack was not a function",5);return false},load_overlay_ad:function(c,f){var g=window.Conversations.jQuery,e=false;try{if(!window.HPAds){throw"HPAds did not exist"}if(!c||c.length!==1){throw"container was empty or had multiple selector matches"}window.Conversations.app.log("Appending ad container",5);c.append("<div id='conv_overlay_ads'></div>");if(!g.contains(window.document.body,g("#conv_overlay_ads")[0])){throw"container append failed"}window.Conversations.app.log("Firing HPAds.ad_reload...",5);e=window.HPAds.ad_reload("conversation_300x250_req","conv_overlay_ads");window.Conversations.app.log("HPAds.ad_reload returned "+(e?"true":"false"),5);return true}catch(d){window.Conversations.app.log(d.toString(),5)}return false},login_prompt:function(){var c=window.Conversations._;if(window.Conversations.app.config.mode==="mobile"){if(c.isFunction(window.on_async_files_ready)&&window.Mobile&&window.Mobile.Auth&&c.isFunction(window.Mobile.Auth.display)){window.Conversations.app.log("Adding Mobile.Auth to async files ready",5);window.on_async_files_ready(function(){window.Mobile.Auth.display()});return true}window.Conversations.app.log("login_prompt error: Unable to initialize Mobile.Auth dialog",5)}else{if(window.HPConnect){window.Conversations.app.log("Calling HPConnect.Login...",5);window.HPConnect.Login();return true}window.Conversations.app.log("login_prompt error: Unable to find HPConnect.Login",5)}return false},get_user_token:function(){var d,c=null,f=null,e="huffpost_user_id";if(typeof window.huff==="object"&&window.Conversations.jQuery&&window.Conversations.jQuery.cookie&&typeof window.Conversations.phpjs==="object"&&window.Conversations.phpjs.md5){d=window.huff.beta?"beta"+(location.port||80)+"_":"";f=window.Conversations.jQuery.cookie(d+"huffpost_user_id");if(f&&f!==null){c=window.Conversations.phpjs.md5(f)}}return c}},isLoaded:function(){return a.Conversations!==undefined},isConversationsOn:function(){var c=this.getQueryStringByName("conversations_off");if(c!==undefined){return false}return true},init:function(){this.debug=this.getQueryStringByName("debug");this.log("Initializing");this.checkOverlayHash()},log:function(c){if(!this.debug){return}if(a.console&&a.console.log){a.console.log("[COMMTECH] ConversationsLoader: "+c)}},load:function(j){if(this.loading===true){return}var i=false,h=this,f=function(){a.ConversationsLoader.config.custom_methods=a.ConversationsLoader.custom_methods;var k=a.Conversations.require("Conversations");a.Conversations.app=new k();h.log("Appending Conversations CSS");var m=a.Conversations.jQuery("<link>");var l=null;if(a.huff.beta===true){if(parseInt(a.ConversationsLoader.getQueryStringByName("localhost"),10)===1){l="http://local.huffingtonpost.com/stylesheets/app.css?_="+Math.floor(Math.random()*1000000)}else{l="/include/lib/conversations/stylesheets/app.css?_="+Math.floor(Math.random()*1000000)}}else{l="http://s.huffpost.com/include/lib/conversations/stylesheets/app.css?v="+((a.huff.versions&&a.huff.versions.deploy_seq)||"")}m.attr({rel:"stylesheet",type:"text/css",href:l});a.Conversations.jQuery("head").append(m);a.Conversations.jQuery(document).ready(function(){a.Conversations.app.initialize(a.ConversationsLoader.config);if(a.Conversations.app.isInitialized()===false){a.Conversations.app.die()}else{a.Conversations.app.start()}g()})};var g=function(){if(j!==undefined&&typeof j==="function"){j()}if(typeof window.linkSocialAccount==="object"){linkSocialAccount.onLinkSuccess=function(){if(typeof window.Conversations==="object"&&typeof window.Conversations.app==="object"){window.Conversations.app.verifyUserCallback()}}}if(typeof window.bN_scrollTrack==="function"){window.bN_scrollTrack("cmts","#conversations-huffpost-web")}h.loading=false};try{if(!a.huff){throw"huff has not been initialized"}this.loading=true;i=true;if(this.isLoaded()){throw"Conversations already loaded"}if(this.isConversationsOn()===false){throw"Conversations turned off by query string"}this.log("Loading conversations app...");if(a.huff.beta===true&&parseInt(this.getQueryStringByName("localhost"),10)===1){this.log("bootstrapping off localhost");var d=["http://local.huffingtonpost.com/javascripts/vendor.js","http://local.huffingtonpost.com/javascripts/templates.js","http://local.huffingtonpost.com/javascripts/app.js"];var c=function(){a.huff.units.jquery.getScript(d.shift(),function(){if(d.length){c()}else{f()}})};c()}else{a.huff.js("conversations/javascripts/vendor.js","conversations/javascripts/templates.js","conversations/javascripts/app.js",f)}}catch(e){this.log(e);if(i){g()}}},showConversations:function(){if(typeof window.Conversations==="object"&&typeof window.Conversations.app==="object"){window.Conversations.app.showConversations()}},hideConversations:function(){if(typeof window.Conversations==="object"&&typeof window.Conversations.app==="object"){window.Conversations.app.hideConversations()}},getQueryStringByName:function(d){var d=d.toString().replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),c="[\\?&]"+d+"=([^&#]*)",f=new RegExp(c),e=f.exec(window.top.location.search);if(null===e){return undefined}return decodeURIComponent(e[1].replace(/\+/g," "))},checkVerifiedStatus:function(h){var f=window.huff.beta?"beta"+(location.port||80)+"_":"",c=window.huff.units.cookies.get(f+"huffpost_user_id"),d=null,e=false,g=function(){if(e===true){h()}else{window.HPConnect.Verify()}};if(window.ConversationsLoader.config.use_verified===true){if(typeof window.Conversations==="object"&&typeof window.Conversations.app==="object"){d=window.Conversations.app.getCurrentUser();e=d.is_verified===true?true:false;g()}else{window.huff.units.jquery.ajax({url:this.config.base_url+"/users/"+c.toString(),type:"GET",dataType:"json",data:{app_token:"d6dc44cc3ddeffb09b8957cf270a845d"},success:function(i){e=i&&typeof i.model==="object"&&i.model.is_verified===true},complete:function(){g()}})}}else{h()}},notificationsReplyClick:function(c){var d=function(){a.Conversations.app.openOverlayFromNotification(c)};if(this.isLoaded()===false){this.load(d);return true}d()},checkOverlayHash:function(){var e=window.top.location.hash.toString(),c=window.top.location.href.toString().match(/_(n|b)_\d*\.html/),d=e.match(/conversation-(\d*)-(\d*)/);if(d===null){return}this.log("Hash found: "+e);if(c!==null){this.log("on bpage, waiting for backbone router");return}this.notificationsReplyClick({entry_id:d[1],comment_id:d[2]})},checkMobileWebComments:function(){var g=window.top.location,f=g.hash.toString(),e=f.match(/#comments/),d,g,c,h;if(e!==null&&e.length){h=g.pathname.split("/");do{c=parseInt(h.pop(),10)}while(isNaN(c)&&h.length);if(!isNaN(c)){d=g.protocol+"//"+g.hostname+(g.port?":"+g.port:"")+"/comments/"+c.toString();window.top.location.href=d}}}};a.ConversationsLoader.init()})(window.top);
(function(c){if(!c||!c.fn||!c.fn.jquery){if(window.console){window.console.log("[SCROLLTRACK] jquery did not exist")}return}if(window.console){window.console.log("[SCROLLTRACK] registering scrollTrack")}var a={},b={};window.bN_scrollTrack=function(h,e,f){if(window.console){console.log("[SCROLLTRACK] registering scroll tracking for "+h)}var g,i,d;if(h===undefined||!h){throw new Error("ping_name must be a string")}switch(f){case undefined:f=0;break;case 0:case 1:f=parseInt(f,10);break;default:throw new Error("visibility parameter must be an integer of set [0,1,2]");break}if((g=c(e)).length===0){if(window.console){console.log("[SCROLLTRACK] element length was zero, not registering listener")}return false}i=g.offset().top;d=g.outerHeight();a[h]=function(){var k=false,j=c(window).scrollTop();if(f===0){k=c(window).height()+(j-i)>0}else{if(f===1){k=(j+c(window).height())>(i+d)}}if(k===false){return}if(b[h]===true){return}if(!window.bN||typeof window.bN.ping!=="function"){window.bN_scrollUntrack(h);throw new Error("window.bN.ping was undefined")}if(window.console){console.log("[SCROLLTRACK] Sending ping `"+h+"`")}window.bN.ping(h);b[h]=true;window.bN_scrollUntrack(h)};if(!c||!c(window)||!c(window).on){return false}c(window).on("scroll",a[h]);return true};window.bN_scrollUntrack=function(d){if(a[d]){c(window).off("scroll",a[d]);delete b[d]}};c(window).bind("load",function(){if(typeof window.bN_scrollTrack!=="function"){return}var f=undefined,e=["#news_entries .entry","article.entry .content"],d=0;do{f=c(e[d]);d++}while(f.length===0&&d<e.length);if(f.length){if(window.console){console.log("[SCROLLTRACK] found content element")}window.bN_scrollTrack("ct_end",e[d-1],1)}else{if(window.console){console.log("[SCROLLTRACK] unable to find content element")}}})})(window.jQuery||window.huff.units.jquery);
/*!
	Colorbox v1.4.31 - 2013-09-25
	jQuery lightbox and modal window plugin
	(c) 2013 Jack Moore - http://www.jacklmoore.com/colorbox
	license: http://www.opensource.org/licenses/mit-license.php
*/
(function(M,l,aa){var N={html:false,photo:false,iframe:false,inline:false,transition:"elastic",speed:300,fadeOut:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:true,scrolling:true,href:false,title:false,rel:false,opacity:0.9,preloading:true,className:false,overlayClose:true,escKey:true,arrowKey:true,top:false,bottom:false,left:false,right:false,fixed:false,data:undefined,closeButton:true,fastIframe:true,open:false,reposition:true,loop:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\?).*)?$/i,retinaImage:false,retinaUrl:false,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:true,trapFocus:true,onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false},x="colorbox",V="cbox",r=V+"Element",Z=V+"_open",e=V+"_load",X=V+"_complete",v=V+"_cleanup",ag=V+"_closed",i=V+"_purge",T,al,am,d,K,p,b,S,c,ae,Q,k,h,o,u,ab,t,U,z,B,I=M("<a/>"),aj,an,m,g,a,w,L,n,D,ac,P,A,O,ai="div",ah,G=0,ad={},af;function J(ao,ar,aq){var ap=l.createElement(ao);if(ar){ap.id=V+ar}if(aq){ap.style.cssText=aq}return M(ap)}function s(){return aa.innerHeight?aa.innerHeight:M(aa).height()}function F(ap){var ao=c.length,aq=(L+ap)%ao;return(aq<0)?ao+aq:aq}function R(ao,ap){return Math.round((/%/.test(ao)?((ap==="x"?ae.width():s())/100):1)*parseInt(ao,10))}function C(ap,ao){return ap.photo||ap.photoRegex.test(ao)}function E(ap,ao){return ap.retinaUrl&&aa.devicePixelRatio>1?ao.replace(ap.photoRegex,ap.retinaSuffix):ao}function ak(ao){if("contains" in al[0]&&!al[0].contains(ao.target)){ao.stopPropagation();al.focus()}}function W(){var ao,ap=M.data(w,x);if(ap==null){aj=M.extend({},N);if(console&&console.log){console.log("Error: cboxElement missing settings object")}}else{aj=M.extend({},ap)}for(ao in aj){if(M.isFunction(aj[ao])&&ao.slice(0,2)!=="on"){aj[ao]=aj[ao].call(w)}}aj.rel=aj.rel||w.rel||M(w).data("rel")||"nofollow";aj.href=aj.href||M(w).attr("href");aj.title=aj.title||w.title;if(typeof aj.href==="string"){aj.href=M.trim(aj.href)}}function H(ao,ap){M(l).trigger(ao);I.trigger(ao);if(M.isFunction(ap)){ap.call(w)}}var y=(function(){var ap,at=V+"Slideshow_",ax="click."+V,av;function aq(){clearTimeout(av)}function aw(){if(aj.loop||c[L+1]){aq();av=setTimeout(O.next,aj.slideshowSpeed)}}function ao(){ab.html(aj.slideshowStop).unbind(ax).one(ax,au);I.bind(X,aw).bind(e,aq);al.removeClass(at+"off").addClass(at+"on")}function au(){aq();I.unbind(X,aw).unbind(e,aq);ab.html(aj.slideshowStart).unbind(ax).one(ax,function(){O.next();ao()});al.removeClass(at+"on").addClass(at+"off")}function ar(){ap=false;ab.hide();aq();I.unbind(X,aw).unbind(e,aq);al.removeClass(at+"off "+at+"on")}return function(){if(ap){if(!aj.slideshow){I.unbind(v,ar);ar()}}else{if(aj.slideshow&&c[1]){ap=true;I.one(v,ar);if(aj.slideshowAuto){ao()}else{au()}ab.show()}}}}());function f(ao){if(!P){w=ao;W();c=M(w);L=0;if(aj.rel!=="nofollow"){c=M("."+r).filter(function(){var aq=M.data(this,x),ap;if(aq){ap=M(this).data("rel")||aq.rel||this.rel}return(ap===aj.rel)});L=c.index(w);if(L===-1){c=c.add(w);L=c.length-1}}T.css({opacity:parseFloat(aj.opacity),cursor:aj.overlayClose?"pointer":"auto",visibility:"visible"}).show();if(ah){al.add(T).removeClass(ah)}if(aj.className){al.add(T).addClass(aj.className)}ah=aj.className;if(aj.closeButton){z.html(aj.close).appendTo(d)}else{z.appendTo("<div/>")}if(!D){D=ac=true;al.css({visibility:"hidden",display:"block"});Q=J(ai,"LoadedContent","width:0; height:0; overflow:hidden");d.css({width:"",height:""}).append(Q);an=K.height()+S.height()+d.outerHeight(true)-d.height();m=p.width()+b.width()+d.outerWidth(true)-d.width();g=Q.outerHeight(true);a=Q.outerWidth(true);aj.w=R(aj.initialWidth,"x");aj.h=R(aj.initialHeight,"y");Q.css({width:"",height:aj.h});O.position();H(Z,aj.onOpen);B.add(o).hide();al.focus();if(aj.trapFocus){if(l.addEventListener){l.addEventListener("focus",ak,true);I.one(ag,function(){l.removeEventListener("focus",ak,true)})}}if(aj.returnFocus){I.one(ag,function(){M(w).focus()})}}Y()}}function q(){if(!al&&l.body){af=false;ae=M(aa);al=J(ai).attr({id:x,"class":M.support.opacity===false?V+"IE":"",role:"dialog",tabindex:"-1"}).hide();T=J(ai,"Overlay").hide();h=M([J(ai,"LoadingOverlay")[0],J(ai,"LoadingGraphic")[0]]);am=J(ai,"Wrapper");d=J(ai,"Content").append(o=J(ai,"Title"),u=J(ai,"Current"),U=M('<button type="button"/>').attr({id:V+"Previous"}),t=M('<button type="button"/>').attr({id:V+"Next"}),ab=J("button","Slideshow"),h);z=M('<button type="button"/>').attr({id:V+"Close"});am.append(J(ai).append(J(ai,"TopLeft"),K=J(ai,"TopCenter"),J(ai,"TopRight")),J(ai,false,"clear:left").append(p=J(ai,"MiddleLeft"),d,b=J(ai,"MiddleRight")),J(ai,false,"clear:left").append(J(ai,"BottomLeft"),S=J(ai,"BottomCenter"),J(ai,"BottomRight"))).find("div div").css({"float":"left"});k=J(ai,false,"position:absolute; width:9999px; visibility:hidden; display:none");B=t.add(U).add(u).add(ab);M(l.body).append(T,al.append(am,k))}}function j(){function ao(ap){if(!(ap.which>1||ap.shiftKey||ap.altKey||ap.metaKey||ap.ctrlKey)){ap.preventDefault();f(this)}}if(al){if(!af){af=true;t.click(function(){O.next()});U.click(function(){O.prev()});z.click(function(){O.close()});T.click(function(){if(aj.overlayClose){O.close()}});M(l).bind("keydown."+V,function(aq){var ap=aq.keyCode;if(D&&aj.escKey&&ap===27){aq.preventDefault();O.close()}if(D&&aj.arrowKey&&c[1]&&!aq.altKey){if(ap===37){aq.preventDefault();U.click()}else{if(ap===39){aq.preventDefault();t.click()}}}});if(M.isFunction(M.fn.on)){M(l).on("click."+V,"."+r,ao)}else{M("."+r).live("click."+V,ao)}}return true}return false}if(M.colorbox){return}M(q);O=M.fn[x]=M[x]=function(ao,aq){var ap=this;ao=ao||{};q();if(j()){if(M.isFunction(ap)){ap=M("<a/>");ao.open=true}else{if(!ap[0]){return ap}}if(aq){ao.onComplete=aq}ap.each(function(){M.data(this,x,M.extend({},M.data(this,x)||N,ao))}).addClass(r);if((M.isFunction(ao.open)&&ao.open.call(ap))||ao.open){f(ap[0])}}return ap};O.position=function(aq,at){var aw,ay=0,ap=0,au=al.offset(),ao,ar;ae.unbind("resize."+V);al.css({top:-90000,left:-90000});ao=ae.scrollTop();ar=ae.scrollLeft();if(aj.fixed){au.top-=ao;au.left-=ar;al.css({position:"fixed"})}else{ay=ao;ap=ar;al.css({position:"absolute"})}if(aj.right!==false){ap+=Math.max(ae.width()-aj.w-a-m-R(aj.right,"x"),0)}else{if(aj.left!==false){ap+=R(aj.left,"x")}else{ap+=Math.round(Math.max(ae.width()-aj.w-a-m,0)/2)}}if(aj.bottom!==false){ay+=Math.max(s()-aj.h-g-an-R(aj.bottom,"y"),0)}else{if(aj.top!==false){ay+=R(aj.top,"y")}else{ay+=Math.round(Math.max(s()-aj.h-g-an,0)/2)}}al.css({top:au.top,left:au.left,visibility:"visible"});am[0].style.width=am[0].style.height="9999px";function ax(){K[0].style.width=S[0].style.width=d[0].style.width=(parseInt(al[0].style.width,10)-m)+"px";d[0].style.height=p[0].style.height=b[0].style.height=(parseInt(al[0].style.height,10)-an)+"px"}aw={width:aj.w+a+m,height:aj.h+g+an,top:ay,left:ap};if(aq){var av=0;M.each(aw,function(az){if(aw[az]!==ad[az]){av=aq;return}});aq=av}ad=aw;if(!aq){al.css(aw)}al.dequeue().animate(aw,{duration:aq||0,complete:function(){ax();ac=false;am[0].style.width=(aj.w+a+m)+"px";am[0].style.height=(aj.h+g+an)+"px";if(aj.reposition){setTimeout(function(){ae.bind("resize."+V,O.position)},1)}if(at){at()}},step:ax})};O.resize=function(ap){var ao;if(D){ap=ap||{};if(ap.width){aj.w=R(ap.width,"x")-a-m}if(ap.innerWidth){aj.w=R(ap.innerWidth,"x")}Q.css({width:aj.w});if(ap.height){aj.h=R(ap.height,"y")-g-an}if(ap.innerHeight){aj.h=R(ap.innerHeight,"y")}if(!ap.innerHeight&&!ap.height){ao=Q.scrollTop();Q.css({height:"auto"});aj.h=Q.height()}Q.css({height:aj.h});if(ao){Q.scrollTop(ao)}O.position(aj.transition==="none"?0:aj.speed)}};O.prep=function(ap){if(!D){return}var at,aq=aj.transition==="none"?0:aj.speed;Q.empty().remove();Q=J(ai,"LoadedContent").append(ap);function ao(){aj.w=aj.w||Q.width();aj.w=aj.mw&&aj.mw<aj.w?aj.mw:aj.w;return aj.w}function ar(){aj.h=aj.h||Q.height();aj.h=aj.mh&&aj.mh<aj.h?aj.mh:aj.h;return aj.h}Q.hide().appendTo(k.show()).css({width:ao(),overflow:aj.scrolling?"auto":"hidden"}).css({height:ar()}).prependTo(d);k.hide();M(n).css({"float":"none"});at=function(){var ay=c.length,aw,ax="frameBorder",au="allowTransparency",av;if(!D){return}function az(){if(M.support.opacity===false){al[0].style.removeAttribute("filter")}}av=function(){clearTimeout(A);h.hide();H(X,aj.onComplete)};o.html(aj.title).add(Q).show();if(ay>1){if(typeof aj.current==="string"){u.html(aj.current.replace("{current}",L+1).replace("{total}",ay)).show()}t[(aj.loop||L<ay-1)?"show":"hide"]().html(aj.next);U[(aj.loop||L)?"show":"hide"]().html(aj.previous);y();if(aj.preloading){M.each([F(-1),F(1)],function(){var aD,aA,aB=c[this],aC=M.data(aB,x);if(aC&&aC.href){aD=aC.href;if(M.isFunction(aD)){aD=aD.call(aB)}}else{aD=M(aB).attr("href")}if(aD&&C(aC,aD)){aD=E(aC,aD);aA=l.createElement("img");aA.src=aD}})}}else{B.hide()}if(aj.iframe){aw=J("iframe")[0];if(ax in aw){aw[ax]=0}if(au in aw){aw[au]="true"}if(!aj.scrolling){aw.scrolling="no"}M(aw).attr({src:aj.href,name:(new Date()).getTime(),"class":V+"Iframe",allowFullScreen:true,webkitAllowFullScreen:true,mozallowfullscreen:true}).one("load",av).appendTo(Q);I.one(i,function(){aw.src="//about:blank"});if(aj.fastIframe){M(aw).trigger("load")}}else{av()}if(aj.transition==="fade"){al.fadeTo(aq,1,az)}else{az()}};if(aj.transition==="fade"){al.fadeTo(aq,0,function(){O.position(0,at)})}else{O.position(aq,at)}};function Y(){var aq,ar,ap=O.prep,ao,at=++G;ac=true;n=false;w=c[L];W();H(i);H(e,aj.onLoad);aj.h=aj.height?R(aj.height,"y")-g-an:aj.innerHeight&&R(aj.innerHeight,"y");aj.w=aj.width?R(aj.width,"x")-a-m:aj.innerWidth&&R(aj.innerWidth,"x");aj.mw=aj.w;aj.mh=aj.h;if(aj.maxWidth){aj.mw=R(aj.maxWidth,"x")-a-m;aj.mw=aj.w&&aj.w<aj.mw?aj.w:aj.mw}if(aj.maxHeight){aj.mh=R(aj.maxHeight,"y")-g-an;aj.mh=aj.h&&aj.h<aj.mh?aj.h:aj.mh}aq=aj.href;A=setTimeout(function(){h.show()},100);if(aj.inline){ao=J(ai).hide().insertBefore(M(aq)[0]);I.one(i,function(){ao.replaceWith(Q.children())});ap(M(aq))}else{if(aj.iframe){ap(" ")}else{if(aj.html){ap(aj.html)}else{if(C(aj,aq)){aq=E(aj,aq);n=l.createElement("img");M(n).addClass(V+"Photo").bind("error",function(){aj.title=false;ap(J(ai,"Error").html(aj.imgError))}).one("load",function(){var au;if(at!==G){return}M.each(["alt","longdesc","aria-describedby"],function(aw,ax){var av=M(w).attr(ax)||M(w).attr("data-"+ax);if(av){n.setAttribute(ax,av)}});if(aj.retinaImage&&aa.devicePixelRatio>1){n.height=n.height/aa.devicePixelRatio;n.width=n.width/aa.devicePixelRatio}if(aj.scalePhotos){ar=function(){n.height-=n.height*au;n.width-=n.width*au};if(aj.mw&&n.width>aj.mw){au=(n.width-aj.mw)/n.width;ar()}if(aj.mh&&n.height>aj.mh){au=(n.height-aj.mh)/n.height;ar()}}if(aj.h){n.style.marginTop=Math.max(aj.mh-n.height,0)/2+"px"}if(c[1]&&(aj.loop||c[L+1])){n.style.cursor="pointer";n.onclick=function(){O.next()}}n.style.width=n.width+"px";n.style.height=n.height+"px";setTimeout(function(){ap(n)},1)});setTimeout(function(){n.src=aq},1)}else{if(aq){k.load(aq,aj.data,function(av,au){if(at===G){ap(au==="error"?J(ai,"Error").html(aj.xhrError):M(this).contents())}})}}}}}}O.next=function(){if(!ac&&c[1]&&(aj.loop||c[L+1])){L=F(1);f(c[L])}};O.prev=function(){if(!ac&&c[1]&&(aj.loop||L)){L=F(-1);f(c[L])}};O.close=function(){if(D&&!P){P=true;D=false;H(v,aj.onCleanup);ae.unbind("."+V);T.fadeTo(aj.fadeOut||0,0);al.stop().fadeTo(aj.fadeOut||0,0,function(){al.add(T).css({opacity:1,cursor:"auto"}).hide();H(i);Q.empty().remove();setTimeout(function(){P=false;H(ag,aj.onClosed)},1)})}};O.remove=function(){if(!al){return}al.stop();M.colorbox.close();al.stop().remove();T.remove();P=false;al=null;M("."+r).removeData(x).removeClass(r);M(l).unbind("click."+V)};O.element=function(){return M(w)};O.settings=N}(jQuery,document,window));
(function(a){window.CarouselView=Backbone.View.extend({itemsPerSlide:3,animating:false,events:{"click .next":"next","click .previous":"previous"},initialize:function(){this.container=this.$(".three-up-holder");this.itemWidth=this.container.children().first().outerWidth(true)},next:function(b){var c,d;if(this.animating){return}c=this;d=this.$("li").slice(0,this.itemsPerSlide);d.clone().appendTo(this.container);this.animating=true;this.container.animate({left:"-="+(this.itemWidth*this.itemsPerSlide)},1000,function(){d.remove();c.container.css("left",0);c.animating=false});return false},previous:function(b){var c,d;if(this.animating){return}c=this;lastSlide=this.$("li").slice(-this.itemsPerSlide);lastSlide.clone().prependTo(this.container);this.container.css("left",(this.itemWidth*-this.itemsPerSlide));this.animating=true;this.container.animate({left:"+="+(this.itemWidth*this.itemsPerSlide)},1000,function(){lastSlide.remove();c.animating=false});return false}})})(jQuery);jQuery(function(a){new window.CarouselView({el:"section#carousel"})});
(function(b){var a={init:function(d){d=b.extend({},b.fn.hpLightbox.defaults,d);return this.each(function(){var e=b(this);e.data("hpLightboxData",{options:d});e.click(c.onClick.bind(e))})}};var c={onClick:function(d){b.colorbox({inline:true,href:"#lightbox",onClosed:function(){b("#lightbox .sbm_thanks").hide();b("#lightbox .social_modal_content").show()}});Recaptcha.create("6Ld6ZcISAAAAAIhkL02obhQNn6tdW47W-t-HcPAO","submission_recaptcha",{theme:"white",callback:Recaptcha.focus_response_field});return false}};b.fn.hpLightbox=function(d){if(a[d]){return a[d].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof d==="object"||!d){return a.init.apply(this,arguments)}else{b.error("Method "+d+" does not exist")}}};b.fn.hpLightbox.defaults={}})(jQuery);(function(a){a(function(){a("#submissions_send_correction").hpLightbox()})})(jQuery);
(function(e){var d=/radio|checkbox/i,a=/[^\[\]]+/g,c=/^[\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?$/;var b=function(f){if(typeof f=="number"){return true}if(typeof f!="string"){return false}return f.match(c)};e.fn.extend({formParams:function(f){if(this[0].nodeName.toLowerCase()=="form"&&this[0].elements){return jQuery(jQuery.makeArray(this[0].elements)).getParams(f)}return jQuery("input[name], textarea[name], select[name]",this[0]).getParams(f)},getParams:function(h){var f={},g;h=h===undefined?true:h;this.each(function(){var j=this,n=j.type&&j.type.toLowerCase();if((n=="submit")||!j.name){return}var p=j.name,o=e.data(j,"value")||e.fn.val.call([j]),k=d.test(j.type),l=p.match(a),q=!k||!!j.checked,r;if(h){if(b(o)){o=parseFloat(o)}else{if(o==="true"||o==="false"){o=Boolean(o)}}}g=f;for(var m=0;m<l.length-1;m++){if(!g[l[m]]){g[l[m]]={}}g=g[l[m]]}r=l[l.length-1];if(r in g&&n==="checkbox"){if(!e.isArray(g[r])){g[r]=g[r]===undefined?[]:[g[r]]}if(q){g[r].push(o)}}else{if(q||!g[r]){g[r]=q?o:undefined}}});return f}})})(jQuery);
(function(b){var a=Backbone.Model.extend({url:"/ajax/submissions/captcha.php",validate:function(e,d){var c={},f=/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;if(e.submission_name===""){c.submission_name="Name cannot be blank"}if(e.submission_email===""){c.submission_email="Email cannot be blank"}else{if(!f.test(e.submission_email)){c.submission_email="Not a valid email address"}}if(e.submission_error_kind===""){c.submission_error_kind="You must select the type of error that needs to be corrected"}if(e.submission_body==="Describe the error here (1,000 character limit)"){c.submission_body="You must send a description of the error"}if(!_.isEmpty(c)){return c}}});window.SubmitCorrectionView=Backbone.View.extend({events:{submit:"submitCorrection"},initialize:function(c){this.model=new a();this.model.on("invalid",this.onValidationFailure,this);this.model.on("change",this.onValidationSuccess,this)},submitCorrection:function(c){c.preventDefault();this.errorDisplays=this.errorDisplays||b("#submissions_modal .error");this.errorDisplays.removeClass("show");var d=this.$el.formParams();this.model.set(d,{validate:true})},onValidationFailure:function(c,d){console.log("Validation failed, here are the errors",d);_(d).each(function(g,e,f){b("."+e+".error").addClass("show").text(g)})},onValidationSuccess:function(c){b.ajax({url:"/ajax/submissions/captcha.php",data:this.model.toJSON(),dataType:"json"}).done(function(d){if(d.capthca_failed){alert("The captcha failed, try again")}else{b("#lightbox .social_modal_content").hide();b("#lightbox .sbm_thanks").show();b.colorbox.resize()}}).fail(function(){b.error("Failed to save data to the server")});Recaptcha.destroy();Recaptcha.create("6Ld6ZcISAAAAAIhkL02obhQNn6tdW47W-t-HcPAO","submission_recaptcha",{theme:"white",callback:Recaptcha.focus_response_field})}})})(jQuery);(function(a){a(function(){var c=a("#submissions_modal");var b=new window.SubmitCorrectionView({el:c})})})(jQuery);
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});var QuickSubscribeUser={user_connected:false,pop:function(c,b,g,j){var d=c.split("_");c=d[0];g=g||1;if(!j){j="subscribe_user_email"}if(jQuery("#"+j+" + .email_subscribe_check").prop("checked")){return false}if(jQuery("#"+j).val()==""){alert(__("Please enter your email address."));$(j).focus();return false}if(!HPUtil.checkEmail(jQuery("#"+j).val())){alert(__("Oops! Please enter your email address again."));$(j).focus();return false}if(jQuery("#newsletter-choices").length==0){HuffConnect.showLoader()}var i=jQuery("#"+j).val();var a="/users/favorite-bloggers/get_subscribe_user.php";var f=b+"=1&daily=1&fid="+b+"&vertical="+c+"&ajax=1&update=1&mode=add";if(g){var e={post_data:f+"&third_party_user=1",url:a};f+="&email="+encodeURIComponent(i);jQuery.ajax({url:a,type:"POST",data:f,success:function(m,l,k){QuickSubscribeUser.Success(m,l,k,e);return},error:QuickSubscribeUser.Fail})}else{jQuery("#huff_modal_common_inner").html("<iframe id='alert_email_iframe' frameborder=no src='http://www.huffingtonpost.com/users/favorite-bloggers/get_subscribe_user.php?email="+encodeURIComponent(i)+"&iframe=1&fid="+b+"' style='width:544px; height:110px; visibility:hidden; overflow:hidden;' onload='QuickSubscribeUser.setIframeSize()'></iframe>")}return false},email_validate:function(c,e,b,a){var d=c.split("_");c=d[0];b=b||1;if(!a){a="subscribe_user_email"}if(jQuery("#"+a+" + .email_subscribe_check").prop("checked")){return false}if(jQuery("#"+a).val()==""){alert(__("Please enter your email address."));$(a).focus();return false}if(!HPUtil.checkEmail(jQuery("#"+a).val())){alert(__("Oops! Please enter your email address again."));$(a).focus();return false}return true},checkAll:function(){var b=false;if($("check_all").checked==true){b=true}var c=$("unsub_form");for(var a=0;a<c.length;a++){if(c.elements[a].type=="checkbox"){c.elements[a].checked=b}}},checkInput:function(a){if(a.value==__("Enter email address")){a.value="";jQuery(a).removeClass("color_ACACAC")}},Success:function(e,d,c,f){var a=HuffConnect.Login;if(c.status!=200){if(QuickSubscribeUser.user_connected){a.onLoginSuccess()}return}var b=function(){};if(QuickSubscribeUser.user_connected){b=function(){a.onLoginSuccess()}}if(jQuery("#newsletter-choices").length!=0){jQuery("#newsletter-choices").html(e)}else{HuffConnect.socialModal({inner_html:e,onclose:b})}return},Fail:function(){HuffConnect.hideModal();var a=HuffConnect.Login;if(QuickSubscribeUser.user_connected){a.onLoginSuccess()}return},Subscribe:function(b){if(jQuery("#newsletter-choices").length!=0||jQuery("#subscribe_alerts_div").length!=0){jQuery("#subscribe_loader").css("display","none")}else{jQuery("#subscribe_loader").css("display","block")}var g=jQuery("#unsub_form").get(0);var d=new Array();var a=0;for(var c=0;c<g.length;c++){if(g.elements[c].type=="checkbox"){d[a]=g.elements[c].name;a+=1;if(g.elements[c].checked==true){g.elements[c].value=1}else{g.elements[c].value=0}}}var f="update=1&email="+encodeURIComponent(b);for(c=0;c<d.length;c++){var e=$(d[c]+"");if(e!=null){f+="&"+escape(e.name)+"="+escape(e.value)}}jQuery.ajax({url:"/subscription/get_email_alerts.php",type:"POST",data:f,dataType:"html",success:QuickSubscribeUser.SubscribeSuccessEmail,error:QuickSubscribeUser.SubscribeFailEmail});return false},SubscribeSuccessEmail:function(e,d,c){if(c.status!=200){return}var b=jQuery("#subscribe_alerts_div");var a=e+"<div class='center' style='text-align:left;padding-left:159px;padding-top:10px;background-color:#FAFAFA;border-bottom:1px solid #EDEDED;border-top:1px solid #EDEDED;'><h3 style='font-size:18px;padding-bottom:5px;'>"+__("Thank You")+"</h3><p class='note padding_5'>"+__("Your subscription settings have been updated")+"</p></div><p class='privacy' style='margin-top:10px;'><a href='/privacy'>"+__("Privacy Policy")+"</a></p>";if(b.length){jQuery("#subscribe_loader").css("display","none");b.html(a);jQuery("#sail_response").hide();jQuery("#unsub_form").hide()}else{if(QuickSubscribeUser.user_connected){HCL.onLoginSuccess()}HuffConnect.hideModal()}return},SubscribeFailEmail:function(){if(QuickSubscribeUser.user_connected){HCL.onLoginSuccess()}HPError.e()},setIframeSize:function(){h=document.getElementById("alert_email_iframe").myheight||770;try{document.getElementById("alert_email_iframe").style.height=document.getElementById("alert_email_iframe").contentDocument.body.clientHeight+"px"}catch(a){document.getElementById("alert_email_iframe").style.height=h+"px"}document.getElementById("alert_email_iframe").style.visibility="visible"},pop2:function(a,d){d=d||"";var c="";var e="f32=1&"+d+"=1";var b="/users/alerts/signup.php?"+e;HuffConnect.socialModal({url:b,modal_head_image:"",modal_subhead_image:"",width:595})},getAlerts:function(b,c,a,d){d=d||false;if(b.email.value==""){alert(__("Please enter your email address."));b.email.focus();return false}if(!(b.email&&HPUtil.checkEmail(b.email.value))){alert(__("Please specify a valid e-mail."));b.email.focus();return false}if(d){HuffConnect.showLoader()}post_data="email="+encodeURIComponent(b.email.value);if(c){post_data+="&hide_close_button=1"}if(a){post_data+="&daily_brief=1"}YAHOO.util.Connect.asyncRequest("POST","/subscription/get_email_alerts.php",{success:QuickSubscribeUser.SubscribeSuccess,failure:QuickSubscribeUser.SubscribeFail},post_data)},SubscribeSuccess:function(a){HuffConnect.socialModal({inner_html:a.responseText})},SubscribeFail:function(a){HuffConnect.hideModal();HPError.e()}};huff.unit("tmp/quick_subscribe_user",function(a){a(QuickSubscribeUser)});
(function(a){window.NewsLetterView=Backbone.View.extend({events:{click:"signUp"},signUp:function(b){var c=a("#newsletter-submit").data("vertical");var d=a("#newsletter-email").val();if(a("#newsletter-email + .email_subscribe_check").prop("checked")){return false}var e={email:d,vertical:c,"vertical-brief":1,"daily-brief":0};a.ajax({url:"/ajax/newsletter/rightrail/subscribe.php",type:"POST",data:e,dataType:"html",success:function(){QuickSubscribeUser.pop(c+"_form","",null,"newsletter-email")},failure:function(){alert(__("An error occurred, please try in few minutes")+".")}});return false}})})(jQuery);(function(a){a(function(){var b=new window.NewsLetterView({el:"#newsletter-submit"})})})(jQuery);
var Constant={GET_LISTS_TWEETS_URL:"/ajax/twitter/list_tweets.php",GET_TWEETS_URL:"http://search.twitter.com/search.json",GET_USER_TIMELINES:"/twitter/get_user_timelines.php",FRIENDSHIP_EXISTS_URL:"/twitter/friendship_exists.php",RETWEET_TWEET_URL:"/twitter/retweet_tweet.php",FOLLOW_LIST_URL:"/twitter/ajax_follow_tlist.php",FRIENDSHIP_URL:"/twitter/friendship.php",PUBLIC_INFO_URL:"/twitter/public_info.php",IS_USER_LISTS_SUBSCRIBER_URL:"/twitter/is_user_lists_subscriber.php"};var HPTwitter={lists:[],getListsTweets:function(e,g,h,c,d){if(!e||!e.length){return}if(typeof(e)=="string"){e=[e]}if(!g){g={}}var a=e.length;for(var b=a;b--;){if(!g[e[b]]){g[e[b]]={}}g[e[b]].since_id=g[e[b]].since_id||1}var f="lists="+JSON.stringify(g);if(d){f+=d}this._sendRequest("GET",Constant.GET_LISTS_TWEETS_URL,f,h,c)},followList:function(d,c,a,b){this._sendFollowUnfollowRequest(true,d,c,a,b)},unfollowList:function(d,c,a,b){this._sendFollowUnfollowRequest(false,d,c,a,b)},getTweets:function(d,e){d=d||"";var b=[];if(e){if(e.lang){b.push("lang="+e.lang)}if(e.callback){b.push("callback="+e.callback)}if(e.locale){b.push("locale="+e.locale)}if(e.rpp){b.push("rpp="+e.rpp)}if(e.page){b.push("page="+e.page)}if(e.since_id){b.push("since_id="+e.since_id)}if(e.geocode){b.push("geocode="+e.geocode)}if(e.show_user){b.push("show_user="+e.show_user)}}var c="?q="+escape(d);if(b.length){c+="&"+b.join("&")}var a=Constant.GET_TWEETS_URL+c;HuffPoUtil.loadAndRun(a)},retweetTweet:function(a,c,d){if(!a){d();return false}var b="tweet_id="+a;C.asyncRequest("POST",Constant.RETWEET_TWEET_URL,{success:c,failure:d},b);return true},favorTweet:function(a,b,c){if(!a){c();return false}},getUserTimelines:function(d,e,f,b){d=d||"";e=parseInt(e,10);var a=isNaN(e)?0:e;var c="screen_name="+d+"&chunk_size="+a;this._sendRequest("GET",Constant.GET_USER_TIMELINES,c,f,b)},_sendFollowUnfollowRequest:function(c,f,e,a,b){var d="list="+f+"&action="+(c?"post":"delete");this._sendRequest("GET",Constant.FOLLOW_LIST_URL,d,e,b,a,false)},getFollowStatus:function(b,d,a){if(!b){return}var c="user_b="+b;this._sendRequest("GET",Constant.FRIENDSHIP_EXISTS_URL,c,d,a,undefined,false)},createFriendship:function(d,e,b,a){if(!d){return}var c="id="+d+"&action=create";this._sendRequest("POST",Constant.FRIENDSHIP_URL,c,e,b,a)},destroyFriendship:function(d,e,b,a){if(!d){return}var c="id="+d+"&action=destroy";this._sendRequest("POST",Constant.FRIENDSHIP_URL,c,e,b,a)},getPublicInfo:function(d,e,b,a){if(!d){return}var c="id="+d;this._sendRequest("GET",Constant.PUBLIC_INFO_URL,c,e,b,a)},isUserListsSubscriber:function(a,d,b){if(!a){return}if(!YAHOO.lang.isArray(a)){a=[a]}var c="lists="+JSON.stringify(a);this._sendRequest("POST",Constant.IS_USER_LISTS_SUBSCRIBER_URL,c,d,b,undefined,false)},_sendRequest:function(d,a,g,h,c,j,e){if(!d){d=d.toUpperCase()}var i=c||this;var b;var f={success:function(n){var k=n.argument[0];var m=n.argument[1];var l=[n.responseText];if(m){l.push(m)}if(typeof(k)==="function"){k.apply(i,l)}},argument:[h,j],scope:i};if(d=="POST"){b=g}else{if(d=="GET"){a=a+"?"+g;if(e===false||e===true){f.cache=e}}}C.asyncRequest(d,a,f,b)}};HPTwitter.Widgets={};(function(a,b){a.Widgets.activateFollowButton=function(d){var c=b("#"+d.node_id+" .container");var e=b("#frame-"+d.node_id);e.html('<iframe allowtransparency="true" frameborder="0" scrolling="no" src="http://platform.twitter.com/widgets/follow_button.html?'+d.query+'" '+d.style+"></iframe>");e.find("iframe").bind("load",function(){b(this).parent().removeClass("hidden");c.remove()})};(function(i){if(window.__twitterIntentHandler){return}var g=/twitter\.com(\:\d{2,4})?\/intent\/(\w+)/,j="scrollbars=yes,resizable=yes,toolbar=no,location=yes",h=550,d=520,f=screen.height,e=screen.width;var c=function(p){var o=b(p.target),k,n,l;while(o.get(0)&&o.get(0).nodeName.toLowerCase()!=="a"){o=o.parent()}if(o.get(0)&&o.get(0).nodeName.toLowerCase()==="a"&&o.attr("href")!==undefined&&o.offsetParent().attr("data-type")!="twitter"){k=o.attr("href").match(g);if(k){n=Math.round((e/2)-(h/2));l=0;if(f>d){l=Math.round((f/2)-(d/2))}window.open(o.attr("href"),"intent",j+",width="+h+",height="+d+",left="+n+",top="+l);p.preventDefault()}}};i.click(c);window.__twitterIntentHandler=true})(b(document))})(HPTwitter,jQuery);
jQuery(function(b){var a=b(".logged-in");var c=a.find("menu");var d=a.find(".username");d.click(function(e){a.toggleClass("show")});a.mouseleave(function(e){a.removeClass("show")})});
var ClickTracker={debug:false,disabled:false,trackerImg:{},blogRecentRanking:0,trackMe:function(c){if(ClickTracker.disabled){return 1}if(ClickTracker.debug){c.preventDefault()}var a;var b=this;for(i=0;i<6;i++){if(b.id&&b.id.match(/(entry|blog|recent|href)_\d+/)){a=b;break}if(b.parentNode){b=b.parentNode}}this.trackerImg=new Image();this.trackerImg.onload=function(){HPTrack.navigateAfterTrack(c,this.href,this.target,0)};if(a){var d=a.id.match(/href_(\d+)/);var e=(d)?TrackingData["entry_"+d[1]]:TrackingData[a.id];if(!e){e={type:"popular",id:this.href.match(/(\d+).html/).pop(),blog_id:this.href.match(/_n_/)?2:3}}e.url=escape(this.href);if(!e.type){if(this.innerHTML.match(/read post/i)){e.type="read%20post"}else{if(this.innerHTML.match(/quick read/i)){e.type="in%20brief"}else{if(this.innerHTML.match(/Related/)){e.type="related"}else{if(this.innerHTML.match(/Comment/)){e.type="comments"}else{if(this.innerHTML.match(/bio/i)){e.type="bio"}else{if(Dom.hasClass(this.parentNode,"tag_wrap")){e.type="tag"}else{if(this.parentNode.className=="author"||this.parentNode.className=="byline"){e.type="author"}else{if(e.blog_id==2&&this.firstChild&&this.firstChild.tagName=="IMG"){e.type="image"}else{if(e.blog_id==2){e.type="headline"}else{if(e.blog_id==3&&this.parentNode.tagName&&this.parentNode.tagName=="H2"){e.type="headline"}else{if(e.blog_id==3&&this.parentNode.tagName&&this.parentNode.tagName=="P"){e.type="entry%20body"}else{if(e.zone_id==30){e.type="from-partners"}else{e.type="other"}}}}}}}}}}}}}e.sample=ClickTracker.sample;this.trackerImg.src="/clicktracking/front.php?"+JSON.stringify(e)}else{if(!Dom.hasClass(document.body,"big_news_class")){b=this;for(i=0;i<6;i++){if(b.id&&!Dom.hasClass(b,"ignore_id")&&!b.id.match(/yuievtautoid/)){a=b;break}b=b.parentNode}var e={url:"",type:"",id:-1,blog_id:-1,rank:-1,zone:-1,sample:ClickTracker.sample,vertical:ClickTracker.vertical_id};e.url=escape(this.href);a&&(e.type=escape(a.id));this.trackerImg.src="/clicktracking/front.php?"+JSON.stringify(e)}}c.preventDefault();if(ClickTracker.debug){console.log(this.trackerImg.src);console.log(e)}else{HPTrack.navigateAfterTrack(c,this.href,this.target,400)}},trackTicker:function(a){if(ClickTracker.trackClicks){if(!(url_chunks=a.match(/_([nb])_(\d+)\.html/))){window.location.href=a}blog_id=(url_chunks[1]=="n")?2:3;var b={url:escape(a),type:"ticker_flash",id:-1,blog_id:blog_id,rank:-1,zone:-1,vertical:ClickTracker.vertical_id};this.trackerImg=new Image();this.trackerImg.src="/clicktracking/front.php?"+JSON.stringify(b)}if(Dom.hasClass(document.body,"frontpage")){if(Dom.hasClass(document.body,"homepage")){ticker_area="front"}else{ticker_area=document.body.id}}else{ticker_area="secondary"}HPTrack.trackPageview("/t/a/ticker/"+ticker_area);window.location.href=a},trackComment:function(b,a){this.trackerImg=new Image();this.trackerImg.src="/clicktracking/best-of.php?comment_id="+b+"&entry_id="+a},deprecated_flagComment:function(b,a){this.trackerImg=new Image();this.trackerImg.src="/huff-send-comment.cgi?id="+b+"&entry_id="+a;Dom.addClass("flag_"+b,"flagged");$("flag_"+b).innerHTML="Flagged"},flagComment:function(c,a,b){var e=$("flag_"+c);if(e.innerHTML.indexOf("Flagged")==-1){this.trackerImg=new Image();this.trackerImg.src="/include/flagComment.php?type=abuse&blog_id="+b+"&cmt_id="+c+"&entry_id="+a;var d=parseInt(/\((\d+)\)/.exec(e.innerHTML)[1])+1;e.innerHTML="Flagged ("+d+")"}},favComment:function(c,a,b){var e=$("best_"+c);if(e.innerHTML.indexOf("Marked")==-1){this.trackerImg=new Image();this.trackerImg.src="/include/flagComment.php?type=best&blog_id="+b+"&cmt_id="+c+"&entry_id="+a;var d=parseInt(/\((\d+)\)/.exec(e.innerHTML)[1])+1;e.innerHTML="Marked as favorite ("+d+")";SNProject.track(c,"comment_favored",a)}},initRelatedTracker:function(){lists=Dom.getElementsByClassName("relatedposts","ul");for(var a=0;a<lists.length;a++){Dom.batch(lists[a].getElementsByTagName("a"),function(b){b.href="http://www.huffingtonpost.com/include/lib/RelatedTracker.php?type=related&utm_hp_ref="+document.URL+"&dest="+b.href})}lists=Dom.getElementsByClassName("topposts","ul");for(var a=0;a<lists.length;a++){Dom.batch(lists[a].getElementsByTagName("a"),function(b){b.href="http://www.huffingtonpost.com/include/lib/RelatedTracker.php?type=top&utm_hp_ref="+document.URL+"&dest="+b.href})}},init:function(){var a=ClickTracker.type=="from-partners"?"#partner_box a":"a";jQuery(document).delegate(a,"click",ClickTracker.trackMe)}};huff.unit("tmp/click_tracker",function(a){a(ClickTracker)});
(function(b){var a={maxSimultaneousImgLoads:12,currentLoadingCount:0,imagesToLoad:[],currentLoadingImages:{},init:function(){b(document).ready(b.proxy(this.initOnDomReady,this));b(window).load(b.proxy(this.initOnPageLoad,this))},initOnDomReady:function(){this.parseAsyncImgs(b("body"))},initOnPageLoad:function(){this.loadAsyncImgs()},parseAsyncImgs:function(d){var c=this;d.find(".async-img-load").each(function(){c.imagesToLoad.push(b(this))})},loadAsyncImgs:function(){var f,e,c,d=this,g=Math.min(this.maxSimultaneousImgLoads-this.currentLoadingCount,this.imagesToLoad.length);for(i=0;i<g;i++){f=this.imagesToLoad.shift();f.removeClass("async-img-load").css("opacity",0);c=f.attr("data-img-path");this.currentLoadingImages[c]=f;this.currentLoadingCount++;b("<img>").load(function(){e=d.currentLoadingImages[b(this).attr("src")];delete d.currentLoadingImages[b(this).attr("src")];if(e.is("img")){e.attr("src",b(this).attr("src"))}else{e.css("background-image","url("+b(this).attr("src")+")")}e.animate({opacity:1},400);d.currentLoadingCount--;if(d.imagesToLoad.length>0){var h=d;setTimeout(function(){h.loadAsyncImgs()},0)}}).error(function(){console.log("image_loader.js :: Image Load Error");d.currentLoadingCount--;if(d.imagesToLoad.length>0){var h=d;setTimeout(function(){h.loadAsyncImgs()},0)}}).attr("src",f.attr("data-img-path"))}}};a.init()})(jQuery);
(function(b){var a={init:function(c){c=b.extend({},b.fn.captioner.defaults,c);return this.each(function(){var f=b(this);var e=f.find(c.imageSelector);var d=f.find(c.captionSelector);f.data("captionerData",{options:c});e.mouseenter(function(g){if(d.is(g.relatedTarget)){return false}d.fadeIn(100)});e.mouseleave(function(g){if(d.is(g.relatedTarget)){return false}d.fadeOut(100)});d.mouseleave(function(g){if(e.is(g.relatedTarget)){return false}d.fadeOut(100)})})}};b.fn.captioner=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist")}}};b.fn.captioner.defaults={imageSelector:"img"}})(jQuery);jQuery(function(a){a(".embedded-image").captioner({imageSelector:"img",captionSelector:".large-image-caption"});a(".embedded-image").captioner({imageSelector:"img",captionSelector:".rightrail-large-image-caption"})});
var ConnectOverview={config:null,current_page:null,interval_id:null,auto_paging_timeout_id:null,showBenefits:function(c){HuffConnect.hideModal();var a=c.provider||null;var b="";this.configureModal(a);this.clearIntervals();return},configureModal:function(e,c){var d=_("/images/social/benefits/")+e+"/";huff.use("user","connect/auth","connect/modal");switch(e){case"facebook":var a={type:"facebook",text:_("Connect to the Huffington Post through Facebook"),slides:[d+"facebook_benefit1.jpg",d+"facebook_benefit2.jpg",d+"facebook_benefit3.jpg"]};break;case"twitter":var a={type:"twitter",text:_("Connect to the Huffington Post through Twitter"),slides:[d+"twitter_benefit1.jpg",d+"twitter_benefit2.jpg",d+"twitter_benefit3.jpg",d+"twitter_benefit4.jpg"]};break;default:HPConnect.Login();return;break}return;if(a){this.config=a;var b=this.getHtml(c);this.showLightbox(b)}return},showLightbox:function(c){c='<div class="social_benefit_modal">'+c+"</div>";var b=function(){ConnectOverview.auto_paging_timeout_id=setTimeout(function(){ConnectOverview.startAutoPaging()},5000)};var d=false;var a="fixed";HuffConnect.socialModal({inner_html:c,width:680,onclose:d,onshow:b,position:a});return},closeLightbox:function(){HuffConnect.hideModal()},showPage:function(e){for(var b=0,d=this.config.slides.length;b<d;b++){var c=jQuery("#benefit_page_"+b);var a=jQuery("#benefit_slide_"+b);if(b==e){a.removeClass("display_none");c.removeClass("active_page_link").addClass("passive_page_link").unbind("click");this.current_page=e}else{a.addClass("display_none");c.removeClass("passive_page_link").addClass("active_page_link").unbind("click").click({page:b},function(f){ConnectOverview.showPage(f.data.page)})}}return},prevPage:function(){var a=this.current_page-1;if(a<0){a=(this.config.slides.length-1)}this.showPage(a)},nextPage:function(){var a=this.current_page+1;if(a>=this.config.slides.length){a=0}this.showPage(a)},autoPaging:function(){this.nextPage();return},getHtml:function(j){var b=this.config;var e="";var f="";var c="";var a=1;var h=_("/images/social/benefits/")+b.type+"_button_big.png";c+='<div class="float_left benefit_bg benft_left_arr" onclick="ConnectOverview.prevPage();"></div>';for(var d=0;d<b.slides.length;d++){var g=(d===0)?"":"display_none";c+='<div class="'+g+' single_slide float_left" id="benefit_slide_'+d+'"><img id="benefit_img_src_'+d+'" src="'+b.slides[d]+'" /></div>';f+='<span class="benefit_pages '+(d==0?"passive":"active")+'_page_link" id="benefit_page_'+d+'">'+a+"</span>";this.current_page=d;a++}c+='<div class="float_left benefit_bg benft_right_arr" onclick="ConnectOverview.nextPage();"></div>';c+='<div class="clear" style="clear:both;"></div>';e+='<div class="social_benefits social_benefits_lightbox" id="benefits_lb">';e+='<div class="social_link_text center">'+b.text+"</div>";e+='<div class="center"><a href="javascript:void(0);" onclick="linkSocialAccount.checkLoginStatus(\''+b.type+'\')"><img src="'+h+'" /></a></div>';e+='<div class="benefit_paging" style="text-align:right">'+f+'<div class="clear"></div></div>';e+='<div class="benefit_slides" id="slideshow_div">'+c+"</div>";e+='<div class="clear"></div><br class="clear" />';e+="</div>";return e},startAutoPaging:function(){this.interval_id=self.setInterval(function(){ConnectOverview.autoPaging()},5000)},clearIntervals:function(b){var a=b||this;if(a.auto_paging_timeout_id){clearTimeout(a.auto_paging_timeout_id)}if(a.interval_id){clearInterval(a.interval_id)}},showQuickModal:function(e){var c=e.charAt(0).toUpperCase()+e.substr(1,e.length-1);var b="";var a="";var d="";switch(e){case"facebook":a=_("/images/fb-large.gif");d='<span class="fb-large">'+_("Sign in with Facebook")+"</span>";break;case"twitter":a=_("/images/Sign-in-with-Twitter-darker.png");d='<span class="twitter-darker">'+_("Connect with Twitter")+"</span>";break;default:return}b+='<div style="font-size: 14pt; font-weight: bold">'+sprintf(_("Do you want to connect to HuffPost using %s"),c)+"?</div>";b+='<a class="login_light_link" ';b+='href="/social/join.html?autojoin=1" ';b+="onclick=\"linkSocialAccount.checkLoginStatus('"+e+"'); return false;\"";b+='target="_blank">';b+=d;b+="</a>";HuffConnect.socialModal({inner_html:b,modal_subhead_image:""});return}};
jQuery(document).ready(function(){total=jQuery(".infographic-embed").length;if(total>0){jQuery(".infographic-embed").each(function(){var d=encodeURIComponent(jQuery(location).attr("href"));var c=encodeURIComponent(jQuery(this).attr("src"));if(jQuery(this).attr("alt")){var e=jQuery(this).attr("alt")}else{var e=""}var b="http://www.pinterest.com/pin/create/button/?url="+d+"&media="+c+"&description="+e+"";jQuery(this).before("<a href='"+b+"' data-pin-do='buttonPin' data-pin-config='above' target='_blank' data-pin-hover='true' class='pinitshareimage pinhidden'><img src='http://s.huffpost.com/images/social/pin_icon_onhover.png' /></a>");jQuery(this).hover(function(){jQuery(this).prev().css("display","block")},function(){jQuery(this).prev().css("display","none")});jQuery(this).append("<div class='embed-button hidden'></div>");jQuery(".embed-button").css({background:"url(/images/v/icons/embed-button-with-label.png)","background-repeat":"no-repeat","background-position":"left bottom"});jQuery(this).hover(function(){jQuery(".embed-button",this).removeClass("hidden")},function(){if((jQuery(".image-detail").length==0)&&(jQuery(".iframe-code").length==0)){jQuery(".embed-button",this).addClass("hidden")}});var a=jQuery("img",this).attr("src");jQuery(".embed-button",this).click(function(){var f=jQuery('<img src="'+a+'"/>').load(function(){var h=this.width;var g=this.height;if((jQuery(".image-detail").length==0)&&(jQuery(".iframe-code").length==0)){jQuery(".embed-button").append("<div class='image-detail'><span>Width : <input id='inputWidth' name='imgwidthchange' type='number' value="+h+" /></span><span>Height : <input type='number' name='imgheightchange' id='inputHeight' value="+g+" /></span></div>");jQuery(".embed-button").append("<input type='text' id='widthChange' value='' />");jQuery(".infographic-embed").append('<div class="fakebackground"><div class="closebackground">&nbsp;</div></div>');h=jQuery("#inputWidth").val();originalWidth=jQuery("#inputWidth").val();g=jQuery("#inputHeight").val();var i=window.location;jQuery("input[name=imgwidthchange]").change(function(){jQuery("#widthChange").val(jQuery(this).val());h=jQuery("#widthChange").val();g=Math.round((parseInt(g)/parseInt(originalWidth)*parseInt(h)));jQuery("input[name=imgheightchange]").val(g);var j="";if(jQuery(".iframe-code-text").length!=0){jQuery(".iframe-code-text").remove()}if(jQuery(".iframe-code").length!=0){jQuery(".iframe-code").remove()}j="<iframe id='huffpost-image-embed' style='overflow:hidden;' width='"+h+"' height='"+g+"' src='http://www.huffingtonpost.com/include/image_embed.php?image_file="+a+"&entry_url="+i+"&width="+h+"&height="+g+"' frameborder='0' scrolling='no'></iframe>";jQuery(".embed-button").append("<div class='iframe-code'><textarea class='iframe-code-text' readonly='readonly' onclick='this.focus();this.select()'></textarea></div>");jQuery(".iframe-code-text").val(j)}).change()}})});jQuery(".closebackground",this).live("click",function(){if(jQuery(".iframe-code-text").length!=0){jQuery(".iframe-code-text").remove()}if(jQuery(".iframe-code").length!=0){jQuery(".iframe-code").remove()}if(jQuery(".fakebackground").length!=0){jQuery(".fakebackground").remove()}if(jQuery(".image-detail").length!=0){jQuery(".image-detail").remove()}})})}});
var swfobject=function(){var aq="undefined",aD="object",ab="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",aE="application/x-shockwave-flash",ac="SWFObjectExprInst",ax="onreadystatechange",af=window,aL=document,aB=navigator,aa=false,Z=[aN],aG=[],ag=[],al=[],aJ,ad,ap,at,ak=false,aU=false,aH,an,aI=true,ah=function(){var a=typeof aL.getElementById!=aq&&typeof aL.getElementsByTagName!=aq&&typeof aL.createElement!=aq,e=aB.userAgent.toLowerCase(),c=aB.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(e),j=c?/mac/.test(c):/mac/.test(e),g=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,d=!+"\v1",f=[0,0,0],k=null;if(typeof aB.plugins!=aq&&typeof aB.plugins[ab]==aD){k=aB.plugins[ab].description;if(k&&!(typeof aB.mimeTypes!=aq&&aB.mimeTypes[aE]&&!aB.mimeTypes[aE].enabledPlugin)){aa=true;d=false;k=k.replace(/^.*\s+(\S+\s+\S+$)/,"$1");f[0]=parseInt(k.replace(/^(.*)\..*$/,"$1"),10);f[1]=parseInt(k.replace(/^.*\.(.*)\s.*$/,"$1"),10);f[2]=/[a-zA-Z]/.test(k)?parseInt(k.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof af.ActiveXObject!=aq){try{var i=new ActiveXObject(X);if(i){k=i.GetVariable("$version");if(k){d=true;k=k.split(" ")[1].split(",");f=[parseInt(k[0],10),parseInt(k[1],10),parseInt(k[2],10)]}}}catch(b){}}}return{w3:a,pv:f,wk:g,ie:d,win:h,mac:j}}(),aK=function(){if(!ah.w3){return}if((typeof aL.readyState!=aq&&aL.readyState=="complete")||(typeof aL.readyState==aq&&(aL.getElementsByTagName("body")[0]||aL.body))){aP()}if(!ak){if(typeof aL.addEventListener!=aq){aL.addEventListener("DOMContentLoaded",aP,false)}if(ah.ie&&ah.win){aL.attachEvent(ax,function(){if(aL.readyState=="complete"){aL.detachEvent(ax,arguments.callee);aP()}});if(af==top){(function(){if(ak){return}try{aL.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}aP()})()}}if(ah.wk){(function(){if(ak){return}if(!/loaded|complete/.test(aL.readyState)){setTimeout(arguments.callee,0);return}aP()})()}aC(aP)}}();function aP(){if(ak){return}try{var b=aL.getElementsByTagName("body")[0].appendChild(ar("span"));b.parentNode.removeChild(b)}catch(a){return}ak=true;var d=Z.length;for(var c=0;c<d;c++){Z[c]()}}function aj(a){if(ak){a()}else{Z[Z.length]=a}}function aC(a){if(typeof af.addEventListener!=aq){af.addEventListener("load",a,false)}else{if(typeof aL.addEventListener!=aq){aL.addEventListener("load",a,false)}else{if(typeof af.attachEvent!=aq){aM(af,"onload",a)}else{if(typeof af.onload=="function"){var b=af.onload;af.onload=function(){b();a()}}else{af.onload=a}}}}}function aN(){if(aa){Y()}else{am()}}function Y(){var d=aL.getElementsByTagName("body")[0];var b=ar(aD);b.setAttribute("type",aE);var a=d.appendChild(b);if(a){var c=0;(function(){if(typeof a.GetVariable!=aq){var e=a.GetVariable("$version");if(e){e=e.split(" ")[1].split(",");ah.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)]}}else{if(c<10){c++;setTimeout(arguments.callee,10);return}}d.removeChild(b);a=null;am()})()}else{am()}}function am(){var g=aG.length;if(g>0){for(var h=0;h<g;h++){var c=aG[h].id;var l=aG[h].callbackFn;var a={success:false,id:c};if(ah.pv[0]>0){var i=aS(c);if(i){if(ao(aG[h].swfVersion)&&!(ah.wk&&ah.wk<312)){ay(c,true);if(l){a.success=true;a.ref=av(c);l(a)}}else{if(aG[h].expressInstall&&au()){var e={};e.data=aG[h].expressInstall;e.width=i.getAttribute("width")||"0";e.height=i.getAttribute("height")||"0";if(i.getAttribute("class")){e.styleclass=i.getAttribute("class")}if(i.getAttribute("align")){e.align=i.getAttribute("align")}var f={};var d=i.getElementsByTagName("param");var k=d.length;for(var j=0;j<k;j++){if(d[j].getAttribute("name").toLowerCase()!="movie"){f[d[j].getAttribute("name")]=d[j].getAttribute("value")}}ae(e,f,c,l)}else{aF(i);if(l){l(a)}}}}}else{ay(c,true);if(l){var b=av(c);if(b&&typeof b.SetVariable!=aq){a.success=true;a.ref=b}l(a)}}}}}function av(b){var d=null;var c=aS(b);if(c&&c.nodeName=="OBJECT"){if(typeof c.SetVariable!=aq){d=c}else{var a=c.getElementsByTagName(aD)[0];if(a){d=a}}}return d}function au(){return !aU&&ao("6.0.65")&&(ah.win||ah.mac)&&!(ah.wk&&ah.wk<312)}function ae(f,d,h,e){aU=true;ap=e||null;at={success:false,id:h};var a=aS(h);if(a){if(a.nodeName=="OBJECT"){aJ=aO(a);ad=null}else{aJ=a;ad=h}f.id=ac;if(typeof f.width==aq||(!/%$/.test(f.width)&&parseInt(f.width,10)<310)){f.width="310"}if(typeof f.height==aq||(!/%$/.test(f.height)&&parseInt(f.height,10)<137)){f.height="137"}aL.title=aL.title.slice(0,47)+" - Flash Player Installation";var b=ah.ie&&ah.win?"ActiveX":"PlugIn",c="MMredirectURL="+af.location.toString().replace(/&/g,"%26")+"&MMplayerType="+b+"&MMdoctitle="+aL.title;if(typeof d.flashvars!=aq){d.flashvars+="&"+c}else{d.flashvars=c}if(ah.ie&&ah.win&&a.readyState!=4){var g=ar("div");h+="SWFObjectNew";g.setAttribute("id",h);a.parentNode.insertBefore(g,a);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}aA(f,d,h)}}function aF(a){if(ah.ie&&ah.win&&a.readyState!=4){var b=ar("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(aO(a),b);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}else{a.parentNode.replaceChild(aO(a),a)}}function aO(b){var d=ar("div");if(ah.win&&ah.ie){d.innerHTML=b.innerHTML}else{var e=b.getElementsByTagName(aD)[0];if(e){var a=e.childNodes;if(a){var f=a.length;for(var c=0;c<f;c++){if(!(a[c].nodeType==1&&a[c].nodeName=="PARAM")&&!(a[c].nodeType==8)){d.appendChild(a[c].cloneNode(true))}}}}}return d}function aA(e,g,c){var d,a=aS(c);if(ah.wk&&ah.wk<312){return d}if(a){if(typeof e.id==aq){e.id=c}if(ah.ie&&ah.win){var f="";for(var i in e){if(e[i]!=Object.prototype[i]){if(i.toLowerCase()=="data"){g.movie=e[i]}else{if(i.toLowerCase()=="styleclass"){f+=' class="'+e[i]+'"'}else{if(i.toLowerCase()!="classid"){f+=" "+i+'="'+e[i]+'"'}}}}}var h="";for(var j in g){if(g[j]!=Object.prototype[j]){h+='<param name="'+j+'" value="'+g[j]+'" />'}}a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>";ag[ag.length]=e.id;d=aS(e.id)}else{var b=ar(aD);b.setAttribute("type",aE);for(var k in e){if(e[k]!=Object.prototype[k]){if(k.toLowerCase()=="styleclass"){b.setAttribute("class",e[k])}else{if(k.toLowerCase()!="classid"){b.setAttribute(k,e[k])}}}}for(var l in g){if(g[l]!=Object.prototype[l]&&l.toLowerCase()!="movie"){aQ(b,l,g[l])}}a.parentNode.replaceChild(b,a);d=b}}return d}function aQ(b,d,c){var a=ar("param");a.setAttribute("name",d);a.setAttribute("value",c);b.appendChild(a)}function aw(a){var b=aS(a);if(b&&b.nodeName=="OBJECT"){if(ah.ie&&ah.win){b.style.display="none";(function(){if(b.readyState==4){aT(a)}else{setTimeout(arguments.callee,10)}})()}else{b.parentNode.removeChild(b)}}}function aT(a){var b=aS(a);if(b){for(var c in b){if(typeof b[c]=="function"){b[c]=null}}b.parentNode.removeChild(b)}}function aS(a){var c=null;try{c=aL.getElementById(a)}catch(b){}return c}function ar(a){return aL.createElement(a)}function aM(a,c,b){a.attachEvent(c,b);al[al.length]=[a,c,b]}function ao(a){var b=ah.pv,c=a.split(".");c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return(b[0]>c[0]||(b[0]==c[0]&&b[1]>c[1])||(b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]))?true:false}function az(b,f,a,c){if(ah.ie&&ah.mac){return}var e=aL.getElementsByTagName("head")[0];if(!e){return}var g=(a&&typeof a=="string")?a:"screen";if(c){aH=null;an=null}if(!aH||an!=g){var d=ar("style");d.setAttribute("type","text/css");d.setAttribute("media",g);aH=e.appendChild(d);if(ah.ie&&ah.win&&typeof aL.styleSheets!=aq&&aL.styleSheets.length>0){aH=aL.styleSheets[aL.styleSheets.length-1]}an=g}if(ah.ie&&ah.win){if(aH&&typeof aH.addRule==aD){aH.addRule(b,f)}}else{if(aH&&typeof aL.createTextNode!=aq){aH.appendChild(aL.createTextNode(b+" {"+f+"}"))}}}function ay(a,c){if(!aI){return}var b=c?"visible":"hidden";if(ak&&aS(a)){aS(a).style.visibility=b}else{az("#"+a,"visibility:"+b)}}function ai(b){var a=/[\\\"<>\.;]/;var c=a.exec(b)!=null;return c&&typeof encodeURIComponent!=aq?encodeURIComponent(b):b}var aR=function(){if(ah.ie&&ah.win){window.attachEvent("onunload",function(){var a=al.length;for(var b=0;b<a;b++){al[b][0].detachEvent(al[b][1],al[b][2])}var d=ag.length;for(var c=0;c<d;c++){aw(ag[c])}for(var e in ah){ah[e]=null}ah=null;for(var f in swfobject){swfobject[f]=null}swfobject=null})}}();return{registerObject:function(a,e,c,b){if(ah.w3&&a&&e){var d={};d.id=a;d.swfVersion=e;d.expressInstall=c;d.callbackFn=b;aG[aG.length]=d;ay(a,false)}else{if(b){b({success:false,id:a})}}},getObjectById:function(a){if(ah.w3){return av(a)}},embedSWF:function(k,e,h,f,c,a,b,i,g,j){var d={success:false,id:e};if(ah.w3&&!(ah.wk&&ah.wk<312)&&k&&e&&h&&f&&c){ay(e,false);aj(function(){h+="";f+="";var q={};if(g&&typeof g===aD){for(var o in g){q[o]=g[o]}}q.data=k;q.width=h;q.height=f;var n={};if(i&&typeof i===aD){for(var p in i){n[p]=i[p]}}if(b&&typeof b===aD){for(var l in b){if(typeof n.flashvars!=aq){n.flashvars+="&"+l+"="+b[l]}else{n.flashvars=l+"="+b[l]}}}if(ao(c)){var m=aA(q,n,e);if(q.id==e){ay(e,true)}d.success=true;d.ref=m}else{if(a&&au()){q.data=a;ae(q,n,e,j);return}else{ay(e,true)}}if(j){j(d)}})}else{if(j){j(d)}}},switchOffAutoHideShow:function(){aI=false},ua:ah,getFlashPlayerVersion:function(){return{major:ah.pv[0],minor:ah.pv[1],release:ah.pv[2]}},hasFlashPlayerVersion:ao,createSWF:function(a,b,c){if(ah.w3){return aA(a,b,c)}else{return undefined}},showExpressInstall:function(b,a,d,c){if(ah.w3&&au()){ae(b,a,d,c)}},removeSWF:function(a){if(ah.w3){aw(a)}},createCSS:function(b,a,c,d){if(ah.w3){az(b,a,c,d)}},addDomLoadEvent:aj,addLoadEvent:aC,getQueryParamValue:function(b){var a=aL.location.search||aL.location.hash;if(a){if(/\?/.test(a)){a=a.split("?")[1]}if(b==null){return ai(a)}var c=a.split("&");for(var d=0;d<c.length;d++){if(c[d].substring(0,c[d].indexOf("="))==b){return ai(c[d].substring((c[d].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(aU){var a=aS(ac);if(a&&aJ){a.parentNode.replaceChild(aJ,a);if(ad){ay(ad,true);if(ah.ie&&ah.win){aJ.style.display="block"}}if(ap){ap(at)}}aU=false}}}}();
var autoplay = 'false';
if (swfobject.hasFlashPlayerVersion("1")) autoplay = 'true';

var src_url="https://spshared.5min.com/Scripts/PlayerSeed.js?" +
"height=411" +
"&width=570" +
"&sid=577" +
"&origin=undefined" +
"&videoGroupID={0}" +
"&relatedNumOfResults=100" +
"&relatedMode=2" +
"&relatedBottomHeight=60" +
"&companionPos=" +
"&hasCompanion=false" +
"&autoStart=" +
autoplay +
"&colorPallet=%23FFEB00" +
"&videoControlDisplayColor=%23191919" +
"&shuffle=0" +
"&isAP=1";

if (typeof(commercial_video) == "object") {
	src_url += "&siteSection="+commercial_video.site_and_category;
	if (commercial_video.package) {
		src_url += "&sponsorship="+commercial_video.package;
	}
}

jQuery(document).ready(function() {
    var tag = document.createElement('script');
    tag.src = "http://config.hulu.com/js/hulu_global_loader.js?guid=efa718bc-cdd6-4c7e-b998-6b1ae38c2c31&partner=HuffPost&width=512&height=288";
    tag.id = "NS_GUID_JS";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    tag.onload = function() {
        var PageLoader = {
            "init": function() {
                NewSite.videoPlayerComponent.cueVideoById(jQuery('#videoPlayerComponent').attr('huluid'));
                NewSite.addListener("videoProgress", PageLoader, "end");
            },
            "end": function(state) {
                if(state['percent'] == '100') {
                  NewSite.videoPlayerComponent.hide();
                  NewSite.videoPlayerComponent.mute();
                  attachToHuluFrame(state['percent']);
              }
          }
      };
      if (NewSite.readyEventFired()) {
          PageLoader.init();
      } else {
          NewSite.addListener("newsiteReady", PageLoader, "init");
      }
  };
})

var player;
var fivemin_holder = null;
var hulu_holder = null;

function backToFirstVideo(frameID) {
    (function($){
        NewSite.videoPlayerComponent.show();
        NewSite.videoPlayerComponent.setVolume(50);

		//Pause before remove
		var videos = $('#my5minPlayer').find('video');
		if (videos.length) {
			videos.each(function(){
				$(this).removeAttr('autoplay');
				$(this).get(0).pause();
			});
			$('#back_to_hulu_video').remove();
			$('.5min_holder_for_hulu').hide();
		}
		else {
			fivemin_holder = $('#my5minPlayer').clone();
			$('.5min_holder_for_hulu').html('');
		}
	}(jQuery));
};

function attachToHuluFrame() {
    (function($) {
        var frameID = 'NS_FLASH_videoPlayerComponent';

        function onhuluplayerStateChange() {
            hulu_holder = $('#' + frameID).clone();
            var fivemin = $('#' + frameID).parents().parents().eq(2).find('.5min_holder_for_hulu');
            fivemin.show();
            if (fivemin_holder) fivemin.html(fivemin_holder);
            var videos = $('#my5minPlayer').find('video');
            if (videos.length) {
                var play_button = $('.fmvps-player-play-button');
                if (play_button.length) play_button.click();
            }
            fivemin.append('<a id="back_to_hulu_video" style="clear:both; display:block;" href="javascript:backToFirstVideo(' + "'" + frameID + "'" + ');">Back to first video</a>');
        };

        onhuluplayerStateChange();
    }(jQuery));
};

var HPEventModule={js_main_modules_loaded:{},js_events_loaded:{},yui_version_default:"2.7.0",events_dependencies:{slideshow_participate:{immediately:{yui:{},our:["quickslideshowparticipate","hpimagecrop"],script:["hp_browser","_tmp/lightbox_search","_tmp/common"]},delayed:{yui:{button:"default"}}},quiz_share:{immediately:{our:["comments"]}}},modules_loaded:{},yui_modules_loaded:{},Load:function(d,e,b,a){b=b||this;a=a||[];e=e||(function(){});if(this.js_events_loaded[d]){e.apply(b,a)}else{var c=this;this._LoadModules(d,function(){e.apply(b,a)})}},Wait:function(d,f,e,a,b){if(e){e()}a=(undefined===a)?true:a;b=b||this;var c=this;HPUtil.WaitForCondition.apply(b,[function(){setTimeout(function(){f.apply(b)},100)},1,function(){return !a?c.js_main_modules_loaded[d]:c.js_events_loaded[d]}])},_LoadModules:function(g,l,k){l=l||(function(){});k=k||"immediately";var c=this.events_dependencies[g][k];var b="/assets/js.php?"+HPConfig.timestamp_for_clearing_js+"&f=";var a=[],e=[],j="";if(c.our){for(var d=0;d<c.our.length;++d){j=c.our[d];if(this.modules_loaded[j]){continue}a[a.length]="modules/"+j+".js"}}if(c.yui){for(var j in c.yui){if(this.yui_modules_loaded[j]){continue}a[a.length]="yui_"+("default"!==c.yui[j]?c.yui[j]:this.yui_version_default)+"/"+j+"/"+j+"-min.js"}}if(c.script){e=c.script.map(function(i){return i+".js"})}if(a.length+e.length){a=a.sort();if(c.yui&&typeof YAHOO==="undefined"){e.unshift("yui.js")}b+=e.concat(a).join("%2C");var h=this;var f=function(){var n="";for(var m=0;m<a.length;++m){n=(new RegExp(/\/(.*?)\.js$/)).exec(a[m]);if(-1!==a[m].indexOf("yui_")){h.yui_modules_loaded[n[1]]=true}else{h.modules_loaded[n[1]]=true}}l();if("immediately"==k&&h.events_dependencies[g]["delayed"]){h.js_main_modules_loaded[g]=1;h._LoadModules(g,null,"delayed")}else{h.js_events_loaded[g]=1}};HPUtil.loadAndRun(b,f)}}};huff.unit("tmp/event_module.js",function(a){a(HPEventModule)});
(function(a){a.flexslider=function(f,q){var c=a(f);c.vars=a.extend({},a.flexslider.defaults,q);var j=c.vars.namespace,e=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,k=(("ontouchstart" in window)||e||window.DocumentTouch&&document instanceof DocumentTouch)&&c.vars.touch,d="click touchend MSPointerUp",b="",p,i=c.vars.direction==="vertical",l=c.vars.reverse,o=(c.vars.itemWidth>0),h=c.vars.animation==="fade",m=c.vars.asNavFor!=="",g={},n=true;a.data(f,"flexslider",c);g={init:function(){c.animating=false;c.currentSlide=parseInt((c.vars.startAt?c.vars.startAt:0));if(isNaN(c.currentSlide)){c.currentSlide=0}c.animatingTo=c.currentSlide;c.atEnd=(c.currentSlide===0||c.currentSlide===c.last);c.containerSelector=c.vars.selector.substr(0,c.vars.selector.search(" "));c.slides=a(c.vars.selector,c);c.container=a(c.containerSelector,c);c.count=c.slides.length;c.syncExists=a(c.vars.sync).length>0;if(c.vars.animation==="slide"){c.vars.animation="swing"}c.prop=(i)?"top":"marginLeft";c.args={};c.manualPause=false;c.stopped=false;c.started=false;c.startTimeout=null;c.transitions=!c.vars.video&&!h&&c.vars.useCSS&&(function(){var t=document.createElement("div"),s=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var r in s){if(t.style[s[r]]!==undefined){c.pfx=s[r].replace("Perspective","").toLowerCase();c.prop="-"+c.pfx+"-transform";return true}}return false}());if(c.vars.controlsContainer!==""){c.controlsContainer=a(c.vars.controlsContainer).length>0&&a(c.vars.controlsContainer)}if(c.vars.manualControls!==""){c.manualControls=a(c.vars.manualControls).length>0&&a(c.vars.manualControls)}if(c.vars.randomize){c.slides.sort(function(){return(Math.round(Math.random())-0.5)});c.container.empty().append(c.slides)}c.doMath();c.setup("init");if(c.vars.controlNav){g.controlNav.setup()}if(c.vars.directionNav){g.directionNav.setup()}if(c.vars.keyboard&&(a(c.containerSelector).length===1||c.vars.multipleKeyboard)){a(document).bind("keyup",function(s){var r=s.keyCode;if(!c.animating&&(r===39||r===37)){var t=(r===39)?c.getTarget("next"):(r===37)?c.getTarget("prev"):false;c.flexAnimate(t,c.vars.pauseOnAction)}})}if(c.vars.mousewheel){c.bind("mousewheel",function(t,v,s,r){t.preventDefault();var u=(v<0)?c.getTarget("next"):c.getTarget("prev");c.flexAnimate(u,c.vars.pauseOnAction)})}if(c.vars.pausePlay){g.pausePlay.setup()}if(c.vars.slideshow&&c.vars.pauseInvisible){g.pauseInvisible.init()}if(c.vars.slideshow){if(c.vars.pauseOnHover){c.hover(function(){if(!c.manualPlay&&!c.manualPause){c.pause()}},function(){if(!c.manualPause&&!c.manualPlay&&!c.stopped){c.play()}})}if(!c.vars.pauseInvisible||!g.pauseInvisible.isHidden()){(c.vars.initDelay>0)?c.startTimeout=setTimeout(c.play,c.vars.initDelay):c.play()}}if(m){g.asNav.setup()}if(k&&c.vars.touch){g.touch()}if(!h||(h&&c.vars.smoothHeight)){a(window).bind("resize orientationchange focus",g.resize)}c.find("img").attr("draggable","false");setTimeout(function(){c.vars.start(c)},200)},asNav:{setup:function(){c.asNav=true;c.animatingTo=Math.floor(c.currentSlide/c.move);c.currentItem=c.currentSlide;c.slides.removeClass(j+"active-slide").eq(c.currentItem).addClass(j+"active-slide");if(!e){c.slides.click(function(t){t.preventDefault();var s=a(this),r=s.index();var u=s.offset().left-a(c).scrollLeft();if(u<=0&&s.hasClass(j+"active-slide")){c.flexAnimate(c.getTarget("prev"),true)}else{if(!a(c.vars.asNavFor).data("flexslider").animating&&!s.hasClass(j+"active-slide")){c.direction=(c.currentItem<r)?"next":"prev";c.flexAnimate(r,c.vars.pauseOnAction,false,true,true)}}})}else{f._slider=c;c.slides.each(function(){var r=this;r._gesture=new MSGesture();r._gesture.target=r;r.addEventListener("MSPointerDown",function(s){s.preventDefault();if(s.currentTarget._gesture){s.currentTarget._gesture.addPointer(s.pointerId)}},false);r.addEventListener("MSGestureTap",function(u){u.preventDefault();var t=a(this),s=t.index();if(!a(c.vars.asNavFor).data("flexslider").animating&&!t.hasClass("active")){c.direction=(c.currentItem<s)?"next":"prev";c.flexAnimate(s,c.vars.pauseOnAction,false,true,true)}})})}}},controlNav:{setup:function(){if(!c.manualControls){g.controlNav.setupPaging()}else{g.controlNav.setupManual()}},setupPaging:function(){var u=(c.vars.controlNav==="thumbnails")?"control-thumbs":"control-paging",s=1,v,r;c.controlNavScaffold=a('<ol class="'+j+"control-nav "+j+u+'"></ol>');if(c.pagingCount>1){for(var t=0;t<c.pagingCount;t++){r=c.slides.eq(t);v=(c.vars.controlNav==="thumbnails")?'<img src="'+r.attr("data-thumb")+'"/>':"<a>"+s+"</a>";if("thumbnails"===c.vars.controlNav&&true===c.vars.thumbCaptions){var w=r.attr("data-thumbcaption");if(""!=w&&undefined!=w){v+='<span class="'+j+'caption">'+w+"</span>"}}c.controlNavScaffold.append("<li>"+v+"</li>");s++}}(c.controlsContainer)?a(c.controlsContainer).append(c.controlNavScaffold):c.append(c.controlNavScaffold);g.controlNav.set();g.controlNav.active();c.controlNavScaffold.delegate("a, img",d,function(x){x.preventDefault();if(b===""||b===x.type){var z=a(this),y=c.controlNav.index(z);if(!z.hasClass(j+"active")){c.direction=(y>c.currentSlide)?"next":"prev";c.flexAnimate(y,c.vars.pauseOnAction)}}if(b===""){b=x.type}g.setToClearWatchedEvent()})},setupManual:function(){c.controlNav=c.manualControls;g.controlNav.active();c.controlNav.bind(d,function(r){r.preventDefault();if(b===""||b===r.type){var t=a(this),s=c.controlNav.index(t);if(!t.hasClass(j+"active")){(s>c.currentSlide)?c.direction="next":c.direction="prev";c.flexAnimate(s,c.vars.pauseOnAction)}}if(b===""){b=r.type}g.setToClearWatchedEvent()})},set:function(){var r=(c.vars.controlNav==="thumbnails")?"img":"a";c.controlNav=a("."+j+"control-nav li "+r,(c.controlsContainer)?c.controlsContainer:c)},active:function(){c.controlNav.removeClass(j+"active").eq(c.animatingTo).addClass(j+"active")},update:function(r,s){if(c.pagingCount>1&&r==="add"){c.controlNavScaffold.append(a("<li><a>"+c.count+"</a></li>"))}else{if(c.pagingCount===1){c.controlNavScaffold.find("li").remove()}else{c.controlNav.eq(s).closest("li").remove()}}g.controlNav.set();(c.pagingCount>1&&c.pagingCount!==c.controlNav.length)?c.update(s,r):g.controlNav.active()}},directionNav:{setup:function(){var r=a('<ul class="'+j+'direction-nav"><li><a class="'+j+'prev" href="#">'+c.vars.prevText+'</a></li><li><a class="'+j+'next" href="#">'+c.vars.nextText+"</a></li></ul>");if(c.controlsContainer){a(c.controlsContainer).append(r);c.directionNav=a("."+j+"direction-nav li a",c.controlsContainer)}else{c.append(r);c.directionNav=a("."+j+"direction-nav li a",c)}g.directionNav.update();c.directionNav.bind(d,function(s){s.preventDefault();var t;if(b===""||b===s.type){t=(a(this).hasClass(j+"next"))?c.getTarget("next"):c.getTarget("prev");c.flexAnimate(t,c.vars.pauseOnAction)}if(b===""){b=s.type}g.setToClearWatchedEvent()})},update:function(){var r=j+"disabled";if(c.pagingCount===1){c.directionNav.addClass(r).attr("tabindex","-1")}else{if(!c.vars.animationLoop){if(c.animatingTo===0){c.directionNav.removeClass(r).filter("."+j+"prev").addClass(r).attr("tabindex","-1")}else{if(c.animatingTo===c.last){c.directionNav.removeClass(r).filter("."+j+"next").addClass(r).attr("tabindex","-1")}else{c.directionNav.removeClass(r).removeAttr("tabindex")}}}else{c.directionNav.removeClass(r).removeAttr("tabindex")}}}},pausePlay:{setup:function(){var r=a('<div class="'+j+'pauseplay"><a></a></div>');if(c.controlsContainer){c.controlsContainer.append(r);c.pausePlay=a("."+j+"pauseplay a",c.controlsContainer)}else{c.append(r);c.pausePlay=a("."+j+"pauseplay a",c)}g.pausePlay.update((c.vars.slideshow)?j+"pause":j+"play");c.pausePlay.bind(d,function(s){s.preventDefault();if(b===""||b===s.type){if(a(this).hasClass(j+"pause")){c.manualPause=true;c.manualPlay=false;c.pause()}else{c.manualPause=false;c.manualPlay=true;c.play()}}if(b===""){b=s.type}g.setToClearWatchedEvent()})},update:function(r){(r==="play")?c.pausePlay.removeClass(j+"pause").addClass(j+"play").html(c.vars.playText):c.pausePlay.removeClass(j+"play").addClass(j+"pause").html(c.vars.pauseText)}},touch:function(){var C,z,x,D,G,E,B=false,u=0,t=0,w=0;if(!e){f.addEventListener("touchstart",y,false);function y(H){if(c.animating){H.preventDefault()}else{if((window.navigator.msPointerEnabled)||H.touches.length===1){c.pause();D=(i)?c.h:c.w;E=Number(new Date());u=H.touches[0].pageX;t=H.touches[0].pageY;x=(o&&l&&c.animatingTo===c.last)?0:(o&&l)?c.limit-(((c.itemW+c.vars.itemMargin)*c.move)*c.animatingTo):(o&&c.currentSlide===c.last)?c.limit:(o)?((c.itemW+c.vars.itemMargin)*c.move)*c.currentSlide:(l)?(c.last-c.currentSlide+c.cloneOffset)*D:(c.currentSlide+c.cloneOffset)*D;C=(i)?t:u;z=(i)?u:t;f.addEventListener("touchmove",s,false);f.addEventListener("touchend",F,false)}}}function s(H){u=H.touches[0].pageX;t=H.touches[0].pageY;G=(i)?C-t:C-u;B=(i)?(Math.abs(G)<Math.abs(u-z)):(Math.abs(G)<Math.abs(t-z));var I=500;if(!B||Number(new Date())-E>I){H.preventDefault();if(!h&&c.transitions){if(!c.vars.animationLoop){G=G/((c.currentSlide===0&&G<0||c.currentSlide===c.last&&G>0)?(Math.abs(G)/D+2):1)}c.setProps(x+G,"setTouch")}}}function F(J){f.removeEventListener("touchmove",s,false);if(c.animatingTo===c.currentSlide&&!B&&!(G===null)){var I=(l)?-G:G,H=(I>0)?c.getTarget("next"):c.getTarget("prev");if(c.canAdvance(H)&&(Number(new Date())-E<550&&Math.abs(I)>50||Math.abs(I)>D/2)){c.flexAnimate(H,c.vars.pauseOnAction)}else{if(!h){c.flexAnimate(c.currentSlide,c.vars.pauseOnAction,true)}}}f.removeEventListener("touchend",F,false);C=null;z=null;G=null;x=null}}else{f.style.msTouchAction="none";f._gesture=new MSGesture();f._gesture.target=f;f.addEventListener("MSPointerDown",r,false);f._slider=c;f.addEventListener("MSGestureChange",A,false);f.addEventListener("MSGestureEnd",v,false);function r(H){H.stopPropagation();if(c.animating){H.preventDefault()}else{c.pause();f._gesture.addPointer(H.pointerId);w=0;D=(i)?c.h:c.w;E=Number(new Date());x=(o&&l&&c.animatingTo===c.last)?0:(o&&l)?c.limit-(((c.itemW+c.vars.itemMargin)*c.move)*c.animatingTo):(o&&c.currentSlide===c.last)?c.limit:(o)?((c.itemW+c.vars.itemMargin)*c.move)*c.currentSlide:(l)?(c.last-c.currentSlide+c.cloneOffset)*D:(c.currentSlide+c.cloneOffset)*D}}function A(K){K.stopPropagation();var J=K.target._slider;if(!J){return}var I=-K.translationX,H=-K.translationY;w=w+((i)?H:I);G=w;B=(i)?(Math.abs(w)<Math.abs(-I)):(Math.abs(w)<Math.abs(-H));if(K.detail===K.MSGESTURE_FLAG_INERTIA){setImmediate(function(){f._gesture.stop()});return}if(!B||Number(new Date())-E>500){K.preventDefault();if(!h&&J.transitions){if(!J.vars.animationLoop){G=w/((J.currentSlide===0&&w<0||J.currentSlide===J.last&&w>0)?(Math.abs(w)/D+2):1)}J.setProps(x+G,"setTouch")}}}function v(K){K.stopPropagation();var H=K.target._slider;if(!H){return}if(H.animatingTo===H.currentSlide&&!B&&!(G===null)){var J=(l)?-G:G,I=(J>0)?H.getTarget("next"):H.getTarget("prev");if(H.canAdvance(I)&&(Number(new Date())-E<550&&Math.abs(J)>50||Math.abs(J)>D/2)){H.flexAnimate(I,H.vars.pauseOnAction)}else{if(!h){H.flexAnimate(H.currentSlide,H.vars.pauseOnAction,true)}}}C=null;z=null;G=null;x=null;w=0}}},resize:function(){if(!c.animating&&c.is(":visible")){if(!o){c.doMath()}if(h){g.smoothHeight()}else{if(o){c.slides.width(c.computedW);c.update(c.pagingCount);c.setProps()}else{if(i){c.viewport.height(c.h);c.setProps(c.h,"setTotal")}else{if(c.vars.smoothHeight){g.smoothHeight()}c.newSlides.width(c.computedW);c.setProps(c.computedW,"setTotal")}}}}},smoothHeight:function(r){if(!i||h){var s=(h)?c:c.viewport;(r)?s.animate({height:c.slides.eq(c.animatingTo).height()},r):s.height(c.slides.eq(c.animatingTo).height())}},sync:function(r){var t=a(c.vars.sync).data("flexslider"),s=c.animatingTo;switch(r){case"animate":t.flexAnimate(s,c.vars.pauseOnAction,false,true);break;case"play":if(!t.playing&&!t.asNav){t.play()}break;case"pause":t.pause();break}},pauseInvisible:{visProp:null,init:function(){var t=["webkit","moz","ms","o"];if("hidden" in document){return"hidden"}for(var s=0;s<t.length;s++){if((t[s]+"Hidden") in document){g.pauseInvisible.visProp=t[s]+"Hidden"}}if(g.pauseInvisible.visProp){var r=g.pauseInvisible.visProp.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(r,function(){if(g.pauseInvisible.isHidden()){if(c.startTimeout){clearTimeout(c.startTimeout)}else{c.pause()}}else{if(c.started){c.play()}else{(c.vars.initDelay>0)?setTimeout(c.play,c.vars.initDelay):c.play()}}})}},isHidden:function(){return document[g.pauseInvisible.visProp]||false}},setToClearWatchedEvent:function(){clearTimeout(p);p=setTimeout(function(){b=""},3000)}};c.flexAnimate=function(z,A,t,v,w){if(!c.vars.animationLoop&&z!==c.currentSlide){}if(m&&c.pagingCount===1){c.direction=(c.currentItem<z)?"next":"prev"}if(!c.animating&&(c.canAdvance(z,w)||t)&&c.is(":visible")){if(m&&v){var s=a(c.vars.asNavFor).data("flexslider");c.atEnd=z===0||z===c.count-1;s.flexAnimate(z,true,false,true,w);c.direction=(c.currentItem<z)?"next":"prev";s.direction=c.direction;if(Math.ceil((z+1)/c.visible)-1!==c.currentSlide&&z!==0){c.currentItem=z;c.slides.removeClass(j+"active-slide").eq(z).addClass(j+"active-slide");z=Math.floor(z/c.visible)}else{c.currentItem=z;c.slides.removeClass(j+"active-slide").eq(z).addClass(j+"active-slide");return false}}c.animating=true;c.animatingTo=z;if(A){c.pause()}c.vars.before(c);if(c.syncExists&&!w){g.sync("animate")}if(c.vars.controlNav){g.controlNav.active()}if(!o){c.slides.removeClass(j+"active-slide").eq(z).addClass(j+"active-slide")}c.atEnd=z===0||z===c.last;if(c.vars.directionNav){g.directionNav.update()}if(z===c.last){c.vars.end(c);if(!c.vars.animationLoop){c.pause()}}if(!h){var y=(i)?c.slides.filter(":first").height():c.computedW,x,u,r;if(o){x=c.vars.itemMargin;r=((c.itemW+x)*c.move)*c.animatingTo;u=(r>c.limit&&c.visible!==1)?c.limit:r}else{if(c.currentSlide===0&&z===c.count-1&&c.vars.animationLoop&&c.direction!=="next"){u=(l)?(c.count+c.cloneOffset)*y:0}else{if(c.currentSlide===c.last&&z===0&&c.vars.animationLoop&&c.direction!=="prev"){u=(l)?0:(c.count+1)*y}else{u=(l)?((c.count-1)-z+c.cloneOffset)*y:(z+c.cloneOffset)*y}}}c.setProps(u,"",c.vars.animationSpeed);if(c.transitions){if(!c.vars.animationLoop||!c.atEnd){c.animating=false;c.currentSlide=c.animatingTo}c.container.unbind("webkitTransitionEnd transitionend");c.container.bind("webkitTransitionEnd transitionend",function(){c.wrapup(y)})}else{c.container.animate(c.args,c.vars.animationSpeed,c.vars.easing,function(){c.wrapup(y)})}}else{if(!k){c.slides.eq(c.currentSlide).css({zIndex:1}).animate({opacity:0},c.vars.animationSpeed,c.vars.easing);c.slides.eq(z).css({zIndex:2}).animate({opacity:1},c.vars.animationSpeed,c.vars.easing,c.wrapup)}else{c.slides.eq(c.currentSlide).css({opacity:0,zIndex:1});c.slides.eq(z).css({opacity:1,zIndex:2});c.wrapup(y)}}if(c.vars.smoothHeight){g.smoothHeight(c.vars.animationSpeed)}}};c.wrapup=function(r){if(!h&&!o){if(c.currentSlide===0&&c.animatingTo===c.last&&c.vars.animationLoop){c.setProps(r,"jumpEnd")}else{if(c.currentSlide===c.last&&c.animatingTo===0&&c.vars.animationLoop){c.setProps(r,"jumpStart")}}}c.animating=false;c.currentSlide=c.animatingTo;c.vars.after(c)};c.animateSlides=function(){if(!c.animating&&n){c.flexAnimate(c.getTarget("next"))}};c.pause=function(){clearInterval(c.animatedSlides);c.animatedSlides=null;c.playing=false;if(c.vars.pausePlay){g.pausePlay.update("play")}if(c.syncExists){g.sync("pause")}};c.play=function(){if(c.playing){clearInterval(c.animatedSlides)}c.animatedSlides=c.animatedSlides||setInterval(c.animateSlides,c.vars.slideshowSpeed);c.started=c.playing=true;if(c.vars.pausePlay){g.pausePlay.update("pause")}if(c.syncExists){g.sync("play")}};c.stop=function(){c.pause();c.stopped=true};c.canAdvance=function(t,r){var s=(m)?c.pagingCount-1:c.last;return(r)?true:(m&&c.currentItem===c.count-1&&t===0&&c.direction==="prev")?true:(m&&c.currentItem===0&&t===c.pagingCount-1&&c.direction!=="next")?false:(t===c.currentSlide&&!m)?false:(c.vars.animationLoop)?true:(c.atEnd&&c.currentSlide===0&&t===s&&c.direction!=="next")?false:(c.atEnd&&c.currentSlide===s&&t===0&&c.direction==="next")?false:true};c.getTarget=function(r){c.direction=r;if(r==="next"){return(c.currentSlide===c.last)?0:c.currentSlide+1}else{return(c.currentSlide===0)?c.last:c.currentSlide-1}};c.setProps=function(u,r,s){var t=(function(){var v=(u)?u:((c.itemW+c.vars.itemMargin)*c.move)*c.animatingTo,w=(function(){if(o){return(r==="setTouch")?u:(l&&c.animatingTo===c.last)?0:(l)?c.limit-(((c.itemW+c.vars.itemMargin)*c.move)*c.animatingTo):(c.animatingTo===c.last)?c.limit:v}else{switch(r){case"setTotal":return(l)?((c.count-1)-c.currentSlide+c.cloneOffset)*u:(c.currentSlide+c.cloneOffset)*u;case"setTouch":return(l)?u:u;case"jumpEnd":return(l)?u:c.count*u;case"jumpStart":return(l)?c.count*u:u;default:return u}}}());return(w*-1)+"px"}());if(c.transitions){t=(i)?"translate3d(0,"+t+",0)":"translate3d("+t+",0,0)";s=(s!==undefined)?(s/1000)+"s":"0s";c.container.css("-"+c.pfx+"-transition-duration",s)}c.args[c.prop]=t;if(c.transitions||s===undefined){c.container.css(c.args)}};c.setup=function(s){if(!h){var t,r;if(s==="init"){c.viewport=a('<div class="'+j+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(c).append(c.container);c.cloneCount=0;c.cloneOffset=0;if(l){r=a.makeArray(c.slides).reverse();c.slides=a(r);c.container.empty().append(c.slides)}}if(c.vars.animationLoop&&!o){c.cloneCount=2;c.cloneOffset=1;if(s!=="init"){c.container.find(".clone").remove()}c.container.append(c.slides.first().clone().addClass("clone").attr("aria-hidden","true")).prepend(c.slides.last().clone().addClass("clone").attr("aria-hidden","true"))}c.newSlides=a(c.vars.selector,c);t=(l)?c.count-1-c.currentSlide+c.cloneOffset:c.currentSlide+c.cloneOffset;if(i&&!o){c.container.height((c.count+c.cloneCount)*200+"%").css("position","absolute").width("100%");setTimeout(function(){c.newSlides.css({display:"block"});c.doMath();c.viewport.height(c.h);c.setProps(t*c.h,"init")},(s==="init")?100:0)}else{c.container.width((c.count+c.cloneCount)*200+"%");c.setProps(t*c.computedW,"init");setTimeout(function(){c.doMath();c.newSlides.css({width:c.computedW,"float":"left",display:"block"});if(c.vars.smoothHeight){g.smoothHeight()}},(s==="init")?100:0)}}else{c.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"});if(s==="init"){if(!k){c.slides.css({opacity:0,display:"block",zIndex:1}).eq(c.currentSlide).css({zIndex:2}).animate({opacity:1},c.vars.animationSpeed,c.vars.easing)}else{c.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+c.vars.animationSpeed/1000+"s ease",zIndex:1}).eq(c.currentSlide).css({opacity:1,zIndex:2})}}if(c.vars.smoothHeight){g.smoothHeight()}}if(!o){c.slides.removeClass(j+"active-slide").eq(c.currentSlide).addClass(j+"active-slide")}};c.doMath=function(){var r=c.slides.first(),u=c.vars.itemMargin,s=c.vars.minItems,t=c.vars.maxItems;c.w=(c.viewport===undefined)?c.width():c.viewport.width();c.h=r.height();c.boxPadding=r.outerWidth()-r.width();if(o){c.itemT=c.vars.itemWidth+u;c.minW=(s)?s*c.itemT:c.w;c.maxW=(t)?(t*c.itemT)-u:c.w;c.itemW=(c.minW>c.w)?(c.w-(u*(s-1)))/s:(c.maxW<c.w)?(c.w-(u*(t-1)))/t:(c.vars.itemWidth>c.w)?c.w:c.vars.itemWidth;c.visible=Math.floor(c.w/(c.itemW));c.move=(c.vars.move>0&&c.vars.move<c.visible)?c.vars.move:c.visible;c.pagingCount=Math.ceil(((c.count-c.visible)/c.move)+1);c.last=c.pagingCount-1;c.limit=(c.pagingCount===1)?0:(c.vars.itemWidth>c.w)?(c.itemW*(c.count-1))+(u*(c.count-1)):((c.itemW+u)*c.count)-c.w-u}else{c.itemW=c.w;c.pagingCount=c.count;c.last=c.count-1}c.computedW=c.itemW-c.boxPadding};c.update=function(s,r){c.doMath();if(!o){if(s<c.currentSlide){c.currentSlide+=1}else{if(s<=c.currentSlide&&s!==0){c.currentSlide-=1}}c.animatingTo=c.currentSlide}if(c.vars.controlNav&&!c.manualControls){if((r==="add"&&!o)||c.pagingCount>c.controlNav.length){g.controlNav.update("add")}else{if((r==="remove"&&!o)||c.pagingCount<c.controlNav.length){if(o&&c.currentSlide>c.last){c.currentSlide-=1;c.animatingTo-=1}g.controlNav.update("remove",c.last)}}}if(c.vars.directionNav){g.directionNav.update()}};c.addSlide=function(r,t){var s=a(r);c.count+=1;c.last=c.count-1;if(i&&l){(t!==undefined)?c.slides.eq(c.count-t).after(s):c.container.prepend(s)}else{(t!==undefined)?c.slides.eq(t).before(s):c.container.append(s)}c.update(t,"add");c.slides=a(c.vars.selector+":not(.clone)",c);c.setup();c.vars.added(c)};c.removeSlide=function(r){var s=(isNaN(r))?c.slides.index(a(r)):r;c.count-=1;c.last=c.count-1;if(isNaN(r)){a(r,c.slides).remove()}else{(i&&l)?c.slides.eq(c.last).remove():c.slides.eq(r).remove()}c.doMath();c.update(s,"remove");c.slides=a(c.vars.selector+":not(.clone)",c);c.setup();c.vars.removed(c)};g.init()};a(window).blur(function(b){focused=false}).focus(function(b){focused=true});a.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:false,animationLoop:true,smoothHeight:false,startAt:0,slideshow:true,slideshowSpeed:7000,animationSpeed:600,initDelay:0,randomize:false,thumbCaptions:false,pauseOnAction:true,pauseOnHover:false,pauseInvisible:true,useCSS:true,touch:true,video:false,controlNav:true,directionNav:true,prevText:"Previous",nextText:"Next",keyboard:true,multipleKeyboard:false,mousewheel:false,pausePlay:false,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:true,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){}};a.fn.flexslider=function(b){if(b===undefined){b={}}if(typeof b==="object"){return this.each(function(){var f=a(this),d=(b.selector)?b.selector:".slides > li",e=f.find(d);if((e.length===1&&b.allowOneSlide===true)||e.length===0){e.fadeIn(400);if(b.start){b.start(f)}}else{if(f.data("flexslider")===undefined){new a.flexslider(this,b)}}})}else{var c=a(this).data("flexslider");switch(b){case"play":c.play();break;case"pause":c.pause();break;case"stop":c.stop();break;case"next":c.flexAnimate(c.getTarget("next"),true);break;case"prev":case"previous":c.flexAnimate(c.getTarget("prev"),true);break;default:if(typeof b==="number"){c.flexAnimate(b,true)}}}}})(window.huff.units.jquery);
(function(b,a){b.fn.HPSlideshowHtml=function(c){this.get_more_slideshows_slide_html=function(e){var f="";var g=e;f+='<div class="hp-slideshow-more-container">';b.each(g,function(h,i){f+=['<div class="hp-slideshow-more-item" data-beacon=\'{"p":{"event_action": "last_six_icons"}}\' style="background: url('+i.thumbnail_url+') no-repeat center; background-size: contain;">','   <a class="hp-slideshow-more-slideshow" href="'+i.entry_url+'#slide=start"','data-next-show="{"slideshow_id":"'+i.slideshow_id+'","entry_id":"'+i.entry_id+'","entry_url":"'+i.entry_url+'"}">',"<div>","<div>","<p>"+i.title+"</p>","</div>","</div>","</a>","</div>"].join("")});f+='<div class="clearboth"></div>';f+=['<div class="hp-slideshow-more-footer">','<div class="hp-slideshow-more-restart" data-beacon=\'{"p":{"event_action":"restart_slideshow"}}\'>','<span class="hp-slideshow-more-icon hp-slideshow-icon bN">',(__("Replay")).toUpperCase()," &#xe008;</span>","</div>",'<div class="hp-slideshow-more-next" data-href="'+g[0].entry_url+'"','data-next-show=\'{"slideshow_id":"'+g[0].slideshow_id+'","entry_id":"'+g[0].entry_id+'","entry_url":"'+g[0].entry_url+"\"}'",'data-beacon=\'{"p":{"event_action":"next_slideshow"}}\'>','<span class="hp-slideshow-more-arrow hp-slideshow-icon bN">',(__("NEXT")).toUpperCase()," &#xe001;</span>","</div>","</div>"].join("");f+="</div>";return f};function d(e){return b("<div/>").text(e).html()}}})(window.huff.units.jquery,window);
(function(b,a){b.fn.HPSlideshowTracking=function(c){var d={};init=function(){if(typeof bN=="undefined"){console.log("[HP SLIDESHOW] Tracking: bN not loaded")}if(typeof(HPConfig)=="undefined"){console.log("[HP SLIDESHOW] Tracking : HPConfig not loaded")}if(typeof(TrackingWrapper)!="object"){console.log("[HP SLIDESHOW] Tracking : TrackingWrapper not loaded. Used for huffingtonpost.it tracking!")}};init();this.trigger_tracking=function(f,h,g){var i=d[f.type];d[f.type]=i?i+1:1;if(typeof bN!=="undefined"){if(typeof HPConfig!=="undefined"){bN.set("dL_entry_id",HPConfig.entry_id,1);bN.set("dL_vertical_name",HPConfig.current_vertical_name,1)}bN.set("dL_slideshow_id",h,1);for(var e in f){bN.set("dL_"+e,f[e],1)}bN.ping("slideshow_event")}this.italy_tracking(g)};this.italy_tracking=function(g){if(a.location.hostname.match("huffingtonpost.it")){if(typeof(TrackingWrapper)=="object"){var f=a.location.href;var e=g;TrackingWrapper.sendFoto(e+"",f)}}};this.social_share_tracking=function(e){if(a.HPTrack){HPTrack.trackEvent("Slideshow","Click",e)}};this.stats_call=function(f,g,i,h){if(a.HPTrack){try{if(s_265&&(h>0)){s_265.prop59="length_"+h;s_265.prop69="hpo:"+f.slideshow_id;if(f.slideimages[g].credits){s_265.prop70=f.slideimages[g].credits.toLowerCase()}else{s_265.prop70="credit-not-provided"}if(g==h){s_265.prop52="photo_recirc"}else{s_265.prop52="photo_"+Math.floor((g+1)/h*100)}}else{if(s_265){delete s_265.prop52}}HPTrack.Services.trackTo(HPTrack.Services.COMMON,{ajax:true,gallery:true,add_comscore_noop:true})}catch(e){}}if("function"===typeof xt_click){setTimeout(function(){try{xt_click(this,"F",6,a.location.pathname+"?slide="+i)}catch(j){}},0)}if(HPConfig.site=="italy"){a.webtrekkPageConfig_HPCMS_4367={pageHref:a.location.href,pageNumber:g+1,pageTotal:h}}};this.setBeaconData=function(f){if("undefined"!==typeof bN&&"object"===typeof f){for(var e in f){bN.set(e,f[e])}}}}})(window.huff.units.jquery,window);
(function(b,a){b.fn.HPSlideshowShare=function(c){var d=a.location;this.init=function(e){if(typeof HPUtil!="object"){console.log("[HP SLIDESHOW] HPUtil not loaded");return}else{if(typeof HPFB!="object"){console.log("[HP SLIDESHOW] HPFB not loaded");return}}};this.init();shares=this.shares={get_slide_share_url:function(f,e){var h=a.location;var g=h.href||h.protocol+"//"+h.host+h.pathname;g+="#slide="+e.slideimage_id;return g},facebook:function(m,i){var e=m.title||i.title||document.title.toString(),l=i.caption||b('meta[name="description"]').attr("content")||"",f=a.location.href,h=shares.get_slide_share_url(m,i),k=document.title.toString(),j,g;console.log("[HP SLIDESHOW] FaceBook share URL: ",h);HPUtil.bitly_url(h,function(n){l=l.replace(/<[^>]*>?/g,"");e=e.replace(/<[^>]*>?/g,"");if(l.length>995){l=l.substr(0,995)+"..."}if(e.length>995){e=e.substr(0,995)+"..."}HPFB.ensureInit(function(){QuickLogin.FacebookLoginCallback=function(){g={name:e,href:n,caption:l,media:[{type:"image",src:i.slideimage_thumbnail_url,href:n}]};j=[{text:k,href:n}];HPFB.streamPublish("",g,j,null,null,function(o){})};HPFB.waitForSession(QuickLogin.FacebookLoginCallback)})})},twitter:function(m,j){var l=document.title.toString(),e="",h=j.title,k,i=shares.get_slide_share_url(m,j),g=((typeof HPConfig!=="undefined")&&HPConfig.twitter_signature?HPConfig.twitter_signature:"@HuffingtonPost"),f="http://www.huffingtonpost.com/_slideshows/helpers/twitter_card.php?slideshow="+j.slide_id+"&slide="+j.slideimage_id+"&site="+g+"&entry_url="+encodeURIComponent(i);console.log("[HP SLIDESHOW] twitter share URL: ",i);l=m.title||j.title||document.title||"";HPUtil.bitly_url(f,function(r){if(l.length>140){l=l.substr(0,117)+"..."}var q,s=a.social_campaign,p=a.social_campaign_creative,v=l,o;if(typeof HPAds=="object"){o=HPAds.social_campaigns}if((typeof(p)!=="undefined")&&(typeof(p.constructor)=="function")&&p.twitter&&v.search(p.twitter)==-1){var n=p.twitter_optout_language?p.twitter_optout_language:"";q={text:n,hash:p.twitter}}else{if(s&&o&&o[s]&&o[s].hashtag&&v.search(o[s].hashtag)==-1){q={text:o[s].twitter_optout_language,hash:o[s].hashtag}}else{if(this.entry_params&&this.entry_params.tweet_comm_hash&&v.search(this.entry_params.tweet_comm_hash)==-1){q={text:this.entry_params.tweet_comm_text,hash:this.entry_params.tweet_comm_hash}}}}g=g.replace("@","");var t=" "+r;var u=" via @"+g;if(v.length>140-t.length-u.length){v=v.substring(0,140-t.length-u.length-3)+"..."}else{v+=t}if(q){v=q.text?q.text:v;if(v.length>140-(" "+q.hash).length-u.length){v=v.substring(0,140-(" "+q.hash).length-u.length-3)+"..."}v+=" "+q.hash}e="https://twitter.com/intent/tweet?text="+encodeURIComponent(v)+"&via="+g;k=PopupManager.open(e,750,325);k.focus()})},pinterest:function(h,e){var j=h.title||e.title||document.title.toString(),i=e.type=="image"||e.type=="quote"?e.slideimage_url:e.slideimage_thumbnail_url,f=location.href,g=shares.get_slide_share_url(h,e);console.log("[HP SLIDESHOW] pinterest share URL: ",g);a.open("http://www.pinterest.com/pin/create/button/?url="+escape(g)+"&media="+escape(i)+"&description="+j,"_pinit","menubar=0,resizable=1,width=670,height=570")}};this.share_slide=function(f,g,e){this.shares[f](g,e)}}})(window.huff.units.jquery,window);
/**
 * HPAmazingSlider v1.0
 *
 * Author: Anupam K
 * 03-15-2014
 *
 * Dependancies: jQuery, Flexslider, HPSlideshowHtml, HPSlideshowShare, HPSlideshowTracking
 */

;(function($, window) {
    /**
     * Namespace: HPSlideShow
     * PluginName: HPAmazingSlider
     *
     * HPAmazingSlider to render slideshow
     *
     * @param {Array} options Various options to render slideshow
     * @returns {None}
     */
    $.fn.HPAmazingSlider = function (options) {

        // slideshow wrapper dom
        var $this = $(this);

        var $slideshow_id = $this.data('slideshow-id');

        // if defined on the page as javascript variable
        var hp_ss_data = window['hp_slideshow_data_' + $slideshow_id];

        console_debug('SLIDESHOW DATA', hp_ss_data);

        var nav_enabled = true,
            italy_ad_shown = false,
            initial_fly_out_status = false,
            fly_out_state = false,
            flyout_state = 0,
            flyout_clicked = false;

        // transition speed of the carousel
        var slide_transition_duration = 200;
        // carousel thumbnails in viewport
        var slides_per_chunk = 8;

        function init() {
            var self = this;

            // check if flexslider is loaded
            if ($.fn.flexslider == undefined) {
                console_debug('Flexslider could not to load.', '', true);
                return;
            }

            // verify if required json data is available
            if (hp_ss_data == undefined) {
                console_debug('hp_slideshow_data_' + $slideshow_id + ' : Slideshow data(json) missing. Could not load slideshow.', '', true);
                return;
            }

            // verify if required json data is available
            if (typeof HPAds != 'object') {
                console_debug('HPAds not loaded.', '', true);
            }


            // check if extended plugins use this class without passing in options
            if (typeof options == 'undefined') {
                options = new Object();
            }

            console_debug('Options passed into the HPAmazingSlider', options);

            hp_ss_html = new $.fn.HPSlideshowHtml;
            hp_ss_share = new $.fn.HPSlideshowShare;
            hp_ss_track = new $.fn.HPSlideshowTracking;
            hp_ss_participation_new = new $.fn.HPSlideshowParticipationNew;
            hp_ss_participation = new $.fn.HPSlideshowParticipation;

            options.slideshow_data = hp_ss_data;

            // if preview then send in user defined ads
            if ((options.ads != undefined) && (options.ads.slideshow_300x250_req != undefined)) {
                options.slideshow_data.ads = {};
                options.slideshow_data.ads.slideshow_300x250_req = options.ads.slideshow_300x250_req;
                options.slideshow_data.ads.slideshow_728x90_req = options.ads.slideshow_728x90_req;
            }
            
            // #hp_ss_rand=true in url to randomize slides
            var randomize_slides = (/hp_ss_rand=(true)/.exec(window.location.hash) == null) ? false : true;

            var doc = $(document);

            // flexslider options
            var flexslider_settings = $.extend({
                animation: 'slide',
                controlNav: false,
                animationLoop: false,
                slideshow: false,
                slideToStart: 0,
                randomize: randomize_slides,
                itemWidth: 60,
                itemMargin: 0,
                minItems: slides_per_chunk,
                maxItems: slides_per_chunk,
                move: slides_per_chunk,
                keyboard: false,
                video: true,
                start: function(slider) {
                    init_callback_flexslider(slider, 'start');
                },
                before: function(slider) {
                    init_callback_flexslider(slider, 'before');
                },
                after: function (slider) {}
            }, options.flexslider_settings);

            console_debug('FLEXSLIDER OPTIONS', options.flexslider_settings);

            // render the flexslider carousel
            var hp_flexslider_carousel = $this.find('.hp-flexslider-carousel').flexslider(flexslider_settings);

            append_more_slideshows_thumbnail();

            add_beacon_data();
        };



        var eventController = {
            init : function() {
                var self = this;

                //var hp_slideshow_main_right_bottom =  $this.find('.hp-slideshow-main, .hp-right-pane-content, .hp-slideshow-bottom');
                var $hp_carousel_item               = $this.find('.hp-carousel-item'),
                    $hp_slideshow_main              = $this.find('.hp-slideshow-main')[0],
                    $hp_right_pane_content          = $this.find('.hp-right-pane-content')[0],
                    $hp_slideshow_bottom            = $this.find('.hp-slideshow-bottom')[0],
                    $hp_slideshow_right             = $this.find('.hp-slideshow-right')[0],
                    $hp_right_pane_exit             = $this.find('.hp-right-pane-exit')[0],
                    $hp_slideshow_dimmer            = $this.find('.hp-slideshow-dimmer')[0],
                    $hp_slideshow_more_restart      = $this.find('.hp-slideshow-more-restart'),
                    $hp_slideshow_nav_next          = $this.find('.hp-slideshow-nav-next')[0],
                    $hp_slideshow_next_arrow        = $this.find('.hp-slideshow-next-arrow')[0],
                    $hp_slideshow_nav_prev          = $this.find('.hp-slideshow-nav-prev')[0],
                    $hp_slideshow_previous_arrow    = $this.find('.hp-slideshow-previous-arrow')[0],
                    $hp_main_slide                  = $this.find('.hp-main-slide')[0],
                    $hp_slideshow_flex_prev         = $this.find('.hp-slideshow-flex-prev')[0],
                    $hp_slideshow_flex_next         = $this.find('.hp-slideshow-flex-next')[0],
                    $slideshow_share                = $this.find('.slideshow-share'),
                    $hp_slideshow_share_slideshow   = $this.find('.hp-slideshow-share-slideshow'),
                    $hp_slideshow_share_exit        = $this.find('a.hp-slideshow-share-exit'),
                    $hp_slideshow_share_current_slide   = $this.find('.hp-slideshow-share-current-slide'),
                    $hp_slideshow_more_next         = $this.find('.hp-slideshow-more-next');

                $hp_carousel_item.live('click', function(e) {
                    self.render_clicked_thumbnail(this);
                });

                $this.hover( function(e) {
                    if (!flyout_clicked && (flyout_state != 1)) {
                        self.open_fly_out();
                    }
                }, function (e) {
                    if (!flyout_clicked && (flyout_state != 1) && !$([$hp_slideshow_right]).is(':animated')) {
                        self.close_fly_out();
                    }
                });

                $([$hp_slideshow_main, $hp_right_pane_content, $hp_slideshow_bottom]).click(function() {
                   if (!flyout_clicked && (flyout_state != 1)) {
                        self.open_fly_out();
                    }
                    self.open_overlay_dimmer();
                    flyout_clicked = true;
                });
                
                $([$slideshow_share]).live('click', function() {
                    self.open_overlay_dimmer();
                    flyout_clicked = true;
                });
                 
                $([$hp_right_pane_exit ,$hp_slideshow_dimmer]).click(function() {
                    self.close_overlay_dimmer();
                    self.close_fly_out();
                    flyout_clicked = false;
                });

                $(document).bind('keydown', function ( e ) {
                    if (flyout_clicked) {
                        self.keyboard_bindings(e);
                    }
                });

                $hp_slideshow_more_restart.live('click', function() {
                    self.restart_slideshow();
                });

                $([$hp_slideshow_nav_next, $hp_slideshow_next_arrow]).click(function () {
                    self.next_slide();
                });

                $([$hp_slideshow_nav_prev, $hp_slideshow_previous_arrow]).click(function () {
                    self.prev_slide();
                });

                $([$hp_main_slide, $hp_slideshow_flex_prev, $hp_slideshow_flex_next]).hover(function (){
                    self.nav_hover('show');
                }, function() {
                    self.nav_hover('hide');
                });

                $slideshow_share.click(function() {
                    self.show_share(this);
                });

                $this.find(document).mouseup( function (e){
                    self.outside_wrapper_click(e);
                });

                $hp_slideshow_share_slideshow.click( function(e) {
                    self.open_share_overlay();
                    e.preventDefault();
                });

                $hp_slideshow_share_exit.live('click', function(e)  {
                    self.close_share_overlay();
                    e.preventDefault();
                });

                $hp_slideshow_share_current_slide.live('change', function(){
                    self.manage_slide_share_url(this);
                });

                $hp_slideshow_more_next.live('click', function() {
                    self.go_to_next_slideshow();
                });
                
            },


            /*

             User on submit
             model.trigger( 'track', {
                            type: 'click',
                            target: 'ugc-submitted'
                        });

            $html.delegate( '.hp-ss-participation-button', 'click', function ( e ) {
            model.trigger( 'track', {
                        type: 'click',
                        target: 'ugc',
                        slide_id: model.activeSlide().slideimage_id
                    });

            // SWIPE LEFT
            model.trigger( 'track', {
                            type: 'swipe',
                            target: 'hp-ss-main-image',
                            slide_id: model.activeSlide().slideimage_id
                        });
            // SWIPE RIGHT
            model.trigger( 'track', {
                            type: 'swipe',
                            target: 'hp-ss-main-image',
                            slide_id: model.activeSlide().slideimage_id
                        });
            */
            open_fly_out : function() {
            	$this.css('width','921px');
                $this.find('.hp-slideshow-right').show('right');
                $this.find('.hp-slideshow-bottom').show('down');
                if (!initial_fly_out_status && (window.location.hostname != 'www.huffingtonpost.it')) {
                    hp_ss_track.trigger_tracking({type: 'mouseover_auto_expand'}, $slideshow_id, get_active_slide_index());
                }
                // Render ADs
                eventController.render_ads($slideshow_id);

                initial_fly_out_status = true;
            },

            close_fly_out : function() {
                $this.find('.hp-slideshow-right').hide();
                $.when($this.find('.hp-slideshow-bottom').hide()).done(function(){$this.css('width','570px')});
                initial_fly_out_status = false;
            },

            render_clicked_thumbnail : function(e) {
                render_slide(e);
            },

            open_overlay_dimmer : function () {
                $this.find('.hp-slideshow-dimmer').css({'display': 'block', 'opacity' : '0.7'});
                eventController.scroll_to_slideshow($slideshow_id);
            },

            close_overlay_dimmer : function () {
                $this.find('.hp-slideshow-dimmer').fadeTo(500 , 0.0).css('display', 'none');
            },

            restart_slideshow : function () {
                render_slide($this.find('.hp-carousel-item').first());
            },

            next_slide : function () {
                if (nav_enabled) {
                    var active_slide = get_active_slide();
                    if ($this.find('.hp-carousel-item').length != active_slide.data('id') + 1) {
                        //this var should be from Modulous
                        if ( HPConfig.slideshow_video_interstitial !== undefined ) {
                            if ( active_slide.data('id') == HPConfig.slideshow_video_interstitial.slide_number-1 
                              && HPConfig.slideshow_video_interstitial.displayed === undefined ) {

                                HPConfig.slideshow_video_interstitial['displayed'] = true;

                                //display video 
                                $('.hp-video-ad').css('z-index', 5000003);
                                $('.hp-video-ad').html(HPConfig.slideshow_video_interstitial.content);
                                $('.hp-video-ad-close').on('click', function(){$('.hp-video-ad, .hp-video-ad-close').css('z-index', 0);})
                                setTimeout(function(){jQuery('.hp-video-ad-close').css('z-index', 5000004);}, HPConfig.slideshow_video_interstitial.skip_seconds * 1000);

                            }
                        }
                        render_slide(active_slide.next(), 'right');
                        if (active_slide.position().left > (0.8 * $this.find('.hp-flexslider-carousel').width())) {
                            // https://github.com/woothemes/FlexSlider/issues/932  FIX FOR animationLoop bug
                            $this.find('.hp-flexslider-carousel').flexslider('next');
                        }
                    }
                }
            },

            prev_slide : function () {
                if (nav_enabled) {
                    var active_slide = get_active_slide();
                    if (active_slide.index() != 0) {
                        render_slide(active_slide.prev(), 'left');
                        if (active_slide.position().left < (0.1 * $this.find('.hp-flexslider-carousel').width())) {
                            $this.find('.hp-flexslider-carousel').flexslider('prev');
                        }
                    }
                }
            },

            nav_hover : function (state) {
                switch (state) {
                    case 'show' :
                        $this.find('.hp-slideshow-flex-next, .hp-slideshow-flex-prev').addClass('flex-prev-hover flex-next-hover');
                        break;
                    case 'hide' :
                        $this.find('.hp-slideshow-flex-next, .hp-slideshow-flex-prev').removeClass('flex-prev-hover flex-next-hover');
                        break;
                }
            },

            show_share : function(e) {
                var share_type = $(e).data('type');
                var slideshow_data = hp_ss_data;
                var slide_data = hp_ss_data.slideimages[$this.find('.flex-active-slide').index()];

                console_debug('slideshow-social-share type: ', share_type);
                console_debug('slideshow-social-share slideshow_data: ', slideshow_data);
                console_debug('slideshow-social-share slide_data: ', slide_data);

                hp_ss_share.share_slide(share_type, slideshow_data, slide_data);
                hp_ss_track.social_share_tracking(share_type);
            },

            keyboard_bindings : function(e) {
                var prevent = true;
                switch (e.which) {
                    //escape key
                    case 27:
                        $('.hp-right-pane-exit').trigger('click');
                        hp_ss_track.trigger_tracking({  type: 'keypress', target: 'escape'}, $slideshow_id, get_active_slide_index());
                        break;
                    //forward arrow
                    case 39:
                        if ( $('.hp-slideshow-dimmer').is(':visible')) {
                            eventController.open_overlay_dimmer();
                            eventController.open_fly_out();
                            eventController.next_slide();
                            hp_ss_track.trigger_tracking({  type: 'keypress', target: 'forward'}, $slideshow_id, get_active_slide_index());
                        }
                        break;
                    //backward arrow
                    case 37:
                        if ( $('.hp-slideshow-dimmer').is(':visible')) {
                            eventController.open_overlay_dimmer();
                            eventController.open_fly_out();
                            eventController.prev_slide();
                            hp_ss_track.trigger_tracking({ type: 'keypress', target: 'back'});
                        }
                        break;
                    //up arrow move caoursel right
                    case 38:
                        if ( $('.hp-slideshow-dimmer').is(':visible')) {
                            eventController.open_overlay_dimmer();
                            eventController.open_fly_out();
                            $this.find('.hp-flexslider-carousel').flexslider('next');
                        }
                        break;
                    //down arrow move carousel left
                    case 40:
                        if ( $('.hp-slideshow-dimmer').is(':visible')) {
                            eventController.open_overlay_dimmer();
                            eventController.open_fly_out();
                            $this.find('.hp-flexslider-carousel').flexslider('prev');
                        }
                        break;
                    //do nothing
                    default: prevent = false;
                        break;
                }

                if (prevent) {
                    e.preventDefault();
                }
            },

            // if user clicks outside of the wrapper collapse slideshow
            outside_wrapper_click : function(e) {
                if (!$this.is(e.target) && $this.has(e.target).length === 0) {
                    eventController.close_fly_out();
                }
            },

            open_share_overlay : function(e) {
                $this.find('.hp-slideshow-main').css('zIndex', 5000001);
                var slideshow_overlay = $this.find('.hp-slideshow-share-overlay');
                var share_exists = (/slide=([0-9a-zA-Z]+)/.exec(window.location.href) == null) ? false : true;
                var share_url =  window.location.href + '#slide=start';
                if (share_exists) {
                    var share_url =  window.location.href.replace(/#slide=([0-9a-zA-Z]+)/, '#slide=start');
                }

                slideshow_overlay.find('.hp-slideshow-share-url').val(share_url);
                slideshow_overlay.fadeTo(300, 0.6, function() {
                    var props = {
                        overlay_width       : slideshow_overlay.width(),
                        pos_top             : $(window).scrollTop(),
                        view_port_width     : $(window).width()
                    };

                    var left_pos = Math.round(props.view_port_width - props.overlay_width) / 2;
                    slideshow_overlay
                        .css({
                            opacity : 0,
                            top : '-=300',
                            left : left_pos+'px'
                        })
                        .animate({
                            top : 60,
                            opacity : 0.95,
                            zIndex : 5000006,
                        }, 600);
                });
            },

            close_share_overlay : function (e) {
                $this.find('.hp-slideshow-share-overlay').animate({
                    top : '-=300',
                    opacity : 0
                }, 400, function() {
                    $this.find('.hp-slideshow-share-overlay input:checkbox').removeAttr('checked');
                    $this.find('.hp-slideshow-main').css('z-index', 5000002);
                    $this.find('.hp-slideshow-share-overlay').css('display', 'none');
                });
            },

            manage_slide_share_url : function (e) {
                if($(e).is(':checked')){
                    var share_url = $this.find('.hp-slideshow-share-url').val();
                    var share_slides = (/slide=([0-9a-zA-Z]+)/.exec(share_url) == null) ? false : true;
                    var slide_id = $this.find('.flex-active-slide').data('slide-id');
                    if (!share_slides) {
                        // if trying to share on the last slide (more slideshows does not have slide ID)
                        share_url += (slide_id != 'undefined') ? '#slide=' + slide_id : '#slide=start';
                    } else {
                        console.log(slide_id);
                        if (slide_id != 'undefined') {
                            share_url = share_url.replace(/slide=([0-9a-zA-Z]+)/, 'slide=' + slide_id);
                        } else {
                            share_url = share_url.replace(/slide=([0-9a-zA-Z]+)/, 'slide=start');
                        }
                    }
                } else {
                    share_url =  $this.find('.hp-slideshow-share-url').val().replace(/#slide=([0-9a-zA-Z]+)/, '#slide=start');
                }
                $this.find('.hp-slideshow-share-url').val(share_url);
            },

            social_share_bar : function(state) {
                if (state == 'hide') {
                    $this.find('.hp-right-pane-social').hide();
                } else {
                    $this.find('.hp-right-pane-social').show();
                }
            },

            render_ads : function(slideshow_id) {
                // Render ADs
                if (typeof HPAds == 'object') {
                    if ( HPConfig.site == 'italy' ) {
                        if(!italy_ad_shown) {
                            italy_ad_shown = true;
                            HPAds.ad_reload( 'slideshow_300x250_req', 'hp-slideshow-ad-div-' + slideshow_id );
                        }
                    } else {
                        HPAds.ad_reload('slideshow_300x250_req', 'hp-slideshow-ad-div-' + slideshow_id);
                        HPAds.ad_reload('slideshow_728x90_req', 'hp-slideshow-leaderboard-div-' + slideshow_id);
                    }
                }
            },

            scroll_to_slideshow : function(slideshow_id) {
                if ( !document.scrollInProgress ) {
                    document.scrollInProgress = true;
                    $('html, body').animate({scrollTop: ($('#hp-slideshow-wrapper-'+ slideshow_id).offset().top)}, {
                        duration: 'slow',
                        complete: function() {
                            document.scrollInProgress = false;
                        }
                    });
                }
            },

            go_to_next_slideshow : function() {
                window.location = $this.find('.hp-slideshow-more-next').data('href') + '#slide=start';
            }

        };

        // if slideshow id is passed then get through ajax
        if (hp_ss_data == undefined) {
            if ((options.slideshow_id == 'undefined')) {
                console_debug('Slideshow ID not specified!');
            } else {
                var promise = get_slideshow_data(options);
                promise.success(function (data) {
                    hp_ss_data = data.response['236slideexpand'][0];
                    console_debug('SLIDESHOW DATA returned from AJAX', hp_ss_data, true);
                    initialize_slideshow();
                });
            }
        } else {
            initialize_slideshow();
        }

        /**
         * Initialize the slideshow and all the event listeners
         * @returns {None}
         */
        function initialize_slideshow() {
            eventController.init();
            init();
            // Participation slideshow
            if(options.slideshow_data.accept_participation == 'yes' && options.slideshow_data.participation.new){ 
                $this.find('.hp-slideshow-wrapper').html(hp_ss_participation_new.part(options.slideshow_data));
            } else if(options.slideshow_data.accept_participation == 'yes' && !options.slideshow_data.participation.new){
                $this.find('.hp-slideshow-wrapper').html(hp_ss_participation.part(options.slideshow_data));
            }
        }
        /**
         * Get slideshow data through API call using synchrounous ajax
         * @param {object} options including slideshow_id.
         * @returns {object}  Slideshow Data
         */
        function get_slideshow_data(options) {
            var api_url = options.api_domain + '?t=gadget&embed_tag=<HH--236SLIDEEXPAND--' + options.slideshow_id +'--HH>';
            return $.ajax({
                        async: false,
                        type: 'GET',
                        url: api_url,
                        dataType: 'jsonp',
                        error: function() {
                            console_debug('[HP Slideshow] Invalid HP slideshow data from ajax API request', api_url, true);
                        }
                    });
        }

        /**
         * Escape HTML in a string
         * @param {String} string
         * @returns {String}  HTML escaped string
         */
        function escape_html(string) {
            return $('<div/>').text(string).html();
        }

        /**
         * Get the current active slide
         * @returns {Object}  Active slide
         */
        function get_active_slide() {
            return $this.find('.flex-active-slide');
        }

        /**
         * Get the current active slide index/position
         * @returns {Object}  Active slide
         */
        function get_active_slide_index() {
            return $this.find('.flex-active-slide').index() + 1;
        }

        /**
         * Get the current active slide id
         * @returns {Object}  Active slide
         */
        function get_active_slide_id() {
            return $this.find('.flex-active-slide').data('slide-id');
        }

        /**
         * Callback methods on flexslider
         * Lazyloads thumbnails and renders the first slide
         *
         * @param {Object} slider Flexslider slider
         * @param {String} callback name
         *
         * @returns {None}
         */
        function init_callback_flexslider(slider, state) {

            var flexslider_callbacks = {
                'start' : function (slider) {
                    $this.find('span.total-slides').text(slider.count);
                    var slide_id = $this.find('.hp-carousel-item').first().attr('data-slide-id');
                    var slide_hash = /slide=([0-9a-zA-Z]+)/.exec(window.location.hash);
                    var lazy_load_all = false;
                    if (slide_hash != null) {
                        if (slide_hash[1].toLowerCase() == 'start') {
                            lazy_load_all = false;
                            eventController.open_overlay_dimmer();
                            eventController.scroll_to_slideshow($slideshow_id);
                            eventController.open_fly_out();
                        } else {
                            var el = $this.find('li[data-slide-id='+slide_hash[1]+']');
                            if ( el.size() > 0 ) {
                                eventController.open_overlay_dimmer();
                                eventController.open_fly_out();
                                lazy_load_all = true;
                                slide_id = slide_hash[1];
                                // navigate carousel to right view
                                eventController.scroll_to_slideshow($slideshow_id);
                                // lazy load all the thumbnails to prevent calculations on every render
                                lazy_load_thumbnails(0, slider.count);
                            }
                        }
                    }

                    // lazy load the next 8 images on regular slideshow load
                    if (lazy_load_all == false) {
                        lazy_load_thumbnails(0, 8);
                    }

                    render_slide($this.find('li[data-slide-id='+slide_id+']'), '', true, true);
                    //hp_ss_track.trigger_tracking({  type: 'slideshow_rendered'}, $slideshow_id, get_active_slide_index());
                },

                // fires asynchronously with each slider animation.
                'before' : function (slider) {
                    lazy_load_thumbnails(0, 8);
                }
            };

            flexslider_callbacks[state](slider);
        }


        /**
         * Append "More slideshows" slide to the end
         *
         * @returns {None}
         */
        function append_more_slideshows_thumbnail() {
            var slider = $this.find('.hp-flexslider-carousel').data('flexslider');
            slider.addSlide([
                            '<li class="hp-carousel-item no-pin" data-id="'+ (slider.count) +'">',
                                '<div class="hp-slideshow-next-slide-thumbnail">'+__("Next")+'</div>',
                             '</li>'
                            ].join(''));
        }
		
		
        /**
        * Render the pagination, caption, title and active thumbnail
        * @param object obj Current active slide object
        * @param direction is the direction of navigation
        * @param disable_ad_render
        * @param disable_stats_call
        * @return none
        */
        function render_slide (obj, direction, disable_ad_render, disable_stats_call) {

            if (typeof(disable_stats_call) === "undefined") disable_stats_call = false;
            console_debug(' render_slide : slide - '+ ($(obj).index() + 1) +': ', obj);
            var slideshow_id = $this.data('slideshow-id'),
                hp_main_slide = $this.find('.hp-main-slide'),
                hp_flexslider_carousel =  $this.find('.hp-flexslider-carousel'),
                slideshow_length = hp_ss_data.slideimages.length,
                flex_slider_obj = hp_flexslider_carousel.data('flexslider');

            // Render ADs
            if (disable_ad_render != true) {
                eventController.render_ads($slideshow_id);

                //call tracking
                HPAds.slideshow_tracking();
            }

            // curent index for slide
            current_slide_index = parseInt($(obj).attr('data-id'));

            var carousel_left_start = hp_flexslider_carousel.offset().left;
            var carousel_right_end = carousel_left_start + hp_flexslider_carousel.width();

            // done in order to get active slide in focus when user navigates through carousel and
            // then clicks on main slide window to  navigate to the next slide
            if (($(obj).offset().left < carousel_left_start) || ($(obj).offset().left > carousel_right_end)) {
                // https://github.com/woothemes/FlexSlider/issues/201
                // Having issues with just doing hp_flexslider_carousel.flexslider(0); Bug in flexslider code
                flex_slider_obj.flexAnimate(Math.floor($(obj).index() / slides_per_chunk), false, true);
            }

            // Get transitioning effect
            if (direction == 'right') {
                nav_enabled = false;
                // check to make sure this is not added on the last slide
                if ($(obj).index() != slideshow_length) {
                    hp_main_slide.append('<div class="hp-main-slider-content"></div>');
                }
                pre_load_images('right', current_slide_index, slideshow_length);
            }

            if (direction == 'left') {
                nav_enabled = false;
                hp_main_slide.prepend('<div class="hp-main-slider-content" style="margin-left: -560px;"></div>');
                pre_load_images('left', current_slide_index, slideshow_length);
            }

            // remove previously/all highlighted thumbnails
            $this.find('.hp-carousel-item').removeClass('flex-active-slide');

            // add border to active slide
            $(obj).addClass('flex-active-slide');

            eventController.social_share_bar('show');

            // render last slides for more slide options
            if ($(obj).index() != slideshow_length) {
                // add title data to right panel
                $this.find('.hp-right-pane-title').html(hp_ss_data.slideimages[current_slide_index].title).html();

                // add caption data to right panel
                $this.find('.hp-right-pane-caption').html(hp_ss_data.slideimages[current_slide_index].caption.replace(/\n/g,'<br/>')).html();

                var slider_content = $this.find('.hp-main-slider-content');

                // render the actual html content into the main slide container
                if (direction == 'right') {
                    slider_content.last().html(get_slide_html(hp_ss_data.slideimages[current_slide_index]));
                    slider_content.first().animate({ 'marginLeft': -550 }, slide_transition_duration, function() {
                        slider_content.first().remove();
                        nav_enabled = true;
                    });

                } else if (direction == 'left') {
                    slider_content.first().html(get_slide_html(hp_ss_data.slideimages[current_slide_index]));
                    slider_content.first().animate({ 'marginLeft': 0 }, slide_transition_duration, function() {
                        slider_content.last().remove();
                        nav_enabled = true;
                    });

                } else {
                    nav_enabled = true;
                    $this.find('.hp-main-slider-content').html(get_slide_html(hp_ss_data.slideimages[current_slide_index]));
                }

                update_beacon_data(hp_ss_data.slideimages[current_slide_index]);

            } else {
                console_debug('slideshow-more-slideshows : ', hp_ss_data.more_slideshows);
                nav_enabled = true;
                $this.find('.hp-right-pane-title').html('');
                $this.find('.hp-right-pane-caption').html('');

                // Render the last slide with more slideshows grid
                if (hp_ss_data.more_slideshows) {
                    $this.find('.hp-main-slider-content').html(get_more_slideshows_html($slideshow_id));
                }

                eventController.social_share_bar('hide');
            }

            // get current position of slide in slideshow
            $this.find('.current-slide').text($this.find('.flex-active-slide').index() + 1);

            if (!disable_stats_call) hp_ss_track.stats_call(hp_ss_data, current_slide_index, parseInt($(obj).attr('data-slide-id')), slideshow_length);
            hp_ss_track.italy_tracking(current_slide_index);
        }

        /**
         * Get the last slide with more slideshows options
         * @param {Integer} slideshow_id Slideshow ID
         * @returns {String}  html content of last slideshow
         */
        function get_more_slideshows_html(slideshow_id) {
            return hp_ss_html.get_more_slideshows_slide_html(hp_ss_data.more_slideshows);
        }

        /**
         * Preload next two images to make slideshow show smoother transitions
         * @param {String} direction left or right
         * @param {Integer} current_slide_index
         * @param {Integer} slideshow_length
         * @returns {None}
         */
        function pre_load_images(direction, current_slide_index, slideshow_length) {
            for (var i = 1; i < 3; i++) {
                if ((direction == 'left') && (current_slide_index > 1)) {
                    if ($.inArray(hp_ss_data.slideimages[current_slide_index - i].type, ['image', 'gif']) != -1) {
                        var image = new Image();
                        image.src = hp_ss_data.slideimages[current_slide_index - i].slideimage_url;
                    }
                } else if ((direction == 'right') && (current_slide_index + 2 < slideshow_length)) {
                    if ($.inArray(hp_ss_data.slideimages[current_slide_index + i].type, ['image', 'gif']) != -1) {
                        var image = new Image();
                        image.src = hp_ss_data.slideimages[current_slide_index + i].slideimage_url;
                    }
                }
            }
        }
        
        /**
         * Return html content of appropriate slide type
         *
         * @param {Object} slide slide data
         * @returns {String}  html content of slide
         */
        function get_slide_html(slide) {

            var html_slides = {
                'image' : function (slide) {
                    return [
                            '<div class="hp-slideshow-img-container">',
                                '<img src="' + slide.slideimage_url + '" onError="this.onerror=null; this.src= this.src.replace(\'free\', \'large\');">',
                                '<div class="hp-slide-credits">',
                                    slide.credits,
                                '</div>',
                            '</div>'
                        ].join('');
                },
                'gif' : function (slide) {
                    return [
                            '<div class="hp-slideshow-img-container">',
                                '<img src="' + slide.slideimage_url.replace('.jpg','.gif') + '">',
                                '<div class="hp-slide-credits">',
                                    slide.credits,
                                '</div>',
                            '</div>'
                    ].join('');
                },
                'video' : function(slide) {
                    return unescape(slide.video).replace(/height="\d*?"/gi, 'height="420"').replace(/width="\d*?"/gi, 'width="540"');
                },
                'tweet' : function(slide) {
                    return [
                        '<div class="hp-slideshow-outer-tweet-container" style="background:url(', slide.user_background, ') center center; height:422px">',
                            '<div class="hp-slideshow-inner-tweet-container">',
                                '<img class="hp-slideshow-tweet-headshot" width="50" src="', slide.user_headshot, '"/>',
                                '<div class="hp-slideshow-tweet-user">',
                                    '<div class="hp-slideshow-tweet-screen-name">',
                                        '<a class="twitter-anywhere-user" href="http://www.twitter.com/', slide.user_screenname, '">@', slide.user_screenname, '</a>',
                                    '</div>',
                                    '<div class="hp-slideshow-tweet-user-name">', slide.user_name,'</div>',
                                '</div>',
                                '<div class="clearboth"></div>',
                                '<div class="hp-slideshow-tweet-text">', unescape( slide.tweet_text ), '</div>',
                            '</div>',
                        '</div>'
                    ].join( '' );
                },
                'text': function() {
                    return ['<div class="hp-slide-text-content">',
                                '<div class="hp-slide-text-title">'+ slide.title + '</div>',
                                '<div class="hp-slide-text-caption">'+ slide.caption + '</div>',
                            '</div>'].join('');
                },
                'quote': function() {
                    return ['<div class="hp-slide-quote-container">',
                                '<img class="hp-slide-quote-img" src="http://s.huffpost.com/images/slideshow/quote.png">',
                                '<div class="hp-slide-quote-text">' + slide.quote + '</div>',
                                '<div class="hp-slide-quote-source">- ' + slide.quote_source + '</div>',
                            '</div>'].join('');
                }
            };

            return html_slides[slide.type](slide);
        }


        /**
         * Lazy load images in carousel based on index
         * @param {Integer} start Starting index of slide thumbnail
         * @param {Integer} end Ending position of slide thumbnail
         * @returns {None}
         */
        function lazy_load_thumbnails(start, end) {
            $this.find('img.lazy').slice(start, end).each(function () {
                var src = $(this).attr('data-src');
                $(this).attr('src', src).removeAttr('data-src').removeClass('lazy');
                // if sq50 size is missing replace with small size
                $(this).error(function () {
                    broken_image = $(this).attr('src');
                    console_debug('Missing sq50.jpg size for: ' + broken_image);
                    new_img_url = broken_image.replace('sq50', 'small');
                    $(this).unbind('error').attr('src', new_img_url);
                });
            });
        }
        
        /**
         * Add data beacons to required elements
         * 
         * @returns {None}
         */
        function add_beacon_data() {
            $this.find('a.flex-prev').attr('data-beacon', '{"p":{"event_action":"arrow_left_in_thumbnail_nav"}}');
            $this.find('a.flex-next').attr('data-beacon', '{"p":{"event_action":"arrow_right_in_thumbnail_nav"}}');
        }

        /**
         * Updates beacon data after slide is rendered
         *
         * @return {None}
         */
        function update_beacon_data(slide) {
            try {
                var slide_filename = "";
                switch(slide.type) {
                    case "image": 
                        slide_filename = slide.slideimage_url;
                        break;

                    case "gif":
                        slide_filename = slide.slideimage_url.replace('.jpg','.gif');
                        break;
                }

                var beacon_values = {
                    slideshow_id: slide.slide_id,
                    slide_id: slide.slideimage_id,
                    slide_position: get_active_slide_index(),
                    slide_type: slide.type,
                    slide_filename: slide_filename || "none"
                };

                hp_ss_track.setBeaconData(beacon_values);
                console_debug("Updated beacon data.");

            } catch (e) {
                console_debug("Error occurred while updating beacon data: " + e.message || "Unknown");
            }
        }
    };


    /**
     * Write messages to console for debugging
     *
     * @param {String} message
     * @param {String} value
     * @param {Boolean} force
     * @returns {None}
     */
    function console_debug(message, value, force) {
        force = typeof force !== 'undefined' ? force : false;
        value = typeof value !== 'undefined' ? value : '';
        var f = (/hp_ss_debug=(true)/.exec(window.location.hash) == null) ? false : true;
        if (f || force) {
            console.log('[HP-SLIDESHOW] : ' + message, value);
        }
    }

})(window.huff.units.jquery, window);

(function(b,a){b.fn.HPSlideshowParticipation=function(c){this.part=function(f,h){e(f);var d;function e(){slideshow=f;slides=slideshow.slides;$wrapper=".hp-slideshow-wrapper";d=jQuery(['<div class="hp-ss-participation-container">','<div class="hp-ss-participation-button">','<span class="">+</span> ',__("Add a slide"),"</div>",'<div class="ps-participation-intro">',(slideshow.participation.intro?slideshow.participation.intro:""),"</div>",'<div class="hp-ss-participation-description">',(slideshow.participation.description?slideshow.participation.description:__("Find a picture, click the participate button, add a title and upload your picture")),"</div>",'<div class="clearboth"></div>',"</div>",'<iframe id="upload_target_for_slideshow_form" name="upload_target_for_slideshow_form" src="" style="display:none;"></iframe>','<iframe id="upload_target_for_slideshow_form1" name="upload_target_for_slideshow_form1" src="" style="display:none;"></iframe>'].join(""));d.css({opacity:0}).insertBefore($wrapper).animate({opacity:1});g()}function g(){d.find(".hp-ss-participation-button").bind("click",function(k){k.preventDefault();var j=null,m=function(){j=new QuickSlideshowParticipate(slideshow.slideshow_id);j.show()},l=function(){HuffConnect.showLoader()};function i(n){j.onFormSubmitEnd(n)}a["onSlideshowFormSubmitEnd_"+slideshow.id]=i;HPEventModule.Load("slideshow_participate");if(!HuffCookies.getUserName()){QuickLogin.onLoginSuccess=function(){HPEventModule.Wait("slideshow_participate",m,l)};QuickLogin.pop();return}HPEventModule.Wait("slideshow_participate",m,l,false)})}}}})(window.huff.units.jquery,window);
(function(b,a){b.fn.HPSlideshowParticipationNew=function(c){this.part=function(g,i){z(g);var s,k,l,h=jQuery,A,x,j,B,e,w,t,m,n,v,p=null,o=false;h.fn.serializeObject=function(){var C={};var D=this.serializeArray();h.each(D,function(){if(C[this.name]){if(!C[this.name].push){C[this.name]=[C[this.name]]}C[this.name].push(this.value||"")}else{C[this.name]=this.value||""}});return C};function z(C){slideshow=C;slides=slideshow.slides;$wrapper=".hp-slideshow-wrapper";var D=[];D.push(['<div class="hp-ss-participation-container">','<div class="hp-ss-participation-button">',(slideshow.participation.cta?slideshow.participation.cta:"+ "+__("Add a slide")),"</div>",'<div class="ps-participation-intro">',(slideshow.participation.intro?slideshow.participation.intro:""),"</div>",'<div class="hp-ss-participation-description">',(slideshow.participation.description?slideshow.participation.description:__("Find a picture, click the participate button, add a title and upload your picture")),"</div>",'<div class="clearboth"></div>',"</div>",'<div class="hp-ss-participation-container-new" style="display:none">','<div class="hp-ss-participation-modal">','<div class="hp-ss-participation-closer"></div>','<div class="hp-ss-participation-intruction">',"<p><strong>",__("Instructions for Submitting"),"</strong></p>","<p>",__("For Images: Please upload an image that is at least 550x400 pixels. Maximum file size is 5MB. Use JPG, PNG, GIF or TIFF."),"</p>"].join(""));if(slideshow.participation.allow_embed){D.push(["<p>",__("For Videos: Copy and paste the embed code into the provided space."),"</p>","<p>",__("For Tweets: Copy and paste the tweet url into the provided space."),"</p>",].join(""))}D.push(["</div>",'<div class="hp-ss-participation-content">','<div class="hp-ss-participation-leftpane">',"<h3>",(slideshow.participation.description?__(slideshow.participation.description):""),"</h3>","</div>",'<div class="hp-ss-participation-rightpane">','<ul class="hp-ss-participation-rightpane-container">','<li class="hp-ss-participation-rightpane-step1">',"<h2>",(slideshow.participation.title?__(slideshow.participation.title):""),"</h2>",'<p class="hp-ss-participation-description">',(slideshow.participation.intro?__(slideshow.participation.intro):__("Find a picture, click the participate button, add a title and upload your picture")),"</p>",'<form class="hp-ss-user-submitted-slide">','<label for="title">',(slideshow.participation.form_title?slideshow.participation.form_title:"+ "+__("Title")),"</label>",'<div class="field_notifier slideshow_participation_title_notify">',__("Add a title to your slide."),"</div>",'<input type="text" class="slideshow_participation_title" name="title" tabindex="1" />','<label for="slideshow_participation_caption">',(slideshow.participation.form_caption?slideshow.participation.form_caption:"+ "+__("Caption")),"</label>",'<div class="field_notifier slideshow_participation_caption_notify">',__("Add a caption to your slide."),"</div>",'<textarea class="slideshow_participation_caption" name="caption" tabindex="2"></textarea>','<label for="file">',__("Upload Photo"),"</label>",'<div class="field_notifier slideshow_participation_file_notify">',__("Choose an image from your hard drive."),"</div>",'<iframe src="/slideshow/participate/uploader.php?slideshow_id=',slideshow.slideshow_id,'" class="hp-ss-participate-fileupload" tabindex="3" frameBorder="0"></iframe>',].join(""));if(slideshow.participation.allow_embed){D.push(['<label for="embed">',__("Embed: "),'<span class="hp-ss-social-embed-icon hp-ss-social-embed-icon-youtube" title="YouTube Video"></span>','<span class="hp-ss-social-embed-icon hp-ss-social-embed-icon-fivemin" title="5min Video"></span>','<span class="hp-ss-social-embed-icon hp-ss-social-embed-icon-twitter" title="Tweet"></span>',"</label>",'<div class="field_notifier slideshow_participation_embed_notify">',__("Please paste content below."),"</div>",'<textarea class="slideshow_participation_embed slide_embed" name="embed" tabindex="4"></textarea>',].join(""))}D.push(['<label for="credits">',__("Credits (Optional)"),"</label>",'<input type="text" class="slideshow_participation_credit" name="credits" tabindex="5" />','<div class="clear"></div>','<div class="field_notifier slideshow_participation_agree_notify">',__("You must agree to submit."),"</div>","<p>",'<input type="checkbox" class="slideshow_participation_agree" name="agree" tabindex="6" />','<label for="slideshow_participation_agree">',__("I verify that I have the right to use this submitted content."),"</label>","</p>",'<div class="hp-ss-user-submitted-error"></div>','<div class="hp-ss-user-submitted-notify"></div>','<div class="hp-ss-user-submitted-error-restart">','<input class="hp-ss-user-submitted-restart" type="button" value="Restart" />',"</div>",'<input class="hp-ss-user-submitted-submit" type="button" value="',__("Submit"),'" tabindex="7" />','<input class="hp-ss-user-submitted-cancel" type="button" value="',__("Cancel"),'" tabindex="8" />',"</form>","</li>",'<li class="hp-ss-participation-rightpane-success">',"<h1>",__("Thank you for your submission."),"</h1>",'<div class="hp-ss-user-submitted-preview"></div>','<input class="hp-ss-user-submitted-restart" type="button" value="',__("Submit Another"),'" />','<input class="hp-ss-user-submitted-close" type="button" value="',__("Close"),'" />',"</li>","</ul>","</div>","</div>","</div>",'<div class="hp-ss-participation-dimmer"></div>',"</div>"].join(""));s=jQuery(D.join(""));k=jQuery(['<div class="hp-ss-participation-new-button-wrapper">','<div class="hp-ss-participation-button-new">',(slideshow.participation.cta?slideshow.participation.cta:"+ "+__("Add a slide")),"</div>","</div>"].join(""));l=s.find(".hp-ss-participation-modal");A=s.find(".hp-ss-participation-dimmer");j=s.find(".hp-ss-user-submitted-slide");B=s.find(".hp-ss-participation-closer");e=s.find(".hp-ss-participation-rightpane-container");w=s.find(".hp-ss-participation-intruction");t=s.find(".hp-ss-participate-fileupload");m=s.find(".hp-ss-user-submitted-preview");n=s.find(".hp-ss-user-submitted-error");v=s.find(".hp-ss-user-submitted-notify");s.css({opacity:0,display:"block"}).insertBefore($wrapper).animate({opacity:1});q();r()}function u(){var C=h("body").find("object, embed, iframe, input").not(l.find("object, embed, iframe, input")).css({visibility:"hidden"});A.stop().css({zIndex:7000004,display:"block"}).animate({opacity:0.8},200,function(){A.unbind("click").bind("click",function(D){D.stopPropagation();D.preventDefault();l.css({display:"none"});A.stop().unbind("click").animate({opacity:0},200,function(){A.css({display:"none",zIndex:1});C.css({visibility:"visible"})})})})}function f(){s.find(".hp-ss-user-submitted-error-restart").fadeOut();v.fadeOut().empty();n.fadeOut().empty();e.css({left:0});j[0].reset();t.attr("src","/slideshow/participate/uploader.php?slideshow_id="+slideshow.slideshow_id);p=null;m.empty();s.find(".hp-ss-social-embed-icon").removeClass("faded")}function y(C){var D={width:423,height:260};e.animate({left:-455});w.animate({opacity:0});B.bind("click",function(){B.trigger("click.complete").unbind("click")});A.bind("click",function(){f()});d(false)}function d(C){var D=j.find(".hp-ss-user-submitted-submit");if(C){D.addClass("disabled").attr("disabled","disabled");o=true}else{D.removeClass("disabled").removeAttr("disabled");o=false}}function r(){s.delegate(".hp-ss-user-submitted-submit","click",function(G){if(o){return false}d(true);G.preventDefault();var D=j.serializeObject(),F=true,E=s.find(".hp-ss-participate-fileupload").contents().find("form"),C=E.length>0&&E.find('input[type="file"]').val()!==""?true:false,I=s.find(".slideshow_participation_agree:checked").length>0?true:false;if(!I){F=false;s.find(".slideshow_participation_agree_notify").fadeIn()}h.each(D,function(K,J){if((K==="embed"&&J!=="")||C){s.find(".slideshow_participation_file_notify").fadeOut();s.find(".slideshow_participation_"+K+"_notify").fadeOut()}if(K==="embed"&&J===""&&!C&&!p){s.find(".slideshow_participation_"+K+"_notify").fadeIn();s.find(".slideshow_participation_file_notify").fadeIn();F=false}if(J===""&&K!=="credits"&&K!=="embed"){s.find(".slideshow_participation_"+K+"_notify").fadeIn();F=false}else{if(K!=="embed"){s.find(".slideshow_participation_"+K+"_notify").fadeOut()}}});if(F){if(C){var H=t.contents().find("form");if(H.length>0){H.find('[name="upload_id"]').val(p);H.find("#slideshow_participate_submit").click()}}else{D.upload_id=p||"";D.slideshow_id=slideshow.slideshow_id;D.submit=true;h.getJSON("/slideshow/participate/submit.php",D,function(J){s.find(".hp-ss-user-submitted-error-restart").fadeOut();v.fadeOut();n.fadeOut();y(J)})}}else{d(false);s.find(".slideshow_participation_title").focus()}})}function q(){t.load(function(){var C=h(this);x=C.contents().find("body").data();if(x.error===false&&x.submitted===true){p=x.upload_id;d(false);s.find(".hp-ss-user-submitted-submit").trigger("click")}});k.delegate(".hp-ss-participation-button-new","click",function(){s.find(".hp-ss-participation-button").trigger("click")});s.delegate(".hp-ss-participation-button","click",function(C){if(!HPUser.is_logged_in()){HPConnect.Login();return false}else{w.css({opacity:0});u();l.css({top:(h(a).height()-l.height())/2,left:(h(a).width()-l.width())/2}).fadeIn(function(){s.find(".slideshow_participation_title").focus();w.animate({opacity:1})})}}).delegate(".slideshow_participation_embed","change",function(){var C=j.serializeObject();C.slideshow_id=slideshow.slideshow_id;h.getJSON("/slideshow/participate/submit.php",C,function(D){if(D.provider){s.find(".hp-ss-social-embed-icon").addClass("faded");s.find(".hp-ss-social-embed-icon-"+D.provider).removeClass("faded")}})}).delegate(".hp-ss-user-submitted-cancel, .hp-ss-user-submitted-close","click",function(){B.trigger("click").trigger("click.complete")}).delegate(".hp-ss-participation-closer","click",function(C){A.trigger("click")}).delegate(".hp-ss-participation-closer","click.complete",function(C){if(C.namespace==="complete"){f()}}).delegate(".hp-ss-user-submitted-restart","click",function(){w.animate({opacity:1});f()}).delegate(".hp-ss-user-submitted-slide","focus",function(){s.unbind("keydown").bind("keydown",function(C){if(C.keyCode===13){s.find(".hp-ss-user-submitted-submit").trigger("click")}})})}}}})(window.huff.units.jquery,window);
var autoplay = 'false';
if (swfobject.hasFlashPlayerVersion("1")) autoplay = 'true';

var src_url="https://spshared.5min.com/Scripts/PlayerSeed.js?" +
"height={2}" +
"&width={1}" +
"&sid=577" +
"&origin=undefined" +
"&videoGroupID={0}" +
"&relatedNumOfResults=100" +
"&relatedMode=2" +
"&relatedBottomHeight=60" +
"&companionPos=" +
"&hasCompanion=false" +
"&autoStart=" +
autoplay +
"&colorPallet=%23FFEB00" +
"&videoControlDisplayColor=%23191919" +
"&shuffle=0" +
"&isAP=1";

if (typeof(commercial_video) == "object") {
	src_url += "&siteSection="+commercial_video.site_and_category;
	if (commercial_video.package) {
		src_url += "&sponsorship="+commercial_video.package;
	}
}

var tag = document.createElement('script');
tag.src = "//www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

var player;
var fivemin_holder = null;
var youtube_holder = null;

function backToFirstVideo(frameID) {
	(function($){
		$('.video_holder_frame').append(youtube_holder);

		//Pause before remove
		var videos = $('#my5minPlayer').find('video');
		if (videos.length) {
			videos.each(function(){
				$(this).removeAttr('autoplay');
				$(this).get(0).pause();
			});
			$('#back_to_youtube_video').remove();
			$('.5min_holder_for_youtube').hide();
		}
		else {
			fivemin_holder = $('#my5minPlayer').clone();
			$('.5min_holder_for_youtube').html('');
		}
		attachToYoutubeFrame();
	}(jQuery));
};

function attachToYoutubeFrame() {
	(function($){
		$(document).ready( function() {
			var ytsrc = $('.video_holder_frame').find('iframe').attr('src');
			if (ytsrc) ytsrc = ytsrc.match(/youtube.com\/embed\/([^\\?]*)/i);
			if (!ytsrc) return;
			var frameID = 'youtube_' + ytsrc[1];

			$('.video_holder_frame').find('iframe').attr('id', frameID);
			
			function onytplayerStateChange(newState) {
				if (newState.data == 0) {
					youtube_holder = $('#' + frameID).clone();
					var fivemin = $('#' + frameID).parents().eq(2).find('.5min_holder_for_youtube');
					fivemin.show();
					if (fivemin_holder) fivemin.html(fivemin_holder);
					var videos = $('#my5minPlayer').find('video');
					if (videos.length) {
						var play_button = $('.fmvps-player-play-button');
						if (play_button.length) play_button.click();
					}
					fivemin.append('<a id="back_to_youtube_video" style="clear:both; display:block;" href="javascript:backToFirstVideo(' + "'" + frameID + "'" +');">Back to first video</a>');
					$('#' + frameID).html(''); //IE10 workaround
					$('#' + frameID).remove();
				}
			};

			player = new YT.Player(frameID, {
				events: {
					"onStateChange": onytplayerStateChange
				}
			});
		});
	}(jQuery));
};

function onYouTubeIframeAPIReady() {
	attachToYoutubeFrame();
};

jQuery(window).load(function(){jQuery("#mainentrycontent img").each(function(){var l=encodeURIComponent(jQuery(location).attr("href"));var m=jQuery(this).attr("src");var d=jQuery(this).attr("src");var k=parseInt(jQuery(this).attr("width"))||0;var c=new Array();c[0]="http://big.assets.huffingtonpost.com/FBLOGO_0.png";c[1]="http://big.assets.huffingtonpost.com/TWITTERBIRD.png";if(jQuery(this).attr("alt")){var h=jQuery(this).attr("alt")}else{var h=""}if(jQuery.inArray(d,c)<0){var a="http://www.pinterest.com/pin/create/button/?url="+l+"&media="+m+"&description="+HPConfig.entry_seo_title+"";if(window.location.host=="www.huffingtonpost.jp"){jQuery(this).before("<a href='"+a+"' data-pin-do='buttonPin' data-pin-config='above' target='_blank' data-pin-hover='true' data-pin-lang='ja' class='pinitshareimage pinhidden'><img src='http://s.huffpost.com/images/social/pin_icon_onhover.png' /></a>")}else{jQuery(this).before("<a href='"+a+"' data-pin-do='buttonPin' data-pin-config='above' target='_blank' data-pin-hover='true' class='pinitshareimage pinhidden'><img src='http://s.huffpost.com/images/social/pin_icon_onhover.png' /></a>")}}jQuery(".no-pin .pinitshareimage").remove();jQuery(".hp-slideshow-img-container .pinitshareimage").remove();var b=jQuery(this).prev().attr("class");var j=jQuery(this).parents().eq(0);var i=jQuery(this).parents().eq(1);var g=jQuery(j).prop("tagName");var e=jQuery(i).prop("tagName");var f=jQuery(this).closest("center");if(b=="pinitshareimage pinhidden"){if((g=="CENTER")||(e=="CENTER")||(g=="P")||(e=="P")){if(k==0){jQuery('<img src="'+d+'"/>').load(function(){f.css("width",this.width)})}else{f.css("width",k)}f.css("margin","0 auto")}}jQuery(this).hover(function(){if(b=="pinitshareimage pinhidden"){jQuery(this).prev().css("display","block")}},function(){if(b=="pinitshareimage pinhidden"){jQuery(this).prev().css("display","none")}})});jQuery(".main-visual img").each(function(){var l=encodeURIComponent(jQuery(location).attr("href"));var m=encodeURIComponent(jQuery(this).attr("data-img-path"));var d=jQuery(this).attr("data-img-path");var j=parseInt(jQuery(this).attr("width"))||0;var c=new Array();c[0]="http://big.assets.huffingtonpost.com/FBLOGO_0.png";c[1]="http://big.assets.huffingtonpost.com/TWITTERBIRD.png";if(jQuery(this).attr("alt")){var h=jQuery(this).attr("alt")}else{var h=""}if(jQuery.inArray(d,c)<0){var a="http://www.pinterest.com/pin/create/button/?url="+l+"&media="+m+"&description="+HPConfig.entry_seo_title+"";if(window.location.host=="www.huffingtonpost.jp"){jQuery(this).before("<a href='"+a+"' data-pin-do='buttonPin' data-pin-config='above' target='_blank' data-pin-hover='true' data-pin-lang='ja' class='pinitshareimage pinhidden'><img src='http://s.huffpost.com/images/social/pin_icon_onhover.png' /></a>")}else{jQuery(this).before("<a href='"+a+"' data-pin-do='buttonPin' data-pin-config='above' target='_blank' data-pin-hover='true' class='pinitshareimage pinhidden'><img src='http://s.huffpost.com/images/social/pin_icon_onhover.png' /></a>")}}jQuery(".no-pin .pinitshareimage").remove();jQuery(".hp-slideshow-img-container .pinitshareimage").remove();var k=jQuery(this).parents().eq(0);var i=jQuery(this).parents().eq(1);var g=jQuery(k).prop("tagName");var e=jQuery(i).prop("tagName");var f=jQuery(this).closest("center");var b=jQuery(this).prev().attr("class");if(b=="pinitshareimage pinhidden"){if((g=="CENTER")||(e=="CENTER")||(g=="P")||(e=="P")){if(j==0){jQuery('<img src="'+d+'"/>').load(function(){f.css("width",this.width)})}else{f.css("width",j)}f.css("margin","0 auto")}}jQuery(this).hover(function(){if(b=="pinitshareimage pinhidden"){jQuery(this).prev().css("display","block")}},function(){if(b=="pinitshareimage pinhidden"){jQuery(this).prev().css("display","none")}})});jQuery("a.pinitshareimage").live("click",function(){newwindow=window.open(jQuery(this).attr("href"),"","height=200,width=500");if(window.focus){newwindow.focus()}return false})});

/* From: production-mt-wfe-48-114-use1 : 8996 *//* b33309d61458b4ab524931690243196b3a1fd094 */