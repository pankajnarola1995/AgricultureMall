/* From: production-mt-wfe-56-191-use1 : 25626 */
HPFB={app_version:"v2.0",app_id:false,api_key:false,app_namespace:false,app_permissions:{basic:["email","public_profile","user_friends"]},_redirect:"",enabled:true,authResponse:false,initialized:false,is_logged_in_on_huffpost:false,user_status:"unknown",user_just_login:false,callback_init:null,initialized_session:false,force_login:false,session:false,overridden_permissions:false,log:function(a){if((huff&&huff.beta)||location.search.indexOf("debug")>0){window.console&&window.console.log(a)}return},isFBEnabled:function(){return(HPFB.enabled!==false)},maybeFacebookConnected:function(){if(HPFB.authResponse){return true}return false},init:function(a){if(!a){el=document.getElementById("fConnect_img_container");if(el){el.style.display="block"}}if("undefined"!==typeof FB){HPFB.initUser()}else{var b=function(){var c=jQuery.I18N.getLocale()||"en_US";switch(c){case"es_US":c="es_LA";break;case"fr_MB":c="fr_FR";break;case"ar_SA":c="ar_AR";break;default:break}return c};window.fbAsyncInit=function(){var c={appId:HPFB.app_id,xfbml:true,version:HPFB.app_version,cookies:false,oauth:true};if(window.HPConfig&&HPConfig.current_web_address&&("undefined"===typeof HPUtil||HPUtil.getUrlVar("fb_no_channel")!=="1")){c.channelUrl="http://"+HPConfig.current_web_address+"/facebook/channel.html"}HPFB.params=c;FB.init(HPFB.params);HPFB.initEvents();HPFB.initUser()};(function(d,c,f){if(d("#"+f).length>0){HPFB.log("HPFB: Facebook jsSDK already loaded!");return}var e="//connect.facebook.net/"+b()+"/sdk.js";if(location.search.indexOf("debug-fb-sdk")>0){e="//connect.facebook.net/"+b()+"/sdk/debug.js"}d(window).bind("load",function(){d("<script>",{id:f,type:"text/javascript",src:e,async:true}).appendTo("#fb-root")});HPFB.log("HPFB: SDK source - "+e)}(jQuery,"script","facebook-jssdk"))}},initEvents:function(){FB.Event.subscribe("auth.login",HPFB.handleStateChange);HPFB.Tracking.Subscribe(["Liked","Unliked","Recommended","Unrecommended"],[],false,HPFB.trackFBAction);HPFB.Tracking.Init()},trackFBAction:function(f,a,d){var b=d.getAttribute("author_nickname");if(b&&"Liked"==f){jQuery.ajax({url:"/users/favorite-bloggers/fan_action.php",data:"fan="+b+"&action=add",type:"POST",success:function(){},error:function(){}})}var e={};if(d.getAttribute("entry_id")){e.entity_type=2;e.entity_id=parseInt(d.getAttribute("entry_id"))}else{if(d.getAttribute("entity_type")){e.entity_type=parseInt(d.getAttribute("entity_type"));e.entity_id=parseInt(d.getAttribute("entity_id"))}}if(e.entity_type){if("Liked"==f||"Recommended"==f){e.action=1}else{if("Unliked"==f||"Unrecommended"==f){e.action=2}else{return{}}}}if(![0,1,2].inArray(e.entity_type)){return{}}if(isNaN(e.entity_id)||(e.reference_id&&isNaN(e.reference_id))){return{}}if(![1,2].inArray(e.action)){return{}}if(window.HPConfig&&HPConfig.inst_type=="dev"){return{}}if(!HPFB.authResponse||"undefined"===typeof(HPFB.authResponse.userID)){return{}}var c=function(){var g="http://fb-stats.huffpost.com/";var h=g+"?"+HPFB.authResponse.userID+"&"+Math.random().toString(16).replace("0.","")+"&"+escape(e.entity_type)+"&"+escape(e.entity_id)+"&"+escape(e.action)+"&"+(e.reference_id||0);my_img=document.createElement("img");my_img.setAttribute("src",h);my_img.setAttribute("style","height:1px; line-height:1px; overflow:hidden");var i=document.getElementById("_snp_tracking");i&&i.appendChild(my_img);var j=d.getAttribute("hp_track")||"Unknown";HPTrack.trackSocial("facebook",f,"["+HPTrack.Module.getTrackingPrefix(d)+"] - "+j)};c();return{}},handleStateChange:function(a){HPFB.authResponse=a.authResponse;HPFB.user_status=a.status;if(typeof HuffZodiac1!=="undefined"&&document.getElementById("zodiac_container")&&"connected"==HPFB.user_status){HuffZodiac1.buildHtml()}},initUser:function(a,b){this.initialized=true;var c=function(e,d){if(typeof(HPFB.mobileAuthFacebookCallback)!=="undefined"){HPFB.mobileAuthFacebookCallback(e.status)}var f=HuffCookies;if(typeof(SNProject)!=="undefined"){SNProject.fanCheck()}HPFB.user_status=e.status;if(e.status=="notConnected"&&!f.getUserName()){HPFB.initialized_session=true;if(!window.IS_NEWSGLIDE&&!window.IS_CHROMEAPP&&!/twitter\.com/.test(document.referrer)){HPUtil.addCSS("hp_modules/module.facebook_promo.css");HuffPoUtil.onAvailable("#facebook_promo",function(){$("fb_facepile").innerHTML='<fb:facepile max_rows="2" width="264px"/>';var g=HPTrack.Module("fb_promo","Facebook Promo");g.impression();jQuery("#facebook_promo_link").click(function(h){h.preventDefault();g.click("Connect with Facebook");linkSocialAccount.checkLoginStatus("facebook")})});setTimeout(function(){HPFB.loadFacePilePromo()},1000)}}else{if(e.status=="connected"){HPFB.authResponse=e.authResponse;huff.use("conf",function(g){g.set("hpfb/user_id",HPFB.authResponse.userID);g.set("hpfb/access_token",HPFB.authResponse.accessToken);g.set("hpfb/user_status",HPFB.user_status)});if(typeof SNPModule!=="undefined"&&typeof Recommendations!=="undefined"){Recommendations.load({fb_session:HPFB.authResponse,status:HPFB.user_status})}window.HPUtil&&window.HPUtil.initUserNavStatus();HPFB.initialized_session=true;if(typeof HuffConnect!=="undefined"&&!f.getUserName()&&(d||!f.getCookie("autologin"))){if(HPUtil.GetEntryID()){HuffConnect.Login.onLoginSuccessCallback=function(){var g=HPFB.callback_init||function(){if(HPFB.user_just_login){if(window.IS_NEWSGLIDE){$(document).trigger("userlogedin");HuffConnect.hideModal()}else{if(window.IS_CHROMEAPP){ChromeApp.Login&&ChromeApp.Login.Collection.Instance.fireEvent("userlogedin");HuffConnect.hideModal()}else{location.href=location.href}}return}if(-1===window.location.href.indexOf("just_reloaded")){if(window.IS_NEWSGLIDE){$(document).trigger("userlogedin");HuffConnect.hideModal()}else{if(window.IS_CHROMEAPP){ChromeApp.Login&&ChromeApp.Login.Collection.Instance.fireEvent("userlogedin");HuffConnect.hideModal()}else{window.location.href=HPUtil.AddStringToQueryString(window.location.href,"just_reloaded=2")}}}};g();if(HPFB.callback_init){HPFB.callback_init=null}}}else{HuffConnect.Login.onLoginSuccessCallback=function(){HPUtil.reinit();if(HPFB.callback_init){HPFB.callback_init();HPFB.callback_init=null}}}HPFB.authenticate(!!!d,b)}else{if(f.getUserName()){HPFB.is_logged_in_on_huffpost=true;if(HPFB.callback_init){HPFB.callback_init();HPFB.callback_init=null}}}}else{HPFB.initialized_session=true}}return};if(a){c(a,true)}else{FB.getLoginStatus(c)}},loadFacePilePromo:function(){var d="hp_disable_fb_promo";var c=HuffCookies;if(c.getCookie(d)){return}var a="cookie_test";c.setCookie(a,"1");if(c.getCookie(a)){c.destroyCookie(a)}else{return}if(-1!==location.href.indexOf("stylelist.com")){return}var b=function(){FB.XFBML.parse(document.getElementById("facebook_promo_lb_friends"));var e=HPTrack.Module("fb_promo_lb","Facebook Promo Lightbox");e.impression();jQuery("#facebook_promo_lb_connect,#facebook_promo_lb_mock").bind("click",function(){e.click("Connect with Facebook");linkSocialAccount.checkLoginStatus("facebook");return})};HuffConnect.socialModal({inner_html:'<div class="facebook_promo_lb"><div class="facebook_promo_lb_head facebook_promo_text">'+_("Check out stories you might like,<br/>and see what your friends are sharing!")+'</div><div class="facebook_promo_lb_friends float_left" id="facebook_promo_lb_friends"><fb:facepile app_id="46744042133" width="264" style="display:block" max_rows="4"></fb:facepile></div><div id="facebook_promo_lb_mock" class="facebook_promo_lb_sprite facebook_promo_lb_screens float_right cursor_pointer" title="'+_("Connect with Facebook")+'"></div><div class="facebook_promo_lb_connect clear_first"><img class="cursor_pointer" id="facebook_promo_lb_connect" src="/images/facebook_promo_connect.png?3" /></div></div>',modal_head_image:"",modal_subhead_image:"",onclose:function(){c.setCookie(d,1,(24*60))},onshow:b});return}};HPFB.login=function(h,a,g,d,c){var f=g||{};d=d||false;c=c||false;if(!HPFB.enabled){HPFB.showErrorLightbox();return}var e=HPFB.app_permissions.basic.join(",");if(HPFB.overridden_permissions!==false){e=HPFB.overridden_permissions}if("string"===typeof d&&d!==""){e=e+","+d}a=undefined===a?true:a;HPFB.is_logged_in_on_huffpost=HuffCookies.getUserName()?true:false;h="function"==typeof h?h:undefined;var b=HuffConnect.Login;if(!HPFB.authResponse||HPFB.force_login||c){FB.login(function(j){if(h){HPFB.callback_init=h;b.registerCallback("after_facebook_login",h,"facebook")}var i=function(k){HPFB.initUser(k,f);FB.Event.unsubscribe("auth.authResponseChange",arguments.callee)};if(j.authResponse){i(j)}else{if(j.status==="connected"){FB.Event.subscribe("auth.authResponseChange",i);if(HPFB.params){FB.init(HPFB.params)}}}},{scope:e})}else{if(!HPFB.is_logged_in_on_huffpost&&a){if(h){b.registerCallback("after_facebook_login",h,"facebook")}HPFB.authenticate(false,f)}else{if(h&&a){h()}else{if(HPFB.user_just_login){if(window.IS_NEWSGLIDE){$(document).trigger("userlogedin");HuffConnect.hideModal()}else{if(window.IS_CHROMEAPP){ChromeApp.Login&&ChromeApp.Login.Collection.Instance.fireEvent("userlogedin");HuffConnect.hideModal()}else{location.href=location.href}}}else{linkSocialAccount.provider="facebook";linkSocialAccount.FacebookPromtLogin()}}}}};HPFB.authenticate=function(e,h){var d=h||{};var b=HuffConnect.Login;if(!HPFB.enabled){HPFB.showErrorLightbox();return}HPFB.is_logged_in_on_huffpost=HuffCookies.getUserName()?true:false;var g=window.QuickLogin||false;if(!HPFB.authResponse){return}if(HPFB.is_logged_in_on_huffpost){b.callback("after_facebook_login");return}if(g&&e){g._auto_login=true}var a="";var c={};var f=HPFB.getSessionForServer();if(g&&g._auto_login){f+="&autologin=1";c.autologin=true}if(d&&d.fb_signup){f+="&not_login_to_huff=1"}if(g){delete (g._auto_login)}jQuery.ajax({type:"post",url:"/commentsv3/_facebookLogin.php",data:f,error:b.FacebookFail,success:function(j,k){var i=JSON.parse(j);var l=function(){if("function"===typeof(HPFB.onAuthenticateRequestSuccess)){HPFB.onAuthenticateRequestSuccess(i,c);return}b.FacebookSuccess(i,c)};switch(i.msg){case"success":HPFB.log("HPFB: Facebook user successfully logged in to HuffPost.");HPFB.user_just_login=true;l();break;case"unverified_user":HPFB.log("HPFB: Facebook user is NOT verified.");if("function"!==typeof(HPFB.onAuthenticateRequestSuccess)){HPFB.showVerifyUserModal()}else{l()}break;case"new_user":HPFB.log("HPFB: Facebook user is new to HuffPost.");HPFB.user_just_login=true;l();return;break;default:HPFB.log("HPFB: Unknown authenticate response!");HPFB.user_just_login=false;l();break}}})};HPFB.verifiedStatus=function(a){a=a||function(b){};HPFB.ensureInit(function(){FB.api("/me?fields=verified",function(b){b=b||{};if(huff.beta){a(true);return}if(b.verified){a(b.verified)}else{a(false)}})})};HPFB.showVerifyUserModal=function(){huff.use("connect/provider","connect/auth","connect/modal",function(a,b,c){b.SubscribeEvent("auth.onModalShow",function(){b.Signup.unverified_fb_error_el.fadeIn();return});b.Signup.init()})};HPFB.getSessionForServer=function(d){if(!HPFB.enabled){HPFB.showErrorLightbox();return}var a=HPFB.authResponse;if(!a){return""}var e="fb_sig";var g="";var f={};for(var c in a){if(!(a&&a.hasOwnProperty(c))){continue}var b=e+"_"+c;if(g&&d!="obj"){g+="&"}if(c=="sig"){b=e}if(d!="obj"){g+=encodeURIComponent(b)+"="+encodeURIComponent(a[c])}else{if(d=="obj"){f[b]=a[c]}}}if(d=="obj"){return f}else{return g}};HPFB.authenticate.setCallback=function(){};HPFB.showErrorLightbox=function(){var a="hpfb_tmp_tech_issue",b=HuffCookies;if(!b.get(a)){b.set(a,1,24);HuffConnect.hideModal();HuffConnect.socialModal({inner_html:_("Sorry, This feature is temporarily disabled due to technical difficulties.  Please check back soon!"),inner_wrapper_class:"padding_10_0"})}};HPFB.markFBDisabled=function(){HPFB.ensureInit=HPFB.showErrorLightbox;if(typeof(FB)=="undefined"){FB={}}FB.ensureInit=HPFB.showErrorLightbox;HPFB.enabled=false};HPFB.ensureInit=function(c,b){if(!HPFB.enabled){HPFB.showErrorLightbox();return}HPFB.is_logged_in_on_huffpost=HuffCookies.getUserName()?true:false;var a=this;HPUtil.WaitForCondition.apply(this,[c,10,function(){return a.initialized}])};HPFB.ensureUserSessionStarted=function(b){if(!HPFB.enabled){HPFB.showErrorLightbox();return}HPFB.is_logged_in_on_huffpost=HuffCookies.getUserName()?true:false;var a=this;HPUtil.WaitForCondition.apply(this,[b,10,function(){return a.initialized_session}])};HPFB.waitForSession=function(c,b){var a=b||{};if(!HPFB.enabled){HPFB.showErrorLightbox();return}HPFB.is_logged_in_on_huffpost=HuffCookies.getUserName()?true:false;if(HPFB.authResponse){c();return}HPFB.login(c,false,a)};HPFB.getUserFBInfo=function(b,a){if(!HPFB.enabled){HPFB.showErrorLightbox();return}if(!HPFB.authResponse){return}b="function"===typeof b?b:function(c){};a="function"===typeof a?a:function(c){};FB.api("/me",function(c){if(c&&!c.error&&c.id&&c.id==HPFB.authResponse.userID){b(c)}else{a(c||{error:"Some error occurred with /me API request."})}})};HPFB.chrome_fix={stage:0,top:false,handler:false,time_to_stop:false};HPFB.streamPublish=function(c,h,i,k,g,j,a,d){if(!HPFB.enabled){HPFB.showErrorLightbox();return}HuffConnect.hideModal();if(h&&h.description&&h.description.length>422){h.description=h.description.substr(0,420)+"..."}if(c&&c.length>422){c=c.substr(0,420)+"..."}if(h&&h.media&&h.media[0]&&!h.media[0].src){h.media=[]}HPFB.is_logged_in_on_huffpost=HuffCookies.getUserName()?true:false;var f={method:"stream.publish",message:c,attachment:h,action_links:i,target_id:k,user_message_prompt:g,actor_id:d};var l;if(jQuery.browser.safari){l=jQuery("body")}else{l=jQuery("html,body")}var b=l.scrollTop();var e=function(m){l.scrollTop(b);if(j){j(m)}if(m&&m.post_id&&console&&console.log){console.log(m.post_id)}};if(HPFB.authResponse){FB.ui(f,e);return}else{HPFB.login(function(){FB.ui(f,e)},false)}};HPFacebookVoteV2={status:0,status_limit:0,vote_status:[],lock:false,init_done:false,init:function(e,h,b,g,a,f,d,c){if(this.init_done===true){return}this.init_done=true;this.userLoggedIn=HuffCookies.getUserName();this.voteUpCalled=false;this.entryId=e;this.entryTitle=h;this.entryBrief=b;this.permalink=g;this.entryImgSrc=a;this.inviteContent=f;this.userDefaultComment="";if("undefined"!=typeof(d)){this.bpage=d}else{this.bpage=""}if("undefined"!=typeof(c)){this.vote_status=c}else{this.vote_status=["Amazing","Inspiring","Funny","Scary","Hot","Crazy","Important","Weird"]}this.status_limit=this.vote_status.length;if(HuffCookies.get("facebook_user_has_voted")&&null==HuffCookies.get("facebook_user_is_voting")){this.status=HuffCookies.get("facebook_user_has_voted");HuffCookies.del("facebook_user_has_voted");HuffPoUtil.onPageReady(HPFacebookVoteV2.postVote());return}if(this.userLoggedIn&&null!=HuffCookies.get("facebook_user_is_voting")){this.status=HuffCookies.get("facebook_user_is_voting");HuffCookies.del("facebook_user_is_voting");HPFacebookVoteV2.onFacebookVote()}},postVoteCallback:function(data){try{eval("oVoteData = "+data)}catch(err){return}if(oVoteData.error){HPError.e(oVoteData.error);return}if(oVoteData.total_votes){if("news"==HPFacebookVoteV2.bpage||"blog"==HPFacebookVoteV2.bpage){if(jQuery("#link_vote_0").length>0){for(var i=0;i<HPFacebookVoteV2.status_limit;i++){if("undefined"!=typeof(oVoteData[i])){jQuery("#link_vote_"+oVoteData[i].status).html(HPFacebookVoteV2.vote_status[oVoteData[i].status]+"<br/> ("+oVoteData[i].count+")")}else{jQuery("#link_vote_"+i).html(HPFacebookVoteV2.vote_status[i])}}}if(jQuery("#bottom_link_vote_0").length>0){for(i=0;i<HPFacebookVoteV2.status_limit;i++){if("undefined"!=typeof(oVoteData[i])){jQuery("#bottom_link_vote_"+oVoteData[i].status).html(HPFacebookVoteV2.vote_status[oVoteData[i].status]+"<br/> ("+oVoteData[i].count+")")}else{jQuery("#bottom_link_vote_"+i).html(HPFacebookVoteV2.vote_status[i])}}}}}},postVote:function(c){var b="/include/vote.php?entry_id=";b+=this.entryId;b+="&vote_status="+this.status;b+=("undefined"!=typeof(c))?"&update=1":"";b+="&v=2";var a=jQuery.ajax({url:b,timeout:7000,success:HPFacebookVoteV2.postVoteCallback})},onFeedDialogClosed:function(a){if(a&&a.post_id){HuffCookies.set("facebook_user_has_voted",HPFacebookVoteV2.status);HuffCookies.del("facebook_user_is_voting");HPFacebookVoteV2.voteUpCalled=false;HPFacebookVoteV2.lock=false}else{HPFacebookVoteV2.lock=false;if(HPFB.user_just_login){location.href=location.href}}},onFacebookVote:function(){HuffCookies.del("snn_popup_needed");HuffCookies.del("facebook_user_is_voting");if(HPFacebookVoteV2.voteUpCalled){return}HPFacebookVoteV2.postVote(true);HPFB.ensureInit(function(){HPFB.waitForSession(function(){if("connected"==HPFB.user_status){HPFacebookVoteV2.voteUpCalled=true;feedData={name:HPFacebookVoteV2.entryTitle,description:HPFacebookVoteV2.entryBrief,href:HPFacebookVoteV2.permalink,media:[{type:"image",src:HPFacebookVoteV2.entryImgSrc,href:HPFacebookVoteV2.permalink}]};HPFB.streamPublish(HPFacebookVoteV2.vote_status[HPFacebookVoteV2.status]+"... "+HPFacebookVoteV2.userDefaultComment,feedData,null,null,_("Your comment is here"),HPFacebookVoteV2.onFeedDialogClosed)}else{alert(_("You're not connected to Facebook. Please try again."));FB.logout(function(){})}})})},onVote:function(b){if(this.lock){return}this.lock=true;HPFacebookVoteV2.voteUpCalled=false;this.status=b;if(this.status>this.status_limit){return}if(HPFB.authResponse){HuffCookies.set("facebook_user_is_voting",this.status);HPFB.ensureInit(function(){HPFB.waitForSession(function(){HPFacebookVoteV2.onFacebookVote()})})}else{if(this.userLoggedIn){HPFacebookVoteV2.postVote(true);this.lock=false}else{var a=this;HPFB.ensureInit(function(){HPFB.waitForSession(function(){a.lock=false;HPFacebookVoteV2.onFacebookVote()})})}}}};HPFB.likeButton=function(e,b,d,g,a,h){a=(typeof a==="undefined")?false:a;if(HPBrowser.isIEOld()&&a){jQuery(e).unbind("mouseover");return}var c="";if("undefined"!=typeof h){c+=' hp_track="'+h+'" '}var f=jQuery("#"+g);if(f.length){if(f.attr("author_nickname")){c+=' author_nickname="'+f.attr("author_nickname")+'" '}f.html("<fb:like "+c+' width="180" href="'+b+'" action="'+d+'" layout="button_count" show_faces="false" colorscheme="light" locale="en_US"></fb:like>');FB.XFBML.parse(document.getElementById(g),function(){jQuery("#"+g).prev().addClass("visibility_hidden")})}jQuery(e).unbind("mouseover")};HPFB.likeButton_v2=function(c,b,a){if(HPBrowser.isIEOld()&&a){jQuery(c).attr("onmouseover",null);return}b=b||"like";var e=jQuery(c).hasClass("i_v_fb_like")?c:jQuery(c).find(".i_v_fb_like")[0];if(!e){return}jQuery(c).get(0).onmouseover="";var d=jQuery(c).find(".fb_like_xml")[0];jQuery(d).html(HPFB.GetHtmlLikeWidget(JSON.parse(e.getAttribute("fblike_params")),b));FB.XFBML.parse(d,function(){jQuery(d).prev().addClass("visibility_hidden")});jQuery(e).addClass("i_v_with_count");jQuery(e).get(0).onmouseover=""};HPFB.parseLikeButton=function(a){jQuery(a).addClass("fb-like").removeAttr("onmouseover").empty();FB.XFBML.parse(a.parentNode)};HPFB.GetHtmlLikeWidget=function(b,a){return'<fb:like action="'+a.toLowerCase()+'" '+HPFB.__construct_params_for_widget(b).join(" ")+"></fb:"+a+">"};HPFB.__construct_params_for_widget=function(c){var b=[];for(var a in c){if(c.hasOwnProperty(a)){b[b.length]=a+'="'+c[a]+'"'}}return b};HPFB.handleTwitterFollowClick=function(b,a){if(jQuery(b).hasClass("tw-follow-btn")){jQuery(b).removeClass("tw-follow-btn");jQuery(b).addClass("tw-unfollow-btn")}else{jQuery(b).removeClass("tw-unfollow-btn");jQuery(b).addClass("tw-follow-btn")}};HPFB.Tracking={};HPFB.Tracking._subscribers=new Array();HPFB.Tracking.Subscribe=function(a,f,b,e){if("string"!=typeof a&&!jQuery.isArray(a)){return false}if("string"!=typeof f&&!jQuery.isArray(f)){return false}if("boolean"!=typeof b){return false}if("function"!=typeof e){return false}var d={};if("string"==typeof a){a=[a]}for(var c=0;c<a.length;c++){a[c]=a[c].toLowerCase()}d.fb_events=a;if("string"==typeof f){f=[f]}for(var c=0;c<f.length;c++){f[c]=f[c].toLowerCase()}d.hptrack_codes=f;d.is_tracking=b;d.callback=e;HPFB.Tracking._subscribers.push(d);return true};HPFB.Tracking.Init=function(){FB.Event.subscribe("edge.create",HPFB.Tracking._onEdgeCreate);FB.Event.subscribe("edge.remove",HPFB.Tracking._onEdgeRemove)};HPFB.Tracking._onEdgeCreate=function(a,b){HPFB.Tracking._processEvent("edge.create",a,b)};HPFB.Tracking._onEdgeRemove=function(a,b){HPFB.Tracking._processEvent("edge.remove",a,b)};HPFB.Tracking._processEvent=function(c,b,f){if("edge.create"==c&&("like"==f.dom.getAttribute("action")||null===f.dom.getAttribute("action"))){c="Liked"}else{if("edge.create"==c&&"recommend"==f.dom.getAttribute("action")){c="Recommended"}else{if("edge.remove"==c&&("like"==f.dom.getAttribute("action")||null===f.dom.getAttribute("action"))){c="Unliked"}else{if("edge.remove"==c&&"recommend"==f.dom.getAttribute("action")){c="Unrecommended"}}}}var i=false;var d="";if(null!==f.dom.getAttribute("hp_track")){hptrack=f.dom.getAttribute("hp_track")}else{hptrack="Unknown"}d=decodeURIComponent(b);d=d.split("?")[0].split("/").slice(3).join("/");if(d.length>0){d="/"+d}if("Unknown"==hptrack&&null!==f.dom.getAttribute("entity_id")&&null!==f.dom.getAttribute("author_nickname")&&1==f.dom.getAttribute("entity_type")){hptrack="Author Info"}for(var h=0;h<HPFB.Tracking._subscribers.length;h++){var e=HPFB.Tracking._subscribers[h];var l={};var g={};g.module=hptrack;g.action=c;g.label=HPTrack.Module.getTrackingPrefix(f)+"Facebook";if("Unknown"==hptrack){g.label+=" v2 "+d}g.localy_tracked=false;if(!e.is_tracking){e.callback(c,b,f);continue}else{if(e.is_tracking&&!i){if((0==e.fb_events.length||e.fb_events.inArray(c.toLowerCase()))&&(0==e.hptrack_codes.length||(null!==hptrack&&e.hptrack_codes.inArray(hptrack.toLowerCase())))){l=e.callback(c,b,f);if("object"==typeof l&&("undefined"!=typeof l.module||"undefined"!=typeof g.localy_tracked)){for(var a in l){g[a]=l[a]}if("undefined"!=typeof g.localy_tracked&&true!==g.localy_tracked){HPTrack.trackEvent(g.module,g.action,g.label);HPTrack.trackSocial("facebook",g.action,"["+HPTrack.Module.getTrackingPrefix(f)+"] - "+hptrack);if(huff.beta||location.search.indexOf("debug")>0){console.log("Tracking: "+g.module+" | "+g.action+" | "+g.label)}}else{if(true!==g.localy_tracked){if(huff.beta||location.search.indexOf("debug")>0){console.log("Localy tracked")}}}i=true;f.dom.setAttribute("hp_tracked",1)}}continue}}}if(!i){if("mostpop_entry"==g.module){var k="";if(f&&f.dom&&f.dom.className){k=" | "+f.dom.className+" | "}g.label+=k+d}HPTrack.trackEvent(g.module,g.action,g.label);i=true;f.dom.setAttribute("hp_tracked",1);if(huff.beta||location.search.indexOf("debug")>0){console.log("Tracking: "+g.module+" | "+g.action+" | "+g.label)}}};HPFB.saveTokens=function(a,e){a=a||false;e=e||false;if("connected"==HPFB.user_status&&HPUser.is_logged_in()){var c="/users/refresh_facebook_tokens.php";var b=HPFB.getSessionForServer();var d=(b?""+b:"");jQuery.ajax({url:c,type:"POST",data:d,success:function(i,h,g){try{var f=JSON.parse(i)}catch(j){var f={status:"failure",msg:"Some error occured"}}if(/success/.test(f.status)){if("function"==typeof(a)){a()}}else{if("function"==typeof(e)){e()}}return},error:function(){HPError.e();return}})}};HPFB.removeSocialReading=function(){HPFB.ensureInit(function(){FB.getLoginStatus(function(a){if(a&&"connected"==a.status){FB.api("/me/permissions",function(b){if(b&&b.data[0]&&b.data[0].publish_actions&&b.data[0].publish_actions==1){jQuery("#readedge_removal").show();jQuery("#re_removal_big").click(function(){jQuery("#re_removal_buttons").show()});jQuery("#re_removal_revert").click(function(){jQuery("#re_removal_buttons").hide()});jQuery("#re_removal_confirm").click(function(){jQuery("#re_removal_buttons").html("Removing reads...");var c=HPFB.getSessionForServer("obj");jQuery.ajax({url:"/users/read_edge/v2/remove_social_reading.php",type:"post",data:c,dataType:"json",success:function(h,f,e){if(/success/.test(h.status)){if(h.action_ids&&h.action_ids.length){var g=h.action_ids.length;for(var d=0;d<g;d++){FB.api("/"+h.action_ids[d],"delete",function(i){})}}FB.api({method:"auth.revokeExtendedPermission",perm:"publish_actions"},function(i){if(i===true){jQuery("#readedge_removal").html('<div class="color_444444 bold arial_14">Social reading experience has been removed.</div>');setTimeout(function(){jQuery("#readedge_removal").fadeOut()},5000)}})}else{jQuery("#readedge_removal").html('<div class="color_444444 bold arial_14">Some error occurred.</div>')}},error:function(){jQuery("#readedge_removal").html('<div class="color_444444 bold arial_14">Some error occurred.</div>');HPUtil.error()}})})}})}})})};
var jimAuld=window.jimAuld||{};jimAuld.utils=jimAuld.utils||{};jimAuld.utils.cookies={get:function(e){var c,b,a,d;c=document.cookie.indexOf(e+"=");if(c<0){return null}b=document.cookie.indexOf(e+"=")+e.length+1;a=document.cookie.indexOf(";",b);if(a==-1){a=document.cookie.length}d=document.cookie.substring(b,a);d=unescape(d);if(d==""){return null}return d},set:function(j,l,g,n,d,a,f){var e,h,m,c,k,i,b;if(!g||typeof g!="number"||parseInt(g)=="NaN"){e=""}else{h=new Date();g=parseInt(g);if(!(f)){g=g*60*60}h.setTime(h.getTime()+g*1000);m=h.toGMTString();e="; expires="+m}c="; path=";(!n||n=="")?c+="/":c+=n;k="; domain=";(!d||d=="")?k+=window.location.hostname.replace(/www\./,""):k+=d;(a===true)?i="; secure":i="";l=escape(l);b=j+"="+l+e+c+k+i;document.cookie=b},del:function(c,b,a){(!b||!b.length)?b="":b=b;(!a||!a.length)?a="":a=a;jimAuld.utils.cookies.set(c,"",-8760,b,a)},test:function(){jimAuld.utils.cookies.set("cT","acc");var a=jimAuld.utils.cookies.get("cT");if(a=="acc"){jimAuld.utils.cookies.del("cT");testStatus=true}else{testStatus=false}return testStatus}};var HuffCookies=jimAuld.utils.cookies;HuffCookies.getCookiePrefix=function(){var a=location.hostname;if(HPConfig.site){a=HPConfig.huffsite}var b="";b=(""==location.port)?"80":location.port;if((/\.beta\./.test(a))||(/\.beta2\./.test(a))){return"beta"+b+"_"}else{return""}};HuffCookies.getUserName=function(){var a=this.get(this.getCookiePrefix()+"huffpost_user");if(a){a=HPUtil.utf8_decode(a)}return a};HuffCookies.getUserGuid=function(){return this.get(this.getCookiePrefix()+"huffpost_user_guid")};HuffCookies.getLastLogin=function(){return};HuffCookies.getSNPstatus=function(){if(this.getUserName()){return 1}else{return 0}};HuffCookies.getUserInfluence=function(){HPUtil.removeEmptyInfluence();var b=this.get(this.getCookiePrefix()+"huffpost_influence_"+HuffCookies.getUserId());if(!b||b==""){b=HuffCookies.userInfluence;HPUtil.setInfluenceCookie(JSON.stringify(b))}else{b=JSON.parse(b);var a=new Date();a.setDate(a.getDate()-30);a=Date.parse(a.toString());b.bages=HuffCookies.getLevels();if(b.blogged.check_date<a){b.blogged.value=0;b.blogged.check_date=Date.parse(new Date().toString())}if(b.emailed.check_date<a){b.emailed.value=0;b.emailed.check_date=Date.parse(new Date().toString())}if(b.shared.check_date<a){b.shared.value=0;b.shared.check_date=Date.parse(new Date().toString())}if(b.commented.check_date<a){b.commented.value=0;b.commented.check_date=Date.parse(new Date().toString())}}return b};HuffCookies.setCookie=function(d,c,a){var b=this.getCookiePrefix();if(!a){a=336}else{if(a==-1){a=0}}huff.use("conf",function(e){e.get("cookie/domain",function(g){var f=g||HuffCookies.domainCookie();HuffCookies.set(b+d,c,a,"/","."+f)})});return true};HuffCookies.getCookie=function(a){return this.get(HuffCookies.getCookiePrefix()+a)};HuffCookies.domainCookie=function(){var a=location.hostname;a=a.replace(/www\./,"");return a};HuffCookies.getUserId=function(){return this.get(this.getCookiePrefix()+"huffpost_user_id")};HuffCookies.getLevels=function(){return this.get(this.getCookiePrefix()+"huffpost_levels")};HuffCookies.destroyCookie=function(a){var b=this.getCookiePrefix();return this.del(b+a,"/","."+HuffCookies.domainCookie())};HuffCookies.userInfluence={commented:{value:0,check_date:Date.parse(new Date().toString())},blogged:{value:0,check_date:Date.parse(new Date().toString())},shared:{value:0,check_date:Date.parse(new Date().toString())},emailed:{value:0,check_date:Date.parse(new Date().toString())},bages:HuffCookies.getLevels()};HuffCookies.userPrefs={pending:false,subvalues:{facebook:0,twitter:1,read_tracking:2,gfc:3,yahoo:4,google:5,linkedin:6,aol:7,winlive:8},subvalues_abbr:{0:"fb",1:"tw",2:"rt",3:"gfc",4:"yh",5:"gfc",6:"linkedin",7:"aol",8:"winlive"},charmap:{facebook:"F",twitter:"T",read_tracking:"R",gfc:"G",yahoo:"Y",google:"L",registered:"H",anonymous:"A"},cookie_name:"huffpost_prefs",get:function(a){if(!HuffCookies.getUserId()){return false}if(this.pending){return null}var b=this._getFromOffset(this.subvalues[a]);if(b=="y"){return true}else{if(b=="n"){return false}}return null},to_string:function(b){var a="";for(var c in this.subvalues){if(this.get(c+"")){if(b){a+=this.charmap[c+""]}else{if(a){a+=","}a+=c}}}return a},_getFromOffset:function(b){var a=this._getPrefsValues();if(a[b]&&(a[b]=="y"||a[b]=="n")){return a[b]}else{this.pending=true;jQuery.ajax({type:"POST",url:"/users/login/reauthenticate.php",success:function(){huff.log("Reauthenticated");HuffCookies.userPrefs.pending=false},error:function(){huff.log("Error reauthenticating");HuffCookies.userPrefs.pending=false}});return null}},_getPrefsValues:function(){var a=HuffCookies.getCookie(this.cookie_name);this.values=(a&&a.split(""))||[];return this.values}};HuffPrefs=HuffCookies.userPrefs;HuffCookies.getCurrentUserPhotoUrl=function(){var d=HuffCookies.getUserId()||false;if(!d){return false}var c="http://s.huffpost.com/images/profile/user_placeholder.gif";var b=HuffCookies.getCookie("huffpost_photo_mode")||false;switch(b){case"facebook":var e=(window.HPFB&&window.HPFB.authResponse&&window.HPFB.authResponse.userID)?window.HPFB.authResponse.userID:false;if(e){c="http://graph.facebook.com/"+e+"/picture?type=square"}break;case"twitter":case"yahoo":case"google":case"linkedin":case"aol":case"winlive":c="http://"+HPConfig.display_domain+"/"+b+"_profile_img/"+d+".png";break;case"huffpo":c="http://"+HPConfig.display_domain+"/profiles/"+d+".png";break;case"huffpo2":c="http://"+HPConfig.display_domain+"/profiles/"+d+"-2.png";break}if(b=="default"||!b){var a=HuffCookies.getCookie("huffpost_bigphoto")||HuffCookies.getCookie("huffpost_smallphoto")||false;if(a){var c=a}}return c};
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});var SNProject={join_max_tries:5,facebook_join_retried:0,popup_needed:HuffCookies.get("snn_popup_needed"),init:function(){this.user_logged_in=!!HuffCookies.getUserName();this.maybe_facebook=HPFB.maybeFacebookConnected();this.snp_cookie=HuffCookies.getSNPstatus();this.read_tracking_enabled=HuffPrefs.get("read_tracking")},_tryToJoinUser:function(){var a=SNProject;var b=HuffCookies;HPError.d("snn join callback");if(a.join_max_tries>0){if(b.getUserId()){huff.use("connect/auth",function(c){c.Login.loginSuccess()})}else{a.join_max_tries--;setTimeout(a._tryToJoinUser,200)}}else{if(typeof IS_NEWSGLIDE==="boolean"&&IS_NEWSGLIDE){$(document).trigger("userlogedin");HuffConnect.hideModal()}else{window.location="/social/join.html?autojoin=1"}}},joinCheckingUserStatus:function(e){var c=SNProject;var d=QuickLogin;var b=HuffConnect.Login;e=e||{};var a=e.service||false;if(HuffCookies.getSNPstatus()==1&&HuffCookies.getUserName()&&!HuffPrefs.get("yahoo")&&HPUtil.getUrlVar("just_reloaded")!=="3"){location.href=HPUtil.AddStringToQueryString(location.href,"just_reloaded=3");return false}if(!a){HuffConnect.loadConnectModal();return false}d.calledBySNN=true;if(HuffCookies.getUserName()){if(a=="facebook"){d.FacebookLoginCallback=c._tryToJoinUser;HPFB.login()}else{c._join()}}else{if(a=="facebook"){d.FacebookLoginCallback=c._tryToJoinUser;HPFB.login()}else{b.onLoginSuccessCallback=c._tryToJoinUser;HuffConnect.loadConnectModal()}}return false},installYApp:function(){var a="http://apps.yahoo.com/-AIjuiA4o";PopupManager.open(a,800,600);HuffConnect.hideModal();return},checkFriendsFansOnJoin:function(){var c=false;var a={facebook:"",twitter:"",google:"",linkedin:"",aol:"",winlive:""};for(var b in a){if(HuffPrefs.get(b)){c=true;break}}if(!c){return}jQuery.ajax({url:"/users/social_news_project/make_friends_fans.php",type:"POST",data:HPFB.getSessionForServer()+"&showall=1"||"showall=1",success:function(g,f,e){return;if(e.status!=200){return}if(HuffPoUtil.trim(g)!=""){var h=g.split(":::::");var d='<div id="auto_friends_modal" class="padding_10">'+h[0]+"</div>";huff.use("modal",function(i){i.show({content:d,width:680,position:"absolute",onshow:function(){if("undefined"!=typeof(FB)){setTimeout(function(){FB.XFBML.parse(jQuery("#auto_friends_modal").get(0))},500)}SocialFriends.init();return}})})}},error:function(){HPError.e();return},timeout:30000})},checkFriendsFansOnLogin:function(){SNProject.checkFriendsFansOnJoin()},track:function(f,d,a){var e=SNProject;var b="http://user-stats.huffpost.com/";if(window.location.host!="www.huffingtonpost.com"){if(window.HPConfig&&HPConfig.inst_type=="dev"){b="/FAKE_SNProject.track_FROM_BETA/"}else{return true}}if(!f||f==""){f=0}if(!a||a==""){a=0}if(/[^\d+]/.test(f)||/[^\d+]/.test(a)||(d!="delete_entry_view"&&d!="entry_view"&&d!="entry_like"&&d!="entry_unlike"&&d!="comment_comment"&&d!="entry_vote"&&d!="slideshow_poll_vote"&&d!="slideshow_poll_facebook_share"&&d!="user_snp_join"&&d!="hufflist_item_added"&&d!="comment_favored"&&d!="user_log_in"&&d!="user_log_out"&&d!="user_follow"&&d!="poll_vote"&&d!="prediction_vote"&&d!="entry_facebook_share"&&d!="entry_twitter_share")){return false}can_track=true;if(d=="entry_view"){can_track=HuffPrefs.get("read_tracking")}can_track=can_track?1:0;if(HuffCookies.getUserId()){var c=function(){var g=b+"?"+HuffCookies.getUserId()+"&"+Math.random().toString(16).replace("0.","")+"&"+escape(f)+"&"+escape(d)+"&"+escape(a)+"&"+can_track;my_img=document.createElement("img");my_img.setAttribute("src",g);my_img.setAttribute("style","height:1px; line-height:1px; overflow:hidden");var h=document.getElementById("_snp_tracking");if(h){document.getElementById("_snp_tracking").appendChild(my_img)}};if(d=="entry_view"){setTimeout(c,1000)}else{c()}}return true},fanCheck:function(){if(SNProject.user_logged_in&&1==HuffCookies.getCookie("check_for_fans")){SNProject.checkFriendsFansOnLogin()}else{if(SNProject.user_logged_in&&SNProject.snp_cookie==1&&HuffCookies.get("snn_popup_needed")){HPFB.ensureInit(function(){if("connected"==HPFB.user_status){setTimeout(function(){SNProject.checkFriendsFansOnLogin()},3000)}})}}HuffCookies.del("snn_popup_needed");HuffCookies.destroyCookie("check_for_fans")},initModal:function(a){a=a||"tweet";huff.use("modal",function(b){var c="";c+="<div class='"+a+"_modal_frame'>";c+="<div class='border_top'></div>";c+="<div class='"+a+"_modal_close close_button'></div>";c+="<div style='clear:both;'></div>";c+="<div class='main_container'>";c+="<div class='head_image'></div>";c+="<div class='content'>";c+="</div>";c+="</div>";c+="<div style='clear:both;'></div>";c+="<div class='border_bottom'></div>";c+="</div>";c+="<div class='"+a+"_modal_close' style='position:fixed; z-index:900; left:0px; top:0px; width:100%; height:100%; background:#000; opacity:0.7; filter:alpha(opacity=70);'></div>";b.theme(a+"_modal",{frame:c,window:"div:first",content:"div.content",closer:"."+a+"_modal_close",init:function(e,d){e.width(d.width||"").height(d.height||"").css("margin-left","-"+(e.width()/2)+"px")}})});return}};SNProject.init();(function(c,b){var a={config:{ajax:true},CONSTANTS:{updateInterval:1000*60*3,countNotificationsUrl:"/users/social/notifications/action.php?count"},setCounter:function(f){var e=this.getCounter();var d=function(h){var g=e.text();if(g!=""&&h==g){return}var j=100,i=h;h>100&&(i="100+");h>=0&&e.animate({top:20},j,"linear",function(){e.html(i).css({top:-20}).animate({top:0},j,"linear")})};e.length&&typeof f=="undefined"&&c.ajax({url:this.CONSTANTS.countNotificationsUrl,success:d});f>=0&&d(f);return;b.clearTimeout(this.counter_timer);this.counter_timer=b.setTimeout(function(){a.setCounter()},this.CONSTANTS.updateInterval)},getCounter:function(){return c(".notifications .counter-box .value")},clearVisited:function(){var e=c("#social-nav-bar iframe").contents(),d=e.find(".notification.visited");d.length>0&&d.remove();return true},clearAll:function(){c.ajax({url:"/users/social_news_project/profile/notifications/clear.php",success:function(){b.location=b.location}})},setEvents:function(){c(document).ready(function(){var e='<iframe id="notifications-window" frameborder="0" title="Notifications" src="/users/social/notifications/frame.php" width="350" height="480"></iframe>';var d=function(g){return g.css("visibility")=="visible"};var f=function(){var h=jQuery("#social-nav-bar"),l=jQuery("#wendybird_user"),m=l.find(".dropdown"),i=l.find(".notifications-link"),g=l.find(".wendybird_user_data"),k=h.find(".popup"),j=a;d(h)&&h.css({visibility:"hidden"})&&i.removeClass("active")&&j.clearVisited()&&k.html(e)&&j.setCounter();m.is(":visible")&&m.slideUp(200,function(){g.removeClass("active")})};c("#wendybird_user .notifications-link").click(function(i){HPTrack.trackEvent("Social/Notifications","Click","Popup");i.stopPropagation();i.preventDefault();var h=jQuery("#social-nav-bar"),m=jQuery("#wendybird_user"),g=m.find(".wendybird_user_data"),j=m.find(".notifications-link"),l=h.find(".popup"),k=a;m.find(".dropdown").hide()&&g.removeClass("active");if(d(h)){h.css({visibility:"hidden"})&&j.removeClass("active")&&k.clearVisited()&&l.html(e)}else{jQuery(this).addClass("active");if(!l.find("iframe").length||k.getCounter().text()>0){l.html(e)}h.css({visibility:"visible"})}});jQuery("#wendybird_user .wendybird_user_data").unbind().click(function(j){j.stopPropagation();var i=jQuery("#social-nav-bar"),l=jQuery("#wendybird_user"),m=l.find(".dropdown"),k=l.find(".notifications-link"),h=jQuery(this),g=jQuery(j.target);!g.closest(m).length&&j.preventDefault();d(i)&&i.css({visibility:"hidden"})&&k.removeClass("active");if(m.is(":visible")){m.slideUp(200,function(){h.removeClass("active")})}else{m.slideDown(200)&&h.addClass("active")}});jQuery("body").click(f)})}};b.SocialNotifications=a})(jQuery,window);
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});var QuickLogin={};QuickLogin.SocialLogout=function(a){HuffConnect.SocialLogout(a);return};QuickLogin.FacebookLogout=function(a){HuffConnect.FacebookLogout(a);return};QuickLogin.pop=function(){HPConnect.Login();return};QuickLogin.onLoginSuccess=function(){HuffConnect.Login.onLoginSuccess();return};QuickLogin.googleAdsExec=function(a){_google_vertical_name=(typeof _google_vertical_name!="undefined")?_google_vertical_name:"";_google_hints=(typeof _google_hints!="undefined")?_google_hints:"";_google_test_channel=(typeof _google_test_channel!="undefined")?_google_test_channel:"";if(document.getElementById("contextual_ad_unit_1")){HuffPoUtil.WEDGJE.google_ads.init({ad_channel:"8073093451,"+_google_vertical_name+",9299244974,"+_google_test_channel,hints:_google_hints+" "+a,hp_dest_id:"contextual_ad_unit_1"})}if(document.getElementById("contextual_ad_unit_2")){HuffPoUtil.WEDGJE.google_ads.init({ad_channel:"8073093451,"+_google_vertical_name+",4661083346,"+_google_test_channel,hints:_google_hints+" "+a,max_num_ads:"1",hp_dest_id:"contextual_ad_unit_2"})}HuffPoUtil.WEDGJE.google_ads.exec()};huff.unit("tmp/quick_login",function(a){a(QuickLogin)});
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});var HuffConnect={loadConnectModal:function(a){HPConnect.Login();return},SignUp:{Facebook:function(a){setTimeout(function(){HPFB.ensureInit(function(){HPFB.waitForSession(function(){HPFB.getUserFBInfo(function(b){HPFB.log("HuffConnect: Fetched the user facebook info from the API.");Provider.user_provider_info.facebook={id:b.id,screen_name:b.name||"",email:(true===b.hasOwnProperty("email")&&false===/proxymail.facebook.com/.test(b.email))?b.email:"",profile_image:"http://graph.facebook.com/"+b.id+"/picture?type=square",Status:a};setTimeout(function(){HPFB.log("HuffConnect: Loading the HuffPost signup modal.");huff.use("connect/auth","connect/modal","connect/provider",function(d,e,c){c.loadModal("facebook")})},500)},function(b){HPFB.log("HuffConnect:"+b.error||"Some error occurred during Signup.")})},{fb_signup:true})})},1000)}},Login:{is_become_fan:false,callbacks:{},onLoginSuccess:function(){huff.use("connect/auth",function(a){a.Login.updateLoginStatus()})},FacebookSuccess:function(a,d){if(HPUtil.isMobileweb()&&window.Mobile&&window.Mobile.Auth){var c=d&&d.autologin;window.Mobile.Auth.provider_callback("facebook",a.msg,c);return}document.cookie=document.cookie;var e=HuffCookies;if(d&&d.autologin){e.setCookie("autologin","1",2)}switch(a.msg){case"success":var b=function(){e.destroyCookie("autologin");e.set("snn_popup_needed","1","1");var f=window.QuickLogin||false;if(f&&"function"==typeof f.FacebookLoginCallback){HuffConnect.Login.registerCallback("after_facebook_login",f.FacebookLoginCallback,"facebook")}HuffConnect.Login.callback("after_facebook_login");return};if(d&&d.autologin){b()}else{huff.use("conf",function(f){f.get("auth_method",function(g){g=g||"frame";if("direct"===g&&!HPUtil.isDotComVersion()){huff.use("util/user",function(h){h.doFacebookAuth();return})}else{b()}})})}break;case"self_closed_user":case"new_user":if(linkSocialAccount.linkOptions.disable_connect===true){linkSocialAccount.linkOptions.callback("facebook","new_user")}else{HuffConnect.SignUp.Facebook(a.msg)}break;case"permanent_removed":case"unapprove_removed":case"permanent_banned_removed":HuffConnect.SignUp.Facebook(a.msg);break;case"prompt_for_connect":HuffConnect.hideModal();linkSocialAccount.provider="facebook";linkSocialAccount.FacebookPromtLogin();break;default:this.FacebookFail(a);break}return},FacebookFail:function(b){var a=HuffConnect.Login;if(b.argument&&b.argument.autologin){HuffCookies.setCookie("autologin","1",2)}if(b.tld!=null){HPError.d("ServiceLoginFail",b)}else{if(b.is_error){HPError.d("ServiceLoginFail2",b)}}if(typeof(a.is_become_fan)!="undefined"){a.is_become_fan=false}return},registerCallback:function(a,c,b){if("undefined"==typeof(b)){b=false}if(a&&"function"==typeof c){this.callbacks[a]={Func:c,ProviderName:b}}return},callback:function(a){if(a&&"undefined"!=typeof this.callbacks[a]&&"function"==typeof this.callbacks[a].Func){if(!HPUtil.isDotComVersion()){window.XDAuth&&XDAuth.syncRemoteWithLocal("login",[{args:[],on_success:HuffConnect.Login.callbacks[a].Func}])}else{this.callbacks[a].Func()}return}else{if(!HPUtil.isDotComVersion()){var b=function(){HuffConnect.hideModal();HuffConnect.Login.onLoginSuccess();return};if("after_facebook_login"==a){window.XDAuth&&XDAuth.syncRemoteWithLocal("login",[{args:[],on_success:b}])}else{window.XDAuth&&XDAuth.syncRemoteWithLocal("login",[{args:[],on_success:b}])}}else{HuffConnect.hideModal();this.onLoginSuccess()}return}}},SocialLogout:function(c,a,b){if("undefined"!=typeof b){b=false}if(a!==false){a=true}if(!c){c=""}SNProject.track(HuffCookies.getUserId(),"user_log_out");huff.use("provider/logout",function(d){d.Main(c,a,b)});return},loader_active:false,socialModal:function(c){if(HuffConnect.loader_active){HuffConnect.loader_active=false;HuffConnect.hideModal()}c=c||{};if(c.modal_head_image||""==c.modal_head_image){c.modal_head_image=c.modal_head_image}else{c.modal_head_image='<img width="457" height="40" alt="" src="'+__("/images/social-profile/lightbox/huffpo_logo_lightbox.png")+'"/>';if(HPConfig&&HPConfig.site){switch(HPConfig.site){case"stylelist":c.modal_head_image='<img class="margin_5_0" height="42" alt="" src="'+__("/images/social-profile/lightbox/stylelist_logo_lightbox.png")+'"/>';break;case"france":c.modal_head_image='<img width="500" height="40" alt="" src="'+__("/images/v/france/social-profile/lightbox/social-news-lightbox.png")+'"/>';break;case"canada-quebec":c.modal_head_image='<img width="500" height="40" alt="" src="'+__("/images/v/canada-quebec/social-profile/lightbox/social-news-lightbox.png")+'"/>';break;case"spain":case"voces":c.modal_head_image='<img width="500" height="50" alt="" src="'+__("/images/v/spain/social-profile/lightbox/social-news-lightbox.png")+'"/>';break;case"italy":c.modal_head_image='<img width="500" height="50" alt="" src="'+__("/images/v/italy/social-profile/lightbox/social-news-lightbox.png")+'"/>';break;case"brazil":c.modal_head_image='<img width="500" height="50" alt="" src="'+__("/images/social-profile/hpsn-title.png")+'"/>';break}}}if(c.modal_subhead_image||""==c.modal_subhead_image){c.modal_subhead_image=c.modal_subhead_image}else{c.modal_subhead_image='<img height="22" alt="" src="'+__("/images/social/benefits/social_logo_inner.png")+'"/>';if(HPConfig&&HPConfig.site){switch(HPConfig.site){case"canada-quebec":case"stylelist":case"spain":case"voces":case"italy":case"brazil":c.modal_subhead_image="";break}}}c.inner_wrapper_class=(c.inner_wrapper_class)?c.inner_wrapper_class:"";c.width=(c.width)?c.width:680;c.onshow=("function"==typeof c.onshow)?c.onshow:false;c.onclose=("function"==typeof c.onclose)?c.onclose:false;c.inner_html=c.inner_html||"";c.url=c.url||"";c.type=c.type||"GET";c.cache=(c.cache===false)?false:true;c.position=c.position||"absolute";c.content="";var a="";var b="";if((c.modal_head_image||c.modal_subhead_image)&&HPConfig.current_vertical_id!=43){a+='<div class="hp_blue_lb_head_image">'+c.modal_head_image+"</div>";if("france"!=HPConfig.site&&HPConfig.current_vertical_name!="canada-quebec"){a+='<div class="hp_blue_lb_head_subimage margin_top_5">'+c.modal_subhead_image+"</div>"}a+='<div class="hp_blue_lb_hr"></div>'}b+='<div><div class="'+c.inner_wrapper_class+'">';b+=a;b+='<div class="social_modal_content">'+c.inner_html+"</div>";b+="</div></div>";c.content+=b;if(!c.inner_html&&c.url){if(HuffConnect.socialModalCache&&HuffConnect.socialModalCache[c.url]){c.inner_html=HuffConnect.socialModalCache[c.url];delete (c.url);HuffConnect.socialModal(c);return}else{c.content='<div style="width:32px; height:32px; background:url(http://s.huffpost.com/images/loader.gif);margin:33px auto;"></div>';jQuery.ajax({url:c.url,type:c.type,success:function(f,e,d){HuffConnect.hideModal();if(d.status!=200){return}if(c.cache){HuffConnect.socialModalCache={};HuffConnect.socialModalCache[c.url]=f}c.inner_html=f;delete (c.url);HuffConnect.socialModal(c);return},error:function(){HPError.e();return}})}}huff.use("modal",function(d){var e={content:c.content,width:(c.url)?300:c.width,onshow:(!c.url)?c.onshow:false,onclose:(!c.url)?c.onclose:false,position:(!c.url)?c.position:"fixed"};d.show(e)});return},hideModal:function(a){a=a||false;huff.use("modal",function(b){b.hide();if("function"==typeof(a)){a()}return})},showLoader:function(){huff.use("modal",function(a){a.show({content:'<div style="width:32px; height:32px;margin:33px auto;"><img src="http://s.huffpost.com/images/loader.gif"></div>',width:300});return});HuffConnect.loader_active=true;return},showMask:function(){jQuery('<div id="hp_modal_mask" style="position:fixed; z-index: 800; left:0px; top:0px;width:100%; height:100%; background:#000; opacity:0.7; filter:alpha(opacity=70);"></div>').prependTo("body");return},hideMask:function(){jQuery("#hp_modal_mask").remove();return},ShowEmbed:function(){this.ChangeEmbedState("visible",selector)},HideEmbed:function(){this.ChangeEmbedState("hidden",selector)},ChangeEmbedState:function(g,b){if(typeof b=="undefined"){var f=document.getElementsByTagName("object");var e=document.getElementsByTagName("embed");for(var d=0;d<e.length;d++){e[d].style.visibility=g;if(e[d].getAttribute("belongs_modal")){e[d].style.display="visible"==g?"block":"none"}}}else{f=jQuery(b)}for(d=0;d<f.length;d++){f[d].style.visibility=g;if(f[d].getAttribute("belongs_modal")){f[d].style.display="visible"==g?"block":"none"}}var c=["curtainunit","ad_leaderboard_top","ad_store_leaderboard_top"];for(d=0;d<c.length;d++){var a=jQuery("#"+c[d]);if(a.length){a.css("visibility",g);if(a.attr("belongs_modal")){a.css("display","visible"==g?"block":"none")}}}}};
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});HPConfig.current_web_address=HPConfig.current_web_address.replace(/^http:\/\//i,"");HPConfig.current_web_domain=HPConfig.current_web_domain.replace(/^http:\/\//i,"");var Provider={auto_link_email:true,force_login:false,user_provider_info:{facebook:{},twitter:{},yahoo:{},google:{},"google-plus":{},linkedin:{},aol:{},winlive:{}},login_config:{facebook:{},twitter:{w:800,h:680},yahoo:{w:500,h:500},google:{w:850,h:600},"google-plus":{w:520,h:600},linkedin:{w:600,h:500},aol:{w:520,h:500},winlive:{w:500,h:500}},SignUp:function(e,h){var d="";if("object"==typeof e){for(var c in e){d="&"+c+"="+e[c]+","}d=d.substr(0,d.length-1)}var g=HPConfig.current_web_address;var b="";if(HPConfig.site){g=HPConfig.huffsite;b="&multid="+HPConfig.site}var f="";if(Provider.force_login){f="&force_login=true"}var a="http://"+g+"/users/signup/provider/index.php?type="+h+d+"&"+Math.random()+b+f;PopupManager.open(a,Provider.login_config[h].w,Provider.login_config[h].h);PopupManager.onClose=function(){Provider.Connect(h)}},Connect:function(a){if("undefined"!=typeof(Provider.user_provider_info[a].id)){HuffConnect.loadConnectModal({provider:a})}return},QuickLogin:function(g){var a=linkSocialAccount;if("undefined"==typeof g){g="yahoo"}var f=HPConfig.current_web_address;var c="";if(HPConfig.site){f=HPConfig.huffsite;c="&multid="+HPConfig.site}if(window.HPUtil&&window.HPUtil.isHPLiveHost()){c="&multid=hpsn"}else{if(window.HPUtil&&window.HPUtil.isHPBetaLiveHost()){c="&multid=hpsnbeta"}}var d=jQuery.I18N.getLocale()||false;if(d){c+="&locale="+d}var e="";if(Provider.force_login){e="&force_login=true"}var b="http://"+f+"/users/login/provider/index.php?type="+g+"&"+Math.random()+c+e;if(a.linkOptions.disable_connect){b+="&disable_connect=1"}if("new_user"==Provider.user_provider_info[g].Status){Provider.LoginConnect(g);return}PopupManager.open(b,Provider.login_config[g].w,Provider.login_config[g].h);PopupManager.onClose=function(){Provider.LoginConnect(g)}},resetProviderStatus:function(a){Provider.user_provider_info[a]={}},LoginConnect:function(c){var b=HuffConnect.Login;var a=linkSocialAccount;if("undefined"!=typeof(Provider.user_provider_info[c].Status)){if(!a.linkOptions.disable_connect){if(Provider.user_provider_info[c].Status=="existed_user"){huff.use("connect/auth",function(d){d.Login.loginSuccess()})}else{if(Provider.user_provider_info[c].Status=="new_user"){huff.use("connect/provider",function(d){d.loadModal(c)})}else{if(Provider.user_provider_info[c].Status=="self_closed_user"){huff.use("connect/provider",function(d){d.loadModal(c)})}else{if("undefined"!==typeof Provider.user_provider_info[c].Status){huff.use("connect/provider",function(d){d.loadModal(c)})}else{HPError.e("something went wrong")}}}}}else{if(typeof a.linkOptions.callback=="function"){a.linkOptions.callback(Provider.user_provider_info[c].Status)}}}else{HPError.e("something else went wrong")}}};var linkSocialAccount={provider:"",facebookInfo:{},gfcInfo:{},onLinkSuccess:false,onLinkFailed:false,linkOptions:{},check_fans:true,checkLoginStatus:function(h,c,g,b){this.linkOptions=g||{};b=b||false;if("function"==typeof(b)){b()}else{HPFB.force_login=false;HPFB.overridden_permissions=false;HPFB.onAuthenticateRequestSuccess=false}var e=SNProject;if("undefined"===typeof h){return}if(c&&typeof c.onLinkSuccess=="function"){this.onLinkSuccess=c.onLinkSuccess}this.onLinkFailed=false;if(c&&typeof c.onLinkFailed=="function"){this.onLinkFailed=c.onLinkFailed}if(HuffCookies.getUserName()){if(HuffPrefs.get(h+"")&&!this.linkOptions.reauth){if(c&&typeof c.linked==="function"){c.linked()}if("facebook"===h){var a=this;var f=new Date().getTime();var d=function(i){a.provider="facebook";if(!i.model.is_verified){linkSocialAccount.FacebookPromtLogin()}};jQuery.ajax({url:"/conversations/users/"+HuffCookies.getUserId()+"?app_token=d6dc44cc3ddeffb09b8957cf270a845d&_="+f,type:"GET",success:d,error:HuffConnect.Login.FacebookFail})}return}if("facebook"===h){this.provider="facebook";linkSocialAccount.FacebookPromtLogin()}else{if("undefined"!=typeof Provider.login_config[h]){this.provider=h;linkSocialAccount.PromptLogin()}}}else{if("facebook"===h){HPFB.login(e._tryToJoinUser)}else{if("undefined"!=typeof Provider.login_config[h]){Provider.QuickLogin(h)}}}},FacebookPromtLogin:function(){var a=HuffConnect.Login;HPFB.waitForSession(function(){if("connected"==HPFB.user_status){var b=new Date().getTime();var c=HPFB.getSessionForServer();jQuery.ajax({url:"/users/login/provider/check_user_status.php",type:"POST",data:"provider=facebook"+(c?"&"+c:""),success:linkSocialAccount.FacebookSuccess,error:a.FacebookFail})}else{if("notConnected"==HPFB.user_status){return}}})},FacebookSuccess:function(e,d,c){var b=HuffConnect.Login;var a=JSON.parse(e);switch(a.msg){case"existed_user":case"current_user":case"new_user":linkSocialAccount.facebookInfo.fb_id=a.fb_id||"";linkSocialAccount.facebookInfo.profile_image=a.fb_id?"http://graph.facebook.com/"+a.fb_id+"/picture?type=square":"";linkSocialAccount.facebookInfo.user_id=a.user_id||"";linkSocialAccount.facebookInfo.user_name=a.user_name||"";linkSocialAccount.facebookInfo.full_name=a.full_name||(a.user_name||"");linkSocialAccount.facebookInfo.email=a.facebook_email||"";linkSocialAccount.facebookInfo.Status=a.msg;HuffConnect.hideModal();if(linkSocialAccount.linkOptions.disable_connect===true){linkSocialAccount.linkOptions.callback("facebook",a.msg)}else{linkSocialAccount.PromptForConnectPop()}break;case"unverified_user":unverified_fb_error_el=jQuery("#connect_modal_v2 .facebook_link_tpl #main_notify");unverified_fb_error_el.fadeIn();default:b.FacebookFail(a);break}return},PromptLogin:function(){var c=HPConfig.current_web_address;var b="";if(HPConfig.site){c=HPConfig.huffsite;b="&multid="+HPConfig.site}if(window.HPUtil&&window.HPUtil.isHPLiveHost()){b="&multid=hpsn"}else{if(window.HPUtil&&window.HPUtil.isHPBetaLiveHost()){b="&multid=hpsnbeta"}}var a="http://"+c+"/users/login/provider/link_login.php?provider="+linkSocialAccount.provider+"&"+Math.random()+b;if(this.linkOptions.reauth){a+="&reauth=1"}else{if(this.linkOptions.disable_connect){a+="&disable_connect=1"}}if(!this.linkOptions.popup){if(Provider.user_provider_info[linkSocialAccount.provider]&&Provider.user_provider_info[linkSocialAccount.provider].Status){linkSocialAccount.PromptLoginConnect()}else{if("undefined"!=typeof Provider.login_config[linkSocialAccount.provider]){PopupManager.open(a,Provider.login_config[linkSocialAccount.provider].w,Provider.login_config[linkSocialAccount.provider].h);PopupManager.onClose=function(){linkSocialAccount.PromptLoginConnect()}}}}else{setTimeout(function(){linkSocialAccount.linkOptions.popup.location=a;if("twitter"==linkSocialAccount.provider){linkSocialAccount.linkOptions.popup.resizeTo(800,550)}PopupManager.onClose=function(){linkSocialAccount.PromptLoginConnect()}},100)}},PromptLoginConnect:function(){var a=linkSocialAccount;if(Provider.user_provider_info[a.provider].Status&&"undefined"!=typeof(Provider.user_provider_info[a.provider])){if(a.linkOptions.disable_connect){if(typeof a.linkOptions.callback=="function"){a.linkOptions.callback();return}}else{linkSocialAccount.PromptForConnectPop()}}else{HuffConnect.hideModal();HPError.e("something went wrong")}return},PromptForConnectPop:function(){HuffConnect.hideModal();if(linkSocialAccount.provider=="facebook"){var a=linkSocialAccount.facebookInfo.Status}else{var a=Provider.user_provider_info[linkSocialAccount.provider].Status}var c=this.getPromptPopHtml(a);if(c!=""||linkSocialAccount.provider=="facebook"){var d={inner_html:c,width:550};if(/existed_user/.test(a)){d.cb=linkSocialAccount.callback;if(linkSocialAccount.provider=="facebook"){var b=linkSocialAccount.facebookInfo.user_id}else{var b=Provider.user_provider_info[linkSocialAccount.provider].user_id}if(b==HPUser.user_id()&&!this.linkOptions.reauth){alert("You are already linked to this "+linkSocialAccount.provider.charAt(0).toUpperCase()+linkSocialAccount.provider.substr(1,linkSocialAccount.provider.length)+" account!");return}else{if(linkSocialAccount.provider=="facebook"){alert(_("Your Facebook account is already linked to a different HuffPost account. Please log out and then sign into HuffPost using your Facebook account."));return}}}if(this.linkOptions.reauth){linkSocialAccount.ConnectProvider();return}if(linkSocialAccount.provider=="facebook"){huff.use("connect/provider",function(e){if(!/existed_user/.test(a)){e.showVerifyModal()}})}else{HuffConnect.socialModal(d)}}else{HuffConnect.hideModal();HPError.e("something went wrong")}return},getPromptPopHtml:function(a){var b="";var c=HuffCookies.getUserName().replace("hp_blogger_","").replace("_"," ");var d=linkSocialAccount.provider.charAt(0).toUpperCase()+linkSocialAccount.provider.substr(1);if(linkSocialAccount.provider!="facebook"){if(/new_user/.test(a)){b+='<div class="align_left modal_link_your_social_account"><div class="connect_pop_head">'+sprintf(_("Link your %s account?"),d)+'</div><p class="connect_pop_name">'+sprintf(_("Hi %s"),c)+',</p><br /><p class="connect_pop_main_text">'+_("Would you like to link your account to your Huffington Post account?")+'</p><br /><p class="connect_pop_sub_text">'+sprintf(_("By linking your %s account to your Huffington Post account, you will be able to log in to Huffpost using your %s credentials. You will also gain access to new features and be able to more easily see what your %s friends are up to on this site.</p>"),d,d,d)+'<br /><div id="user_link_reaction"><div class="connect_pop_yes" onclick="linkSocialAccount.ConnectProvider(); return false;">'+_("Yes")+'</div><div class="connect_pop_no" onclick="linkSocialAccount.closePromptPop(); return false;">'+_("No")+'</div></div><div class="clear"></div><br /><br /><p class="connect_pop_notyou">'+sprintf(_("Not %s? Please %sclick here%s to log out, then log back in with your correct account."),c,'<a href="/users/logout/" onclick="QuickLogin.SocialLogout(\'/users/logout/\'); return false;">',"</a>")+"</p></div></div><br />"}else{if(/existed_user/.test(a)){oldUserName=Provider.user_provider_info[linkSocialAccount.provider].user_name;b+='<div class="align_left modal_link_your_social_account"><div class="connect_pop_head">'+sprintf(_("Do you wish to re-link your %s account?"),d)+'</div><p class="connect_pop_name">'+sprintf(_("Hi %s"),c)+',</p><br /><p class="connect_pop_sub_text">'+sprintf(_("This %s account is already linked to the Huffington Post username '%s'. Would you like to instead associate it with your current account '%s'?"),d,oldUserName,c)+'</p><br /><div id="user_link_reaction"><div class="connect_pop_yes" onclick="linkSocialAccount.ConnectProvider(); return false;">'+_("Yes")+'</div><div class="connect_pop_no" onclick="linkSocialAccount.closePromptPop(); return false;">'+_("No")+'</div></div><div class="clear"></div></div><br /><br /></div>'}}}return b},closePromptPop:function(){HuffConnect.hideModal(linkSocialAccount.onLinkFailed);return},ConnectProvider:function(){var i=HuffConnect.Login;var d=linkSocialAccount;var a=jQuery("#huffpo_snn_is_loading");var e=jQuery("#user_link_reaction");if(a.length){a.css("display","block")}if(e.length){e.css("display","none")}var b=0;var h=0;var j="";var k="";var g="";var f="";var c=new Date().getTime();switch(d.provider){case"facebook":b=d.facebookInfo.fb_id;f=d.facebookInfo.Status;h=d.facebookInfo.user_id||"";j=d.facebookInfo.user_name||"";k="&"+HPFB.getSessionForServer()+"&"+jQuery("#quicksignup_form").serialize();break;case"twitter":b=Provider.user_provider_info[d.provider].id;f=Provider.user_provider_info[d.provider].Status;h=Provider.user_provider_info[d.provider].user_id||"";j=Provider.user_provider_info[d.provider].user_name||"";k="&name="+Provider.user_provider_info.twitter.screen_name+"&t="+encodeURIComponent(Provider.user_provider_info.twitter.oauth_token)+"&s="+encodeURIComponent(Provider.user_provider_info.twitter.oauth_token_secret)+"&img="+escape(Provider.user_provider_info.twitter.profile_image);break;case"yahoo":case"google":case"google-plus":case"linkedin":b=Provider.user_provider_info[d.provider].id;f=Provider.user_provider_info[d.provider].Status;h=Provider.user_provider_info[d.provider].user_id||"";j=Provider.user_provider_info[d.provider].user_name||"";k="&access_token="+encodeURIComponent(Provider.user_provider_info[d.provider].access_token)+"&img="+escape(Provider.user_provider_info[d.provider].profile_image);break;case"aol":b=Provider.user_provider_info[d.provider].id;h=Provider.user_provider_info[d.provider].user_id||"";j=Provider.user_provider_info[d.provider].user_name||"";f=Provider.user_provider_info[d.provider].Status+"&img="+escape(Provider.user_provider_info.aol.profile_image);break;case"winlive":b=Provider.user_provider_info[d.provider].WinliveId;f=Provider.user_provider_info[d.provider].Status;h=Provider.user_provider_info[d.provider].user_id||"";j=Provider.user_provider_info[d.provider].user_name||"";k="&WinliveAccessToken="+encodeURIComponent(Provider.user_provider_info[d.provider].WinliveAccessToken)+"&WinliveAccessTokenExpiresAt="+encodeURIComponent(Provider.user_provider_info[d.provider].WinliveAccessTokenExpiresAt)+"&WinliveRefreshToken="+encodeURIComponent(Provider.user_provider_info[d.provider].WinliveRefreshToken)+"&img="+escape(Provider.user_provider_info[d.provider].profile_image);break;default:HuffConnect.hideModal();HPError.e(_("something went wrong"));return}g="provider="+d.provider+"&puid="+b+k+"&r="+c;g+="&status="+f+"&uid="+h+"&uname="+j;if(b!="0"){jQuery.ajax({url:"/users/login/provider/link_provider.php",type:"POST",data:g,success:linkSocialAccount.LinkSuccess,error:i.FacebookFail})}else{if(d.linkOptions.reauth&&b=="0"){if(typeof linkSocialAccount.onLinkSuccess=="function"){linkSocialAccount.onLinkSuccess()}}}return},LinkSuccess:function(c,b,a){if(jQuery("#huffpo_snn_is_loading").length){jQuery("#huffpo_snn_is_loading").css("display","none")}if(jQuery("#user_link_reaction").length){jQuery("#user_link_reaction").html(c)}if(jQuery("#user_relink_reaction").length){jQuery("#user_relink_reaction").css("display","block")}switch(c){case"success":huff.use("connect/auth",function(d){d.FireEvent("auth.onVerify")});if(!linkSocialAccount.linkOptions.reauth){HuffConnect.hideModal()}if(linkSocialAccount.check_fans){HuffCookies.setCookie("check_for_fans",1)}if(typeof linkSocialAccount.onLinkSuccess=="function"){return linkSocialAccount.onLinkSuccess()}else{if(typeof IS_NEWSGLIDE==="boolean"&&IS_NEWSGLIDE){$(document).trigger("userlogedin");HuffConnect.hideModal()}else{location.href=location.href}}break;case"error":linkSocialAccount.closePromptPop();break;default:linkSocialAccount.closePromptPop();break}},callback:function(){HuffConnect.hideModal();if(typeof IS_NEWSGLIDE==="boolean"&&IS_NEWSGLIDE){$(document).trigger("userlogedin");HuffConnect.hideModal()}else{location.href=location.href}}};
var PopupManager={popup_window:null,interval:null,interval_time:80,onClose:null,onCloseParams:null,waitForPopupClose:function(){if(PopupManager.isPopupClosed()){PopupManager.destroyPopup();if("function"==typeof(PopupManager.onClose)){PopupManager.onClose(PopupManager.onCloseParams);PopupManager.onClose=null}}},destroyPopup:function(){this.popup_window=null;window.clearInterval(this.interval);this.interval=null;this.callback=null},isPopupClosed:function(){return(!this.popup_window||(this.popup_window.closed===true||typeof(this.popup_window.closed)==="undefined"))},open:function(b,c,a){b=HuffPoUtil.trim(b);this.popup_window=window.open(b,"_blank",this.getWindowParams(c,a));this.popup_window.name="hp_popup_"+new Date().getTime();this.interval=window.setInterval(this.waitForPopupClose,this.interval_time);if(!this.popup_window||this.popup_window.closed){alert("Please accept the pop-up for this, check your pop-up blocker");return false}return this.popup_window},getWindowParams:function(c,b){var a=this.getCenterCoords(c,b);return"width="+c+",height="+b+",status=1,location=1,resizable=yes,left="+a.x+",top="+a.y},getCenterCoords:function(b,a){var f=this.getParentCoords();var e=this.getWindowInnerSize();var d=f.width+Math.max(0,Math.floor((e.width-b)/2));var c=f.height+Math.max(0,Math.floor((e.height-a)/2));return{x:d,y:c}},getWindowInnerSize:function(){var a=0;var b=0;if("innerWidth" in window){a=window.innerWidth;b=window.innerHeight}else{var c=null;if(("BackCompat"===window.document.compatMode)&&("body" in window.document)){c=window.document.body}else{if("documentElement" in window.document){c=window.document.documentElement}}if(c!==null){a=c.offsetWidth;b=c.offsetHeight}}return{width:a,height:b}},getParentCoords:function(){var a=0;var b=0;if("screenLeft" in window){a=window.screenLeft;b=window.screenTop}else{if("screenX" in window){a=window.screenX;b=window.screenY}}return{width:a,height:b}}};
huff.unit("util/user",function(b){var a=this;a.setInfluenceCookie=function(d){var e=HuffCookies;d=d||false;HPUtil.removeEmptyInfluence();if(!e.getUserId()){return}var c="huffpost_influence_"+e.getUserId();if(d){e.setCookie(c,d)}return};a.updateInfluenceCookie=function(h,f){var g=HuffCookies;h=h||false;f=f||false;var d=g.getUserInfluence();HPUtil.removeEmptyInfluence();if(!g.getUserId()){return}if(h&&f&&d&&d[h]){var e=new Date();e.setDate(e.getDate()+30);d[h].value=f;d[h].check_date=Date.parse(e.toString());var c=JSON.stringify(d);HPUtil.setInfluenceCookie(c)}return};a.updateUserInfluence=function(){var d=HuffCookies.getUserInfluence();var e=Date.parse(new Date().toString());var c=false;if(d.commented.check_date<e){c="commented"}if(d.blogged.check_date<e){c="blogged"}if(!c){return}jQuery.ajax({type:"GET",dataType:"json",url:"http://"+location.host+"/commentsv3/checkUserInfluence.php?prop="+c,success:function(f){if("object"!==typeof(f)){return}var g=new Date();if(f.value=="noinfluence"){g.setDate(g.getDate()+1)}else{g.setSeconds(g.getSeconds()+2592000-parseInt(f.value))}if(f.prop=="commented"){d.commented.value=(f.value=="noinfluence")?0:1;d.commented.check_date=Date.parse(g.toString())}else{if(f.prop=="blogged"){d.blogged.value=(f.value=="noinfluence")?0:1;d.blogged.check_date=Date.parse(g.toString())}}HPUtil.setInfluenceCookie(JSON.stringify(d));return},error:function(f){return}})};a.reauthenticated_user=false;a.reauthenticateUser=function(e){e=e||false;var d={};var c=HPUtil.GetEntryID();if(c){d.entry_id=c}jQuery.ajax({type:"POST",url:"/users/login/reauthenticate.php",data:d,success:function(f){a.reauthenticated_user=true;a.updateAuthStatus();f&&(f=JSON.parse(f));if(!e&&!HPUtil.isDotComVersion()){window.XDAuth&&XDAuth.syncRemoteWithLocal()}if("object"===typeof f){SocialNotifications.setCounter(f.notifications);if(f.hasOwnProperty("snp_entry_module")){SNPModule.addEntriesInside(f.snp_entry_module)}}},error:function(){a.reauthenticated_user=true}})};a.updateAuthStatus=function(j){if((typeof HuffCookies==="undefined")||!(HPUtil.isWWW()||HPConfig.site)){return}j=j||false;var d=HuffCookies;var h=d.getUserName()||false;if(!a.reauthenticated_user&&h&&!(d.getUserId()||d.getCookie("huffpost_prefs"))){a.reauthenticateUser();return}if(j){a.reauthenticateUser(j);return}if(h){var e="/social/"+h;var g=HPUtil.getDisplayName(h);var l=jQuery("#avatar_logged_in");var k=jQuery(".wendybird_user_data .dropdown .profile");if(l.length){var i='<a href="'+e+'" id="avatar_logged_in_link" class="bold">				<img src="'+d.getCurrentUserPhotoUrl()+'" />'+g+"</a>";l.html(i).css("display","block");k.attr("href",e)}jQuery("body").addClass("sn_signed_in");jQuery("#wendybird_user_name").html('<a href="'+e+'" class="color_333333">'+g+"</a>");jQuery("#wendybird_user").show();jQuery("#not_logged_user").hide();if(jQuery(".topnav .username").get(0)){jQuery(".topnav .username").html('<a href="'+e+'" class="color_333333">'+g+"</a>");jQuery(".topnav .vcard img").attr("src",d.getCurrentUserPhotoUrl());jQuery(".topnav .controls li:first").attr("href","/social/"+h);jQuery(".topnav .user .logged-in").show();jQuery(".topnav .user .not-logged-in").hide()}var c="tmp_date_registered";var f=d.getCookie(c+"");if(f){d.destroyCookie(c+"")}huff.use("conf",function(m){m.get("topnav/version",function(n){if(n==="1"){huff.use("util/util",function(o){o.resetNavigationEvents();return})}})});if(d.get("user_is_not_approved")){d.del("user_is_not_approved");HPError.e("Your account has not yet been activated");if(window.IS_NEWSGLIDE){jQuery(document).trigger("account.error",["Your account has not yet been activated"]);ChromeApp.Login.Collection.Instance.fireEvent("account.error",["Your account has not yet been activated"])}else{window.location.href=window.location.href}return}if(d.get("snn_track_user_logged_in")&&typeof(SNProject)!=="undefined"){SNProject.track(d.getUserId(),"user_log_in");d.del("snn_track_user_logged_in")}HPUtil.checkUserInfluence();el=jQuery("#fbook_main_text_loggedin");el&&el.hide();el=jQuery("#join_login_fbook_loggedin");el&&el.show();el=jQuery("#fbook_main_text_name");el&&el.html(HPUtil.getDisplayName());el=jQuery("#fConnect_img_container");el&&el.hide()}else{el=jQuery("#fbook_main_text_notloggedin");el&&el.hide();el=jQuery("#join_login_fbook_notloggedin");el&&el.show();el=jQuery("#fConnect_img_container");el&&el.show()}return};a.updateNavByReferrer=function(){var e="";var f="";var d="";var c=jQuery("#not_logged_user");if(0==c.length){return}if(!(HPConfig.site===false||HPConfig.site==="uk")){return}if(/http:\/\/www.facebook.com|https:\/\/www.facebook.com/.test(document.referrer)||HPUtil.getUrlVar("fb_action_ids")){d="facebook";return}else{if(/http:\/\/t.co|https:\/\/t.co/.test(document.referrer)||HPUtil.getUrlVar("test_twitter_mat")){d="twitter"}else{if(/welcomeUK/.test(document.referrer)){d="ukcampaign"}}}window.setTimeout(function(){if(""!=d){if(HuffPrefs.get(d)){return}f+='<div id="nav_learn_more_link" class="nav_provider_learn_more float_left cursor_pointer">'+__("Learn more")+"</div>";var h=function(){var i=HuffCookies.getCookie("disable_mats");if(!i){return true}if(i=="y"){i=1;HuffCookies.setCookie("disable_mats",i,720)}else{i=parseInt(i,10)}if(i<3){i=i+1;HuffCookies.setCookie("disable_mats",i,720);return false}else{if(i==3){return true}}return false};var g=function(){var i=HuffCookies.getCookie("disable_ukmat");return(!i)};if("ukcampaign"==d){if(g()){HPUtil.providerOverview(d)}return}if(("facebook"==d||Math.ceil(Math.random(10)*10)>3)&&h()){if("appcenter"!==HPUtil.getUrlVar("fb_source")){HPUtil.providerOverview(d);HPTrack.trackEvent("UserAuth","Provider modal auto appeared",d)}}e+='<div id="nav_provider_'+d+'_button" class="provider_buttons_bg nav_'+d+'_button float_left cursor_pointer"></div>';e+=f;e+='<div id="nav_create_account_link" class="nav_provider_learn_more float_left cursor_pointer" onclick="HPConnect.Signup();return false;">'+_("Create Account")+"</div>";e+='<div class="clear"></div>';c.html(e);jQuery("#nav_provider_"+d+"_button").click(function(){linkSocialAccount.checkLoginStatus(d);HPTrack.trackEvent("UserAuth","Clicked provider button top nav",d);return});jQuery("#nav_learn_more_link").click(function(){HPUtil.providerOverview(d);HPTrack.trackEvent("UserAuth","Clicked learn more link top nav",d)})}},1500,true);return};a.providerOverview=function(c){huff.use("conf","connect/modal","modal",function(d,g,f){var e="";e+='<div class="modal_provider_intro">';e+='<div class="mp_intro_top">'+_("Welcome to HuffPost")+"!</div>";e+='<div class="mp_intro_'+c+'_img"></div>';e+='<div class="mp_intro_buttons mp_intro_'+c+'_buttons">';e+='<div id="provider_mat_button" style="float: left;"></div>';e+='<div id="mp_intro_'+c+'_button" class="provider_buttons_bg mp_'+c+'_button cursor_pointer"></div>';if(!HuffCookies.getUserName()){e+='<a id="mp_intro_opts_button" href="javascript:void(0);" class="mp_more_connect_opts mp_more_connect_opts">'+_("Login with a different account")+"</a>"}e+="</div>";e+='<div class="clear"></div>';e+="</div>";if("ukcampaign"==c){e="";e+='<div class="modal_provider_intro hpuk">';e+='<div class="mp_intro_top"><img src="/images/social/uk/logo_huffpostUK.gif" alt="The Huffington Post UK"></div>';e+='<div class="mp_intro_img"><img src="/images/social/uk/carla-buzasi.jpg" alt="Carla Buzasi"><p><strong>Carla Buzasi</strong><br />Editor In Chief<br />Huffington Post UK</p></div>';e+='<div class="mp_intro_text"><p>Welcome to The Huffington Post UK.</p><p>Now there&lsquo;s a different way to get your daily dose of news. Click this way for the latest headlines, served up in our inimitable style, alongside opinions and blogs from across the UK.</p><p>Conversations start here&hellip;</p></div>';e+='<div class="mp_intro_'+c+'_buttons"><input id="mp_fb_btn" type="button" value="Follow us on &#10;Facebook" class="grey first" ><input id="mp_newsletter_btn" type="button" value="Sign up for our &#10;Newsletter" class="grey">';if(!HuffCookies.getUserName()){e+='<input id="mp_create_btn" type="button" value="Create Account">'}e+='<input id="mp_continue_btn" type="button" value="Continue Reading &#10;HuffPost UK" class="grey last"></div>';e+="</div>";e+='<div class="clear"></div>';e+="</div>"}g.init(function(){if(document.loading_referer_mat){return}document.loading_referer_mat=true;f.show({theme:"connect_modal",content:e,width:675,onshow:function(){jQuery("#mp_intro_"+c+"_button").click(function(){linkSocialAccount.checkLoginStatus(c,false,false,function(){HPFB.overridden_permissions="user_about_me,user_birthday,user_interests,user_likes,user_location,read_stream,email,publish_actions"});HPTrack.trackEvent("UserAuth","Clicked provider button intro modal",c)});jQuery("#mp_intro_opts_button").click(function(){jQuery("#connect_modal_closer").click();HPConnect.Login();HPTrack.trackEvent("UserAuth","Clicked another account button intro modal",c)});switch(c){case"facebook":d.get("primary_vertical_facebook_name",function(h){social_action_btn='<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2F'+h+'&amp;send=false&amp;layout=button_count&amp;width=250&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:165px; height:21px; visibility:visible !important; float:left; margin-top:5px;" allowTransparency="true"></iframe>';jQuery("#provider_mat_button").html(social_action_btn)});break;case"twitter":d.get("primary_vertical_twitter_name",function(h){social_action_btn='<iframe allowtransparency="true" frameborder="0" scrolling="no" src="//platform.twitter.com/widgets/follow_button.html?screen_name='+h+'&show_count=false&show_screen_name=false&lang=en" style="width:75px; height:20px; float:left; visibility:visible !important; margin-top:5px;"></iframe>';jQuery("#provider_mat_button").html(social_action_btn)});break;case"ukcampaign":jQuery("#mp_fb_btn").click(function(){HuffConnect.hideModal();window.open("http://www.facebook.com/HuffPostUK","_blank");window.focus();HPTrack.trackEvent("UserAuth","Click Follow Us on FB from welcome mat","ukcampaign")});jQuery("#mp_newsletter_btn").click(function(){HuffConnect.hideModal();window.location="/users/notifications/";HPTrack.trackEvent("UserAuth","Click Sign Up for Newsletters from welcome mat","ukcampaign")});jQuery("#mp_create_btn").click(function(){HuffConnect.hideModal();HPConnect.Signup();HPTrack.trackEvent("UserAuth","Clicked UK Create Account from welcome mat","ukcampaign")});jQuery("#mp_continue_btn").click(function(){HuffConnect.hideModal();HPTrack.trackEvent("UserAuth","Click Continue Reading UK from welcome mat","ukcampaign")});break;default:return}},onclose:function(){try{delete (document.loading_referer_mat)}catch(h){}if(c=="ukcampaign"){HuffCookies.setCookie("disable_ukmat",1,2160);HPTrack.trackEvent("UserAuth","UK Welcome mat closed","ukcampaign");return}var i=HuffCookies.getCookie("disable_mats");if(!i){HuffCookies.setCookie("disable_mats",1,720)}else{if(i=="y"){i=1;HuffCookies.setCookie("disable_mats",i,720)}else{i=parseInt(i)}if(i<=3){i=i+1}HuffCookies.setCookie("disable_mats",i,720)}HPTrack.trackEvent("UserAuth","Intro modal closed",c);return}})})})};a.doFacebookAuth=function(){huff.use("conf",function(d){d.get("auth_method","site_blog_id",function(e,c){e=e||"frame";c=c||2;HPFB.ensureInit(function(){if("undefined"!==typeof FB||!HPFB.authResponse){var j=window.location;if(j.search.match("userhash=")){var i=(j.pathname!="/")?j.pathname:""}else{var i=(j.pathname!="/")?(j.pathname):"";i+=(j.search!="")?(j.search):""}var h=[];var g=HPFB.getSessionForServer("obj");h.push('<div style="position: absolute; top: -9999em; width: 10px; height: 10px; visibility: hidden;">');h.push('<form id="facebook_auth_form" method="post" action="/users/connect/facebooklogin.php">');for(var f in g){h.push('<input type="hidden" name="'+f+'" value="'+g[f]+'" />')}h.push('<input type="hidden" name="site_blog_id" value="'+c+'" />');h.push('<input type="hidden" name="auth_response_type" value="'+e+'" />');h.push('<input type="hidden" name="return_to" value="'+i+'" />');h.push("</form>");h.push("</div>");jQuery("body").length&&jQuery("body").prepend(h.join(""));jQuery("#facebook_auth_form").submit();return}})})})};b(a)});
var HPUser={is_logged_in:function(){if(HuffCookies.getCookie("huffpost_user")&&HuffCookies.getCookie("huffpost_user_id")){return true}return false},user_id:function(){return HuffCookies.getUserId()},username:HuffCookies.getUserName(),user_guid:HuffCookies.getUserGuid(),logout:function(d,b){SNProject.track(HuffCookies.getUserId(),"user_log_out",1);if($("avatar_logged_in")){$("avatar_logged_in").style.display="none"}if($("wendybird_user")){$("wendybird_user").style.display="none"}if($("not_logged_user")){$("not_logged_user").style.display="block"}var a=document.getElementById("fbook_main_text_notloggedin");if(a){a.style.display="block"}a=document.getElementById("join_login_fbook_notloggedin");if(a){a.style.display="block"}a=document.getElementById("fConnect_img_container");if(a){a.style.display="block"}a=document.getElementById("fbook_main_text_loggedin");if(a){a.style.display="none"}a=document.getElementById("join_login_fbook_loggedin");if(a){a.style.display="none"}a=document.getElementById("fbook_main_text_name");if(a){a.innerHTML=HuffCookies.getUserName().replace(/[\+_]/g," ")}a=document.getElementById("fConnect_img_container");if(a){a.style.display="block"}var f=new Array("huffpost_user","huffpost_photo_mode","huffpost_snp_status","huffpost_user_id","huffpost_user_guid");for(var e=0;e<f.length;e++){HuffCookies.destroyCookie(f[e])}a=$("facebook_friends_unit_wrapper");if(a){HuffPoUtil.hide("facebook_friends_unit_wrapper")}a=$("snn_entry_inside_module");if(a){HuffPoUtil.hide(a)}SNPModule.showHpModules();return true},getUserCookies:function(a){a=a||false;var b={huffpost_user_guid:false,huffpost_user_id:false,huffpost_user:false,huffpost_levels:false,huffpost_prefs:false,huffpost_photo_mode:false};if(a){return b}var c=HuffCookies;b.huffpost_user_guid=HuffCookies.getUserGuid()||false;b.huffpost_user_id=HuffCookies.getUserId()||false;b.huffpost_user=HuffCookies.getUserName()||false;b.huffpost_levels=c.getCookie("huffpost_levels")||false;b.huffpost_prefs=c.getCookie("huffpost_prefs")||false;b.huffpost_photo_mode=c.getCookie("huffpost_photo_mode")||false;return b}};

/* From: production-mt-wfe-56-191-use1 : 25626 *//* dacd5e19d3b49d242bf5f2653714052fce645c63 */