(function(e,g){"undefined"!==typeof module&&module.exports?module.exports=g():"function"===typeof define&&define.amd?define(g):e.Placeholder=g.call(e)})(this,function(){function e(a,b){return a.currentStyle?a.currentStyle[b]:l.getComputedStyle(a,null)[b]}function g(a,b,c){"undefined"===typeof c&&(c=!0);for(var d in b)if("Object"===Object.prototype.toString.call(b[d]))g(a,b[d]);else if(!a[d]||c)a[d]=b[d];return a}var l=window,m=new Abstract({setPlaceholder:function(){},show:function(){},hide:function(){},
initPage:function(){},onchange:function(){}}),h=new Clazz(m,{config:{carrier:null,control:{unifieddisplay:!1,emMethod:"focus"},style:{color:"#BBB"}},inherit:Component},function(a){this.setConfig(a);this._.support="placeholder"in document.createElement("input");this._.placeholder=null;return this.__init()});h.initPage=function(a){var b=[],c,d,f;if(document.querySelectorAll){c=document.querySelectorAll("input[placeholder]");d=0;for(f=c.length;d<f;d++)b.push(c[d]);c=document.querySelectorAll("textarea[placeholder]");
d=0;for(f=c.length;d<f;d++)b.push(c[d])}else{c=document.getElementsByTagName("input");d=0;for(f=c.length;d<f;d++)c[d].placeholder&&b.push(c[d]);c=document.getElementsByTagName("textarea");d=0;for(f=c.length;d<f;d++)c[d].placeholder&&b.push(c[d])}if(b.length)return new h(g({carrier:b},a,!1))};h.extend({__init:function(){var a=this.config.carrier;if("[object Array]"===Object.prototype.toString.call(a)){var b=[],c,d,f;c=0;for(d=a.length;c<d;c++)(f=a[c])&&1===f.nodeType&&b.push(new h(g({carrier:f},this.config,
!1)));return b}try{if(!a)throw"Placeholder init error:carrier must not be null.";if(!a.placeholder&&!a.getAttributeNode("placeholder").nodeValue)throw"element not has placeholder attribute.";}catch(e){e&&l.console&&l.console.log(e)}this._reRenderColor();this.elems.carrier=a;this._.placeholder=a.placeholder||a.getAttributeNode("placeholder").nodeValue;this._.name=a.name||"";this._.id="p_"+(new Date).getTime();this.config.control.unifieddisplay&&(a.removeAttribute("placeholder"),this._.support=!1);
this._.support||(a.id?this._.id=a.id:a.id=this._.id,this.elems.label=this._createLabel(a),""===a.value&&(this.elems.label.innerHTML=this._.placeholder),a.parentNode.insertBefore(this.elems.label,a),this.__events())},_createLabel:function(a){var b,c=document.createElement("label"),d=e(a,"padding"),f=e(a,"margin"),g=e(a,"fontSize"),h=this.__formatNumber(e(a,"paddingLeft")),l=this.__formatNumber(e(a,"paddingRight")),m=this.__formatNumber(e(a,"borderTopWidth")),n=this.__formatNumber(e(a,"borderLeftWidth")),
p=this.__formatNumber(e(a,"marginTop"));c.htmlFor=this._.id;f||(f=getComputedStyle(a,null).marginTop+" 0");d||(d=e(a,"paddingTop")+" "+l+"px "+e(a,"paddingBottom")+" "+h+"px");if(this.config.style){var k;b="";for(k in this.config.style)b+=k+":"+this.config.style[k]+";";"input"===a.nodeName.toLowerCase()&&(k=e(a,"width"),"auto"===k&&(k=a.offsetWidth-h-l),b+="white-space:nowrap;overflow:hidden;width:"+(parseInt(k)-2)+"px;")}c.style.cssText="position:absolute; cursor:text; padding:"+d+"; padding-left:"+
(h+n)+"px; margin:"+f+"; margin-top:"+(p+m+1)+"px; font-size:"+g+";"+b;return c},__formatNumber:function(a){return isNaN(parseInt(a))?0:parseInt(a,10)},__events:function(){var a=this,b=this.elems.carrier;b.onblur=function(){a._blur()};"input"===this.config.control.emMethod?b.onpropertychange=b.oninput=function(){a._blur()}:b.onfocus=function(){a._focus()}},_focus:function(){this.elems.label.innerHTML="";this.elems.label.style.display="none"},_blur:function(){var a=this.elems.label;""===this.elems.carrier.value?
(a.innerHTML=this._.placeholder,this.elems.label.style.display=""):a.innerHTML=""},_reRenderColor:function(){if(!document.getElementById("placeholderFixed")){var a=document.getElementsByTagName("head")[0],b;b=this.config.style.color;var c;c="input:-moz-placeholder{color:"+b+"; }"+("input::-moz-placeholder{color:"+b+";}")+("input::-webkit-input-placeholder{color:"+b+";}")+("input:-ms-input-placeholder{color:"+b+";}");b=document.createElement("style");b.type="text/css";b.id="placeholderFixed";a.appendChild(b);
b.styleSheet?b.styleSheet.cssText=c:document.getBoxObjectFor?b.innerHTML+=c:b.appendChild(document.createTextNode(c))}},setPlaceholder:function(a){var b=a!==this._.placeholder;this._.placeholder=a;this.config.control.unifieddisplay||this.elems.carrier.setAttribute("placeholder",a);!this._.support&&""===this.elems.carrier.value&&(this.elems.label.innerHTML=a);b&&this.fire("change")},show:function(){this.elems.label&&(this.elems.label.style.display="",this._blur());this.elems.carrier.style.display=
""},hide:function(){this.elems.label&&(this.elems.label.style.display="none");this.elems.carrier.style.display="none"},onchange:function(a){if(a)this.on("change",a)}});return h});